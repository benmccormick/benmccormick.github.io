{"version":3,"sources":["webpack:///path---2017-06-03-rss-atom-json-gatsby-67d04a38263ba4e08896.js","webpack:///./.cache/json/2017-06-03-rss-atom-json-gatsby.json"],"names":["webpackJsonp","725","module","exports","data","markdownRemark","html","frontmatter","title","keywords","category","date","path","layout","hideFooter","fields","slug","pathContext","relatedPosts","description"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,gBAAkBC,KAAA;AAA0vjDC,aAAuUC,MAAA,4CAAAC,SAAA,4BAAAC,SAAA,OAAAC,KAAA,4BAAAC,KAAA,oCAAAC,OAAA,OAAAC,WAAA,MAA6NC,QAAWC,KAAA,uCAA6CC,aAAgBD,KAAA,oCAAAE,eAA4DN,KAAA,8BAAAR,MAA6CI,MAAA,mBAAAI,KAAA,8BAAAO,YAAA,8CAAAR,KAAA,+BAAkKC,KAAA,yBAAAR,MAAwCI,MAAA,yBAAAI,KAAA,yBAAAO,YAAA,+BAAAR,KAAA,+BAAoJC,KAAA,mCAAAR,MAAkDI,MAAA,gCAAAI,KAAA,mCAAAO,YAAA,wDAAAR,KAAA","file":"path---2017-06-03-rss-atom-json-gatsby-67d04a38263ba4e08896.js","sourcesContent":["webpackJsonp([92136517611204],{\n\n/***/ 725:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<p>For the last few months, this blog has been written in <a href=\\\"https://github.com/gatsbyjs/gatsby\\\">Gatsby</a>, a static site generator for JavaScript.  One of the first problems I had to solve when migrating the blog was how to maintain my RSS feed, since Gatsby doesn’t have any built in concept of an RSS feed.  This issue came up again this week as I decided to implement the new <a href=\\\"https://jsonfeed.org/\\\">JSON Feed</a> spec and give folks an additional option for subscribing to this blog.  Fortunately this turns out to be a pretty easy problem to solve because of the excellent npm module <a href=\\\"https://github.com/jpmonette/feed\\\">feed</a>.</p>\\n<p><em>feed</em> is an npm module that takes a bunch of information about a blog and its posts, and normalizes them into various syndication feed format.  Here’s what setting up a feed option looks like for this blog:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token keyword\\\">const</span> fs <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'fs'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> Feed <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'feed'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> filter <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/filter'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> sortBy <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/sortBy'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> forEach <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/forEach'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token keyword\\\">get</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/get'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> moment <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'moment'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> markdownIt <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'markdown-it'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> frontmatter <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'front-matter'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n\\n<span class=\\\"token comment\\\">//markdownIt is a markdown parser that takes my raw md files and</span>\\n<span class=\\\"token comment\\\">//translates them into HTML that we can use in the feed</span>\\n<span class=\\\"token keyword\\\">const</span> md <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">markdownIt</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n  html<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n  linkify<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n  typographer<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n\\n<span class=\\\"token comment\\\">// getPageContent is a function to help us grab the html content from a post path</span>\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">getPageContent</span> <span class=\\\"token operator\\\">=</span> page <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">let</span> file <span class=\\\"token operator\\\">=</span> fs<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">readFileSync</span><span class=\\\"token punctuation\\\">(</span>__dirname <span class=\\\"token operator\\\">+</span> <span class=\\\"token string\\\">'/pages/'</span> <span class=\\\"token operator\\\">+</span> page<span class=\\\"token punctuation\\\">.</span>requirePath<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'utf-8'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">let</span> body <span class=\\\"token operator\\\">=</span> md<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">frontmatter</span><span class=\\\"token punctuation\\\">(</span>file<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span>body<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token comment\\\">// handle local links</span>\\n  <span class=\\\"token keyword\\\">return</span> body<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">replace</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">/</span>src<span class=\\\"token operator\\\">=</span><span class=\\\"token string\\\">\\\"\\\\//g, 'src=\\\"</span>http<span class=\\\"token punctuation\\\">:</span><span class=\\\"token operator\\\">/</span><span class=\\\"token operator\\\">/</span>benmccormick<span class=\\\"token punctuation\\\">.</span>org<span class=\\\"token operator\\\">/</span>'<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// build feed is our main function to build a `Feed` object which we</span>\\n<span class=\\\"token comment\\\">// can then serialize into various formats</span>\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">buildFeed</span> <span class=\\\"token operator\\\">=</span> pages <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">let</span> feed <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Feed</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n    description<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'A blog by Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n    link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'http://benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n    id<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'http://benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n    copyright<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'All rights reserved 2016, Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n    feedLinks<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n      atom<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'http://benmccormick.org/atom.xml'</span><span class=\\\"token punctuation\\\">,</span>\\n      json<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'http://benmccormick.org/feed.json'</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n      name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n      email<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'ben@benmccormick.org'</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token comment\\\">// ignore pages (non posts)</span>\\n  pages <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span>pages<span class=\\\"token punctuation\\\">,</span> p <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span> <span class=\\\"token operator\\\">!</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span>p<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'data.layout'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'page'</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">===</span> <span class=\\\"token string\\\">'page'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token comment\\\">// we only want the last 10 articles to show up in the feed</span>\\n  pages <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">sortBy</span><span class=\\\"token punctuation\\\">(</span>pages<span class=\\\"token punctuation\\\">,</span> page <span class=\\\"token operator\\\">=></span> <span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span>page<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'data.date'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  pages <span class=\\\"token operator\\\">=</span> pages<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">reverse</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  pages <span class=\\\"token operator\\\">=</span> pages<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">slice</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">10</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token function\\\">forEach</span><span class=\\\"token punctuation\\\">(</span>pages<span class=\\\"token punctuation\\\">,</span> page <span class=\\\"token operator\\\">=></span> feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">addItem</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> page<span class=\\\"token punctuation\\\">.</span>data<span class=\\\"token punctuation\\\">.</span>title<span class=\\\"token punctuation\\\">,</span>\\n    id<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://benmccormick.org'</span> <span class=\\\"token operator\\\">+</span> page<span class=\\\"token punctuation\\\">.</span>path<span class=\\\"token punctuation\\\">,</span>\\n    link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://benmccormick.org'</span> <span class=\\\"token operator\\\">+</span> page<span class=\\\"token punctuation\\\">.</span>path<span class=\\\"token punctuation\\\">,</span>\\n    date<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token function\\\">moment</span><span class=\\\"token punctuation\\\">(</span>page<span class=\\\"token punctuation\\\">.</span>data<span class=\\\"token punctuation\\\">.</span>date<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toDate</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n    content<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token function\\\">getPageContent</span><span class=\\\"token punctuation\\\">(</span>page<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n      <span class=\\\"token punctuation\\\">{</span>\\n        name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n        email<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'ben@benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n        link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://benmccormick.org'</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">]</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">addContributor</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n    name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n    email<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'ben@benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n    link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://benmccormick.org'</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">return</span> feed<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre>\\n      </div>\\n<p>Now we have a <code>buildFeed</code> method that takes a list of pages and generates a feed object.  Then we can use the feed object we’ve created to actually build write some files.  We’ll trigger that in the <code>postBuild</code> callback of <code>gatsby-node</code>.  Here was my first version to support RSS and Atom:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token comment\\\">//mkDir and mkFile are just light wrappers around node's file system APIs</span>\\n<span class=\\\"token keyword\\\">let</span> <span class=\\\"token function-variable function\\\">createRSSFolder</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token function\\\">mkDir</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/public/rss/'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">let</span> <span class=\\\"token function-variable function\\\">generateAtomFeed</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token function\\\">mkFile</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/public/atom.xml'</span><span class=\\\"token punctuation\\\">,</span> feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">atom1</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">let</span> <span class=\\\"token function-variable function\\\">generateRSS</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token function\\\">mkFile</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/public/rss/index.xml'</span><span class=\\\"token punctuation\\\">,</span> feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">rss2</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nexports<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">postBuild</span> <span class=\\\"token operator\\\">=</span> pages <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">let</span> feed <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">buildFeed</span><span class=\\\"token punctuation\\\">(</span>pages<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">createRSSFolder</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">generateAtomFeed</span><span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">generateRSS</span><span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre>\\n      </div>\\n<p>Prior to this week, <code>feed</code> didn’t support JSON Feed, so I had stopped here.  But because JSON Feed is super simple to implement (its just JSON!), I decided to try to add it to <code>feed</code> this week.  It turned out it was as simple as adding a single function that looks like this:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token function\\\">json1</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n   <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span> options<span class=\\\"token punctuation\\\">,</span> items <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span>\\n   <span class=\\\"token keyword\\\">let</span> feed <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n     version<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://jsonfeed.org/version/1'</span><span class=\\\"token punctuation\\\">,</span>\\n     title<span class=\\\"token punctuation\\\">:</span> options<span class=\\\"token punctuation\\\">.</span>title<span class=\\\"token punctuation\\\">,</span>\\n   <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n   <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>options<span class=\\\"token punctuation\\\">.</span>link<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n     feed<span class=\\\"token punctuation\\\">.</span>home_page_url <span class=\\\"token operator\\\">=</span> options<span class=\\\"token punctuation\\\">.</span>link<span class=\\\"token punctuation\\\">;</span>\\n   <span class=\\\"token punctuation\\\">}</span>\\n\\n   <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>options<span class=\\\"token punctuation\\\">.</span>feedLinks <span class=\\\"token operator\\\">&amp;&amp;</span> options<span class=\\\"token punctuation\\\">.</span>feedLinks<span class=\\\"token punctuation\\\">.</span>json<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n     feed<span class=\\\"token punctuation\\\">.</span>feed_url <span class=\\\"token operator\\\">=</span> options<span class=\\\"token punctuation\\\">.</span>feedLinks<span class=\\\"token punctuation\\\">.</span>json<span class=\\\"token punctuation\\\">;</span>\\n   <span class=\\\"token punctuation\\\">}</span>\\n\\n   <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>options<span class=\\\"token punctuation\\\">.</span>description<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n     feed<span class=\\\"token punctuation\\\">.</span>description <span class=\\\"token operator\\\">=</span> options<span class=\\\"token punctuation\\\">.</span>description<span class=\\\"token punctuation\\\">;</span>\\n   <span class=\\\"token punctuation\\\">}</span>\\n\\n\\n   <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>options<span class=\\\"token punctuation\\\">.</span>image<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n     feed<span class=\\\"token punctuation\\\">.</span>icon <span class=\\\"token operator\\\">=</span> options<span class=\\\"token punctuation\\\">.</span>image<span class=\\\"token punctuation\\\">;</span>\\n   <span class=\\\"token punctuation\\\">}</span>\\n\\n   <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>options<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n     feed<span class=\\\"token punctuation\\\">.</span>author <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n     <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>options<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">.</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n         feed<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">.</span>name <span class=\\\"token operator\\\">=</span> options<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">.</span>name<span class=\\\"token punctuation\\\">;</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n     <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>options<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">.</span>link<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n         feed<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">.</span>url <span class=\\\"token operator\\\">=</span> options<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">.</span>link<span class=\\\"token punctuation\\\">;</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n   <span class=\\\"token punctuation\\\">}</span>\\n   feed<span class=\\\"token punctuation\\\">.</span>items <span class=\\\"token operator\\\">=</span> items<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>item <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n     <span class=\\\"token keyword\\\">let</span> feedItem <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n       id<span class=\\\"token punctuation\\\">:</span> item<span class=\\\"token punctuation\\\">.</span>id<span class=\\\"token punctuation\\\">,</span>\\n       <span class=\\\"token comment\\\">// json_feed distinguishes between html and text content</span>\\n       <span class=\\\"token comment\\\">// but since we only take a single type, we'll assume HTML</span>\\n       html_content<span class=\\\"token punctuation\\\">:</span> item<span class=\\\"token punctuation\\\">.</span>content<span class=\\\"token punctuation\\\">,</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n     <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>link<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n       feedItem<span class=\\\"token punctuation\\\">.</span>url <span class=\\\"token operator\\\">=</span> item<span class=\\\"token punctuation\\\">.</span>link<span class=\\\"token punctuation\\\">;</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n     <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>title<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n       feedItem<span class=\\\"token punctuation\\\">.</span>title <span class=\\\"token operator\\\">=</span> item<span class=\\\"token punctuation\\\">.</span>title<span class=\\\"token punctuation\\\">;</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n     <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>description<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n       feedItem<span class=\\\"token punctuation\\\">.</span>summary <span class=\\\"token operator\\\">=</span> item<span class=\\\"token punctuation\\\">.</span>description<span class=\\\"token punctuation\\\">;</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n\\n     <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>image<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n       feedItem<span class=\\\"token punctuation\\\">.</span>image <span class=\\\"token operator\\\">=</span> item<span class=\\\"token punctuation\\\">.</span>image\\n     <span class=\\\"token punctuation\\\">}</span>\\n\\n     <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>date<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n       feedItem<span class=\\\"token punctuation\\\">.</span>date_modified <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">ISODateString</span><span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>date<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n     <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>published<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n       feedItem<span class=\\\"token punctuation\\\">.</span>date_published <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">ISODateString</span><span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>published<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n\\n     <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n       <span class=\\\"token keyword\\\">let</span> author <span class=\\\"token operator\\\">=</span> item<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">;</span>\\n       <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>author <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">Array</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n         <span class=\\\"token comment\\\">// json feed only supports 1 author per post</span>\\n         author <span class=\\\"token operator\\\">=</span> author<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n       <span class=\\\"token punctuation\\\">}</span>\\n       feedItem<span class=\\\"token punctuation\\\">.</span>author <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n       <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>author<span class=\\\"token punctuation\\\">.</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n           feedItem<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">.</span>name <span class=\\\"token operator\\\">=</span> author<span class=\\\"token punctuation\\\">.</span>name<span class=\\\"token punctuation\\\">;</span>\\n       <span class=\\\"token punctuation\\\">}</span>\\n       <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>author<span class=\\\"token punctuation\\\">.</span>link<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n           feedItem<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">.</span>url <span class=\\\"token operator\\\">=</span> author<span class=\\\"token punctuation\\\">.</span>link<span class=\\\"token punctuation\\\">;</span>\\n       <span class=\\\"token punctuation\\\">}</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n     <span class=\\\"token keyword\\\">return</span> feedItem<span class=\\\"token punctuation\\\">;</span>\\n   <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n   <span class=\\\"token keyword\\\">return</span> JSON<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">stringify</span><span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n <span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p> My <a href=\\\"https://github.com/jpmonette/feed/pull/56/files\\\">pull request</a> was accepted, so feed v1.1.0 now supports JSON feed and my final code to add <a href=\\\"http://benmccormick.org/rss/\\\">rss</a>, <a href=\\\"http://benmccormick.org/atom.xml\\\">atom</a>, and <a href=\\\"http://benmccormick.org/feed.json\\\">json</a> feed to this site looks like this:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token keyword\\\">const</span> fs <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'fs'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> Feed <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'feed'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> filter <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/filter'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> sortBy <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/sortBy'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> forEach <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/forEach'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token keyword\\\">get</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/get'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> moment <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'moment'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> markdownIt <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'markdown-it'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> frontmatter <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'front-matter'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span>mkDir<span class=\\\"token punctuation\\\">,</span> mkFile<span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./utils/file_system'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n\\n<span class=\\\"token keyword\\\">const</span> md <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">markdownIt</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n html<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n linkify<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n typographer<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">extractMarkdownContent</span> <span class=\\\"token operator\\\">=</span> file <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n <span class=\\\"token keyword\\\">let</span> body <span class=\\\"token operator\\\">=</span> md<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">frontmatter</span><span class=\\\"token punctuation\\\">(</span>file<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span>body<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n <span class=\\\"token comment\\\">// handle local links</span>\\n <span class=\\\"token keyword\\\">return</span> body<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">replace</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">/</span>src<span class=\\\"token operator\\\">=</span><span class=\\\"token string\\\">\\\"\\\\//g, 'src=\\\"</span>http<span class=\\\"token punctuation\\\">:</span><span class=\\\"token operator\\\">/</span><span class=\\\"token operator\\\">/</span>benmccormick<span class=\\\"token punctuation\\\">.</span>org<span class=\\\"token operator\\\">/</span>'<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">getPageContent</span> <span class=\\\"token operator\\\">=</span> page <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n <span class=\\\"token keyword\\\">let</span> file <span class=\\\"token operator\\\">=</span> fs<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">readFileSync</span><span class=\\\"token punctuation\\\">(</span>__dirname <span class=\\\"token operator\\\">+</span> <span class=\\\"token string\\\">'/pages/'</span> <span class=\\\"token operator\\\">+</span> page<span class=\\\"token punctuation\\\">.</span>requirePath<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'utf-8'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n <span class=\\\"token keyword\\\">return</span> <span class=\\\"token function\\\">extractMarkdownContent</span><span class=\\\"token punctuation\\\">(</span>file<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">buildFeed</span> <span class=\\\"token operator\\\">=</span> pages <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n <span class=\\\"token keyword\\\">let</span> feed <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Feed</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n   title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n   description<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'A blog by Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n   link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'http://benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n   id<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'http://benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n   copyright<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'All rights reserved 2016, Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n   feedLinks<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n     atom<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'http://benmccormick.org/atom.xml'</span><span class=\\\"token punctuation\\\">,</span>\\n     json<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'http://benmccormick.org/feed.json'</span><span class=\\\"token punctuation\\\">,</span>\\n   <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n   author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n     name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n     email<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'ben@benmccormick.org'</span>\\n   <span class=\\\"token punctuation\\\">}</span>\\n <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n <span class=\\\"token comment\\\">// ignore pages (non posts)</span>\\n pages <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span>pages<span class=\\\"token punctuation\\\">,</span> p <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span> <span class=\\\"token operator\\\">!</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span>p<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'data.layout'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'page'</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">===</span> <span class=\\\"token string\\\">'page'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n <span class=\\\"token comment\\\">// we only want the last 10 articles to show up in the feed</span>\\n pages <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">sortBy</span><span class=\\\"token punctuation\\\">(</span>pages<span class=\\\"token punctuation\\\">,</span> page <span class=\\\"token operator\\\">=></span> <span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span>page<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'data.date'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n pages <span class=\\\"token operator\\\">=</span> pages<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">reverse</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n pages <span class=\\\"token operator\\\">=</span> pages<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">slice</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">10</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n <span class=\\\"token function\\\">forEach</span><span class=\\\"token punctuation\\\">(</span>pages<span class=\\\"token punctuation\\\">,</span> page <span class=\\\"token operator\\\">=></span> feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">addItem</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n   title<span class=\\\"token punctuation\\\">:</span> page<span class=\\\"token punctuation\\\">.</span>data<span class=\\\"token punctuation\\\">.</span>title<span class=\\\"token punctuation\\\">,</span>\\n   id<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://benmccormick.org'</span> <span class=\\\"token operator\\\">+</span> page<span class=\\\"token punctuation\\\">.</span>path<span class=\\\"token punctuation\\\">,</span>\\n   link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://benmccormick.org'</span> <span class=\\\"token operator\\\">+</span> page<span class=\\\"token punctuation\\\">.</span>path<span class=\\\"token punctuation\\\">,</span>\\n   date<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token function\\\">moment</span><span class=\\\"token punctuation\\\">(</span>page<span class=\\\"token punctuation\\\">.</span>data<span class=\\\"token punctuation\\\">.</span>date<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toDate</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n   content<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token function\\\">getPageContent</span><span class=\\\"token punctuation\\\">(</span>page<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n   author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n     <span class=\\\"token punctuation\\\">{</span>\\n       name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n       email<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'ben@benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n       link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://benmccormick.org'</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n   <span class=\\\"token punctuation\\\">]</span>\\n <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">addContributor</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n   name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n   email<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'ben@benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n   link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://benmccormick.org'</span>\\n <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n <span class=\\\"token keyword\\\">return</span> feed<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">let</span> <span class=\\\"token function-variable function\\\">createRSSFolder</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token function\\\">mkDir</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/public/rss/'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">let</span> <span class=\\\"token function-variable function\\\">generateAtomFeed</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token function\\\">mkFile</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/public/atom.xml'</span><span class=\\\"token punctuation\\\">,</span> feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">atom1</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">let</span> <span class=\\\"token function-variable function\\\">generateRSS</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token function\\\">mkFile</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/public/rss/index.xml'</span><span class=\\\"token punctuation\\\">,</span> feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">rss2</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">let</span> <span class=\\\"token function-variable function\\\">generateJSONFeed</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token function\\\">mkFile</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/public/feed.json'</span><span class=\\\"token punctuation\\\">,</span> feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">json1</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nexports<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">postBuild</span> <span class=\\\"token operator\\\">=</span> pages <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">let</span> feed <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">buildFeed</span><span class=\\\"token punctuation\\\">(</span>pages<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">createRSSFolder</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">generateAtomFeed</span><span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">generateRSS</span><span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">generateJSONFeed</span><span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre>\\n      </div>\\n<h3>More Resources</h3>\\n<ul>\\n<li>You can see the whole spec for <a href=\\\"https://jsonfeed.org/\\\">JSON Feed</a> on their <a href=\\\"https://jsonfeed.org/\\\">site</a>.  It really is remarkably simple.  They also have a list of implementations and example sites.</li>\\n</ul>\",\"frontmatter\":{\"title\":\"Adding RSS, Atom, and JSON Feed to Gatsby\",\"keywords\":\"rss atom json feed gatsby\",\"category\":\"meta\",\"date\":\"2017-06-04T01:55:00+00:00\",\"path\":\"/2017/06/03/rss-atom-json-gatsby/\",\"layout\":\"post\",\"hideFooter\":null},\"fields\":{\"slug\":\"/2017/06/03/rss-atom-json-gatsby/\"}}},\"pathContext\":{\"slug\":\"/2017/06/03/rss-atom-json-gatsby/\",\"relatedPosts\":[{\"path\":\"/2016/12/02/whole-new-site/\",\"data\":{\"title\":\"A whole new site\",\"path\":\"/2016/12/02/whole-new-site/\",\"description\":\"Introducing a new look for benmccormick.org\",\"date\":\"2016-12-02T16:00:00+00:00\"}},{\"path\":\"/2017/05/29/atom-tips/\",\"data\":{\"title\":\"Atom Productivity Tips\",\"path\":\"/2017/05/29/atom-tips/\",\"description\":\"Getting the most out of Atom\",\"date\":\"2017-05-30T03:20:00+00:00\"}},{\"path\":\"/2017/05/28/mariana-syntax-atom/\",\"data\":{\"title\":\"Mariana Syntax Theme For Atom\",\"path\":\"/2017/05/28/mariana-syntax-atom/\",\"description\":\"Announcing a port of the Mariana color scheme to Atom\",\"date\":\"2017-05-28T04:05:00+00:00\"}}]}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---2017-06-03-rss-atom-json-gatsby-67d04a38263ba4e08896.js","module.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<p>For the last few months, this blog has been written in <a href=\\\"https://github.com/gatsbyjs/gatsby\\\">Gatsby</a>, a static site generator for JavaScript.  One of the first problems I had to solve when migrating the blog was how to maintain my RSS feed, since Gatsby doesn’t have any built in concept of an RSS feed.  This issue came up again this week as I decided to implement the new <a href=\\\"https://jsonfeed.org/\\\">JSON Feed</a> spec and give folks an additional option for subscribing to this blog.  Fortunately this turns out to be a pretty easy problem to solve because of the excellent npm module <a href=\\\"https://github.com/jpmonette/feed\\\">feed</a>.</p>\\n<p><em>feed</em> is an npm module that takes a bunch of information about a blog and its posts, and normalizes them into various syndication feed format.  Here’s what setting up a feed option looks like for this blog:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token keyword\\\">const</span> fs <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'fs'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> Feed <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'feed'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> filter <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/filter'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> sortBy <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/sortBy'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> forEach <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/forEach'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token keyword\\\">get</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/get'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> moment <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'moment'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> markdownIt <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'markdown-it'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> frontmatter <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'front-matter'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n\\n<span class=\\\"token comment\\\">//markdownIt is a markdown parser that takes my raw md files and</span>\\n<span class=\\\"token comment\\\">//translates them into HTML that we can use in the feed</span>\\n<span class=\\\"token keyword\\\">const</span> md <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">markdownIt</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n  html<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n  linkify<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n  typographer<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n\\n<span class=\\\"token comment\\\">// getPageContent is a function to help us grab the html content from a post path</span>\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">getPageContent</span> <span class=\\\"token operator\\\">=</span> page <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">let</span> file <span class=\\\"token operator\\\">=</span> fs<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">readFileSync</span><span class=\\\"token punctuation\\\">(</span>__dirname <span class=\\\"token operator\\\">+</span> <span class=\\\"token string\\\">'/pages/'</span> <span class=\\\"token operator\\\">+</span> page<span class=\\\"token punctuation\\\">.</span>requirePath<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'utf-8'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">let</span> body <span class=\\\"token operator\\\">=</span> md<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">frontmatter</span><span class=\\\"token punctuation\\\">(</span>file<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span>body<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token comment\\\">// handle local links</span>\\n  <span class=\\\"token keyword\\\">return</span> body<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">replace</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">/</span>src<span class=\\\"token operator\\\">=</span><span class=\\\"token string\\\">\\\"\\\\//g, 'src=\\\"</span>http<span class=\\\"token punctuation\\\">:</span><span class=\\\"token operator\\\">/</span><span class=\\\"token operator\\\">/</span>benmccormick<span class=\\\"token punctuation\\\">.</span>org<span class=\\\"token operator\\\">/</span>'<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// build feed is our main function to build a `Feed` object which we</span>\\n<span class=\\\"token comment\\\">// can then serialize into various formats</span>\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">buildFeed</span> <span class=\\\"token operator\\\">=</span> pages <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">let</span> feed <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Feed</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n    description<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'A blog by Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n    link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'http://benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n    id<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'http://benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n    copyright<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'All rights reserved 2016, Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n    feedLinks<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n      atom<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'http://benmccormick.org/atom.xml'</span><span class=\\\"token punctuation\\\">,</span>\\n      json<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'http://benmccormick.org/feed.json'</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n      name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n      email<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'ben@benmccormick.org'</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token comment\\\">// ignore pages (non posts)</span>\\n  pages <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span>pages<span class=\\\"token punctuation\\\">,</span> p <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span> <span class=\\\"token operator\\\">!</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span>p<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'data.layout'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'page'</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">===</span> <span class=\\\"token string\\\">'page'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token comment\\\">// we only want the last 10 articles to show up in the feed</span>\\n  pages <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">sortBy</span><span class=\\\"token punctuation\\\">(</span>pages<span class=\\\"token punctuation\\\">,</span> page <span class=\\\"token operator\\\">=></span> <span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span>page<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'data.date'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  pages <span class=\\\"token operator\\\">=</span> pages<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">reverse</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  pages <span class=\\\"token operator\\\">=</span> pages<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">slice</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">10</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token function\\\">forEach</span><span class=\\\"token punctuation\\\">(</span>pages<span class=\\\"token punctuation\\\">,</span> page <span class=\\\"token operator\\\">=></span> feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">addItem</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> page<span class=\\\"token punctuation\\\">.</span>data<span class=\\\"token punctuation\\\">.</span>title<span class=\\\"token punctuation\\\">,</span>\\n    id<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://benmccormick.org'</span> <span class=\\\"token operator\\\">+</span> page<span class=\\\"token punctuation\\\">.</span>path<span class=\\\"token punctuation\\\">,</span>\\n    link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://benmccormick.org'</span> <span class=\\\"token operator\\\">+</span> page<span class=\\\"token punctuation\\\">.</span>path<span class=\\\"token punctuation\\\">,</span>\\n    date<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token function\\\">moment</span><span class=\\\"token punctuation\\\">(</span>page<span class=\\\"token punctuation\\\">.</span>data<span class=\\\"token punctuation\\\">.</span>date<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toDate</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n    content<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token function\\\">getPageContent</span><span class=\\\"token punctuation\\\">(</span>page<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n      <span class=\\\"token punctuation\\\">{</span>\\n        name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n        email<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'ben@benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n        link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://benmccormick.org'</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">]</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">addContributor</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n    name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n    email<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'ben@benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n    link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://benmccormick.org'</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">return</span> feed<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre>\\n      </div>\\n<p>Now we have a <code>buildFeed</code> method that takes a list of pages and generates a feed object.  Then we can use the feed object we’ve created to actually build write some files.  We’ll trigger that in the <code>postBuild</code> callback of <code>gatsby-node</code>.  Here was my first version to support RSS and Atom:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token comment\\\">//mkDir and mkFile are just light wrappers around node's file system APIs</span>\\n<span class=\\\"token keyword\\\">let</span> <span class=\\\"token function-variable function\\\">createRSSFolder</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token function\\\">mkDir</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/public/rss/'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">let</span> <span class=\\\"token function-variable function\\\">generateAtomFeed</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token function\\\">mkFile</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/public/atom.xml'</span><span class=\\\"token punctuation\\\">,</span> feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">atom1</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">let</span> <span class=\\\"token function-variable function\\\">generateRSS</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token function\\\">mkFile</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/public/rss/index.xml'</span><span class=\\\"token punctuation\\\">,</span> feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">rss2</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nexports<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">postBuild</span> <span class=\\\"token operator\\\">=</span> pages <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">let</span> feed <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">buildFeed</span><span class=\\\"token punctuation\\\">(</span>pages<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">createRSSFolder</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">generateAtomFeed</span><span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">generateRSS</span><span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre>\\n      </div>\\n<p>Prior to this week, <code>feed</code> didn’t support JSON Feed, so I had stopped here.  But because JSON Feed is super simple to implement (its just JSON!), I decided to try to add it to <code>feed</code> this week.  It turned out it was as simple as adding a single function that looks like this:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token function\\\">json1</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n   <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span> options<span class=\\\"token punctuation\\\">,</span> items <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span>\\n   <span class=\\\"token keyword\\\">let</span> feed <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n     version<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://jsonfeed.org/version/1'</span><span class=\\\"token punctuation\\\">,</span>\\n     title<span class=\\\"token punctuation\\\">:</span> options<span class=\\\"token punctuation\\\">.</span>title<span class=\\\"token punctuation\\\">,</span>\\n   <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n   <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>options<span class=\\\"token punctuation\\\">.</span>link<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n     feed<span class=\\\"token punctuation\\\">.</span>home_page_url <span class=\\\"token operator\\\">=</span> options<span class=\\\"token punctuation\\\">.</span>link<span class=\\\"token punctuation\\\">;</span>\\n   <span class=\\\"token punctuation\\\">}</span>\\n\\n   <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>options<span class=\\\"token punctuation\\\">.</span>feedLinks <span class=\\\"token operator\\\">&amp;&amp;</span> options<span class=\\\"token punctuation\\\">.</span>feedLinks<span class=\\\"token punctuation\\\">.</span>json<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n     feed<span class=\\\"token punctuation\\\">.</span>feed_url <span class=\\\"token operator\\\">=</span> options<span class=\\\"token punctuation\\\">.</span>feedLinks<span class=\\\"token punctuation\\\">.</span>json<span class=\\\"token punctuation\\\">;</span>\\n   <span class=\\\"token punctuation\\\">}</span>\\n\\n   <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>options<span class=\\\"token punctuation\\\">.</span>description<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n     feed<span class=\\\"token punctuation\\\">.</span>description <span class=\\\"token operator\\\">=</span> options<span class=\\\"token punctuation\\\">.</span>description<span class=\\\"token punctuation\\\">;</span>\\n   <span class=\\\"token punctuation\\\">}</span>\\n\\n\\n   <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>options<span class=\\\"token punctuation\\\">.</span>image<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n     feed<span class=\\\"token punctuation\\\">.</span>icon <span class=\\\"token operator\\\">=</span> options<span class=\\\"token punctuation\\\">.</span>image<span class=\\\"token punctuation\\\">;</span>\\n   <span class=\\\"token punctuation\\\">}</span>\\n\\n   <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>options<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n     feed<span class=\\\"token punctuation\\\">.</span>author <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n     <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>options<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">.</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n         feed<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">.</span>name <span class=\\\"token operator\\\">=</span> options<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">.</span>name<span class=\\\"token punctuation\\\">;</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n     <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>options<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">.</span>link<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n         feed<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">.</span>url <span class=\\\"token operator\\\">=</span> options<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">.</span>link<span class=\\\"token punctuation\\\">;</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n   <span class=\\\"token punctuation\\\">}</span>\\n   feed<span class=\\\"token punctuation\\\">.</span>items <span class=\\\"token operator\\\">=</span> items<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>item <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n     <span class=\\\"token keyword\\\">let</span> feedItem <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n       id<span class=\\\"token punctuation\\\">:</span> item<span class=\\\"token punctuation\\\">.</span>id<span class=\\\"token punctuation\\\">,</span>\\n       <span class=\\\"token comment\\\">// json_feed distinguishes between html and text content</span>\\n       <span class=\\\"token comment\\\">// but since we only take a single type, we'll assume HTML</span>\\n       html_content<span class=\\\"token punctuation\\\">:</span> item<span class=\\\"token punctuation\\\">.</span>content<span class=\\\"token punctuation\\\">,</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n     <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>link<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n       feedItem<span class=\\\"token punctuation\\\">.</span>url <span class=\\\"token operator\\\">=</span> item<span class=\\\"token punctuation\\\">.</span>link<span class=\\\"token punctuation\\\">;</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n     <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>title<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n       feedItem<span class=\\\"token punctuation\\\">.</span>title <span class=\\\"token operator\\\">=</span> item<span class=\\\"token punctuation\\\">.</span>title<span class=\\\"token punctuation\\\">;</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n     <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>description<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n       feedItem<span class=\\\"token punctuation\\\">.</span>summary <span class=\\\"token operator\\\">=</span> item<span class=\\\"token punctuation\\\">.</span>description<span class=\\\"token punctuation\\\">;</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n\\n     <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>image<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n       feedItem<span class=\\\"token punctuation\\\">.</span>image <span class=\\\"token operator\\\">=</span> item<span class=\\\"token punctuation\\\">.</span>image\\n     <span class=\\\"token punctuation\\\">}</span>\\n\\n     <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>date<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n       feedItem<span class=\\\"token punctuation\\\">.</span>date_modified <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">ISODateString</span><span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>date<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n     <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>published<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n       feedItem<span class=\\\"token punctuation\\\">.</span>date_published <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">ISODateString</span><span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>published<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n\\n     <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n       <span class=\\\"token keyword\\\">let</span> author <span class=\\\"token operator\\\">=</span> item<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">;</span>\\n       <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>author <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">Array</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n         <span class=\\\"token comment\\\">// json feed only supports 1 author per post</span>\\n         author <span class=\\\"token operator\\\">=</span> author<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n       <span class=\\\"token punctuation\\\">}</span>\\n       feedItem<span class=\\\"token punctuation\\\">.</span>author <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n       <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>author<span class=\\\"token punctuation\\\">.</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n           feedItem<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">.</span>name <span class=\\\"token operator\\\">=</span> author<span class=\\\"token punctuation\\\">.</span>name<span class=\\\"token punctuation\\\">;</span>\\n       <span class=\\\"token punctuation\\\">}</span>\\n       <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>author<span class=\\\"token punctuation\\\">.</span>link<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n           feedItem<span class=\\\"token punctuation\\\">.</span>author<span class=\\\"token punctuation\\\">.</span>url <span class=\\\"token operator\\\">=</span> author<span class=\\\"token punctuation\\\">.</span>link<span class=\\\"token punctuation\\\">;</span>\\n       <span class=\\\"token punctuation\\\">}</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n     <span class=\\\"token keyword\\\">return</span> feedItem<span class=\\\"token punctuation\\\">;</span>\\n   <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n   <span class=\\\"token keyword\\\">return</span> JSON<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">stringify</span><span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n <span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p> My <a href=\\\"https://github.com/jpmonette/feed/pull/56/files\\\">pull request</a> was accepted, so feed v1.1.0 now supports JSON feed and my final code to add <a href=\\\"http://benmccormick.org/rss/\\\">rss</a>, <a href=\\\"http://benmccormick.org/atom.xml\\\">atom</a>, and <a href=\\\"http://benmccormick.org/feed.json\\\">json</a> feed to this site looks like this:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token keyword\\\">const</span> fs <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'fs'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> Feed <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'feed'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> filter <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/filter'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> sortBy <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/sortBy'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> forEach <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/forEach'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token keyword\\\">get</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/get'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> moment <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'moment'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> markdownIt <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'markdown-it'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> frontmatter <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'front-matter'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span>mkDir<span class=\\\"token punctuation\\\">,</span> mkFile<span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./utils/file_system'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n\\n<span class=\\\"token keyword\\\">const</span> md <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">markdownIt</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n html<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n linkify<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n typographer<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">extractMarkdownContent</span> <span class=\\\"token operator\\\">=</span> file <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n <span class=\\\"token keyword\\\">let</span> body <span class=\\\"token operator\\\">=</span> md<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">frontmatter</span><span class=\\\"token punctuation\\\">(</span>file<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span>body<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n <span class=\\\"token comment\\\">// handle local links</span>\\n <span class=\\\"token keyword\\\">return</span> body<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">replace</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">/</span>src<span class=\\\"token operator\\\">=</span><span class=\\\"token string\\\">\\\"\\\\//g, 'src=\\\"</span>http<span class=\\\"token punctuation\\\">:</span><span class=\\\"token operator\\\">/</span><span class=\\\"token operator\\\">/</span>benmccormick<span class=\\\"token punctuation\\\">.</span>org<span class=\\\"token operator\\\">/</span>'<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">getPageContent</span> <span class=\\\"token operator\\\">=</span> page <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n <span class=\\\"token keyword\\\">let</span> file <span class=\\\"token operator\\\">=</span> fs<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">readFileSync</span><span class=\\\"token punctuation\\\">(</span>__dirname <span class=\\\"token operator\\\">+</span> <span class=\\\"token string\\\">'/pages/'</span> <span class=\\\"token operator\\\">+</span> page<span class=\\\"token punctuation\\\">.</span>requirePath<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'utf-8'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n <span class=\\\"token keyword\\\">return</span> <span class=\\\"token function\\\">extractMarkdownContent</span><span class=\\\"token punctuation\\\">(</span>file<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">buildFeed</span> <span class=\\\"token operator\\\">=</span> pages <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n <span class=\\\"token keyword\\\">let</span> feed <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Feed</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n   title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n   description<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'A blog by Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n   link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'http://benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n   id<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'http://benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n   copyright<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'All rights reserved 2016, Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n   feedLinks<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n     atom<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'http://benmccormick.org/atom.xml'</span><span class=\\\"token punctuation\\\">,</span>\\n     json<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'http://benmccormick.org/feed.json'</span><span class=\\\"token punctuation\\\">,</span>\\n   <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n   author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n     name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n     email<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'ben@benmccormick.org'</span>\\n   <span class=\\\"token punctuation\\\">}</span>\\n <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n <span class=\\\"token comment\\\">// ignore pages (non posts)</span>\\n pages <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span>pages<span class=\\\"token punctuation\\\">,</span> p <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span> <span class=\\\"token operator\\\">!</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span>p<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'data.layout'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'page'</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">===</span> <span class=\\\"token string\\\">'page'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n <span class=\\\"token comment\\\">// we only want the last 10 articles to show up in the feed</span>\\n pages <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">sortBy</span><span class=\\\"token punctuation\\\">(</span>pages<span class=\\\"token punctuation\\\">,</span> page <span class=\\\"token operator\\\">=></span> <span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span>page<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'data.date'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n pages <span class=\\\"token operator\\\">=</span> pages<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">reverse</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n pages <span class=\\\"token operator\\\">=</span> pages<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">slice</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">10</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n <span class=\\\"token function\\\">forEach</span><span class=\\\"token punctuation\\\">(</span>pages<span class=\\\"token punctuation\\\">,</span> page <span class=\\\"token operator\\\">=></span> feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">addItem</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n   title<span class=\\\"token punctuation\\\">:</span> page<span class=\\\"token punctuation\\\">.</span>data<span class=\\\"token punctuation\\\">.</span>title<span class=\\\"token punctuation\\\">,</span>\\n   id<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://benmccormick.org'</span> <span class=\\\"token operator\\\">+</span> page<span class=\\\"token punctuation\\\">.</span>path<span class=\\\"token punctuation\\\">,</span>\\n   link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://benmccormick.org'</span> <span class=\\\"token operator\\\">+</span> page<span class=\\\"token punctuation\\\">.</span>path<span class=\\\"token punctuation\\\">,</span>\\n   date<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token function\\\">moment</span><span class=\\\"token punctuation\\\">(</span>page<span class=\\\"token punctuation\\\">.</span>data<span class=\\\"token punctuation\\\">.</span>date<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toDate</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n   content<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token function\\\">getPageContent</span><span class=\\\"token punctuation\\\">(</span>page<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n   author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n     <span class=\\\"token punctuation\\\">{</span>\\n       name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n       email<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'ben@benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n       link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://benmccormick.org'</span>\\n     <span class=\\\"token punctuation\\\">}</span>\\n   <span class=\\\"token punctuation\\\">]</span>\\n <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">addContributor</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n   name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Ben McCormick'</span><span class=\\\"token punctuation\\\">,</span>\\n   email<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'ben@benmccormick.org'</span><span class=\\\"token punctuation\\\">,</span>\\n   link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'https://benmccormick.org'</span>\\n <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n <span class=\\\"token keyword\\\">return</span> feed<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">let</span> <span class=\\\"token function-variable function\\\">createRSSFolder</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token function\\\">mkDir</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/public/rss/'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">let</span> <span class=\\\"token function-variable function\\\">generateAtomFeed</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token function\\\">mkFile</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/public/atom.xml'</span><span class=\\\"token punctuation\\\">,</span> feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">atom1</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">let</span> <span class=\\\"token function-variable function\\\">generateRSS</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token function\\\">mkFile</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/public/rss/index.xml'</span><span class=\\\"token punctuation\\\">,</span> feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">rss2</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">let</span> <span class=\\\"token function-variable function\\\">generateJSONFeed</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token function\\\">mkFile</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/public/feed.json'</span><span class=\\\"token punctuation\\\">,</span> feed<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">json1</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nexports<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">postBuild</span> <span class=\\\"token operator\\\">=</span> pages <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">let</span> feed <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">buildFeed</span><span class=\\\"token punctuation\\\">(</span>pages<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">createRSSFolder</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">generateAtomFeed</span><span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">generateRSS</span><span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">generateJSONFeed</span><span class=\\\"token punctuation\\\">(</span>feed<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre>\\n      </div>\\n<h3>More Resources</h3>\\n<ul>\\n<li>You can see the whole spec for <a href=\\\"https://jsonfeed.org/\\\">JSON Feed</a> on their <a href=\\\"https://jsonfeed.org/\\\">site</a>.  It really is remarkably simple.  They also have a list of implementations and example sites.</li>\\n</ul>\",\"frontmatter\":{\"title\":\"Adding RSS, Atom, and JSON Feed to Gatsby\",\"keywords\":\"rss atom json feed gatsby\",\"category\":\"meta\",\"date\":\"2017-06-04T01:55:00+00:00\",\"path\":\"/2017/06/03/rss-atom-json-gatsby/\",\"layout\":\"post\",\"hideFooter\":null},\"fields\":{\"slug\":\"/2017/06/03/rss-atom-json-gatsby/\"}}},\"pathContext\":{\"slug\":\"/2017/06/03/rss-atom-json-gatsby/\",\"relatedPosts\":[{\"path\":\"/2016/12/02/whole-new-site/\",\"data\":{\"title\":\"A whole new site\",\"path\":\"/2016/12/02/whole-new-site/\",\"description\":\"Introducing a new look for benmccormick.org\",\"date\":\"2016-12-02T16:00:00+00:00\"}},{\"path\":\"/2017/05/29/atom-tips/\",\"data\":{\"title\":\"Atom Productivity Tips\",\"path\":\"/2017/05/29/atom-tips/\",\"description\":\"Getting the most out of Atom\",\"date\":\"2017-05-30T03:20:00+00:00\"}},{\"path\":\"/2017/05/28/mariana-syntax-atom/\",\"data\":{\"title\":\"Mariana Syntax Theme For Atom\",\"path\":\"/2017/05/28/mariana-syntax-atom/\",\"description\":\"Announcing a port of the Mariana color scheme to Atom\",\"date\":\"2017-05-28T04:05:00+00:00\"}}]}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/2017-06-03-rss-atom-json-gatsby.json\n// module id = 725\n// module chunks = 92136517611204"],"sourceRoot":""}