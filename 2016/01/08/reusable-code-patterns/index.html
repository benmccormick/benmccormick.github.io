<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=yyxgnp97qG"/><link rel="icon" type="image/png" href="/favicon-32x32.png?v=yyxgnp97qG" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png?v=yyxgnp97qG" sizes="16x16"/><link rel="manifest" href="/manifest.json"/><link rel="mask-icon" href="/safari-pinned-tab.svg?v=yyxgnp97qG" color="#57a3e8"/><link rel="alternate" title="JSON Feed" type="application/json" href="/feed.json"/><link rel="shortcut icon" href="/favicon.ico?v=yyxgnp97qG"/><meta name="theme-color" content="#ffffff"/><script type="text/javascript" src="//use.typekit.net/msd6bqv.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script><title data-react-helmet="true">Reusable Code Patterns | benmccormick.org</title><meta data-react-helmet="true" name="description" content="Ben McCormick&#x27;s blog on JavaScript and Web Development"/><meta data-react-helmet="true" name="keywords" content=""/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:site" content="@benmccormickorg"/><meta data-react-helmet="true" name="twitter:creator" content="@ben336"/><meta data-react-helmet="true" name="twitter:title" content="Reusable Code Patterns"/><meta data-react-helmet="true" name="twitter:description" content=""/><meta data-react-helmet="true" name="twitter:image" content="http://benmccormick.org/logo.png"/><script data-react-helmet="true" type="application/ld+json">{
                  "@context": "http://schema.org"
                  "@type": "BlogPosting",
                  "headline": "Reusable Code Patterns",
                  "genre": "Software Development",
                  "keywords": "",
                  "url": "http://benmccormick.org/2016/01/08/reusable-code-patterns",
                  "image": "http://benmccormick.org/logo.png",
                  "datePublished": "2016-01-8",
                  
                  "articleBody": "<p>One of the most repeated mantras in all of software is the term “Don’t Repeat Yourself”. The phrase was first popularized by the book <a href=\"http://www.amazon.com/Pragmatic-Programmer-Journeyman-Master/dp/020161622X/ref=sr_1_1?s=books&#x26;ie=UTF8&#x26;qid=1452230454&#x26;sr=1-1&#x26;keywords=pragmatic+programmer\">The Pragmatic Programmer</a>, with it’s call for DRY software.  At it’s core, DRY is all about finding a way to keep logic related to a particular function in one place, so that changes for new functionality can be limited in scope and have predictable consistent effects.  Software developers are usually very good at knowing that repetition is bad, but I’ve seen that we can be less great at communicating about our options to avoid it, or discussing the tradeoffs between different approaches.  This post is going to look at a specific situation that programmers encounter all the time, and give a framework for talking about how to handle it, focusing on positive options rather than simply what we want to avoid.</p>
<p>The high level situation I want to talk about is when a programmer encounters a problem for which they have an existing piece of code that mostly works as a solution, but doesn’t quite meet all the requirements.  Some examples would include:</p>
<ul>
<li>a screen that is required to show a user avatar, but at a different size than other avatars displayed in the interface (all of which use an existing avatar ui widget)</li>
<li>a program that already has an API to get friends data from a users Facebook account, and needs to add a second API to get similar data from their Twitter account</li>
<li>a program that needs a  function that takes an integer or a string and displays it on the screen, when it already has a function that displays data but only accepts strings</li>
</ul>
<p>Some of those are simple, some are more complex, and you might already be thinking about how you’d handle each case.  The point isn’t so much the exact example so much as having a way to communicate what the options are.  I’m going to lay out 6 different patterns for handling situations where you’re required to implement something similar but not exactly the same as something that already exists.  I will not be endorsing a particular strategy as correct, since they all have their place.  Instead I’ll be discussing the benefits and risks of each, and hopefully giving a good framework for thinking about and discussing these tradeoffs in the future.</p>
<h3>Using the existing component as is</h3>
<h4>Pros</h4>
<ul>
<li>Least Effort</li>
<li>Encourages consistency and simplicity</li>
</ul>
<h4>Cons</h4>
<ul>
<li>Often not allowed</li>
<li>May be compromising user experience for developer expediency</li>
</ul>
<p>The first option is the simplest.  If you have a component that is similar to what is required but doesn’t quite match the requirements, change the requirements.  This can make sense in situations like the avatar example above, when you have a UI element or control that you use everywhere in the system.  It may make sense to use that same element in a new place for the benefit of consistency and user knowledge, rather than inventing a new UI element for the page.  This obviously requires an environment where developer input is welcome in the design and requirements process.</p>
<p>Developers should be cautious with this though.  If using an existing component removes unecessary complexity from the design and saves time, it’s a win-win.  But if the design was a good one, and users lose out on functionality through developer “efficiency”, it can hurt the product.  Even worse, decisions like that usually end up coming back round again, as the need that was ignored often will pop up in new situations.</p>
<h3>Copy and Paste</h3>
<h4>Pros</h4>
<ul>
<li>Simple</li>
<li>Keeps existing code stable in the short term</li>
</ul>
<h4>Cons</h4>
<ul>
<li>Adds to maintenance burden</li>
<li>Decreases readability/understandability of the code base for other developers</li>
</ul>
<p>This is the approach that says “To Hell with DRY”, and takes some existing code, creates a copy of it, and then partially modifies it to suit the current situation.  This would be analogous to taking the User avatar code listed above, creating a copy of it and simply modifying it to be bigger.  That might look like this in CSS:</p>
<div class=\"gatsby-highlight\">
      <pre class=\"language-none\"><code>.user-avatar {
    height: 30px;
    width: 30px;
    padding:5px;
    float: left;
    border-radius: 5px;
}

.user-avatar-big {
    height: 50px;
    width: 50px;
    padding:5px;
    float: left;
    border-radius: 10px;
}</code></pre>
      </div>
<p>Everything now works exactly the way we want it.  The problem comes when somebody wants to change the floats on avatar elements, or add a border to all of them now.  Instead of being able to make one change, they have to be aware of both avatar versions, and modify both.</p>
<p>Note that copy and paste isn’t always bad.  Often there are very good reasons for not modifying existing code.  It may be code that you don’t control (for instance forking an open source project that is not actively maintained to add a feature that you want), or code that is from another project (or from a legacy portion of the current project that is handled as a different code base).  DRY is not crazy advice though, and if you’re operating within a single codebase you control, this is usually not the best option.</p>
<h3>Classical Inheritance</h3>
<h4>Pros</h4>
<ul>
<li>Well understood by most programmers, especially those with an academic background</li>
<li>fits very well when you have multiple things that are variations of a type, with more similarities than differences</li>
</ul>
<h4>Cons</h4>
<ul>
<li>Often used as a silver bullet for all situations</li>
<li>Not suitable for situations where the objects are more different than similar, or when they are 2 different things at the core with shared behavior</li>
</ul>
<p>If you ask a recent Computer Science graduate what the best way to solve the problem of similar behavior across objects is, 99% of them will immediately say <a href=\"https://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)\">inheritance</a>.  The “conventional wisdom” that’s taught in most introductory computer science courses is that Object Oriented Programming is the best way to structure programs, and that Object Oriented programming is primarily about inheritance.  Both statements are shaky, but the prevalence of this mindset means that many developers come out of school and look at every problem they see as a nail to hit with their inheritance hammer (this is certainly something I was guilty of when I first graduated).  </p>
<p>Inheritance isn’t bad.  It’s definitely a tool you want in your toolbox, and shallow hierarchies of objects that inherit from a base class are a great pattern.  90% of “Frameworks” out there (Backbone, React, django, Rails, etc) use some form of inheritance as a way of structuring how users interact with the framework.  But when it is your only tool, things get ugly quickly.</p>
<p>Inheritance is a bad choice when 2 objects are mostly different.  Inheritance forces objects to share an API, and implies that objects can be used interchangeably.  If the objects aren’t really interchangeable, this can lead to jumping through hoops to maintain a shared API, with a small base class being stretched between 2 or more verbose child classes.  Interfaces especially tend to be bad places to use inheritance, as they tend to require small tweaks and differences when used in different places that aren’t friendly to being passed as configuration properties or over-ridden methods.</p>
<h3>Configuration</h3>
<h4>Pros</h4>
<ul>
<li>Keeps everything in a single place</li>
<li>
<p>Declarative configuration can be easier to read and update than a bunch of logic</p>
<h4>Cons</h4>
</li>
<li>Can get out of hand fast as use cases increase</li>
<li>Often unclear what defaults should be, bad defaults make common use cases verbose</li>
</ul>
<p>We can define separate behaviors for 2 similar things by using a single configurable object. This maximizes code re-use since everything is in one place, and provides an easy to read abstraction over the code for quick changes later.  However, like inheritance it works much better for similar objects with small differences rather than different objects with shared behaviors, and can lead to “configuration creep” when the differences slowly grow, creating a monster configuration and spaghetti code that tries to handle all of the possible configuration options it could be passed.</p>
<p>A big design point with configuration based strategies is figuring out good defaults.  If an object is designed so that the default case requires minimal to no configuration, and only true edge cases require a lot of configuration, configuration based objects and APIs can be very pleasant to deal with.  But objects with bad or no defaults that require common cases to include extensive configuration eventually lead to bloated projects that are very difficult to debug.</p>
<h3>Mixins</h3>
<h4>Pros</h4>
<ul>
<li>
<p>Share individual behaviors or attributes well</p>
<h4>Cons</h4>
</li>
<li>Can break down when the behavior or attribute requires significant knowledge about the object</li>
</ul>
<p>In contrast to inheritance and configuration, <a href=\"https://en.wikipedia.org/wiki/Mixin\">mixins</a> work well when objects are significantly different, but share similar behaviors. <code>Mixins</code> are the strategy of adding individual methods or properties to an object without implying any relationship between objects that use it.  Mixins are great when used to add a standalone behavior to different objects.  They avoid the problems of inheritance and don’t lock an object into a single API.</p>
<p>That said, it can often be hard to construct good mixins, since many behaviors require knowledge of the object that is performing the behavior, such as making assumptions about the structure of the objects data.  This either requires the objects implementing the mixin to obey rules about how they’re structured, similar to inheritance, involves offloading significant complexity into the mixin to allow it to handle different formats (making it a potential source of bugs), or it risks naming conflicts if the mixin tries to implement the data storage itself.  </p>
<h3>Composition</h3>
<h4>Pros</h4>
<ul>
<li>
<p>Incredibly flexible for handling subtly different behaviors</p>
<h4>Cons</h4>
</li>
<li>Can ramp up complexity, making it difficult to see the whole system</li>
<li>May end up pushing code re-use problems downwards instead of solving them, leading to many small similar modules</li>
</ul>
<p>Often when faced with 2 similar objects or functions, the best solution is to create more objects or functions.  Composition is trendy these days.  On the server side, you have people talking up micro-services and programs composed of small single-purpose modules.  On the client, React is the hottest library around.  The idea is appealing.  Instead of having one big complicated “thing”, I can create a few smaller “things” that I can wrap my mind around, and then get them to work together.  When this works well its great.  React for example, makes testing UIs much easier, since you can unit test individual components in a reliable way.  The problem is that it often moves complexity out of the components and into the architecture.  The hard part becomes figuring out how components fit together, designing interfaces and deciding what should be going where.  Although any individual piece of code may be comprehensible and simple, the system at large is harder to visualize and understand.</p>
<p>Like mixins, composition often works best when you have 2 or more fairly different “things” that share behavior.  The composition mindset is to treat code like lego blocks that you can snap together in different configurations as needed.  When done well, it allows for useful abstraction, letting developers create complex components out of meaningful sub-components without having to know all the details of the subcomponents.  When done poorly, it can lead to a fractured project with many undocumented dependencies between components.  </p>
<h2>All Together Now</h2>
<p>The great thing about these strategies is that none of them is the <strong>right answer</strong>.  All of them have their place, and can even be combined.  At my work we’ve developed code for describing workflows.  The workflows are described using an object that takes a configuration and uses it to layout a series of widgets.  Each widget inherits from a framework, and many of them use mixins to share behavior.  Most of the widgets are composed of several smaller views, and as developers we have pushed back against designs several times in order to allow greater widget re-use.  Each time we need to create a new automator we’ve started by copy and pasting some of the configuration boilerplate (which hopefully we’ll reduce going forward by providing better default behavior as we understand the requirements better). This is one feature of a large software product, and it uses all 6 reuse patterns I’ve described to perform its purpose.</p>
<p>In the end, what I hope you as a reader get out of this is not that one strategy is good or bad.  Instead I want to provide a way of thinking about the choices around re-use, so that we as developers can talk intelligently about the options and tradeoffs and make the right choice for a given situation.</p>",
                    "author": {
                      "@type": "Person",
                      "name": "Ben McCormick"
                      "email": "mailto:ben@benmccormick.org",
                      "image": "/profile_pic.jpg",
                      "jobTitle": "Software Engineer",
                      "alumniOf": "Duke",
                      "birthPlace": "Pittsburgh, PA",
                      "gender": "male",
                      "url": "http://benmccormick.org",
                	    "sameAs" : [
                        "https://www.linkedin.com/in/benmccormick",
                        "http://twitter.com/ben336",
                      ]
                   }
                }</script><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:125%/1.55em 'brandon-grotesque','Brandon Grotesque','Helvetica Neue','Helvetica','Arial','Lucida Sans','Geneva','Verdana','sans-serif';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'brandon-grotesque','Brandon Grotesque','Helvetica Neue','Helvetica','Arial','Lucida Sans','Geneva','Verdana','sans-serif';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:'brandon-grotesque','Brandon Grotesque','Helvetica Neue','Helvetica','Arial','Lucida Sans','Geneva','Verdana','sans-serif';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.5rem;line-height:2.325rem;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:'brandon-grotesque','Brandon Grotesque','Helvetica Neue','Helvetica','Arial','Lucida Sans','Geneva','Verdana','sans-serif';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.27542rem;line-height:1.55rem;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:'brandon-grotesque','Brandon Grotesque','Helvetica Neue','Helvetica','Arial','Lucida Sans','Geneva','Verdana','sans-serif';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.17608rem;line-height:1.55rem;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:'brandon-grotesque','Brandon Grotesque','Helvetica Neue','Helvetica','Arial','Lucida Sans','Geneva','Verdana','sans-serif';font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.55rem;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:'brandon-grotesque','Brandon Grotesque','Helvetica Neue','Helvetica','Arial','Lucida Sans','Geneva','Verdana','sans-serif';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.92211rem;line-height:1.55rem;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:'brandon-grotesque','Brandon Grotesque','Helvetica Neue','Helvetica','Arial','Lucida Sans','Geneva','Verdana','sans-serif';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.88547rem;line-height:1.55rem;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}ul{margin-left:1.55rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.55rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;font-size:0.85rem;line-height:1.1;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.1625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;font-size:1rem;line-height:1.55rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}blockquote{margin-left:1.55rem;margin-right:1.55rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.1625rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.1625rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.55rem;margin-bottom:calc(1.1625rem / 2);margin-top:calc(1.1625rem / 2);}li > ul{margin-left:1.55rem;margin-bottom:calc(1.1625rem / 2);margin-top:calc(1.1625rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.1625rem / 2);}code{font-size:0.85rem;line-height:1.55rem;}kbd{font-size:0.85rem;line-height:1.55rem;}samp{font-size:0.85rem;line-height:1.55rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.03333rem;padding-right:1.03333rem;padding-top:0.775rem;padding-bottom:calc(0.775rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;font-size:75%;}pre code{background:none;line-height:1.1;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:"";}h1,h2,h3,h4,h5,h6{line-height:1.1;}@media only screen and (max-width:480px){html{font-size:112.5%;}}</style><style>.subscribe-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-wrap:wrap;flex-wrap:wrap}.subscribe-block{width:400px;padding-right:30px;overflow:hidden}.subscribe-block #mc_embed_signup form{margin-bottom:20px}.up-next-block{width:300px}.subscribe-button{color:#fff;background:#57a3e8;border-radius:4px;border:0;padding:5px 10px;margin:20px 0;cursor:pointer}.rss{padding-bottom:10px}.rss a{display:-webkit-box;display:-ms-flexbox;display:flex}.rss-icon{display:block;width:17px;margin-right:.5em;height:50px}.rss-icon *{fill:#e2777a}.twitter-item{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:15px}.twitter-item iframe{margin:0 0 0 10px}.markdown pre{display:block;background:#343d46;color:#d8dee9}.token.comment,.token.quote{color:#a7adba}.token.addition,.token.attr,.token.selector-tag,.token.string{color:#99c794}.token.doctag,.token.meta .token.meta-string,.token.regexp{color:#89ddf3}.token.built_in,.token.function{color:#5fb3b3}.token.name,.token.section,.token.selector-class,.token.selector-id,.token.title{color:#69c}.token.attribute,.token.class .token.title,.token.template-variable,.token.type,.token.variable{color:#fac863}.token.bullet,.token.link,.token.meta,.token.meta .token.keyword,.token.selector-attr,.token.selector-pseudo,.token.subst,.token.symbol{color:#f9ae58}.token.boolean,.token.deletion,.token.literal,.token.number{color:#f07178}.token.keyword{color:#c594c5}.token.formula{background:#a7adba}.token.emphasis{font-style:italic}.token.strong{font-weight:700}a{color:#e2777a;text-decoration:none}blockquote{border-left:5px solid #57a3e8;font-style:italic;background:#eee;font-weight:400;font-size:.9rem;padding:10px 20px;margin:0 0 30px -25px}blockquote p{margin-bottom:.667em}h2,h3{color:#57a3e8}.explanation{padding:10px;background:#eee;border-radius:10px;margin:20px auto;font-size:.85em}.footnotes li>*{display:inline;margin-bottom:0}.article-body .reading-img img{width:150px;float:right;margin:0 10px 20px}.gatsby-resp-image-wrapper{max-width:75%;display:block;margin:40px auto 20px}.article-body img.full-width{max-height:none}.article-body img.half-width{max-height:none;width:50%}.bordered-img{border:3px solid #57a3e8}.img-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.img-group img{padding:0;height:auto}twitterwidget{margin-left:auto;margin-right:auto}.mc-field-group{width:400px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 0}.mc-field-group input{border-radius:3px;max-width:350px;width:80vw;border:1px solid #ccc;margin-right:10px;height:30px}.mc-field-group label{font-size:.9em;font-weight:600}#mc-embedded-subscribe{color:#fff;background:#57a3e8;border-radius:4px;border:0;padding:0 10px;margin:10px 0;cursor:pointer;width:40vw}#mc-embedded-subscribe:hover{background:#3e8acf}.twitter-row{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.twitter-row>div{padding-right:20px;min-width:300px}.category-icon-wrapper{color:rgba(87,163,232,.5)}.category-icon{display:inline-block;width:.75em;margin-right:.5em}.category-icon *{fill:#57a3e8;fill:rgba(87,163,232,.5)}.category-icon>i{height:30px}.header-link{color:hsla(0,0%,39%,.7)}.header-link:hover{color:#e2777a}#carbonads{height:100px;font-size:14px;width:300px;position:relative;background:#f0f0f0}.carbon-wrap{height:100px;display:-webkit-box;display:-ms-flexbox;display:flex}.carbon-text{padding:5px 10px;max-height:80px;display:inline-block;overflow:hidden;line-height:1.3}.carbon-poweredby{color:hsla(0,0%,39%,.7);position:absolute;right:5px;bottom:0}@media (max-width:600px){#carbonads,.no-mobile{display:none}.subscribe-block{padding-right:0;padding:0 10px}.subscribe-block,.subscribe-block .mc-field-group{width:100%!important}.subscribe-block .mc-field-group input{width:100%!important;font-size:.8em;height:2.4em}.up-next-block{width:100%!important;padding:0 10px}}@media (max-width:321px){html{font-size:100%!important}}</style><link rel="preload" href="/page-component---src-templates-blog-post-js-1b7e08d257552144b559.js" as="script"/><link rel="preload" href="/path---2016-01-08-reusable-code-patterns-bb34fce0b0104396629c.js" as="script"/><link rel="preload" href="/layout-component---index-70b8f924146ef86d3258.js" as="script"/><link rel="preload" href="/app-4ad317b624a9587ece01.js" as="script"/><link rel="preload" href="/commons-85ad19e371744ab2bf0f.js" as="script"/><script id="webpack-manifest">
            //<![CDATA[
            window.webpackManifest = {"15178676390636814000":"app-4ad317b624a9587ece01.js","8321446950128396000":"page-component---node-modules-gatsby-plugin-offline-app-shell-js-4f0dddda43ae15168f16.js","5567064509904683000":"page-component---src-templates-blog-post-js-1b7e08d257552144b559.js","4229320956280557000":"page-component---src-templates-category-page-js-e32fa790baa77d7b6697.js","2804217296675496000":"page-component---src-pages-archive-js-9b089d0476698fd685a1.js","4016850265702045000":"page-component---src-pages-index-js-b681681bf0f3a02c39a5.js","13784418321228782000":"path---offline-plugin-app-shell-fallback-586c7e095e534a3909ec.js","11711201792954765000":"path---404-html-ae133566656c2f73f1d8.js","6149725634412240000":"path---a-note-to-recruiters-aab4d19593bd5ec80f69.js","11484959540308085000":"path---learning-vim-in-2014-c8715e7d721b502a5a54.js","17953591736895156000":"path---about-5c49f9176beddeb8dfdf.js","14201970510400770000":"path---marionette-explained-46cb72aee9666bb6ec36.js","9369996873154550000":"path---speaking-e363fdc8f927b19324e1.js","9351720115130171000":"path---subscribe-6726ca9b6ddb54e469ab.js","3239107570024570000":"path---readinglist-b547724daabaa618bf9c.js","9970237474805596000":"path---2013-09-10-blendconf-2013-takeaways-from-a-very-human-tech-conference-386f5f15235d9d95fc94.js","7570888621869710000":"path---2013-04-06-a-new-look-40b88376f44db5afbbbc.js","4988419580825110000":"path---2013-06-09-90-done-halfway-there-876373f666be07023c35.js","9487584793133978000":"path---2013-01-06-book-review-effective-javascript-588e1de535084d463da4.js","8901412266055526000":"path---2013-04-23-book-review-javascript-testing-with-jasmine-4c49e0851414550babb9.js","4208182691347348000":"path---2013-08-12-book-review-user-centered-design-7972b733b29647031538.js","13645794037312290000":"path---2013-01-25-career-fairs-how-to-not-get-hired-and-how-to-give-yourself-a-chance-c25570b8875cc7b0cf23.js","16721510772713648000":"path---2013-02-23-coffeescript-is-great-0819eed380bc74732049.js","12884520599062075000":"path---2013-03-23-creating-a-build-system-for-a-coffeescript-project-with-ant-7cb57657bd4f46975728.js","2526010685028163000":"path---2013-06-08-customer-culture-revisited-68d7d0b82dadd3faf3fc.js","12502599451412107000":"path---2013-01-08-explaining-javascript-closures-c1df9ff19bf715a6e6f1.js","3929825676444408000":"path---2013-06-11-evergreen-browsers-813026b6129c4a14a3b1.js","15779460584034437000":"path---2013-01-12-explaining-javascript-object-oriented-programming-b2c4c9eb608abc3ec85f.js","12990994506127737000":"path---2013-06-11-how-i-use-stack-overflow-574f6c28394df6dbcd45.js","14921455922729384000":"path---2013-02-03-how-i-work-refactoring-256110f34e948c142e0f.js","16034195937072835000":"path---2013-12-30-meetings-and-concurrency-4d9f0958679e16e9aa7b.js","15735186237611076000":"path---2013-05-04-irreplaceable-8090301a2e4a1f8ea204.js","10361752404044140000":"path---2013-11-14-modern-dojo-exploring-dojo-basedeclare-e38695dba12bc624022b.js","9661779138607491000":"path---2013-05-07-revertible-observables-in-knockout-94e93e9d5430f823c792.js","1420821768002888200":"path---2013-11-13-modern-dojo-exploring-dojoquery-745ffba69f42c4204efd.js","17137307033809940000":"path---2013-08-16-searching-for-the-perfect-reading-device-my-nexus-7-2013-review-7fdb67b2b65a1b992b5b.js","5722356299045395000":"path---2013-06-29-rss-roundup-edab215919d9d265bfa4.js","10301559739306678000":"path---2013-02-13-simple-publish-subscribe-with-jquery-32094fc3a1734077b132.js","7705915330108801000":"path---2013-08-15-somewhat-open-0fccdac4db1da561b985.js","8566794467411845000":"path---2013-01-01-sublime-text-for-javascript-configuration-663a853efc185bfb54ce.js","10373535795157264000":"path---2013-01-03-sublime-text-for-javascript-plugins-d17143cf91c00d166aab.js","2822613209636559000":"path---2013-01-15-unexpected-javascript-that-doesnt-do-what-you-think-ccf14deed42014a89585.js","18698474487894420":"path---2014-11-04-a-quick-review-of-google-inbox-5f7fed988980853bf317.js","4957391291280868000":"path---2014-11-08-all-about-angular-2-0-f7b5d28f567f727107b7.js","15036326724299030000":"path---2014-11-24-alternative-javascript-e5f7af2c63a3a3f8e87b.js","8697057829059570000":"path---2014-12-22-building-complex-layouts-with-marionette-js-4f9c8776671135090d65.js","4963628532718749000":"path---2014-12-18-come-build-with-me-b837f3f303daa2dc070c.js","6640198416066087000":"path---2014-08-07-component-based-development-7ea240b7f049496d6b2c.js","10926144803571778000":"path---2014-08-28-custom-elements-by-example-cfd0302da186d6e82834.js","4274109705084552700":"path---2014-06-02-discovering-vim-0d6fa9d5c04e809f4810.js","11668824928804320000":"path---2014-01-06-digging-into-knockout-builds-babed130aee281abc4d6.js","10160848289207170000":"path---2014-07-14-learning-vim-in-2014-configuring-vim-6a6e70a383f352303560.js","15664797420088646000":"path---2014-07-27-learning-vim-in-2014-copy-and-paste-the-vim-way-f253b12c26e6e6922a85.js","4643700091233559000":"path---2014-06-30-learning-vim-in-2014-the-basics-fcbfccc7e196a0c45fcc.js","7956846869346647000":"path---2014-08-04-learning-vim-in-2014-search-1f0b8d99d1ff05e27e95.js","11317885703564528000":"path---2014-07-21-learning-vim-in-2014-getting-more-from-vim-with-plugins-1eafa2f78f4171a61f43.js","2541437925750222300":"path---2014-07-16-learning-vim-in-2014-vim-as-art-7c1cc0709844b50f2ac0.js","16399016283205116000":"path---2014-07-02-learning-vim-in-2014-vim-as-language-ca61cb56a2e51d2a62cb.js","16889621977069142000":"path---2014-07-07-learning-vim-in-2014-working-with-files-2f1d2821e66031f9ccfb.js","18159680721607778000":"path---2014-12-10-marionette-explained-connecting-your-data-to-your-views-76ea96889bd386315a66.js","8630820739431306000":"path---2014-07-11-new-twitter-feed-and-practical-vim-giveaway-68a56d1d5d48d99287c5.js","15276496339857254000":"path---2014-07-24-one-day-left-in-practical-vim-giveaway-c40efd8405f98df9bc93.js","17955627297296556000":"path---2014-10-13-setting-up-your-text-editor-for-javascript-development-f5159e9cff30625fdc1b.js","376221471718148740":"path---2014-12-02-the-case-for-marionette-js-40fa7072c133c393145e.js","7294074219210106000":"path---2014-08-19-the-debugging-toolbox-f0ea337542dd8b88e273.js","11335125218021552000":"path---2014-11-12-underscore-vs-lodash-55c89ab6efb833a07392.js","12738404113761044000":"path---2014-07-09-understanding-the-backbone-mindset-a-review-of-building-backbone-plugins-by-derick-bailey-fcad0b8fc44263c451a0.js","17709201197096172000":"path---2012-12-20-awesome-software-trello-01db7506f4e6fa0e29ba.js","15304177550087293000":"path---2012-11-09-bayesian-witch-hunt-873227c9e6fec6b9eec0.js","16139749260458867000":"path---2012-10-06-it-took-a-month-to-get-sick-of-php-c2b84570f6b663f37f84.js","17592052974658148000":"path---2012-12-29-i-hate-computing-ecosystems-1d4bf810b6e6bc75ee07.js","5830227661472685000":"path---2012-12-29-cleaning-my-digital-house-d7148b81049d836beb86.js","7264654056851156000":"path---2012-12-25-medium-the-end-of-history-and-the-last-website-a63c89ba74255c4634e3.js","17095308856732094000":"path---2012-11-07-sync-multiple-google-calendars-in-windows-8-e70ee3ccd980abdb2871.js","14663350838336150000":"path---2012-12-30-sublime-text-for-javascript-keyboard-shortcuts-cf06c40dde65477b45c3.js","14549542878416417000":"path---2012-09-19-the-iphone-5-conversation-so-far-87035aa40f22c16f74e9.js","966288852833295000":"path---2012-11-08-shutdown-tiles-for-windows-8-start-screen-32fd0cc9dc260464efc8.js","4570892025843575000":"path---2015-07-06-backbone-and-es-6-classes-revisited-e60cc701b908d8da67fa.js","17265586046511972000":"path---2015-06-15-book-review-talking-with-tech-leads-99ad9a9fc9cee5ba7b55.js","3271935603424526300":"path---2015-12-31-2015-roundup-2-ce71dab96b0e7ca78d21.js","6202572539255216000":"path---2015-11-30-es-6-patterns-clean-higher-order-functions-1867c001c2cb20a3512a.js","3710975430170115000":"path---2015-09-14-es-5-es-6-es-2016-es-next-whats-going-on-with-javascript-versioning-977cefa037cf9ce2b8c1.js","6166663248207965000":"path---2015-04-07-es-6-classes-and-backbone-js-720c1ed28401e9dc61b5.js","9039988472047779000":"path---2015-06-10-is-safari-being-left-behind-c86579d4e71230b91e02.js","11314185936414444000":"path---2015-12-30-es-6-patterns-converting-callbacks-to-promises-1b1b24c037d858a57073.js","24566668062212364":"path---2015-01-22-is-bower-useful-c5e5c07ca00f5402b6a8.js","13364516941766027000":"path---2015-06-08-how-jquery-works-an-introduction-f685c1e72dd043da3a59.js","730934344168844700":"path---2015-05-25-marionette-service-service-objects-for-marionette-635fe1c4b53028428493.js","7160596742836566000":"path---2015-01-05-marionette-view-life-cycles-511f92f62f0042f76486.js","16615563562040414000":"path---2015-05-28-moving-past-requirejs-26b15db18741f3159cbb.js","12115615934156431000":"path---2015-06-14-mozilla-the-state-of-web-components-8887687a780c7d192a85.js","11635796757548958000":"path---2015-02-22-rauchg-on-es-6-b129c58415015a66106d.js","7725556876915527000":"path---2015-11-25-productive-javascript-development-081c2f474fd3d73177f0.js","15781176753323213000":"path---2015-03-23-staying-dry-with-marionette-behaviors-405a190236e7cc8d2e6d.js","7978385202065764000":"path---2015-09-09-what-can-backbone-developers-learn-from-react-6ec3f24a48578c94a25b.js","1419009670271261700":"path---2016-12-31-2016-roundup-2a44a33d5fd2da04ffb0.js","5623115232157006000":"path---2016-04-30-ack-tips-ee6bf6a01cb68da0bdcc.js","17578809893330006000":"path---2016-12-02-whole-new-site-1b020a32ec441ee00708.js","8345130568649344000":"path---2016-05-02-digging-into-react-choosing-component-styles-29d1b12854ac6ba901fd.js","13377314275435020000":"path---2016-06-26-quick-tip-take-advantage-of-lodash-collections-2-1eab75ac48d69a9fea08.js","17636969476961060000":"path---2016-12-11-readable-code-audience-72047160aba02cc6fd34.js","9093196713649272000":"path---2016-03-09-stability-vs-decline-ebc3a89b95dfe648e7ef.js","6324961005136647000":"path---2016-01-08-reusable-code-patterns-bb34fce0b0104396629c.js","10108934303926590000":"path---2016-01-25-staying-productive-91efb1aabfa3865d9c4f.js","10783760535123343000":"path---2016-12-14-what-are-higher-order-components-b2a12914297eac931af8.js","10485770512600267000":"path---2016-09-19-testing-with-jest-snapshots-first-impressions-fd6c0a6f836134f2727f.js","15781340068539660000":"path---2016-06-04-what-are-mutable-and-immutable-data-structures-2-0e6ed8d4a3909dea7cce.js","6038258818167871000":"path---2017-06-03-rss-atom-json-gatsby-6865069ffa71188126af.js","13303994982804371000":"path---2017-01-03-orthogonality-and-css-in-js-81fe9dbf49d838bc9217.js","14103574458251850000":"path---2017-07-19-ten-things-javascript-62f4e28bc9c6ed4e0f96.js","12782939239129285000":"path---2017-07-10-how-to-follow-the-javascript-roadmap-3aab05ea2e21e47e3ef4.js","5060687037633451000":"path---2017-01-09-mobx-first-impressions-e3fe7cf4e642e45f4627.js","6784611317627741000":"path---2017-02-18-context-to-best-practices-209c5a0ff7b089232804.js","3136300706037352000":"path---2013-11-25-a-look-at-ack-743e2fc83b9ba462cf88.js","10637192576328739000":"path---2015-01-26-backbone-radio-55aa1edf698a51dc0e79.js","15906113815094761000":"path---2014-11-10-vim-workflows-file-switching-strategies-df8ef0d74a6c3e49a949.js","10910862192549116000":"path---2016-01-11-the-most-interesting-atom-packages-ive-found-so-far-e9c815650567cd7b4b2b.js","4798749783265810000":"path---2016-03-07-the-sad-state-of-the-backbone-ecosystem-fbff0af0291c34e7cd79.js","12189501574888978000":"path---2016-12-10-saving-time-with-jest-f9d478b55484ad1de28e.js","17953528095254866000":"path---2017-05-29-atom-tips-3a407572e5764ae5998c.js","18390214443057822000":"path---2017-03-28-the-mystery-of-docker-and-the-disk-eating-cow-b4813f065508904ea4ca.js","16115924020544200000":"path---2017-02-26-running-jest-tests-before-each-git-commit-122345e97d0e6bed1eed.js","2108396007783965700":"path---2017-02-13-improving-site-performance-with-lighthouse-65dbbc504083eba9f400.js","7427821939332841000":"path---2017-05-28-mariana-syntax-atom-72e7d251fb70529b9e43.js","14471878390477140000":"path---2017-05-11-building-normal-curves-highcharts-2449889820e8a1ff5a9e.js","1733845846262257200":"path---2017-04-14-grading-applications-on-config-portability-8e307c1a9acca74d4cee.js","3306020603663706600":"path---category-frameworks-2178c9f42c1d845efcb9.js","9926120898609840000":"path---category-javascript-c060f405acb20bf4d4f9.js","10473073881449703000":"path---category-software-productivity-5a2cee716eae2b7abb96.js","8538016099450021000":"path---category-meta-80295486ebcc3f334732.js","13022883366857360000":"path---category-tools-8f5ae23fa3e477f32fbf.js","16436387397272748000":"path---category-reviews-b0cab47eb7f7d4fca69a.js","9807561136566950000":"path---category-platform-7b48063dff346482d831.js","13384874473531716000":"path---category-opinion-158a48e02dcdd71e1424.js","15205666288078348000":"path---archive-394ca0ad3b53c090df24.js","9347362237655822000":"path---index-4c1374aed476863b3192.js","17241999800008180000":"layout-component---index-70b8f924146ef86d3258.js"}
            //]]>
            </script><script>
  !function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",[
  "/commons-85ad19e371744ab2bf0f.js","/app-4ad317b624a9587ece01.js","/layout-component---index-70b8f924146ef86d3258.js","/path---2016-01-08-reusable-code-patterns-bb34fce0b0104396629c.js","/page-component---src-templates-blog-post-js-1b7e08d257552144b559.js"
])
  </script></head><body class="landing-page" style="background:#FCFCFC;padding:0 10px;"><div id="___gatsby"><div style="max-width:40.3rem;margin-left:auto;margin-right:auto;padding:2.325rem 1.1625rem;" data-reactroot="" data-reactid="1" data-react-checksum="-1426369299"><div style="display:flex;padding-bottom:0.5rem;margin-bottom:0.5rem;" data-reactid="2"><div style="flex-grow:3;display:flex;flex-direction:column;justify-content:space-around;" data-reactid="3"><h3 style="margin:0;padding-bottom:0;" data-reactid="4"><a style="box-shadow:none;text-decoration:none;color:inherit;" name="title" href="/" data-reactid="5">benmccormick.org</a></h3><div style="color:rgba(100,100,100, 0.7);" data-reactid="6"><a class="header-link" href="/subscribe/" data-reactid="7">Subscribe</a><span style="padding:0 0.33rem;" data-reactid="8">•</span><a class="header-link" href="/archive/" data-reactid="9">Archive</a><span style="padding:0 0.33rem;" data-reactid="10">•</span><a class="header-link" href="http://twitter.com/ben336" data-reactid="11">Twitter</a><span style="padding:0 0.33rem;" data-reactid="12">•</span><a class="header-link" href="/about/" data-reactid="13">About</a></div></div><div style="flex-shrink:2;" data-reactid="14"><span data-reactid="15"></span></div></div><div class="markdown" data-reactid="16"><!-- react-empty: 17 --><h5 style="display:block;color:rgba(100,100,100, 0.7);margin-bottom:0.3875rem;" data-reactid="18">January 8, 2016</h5><h1 style="margin-top:0;margin-bottom:1rem;" data-reactid="19">Reusable Code Patterns</h1><div class="article-body" data-reactid="20"><p>One of the most repeated mantras in all of software is the term “Don’t Repeat Yourself”. The phrase was first popularized by the book <a href="http://www.amazon.com/Pragmatic-Programmer-Journeyman-Master/dp/020161622X/ref=sr_1_1?s=books&#x26;ie=UTF8&#x26;qid=1452230454&#x26;sr=1-1&#x26;keywords=pragmatic+programmer">The Pragmatic Programmer</a>, with it’s call for DRY software.  At it’s core, DRY is all about finding a way to keep logic related to a particular function in one place, so that changes for new functionality can be limited in scope and have predictable consistent effects.  Software developers are usually very good at knowing that repetition is bad, but I’ve seen that we can be less great at communicating about our options to avoid it, or discussing the tradeoffs between different approaches.  This post is going to look at a specific situation that programmers encounter all the time, and give a framework for talking about how to handle it, focusing on positive options rather than simply what we want to avoid.</p>
<p>The high level situation I want to talk about is when a programmer encounters a problem for which they have an existing piece of code that mostly works as a solution, but doesn’t quite meet all the requirements.  Some examples would include:</p>
<ul>
<li>a screen that is required to show a user avatar, but at a different size than other avatars displayed in the interface (all of which use an existing avatar ui widget)</li>
<li>a program that already has an API to get friends data from a users Facebook account, and needs to add a second API to get similar data from their Twitter account</li>
<li>a program that needs a  function that takes an integer or a string and displays it on the screen, when it already has a function that displays data but only accepts strings</li>
</ul>
<p>Some of those are simple, some are more complex, and you might already be thinking about how you’d handle each case.  The point isn’t so much the exact example so much as having a way to communicate what the options are.  I’m going to lay out 6 different patterns for handling situations where you’re required to implement something similar but not exactly the same as something that already exists.  I will not be endorsing a particular strategy as correct, since they all have their place.  Instead I’ll be discussing the benefits and risks of each, and hopefully giving a good framework for thinking about and discussing these tradeoffs in the future.</p>
<h3>Using the existing component as is</h3>
<h4>Pros</h4>
<ul>
<li>Least Effort</li>
<li>Encourages consistency and simplicity</li>
</ul>
<h4>Cons</h4>
<ul>
<li>Often not allowed</li>
<li>May be compromising user experience for developer expediency</li>
</ul>
<p>The first option is the simplest.  If you have a component that is similar to what is required but doesn’t quite match the requirements, change the requirements.  This can make sense in situations like the avatar example above, when you have a UI element or control that you use everywhere in the system.  It may make sense to use that same element in a new place for the benefit of consistency and user knowledge, rather than inventing a new UI element for the page.  This obviously requires an environment where developer input is welcome in the design and requirements process.</p>
<p>Developers should be cautious with this though.  If using an existing component removes unecessary complexity from the design and saves time, it’s a win-win.  But if the design was a good one, and users lose out on functionality through developer “efficiency”, it can hurt the product.  Even worse, decisions like that usually end up coming back round again, as the need that was ignored often will pop up in new situations.</p>
<h3>Copy and Paste</h3>
<h4>Pros</h4>
<ul>
<li>Simple</li>
<li>Keeps existing code stable in the short term</li>
</ul>
<h4>Cons</h4>
<ul>
<li>Adds to maintenance burden</li>
<li>Decreases readability/understandability of the code base for other developers</li>
</ul>
<p>This is the approach that says “To Hell with DRY”, and takes some existing code, creates a copy of it, and then partially modifies it to suit the current situation.  This would be analogous to taking the User avatar code listed above, creating a copy of it and simply modifying it to be bigger.  That might look like this in CSS:</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code>.user-avatar {
    height: 30px;
    width: 30px;
    padding:5px;
    float: left;
    border-radius: 5px;
}

.user-avatar-big {
    height: 50px;
    width: 50px;
    padding:5px;
    float: left;
    border-radius: 10px;
}</code></pre>
      </div>
<p>Everything now works exactly the way we want it.  The problem comes when somebody wants to change the floats on avatar elements, or add a border to all of them now.  Instead of being able to make one change, they have to be aware of both avatar versions, and modify both.</p>
<p>Note that copy and paste isn’t always bad.  Often there are very good reasons for not modifying existing code.  It may be code that you don’t control (for instance forking an open source project that is not actively maintained to add a feature that you want), or code that is from another project (or from a legacy portion of the current project that is handled as a different code base).  DRY is not crazy advice though, and if you’re operating within a single codebase you control, this is usually not the best option.</p>
<h3>Classical Inheritance</h3>
<h4>Pros</h4>
<ul>
<li>Well understood by most programmers, especially those with an academic background</li>
<li>fits very well when you have multiple things that are variations of a type, with more similarities than differences</li>
</ul>
<h4>Cons</h4>
<ul>
<li>Often used as a silver bullet for all situations</li>
<li>Not suitable for situations where the objects are more different than similar, or when they are 2 different things at the core with shared behavior</li>
</ul>
<p>If you ask a recent Computer Science graduate what the best way to solve the problem of similar behavior across objects is, 99% of them will immediately say <a href="https://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)">inheritance</a>.  The “conventional wisdom” that’s taught in most introductory computer science courses is that Object Oriented Programming is the best way to structure programs, and that Object Oriented programming is primarily about inheritance.  Both statements are shaky, but the prevalence of this mindset means that many developers come out of school and look at every problem they see as a nail to hit with their inheritance hammer (this is certainly something I was guilty of when I first graduated).  </p>
<p>Inheritance isn’t bad.  It’s definitely a tool you want in your toolbox, and shallow hierarchies of objects that inherit from a base class are a great pattern.  90% of “Frameworks” out there (Backbone, React, django, Rails, etc) use some form of inheritance as a way of structuring how users interact with the framework.  But when it is your only tool, things get ugly quickly.</p>
<p>Inheritance is a bad choice when 2 objects are mostly different.  Inheritance forces objects to share an API, and implies that objects can be used interchangeably.  If the objects aren’t really interchangeable, this can lead to jumping through hoops to maintain a shared API, with a small base class being stretched between 2 or more verbose child classes.  Interfaces especially tend to be bad places to use inheritance, as they tend to require small tweaks and differences when used in different places that aren’t friendly to being passed as configuration properties or over-ridden methods.</p>
<h3>Configuration</h3>
<h4>Pros</h4>
<ul>
<li>Keeps everything in a single place</li>
<li>
<p>Declarative configuration can be easier to read and update than a bunch of logic</p>
<h4>Cons</h4>
</li>
<li>Can get out of hand fast as use cases increase</li>
<li>Often unclear what defaults should be, bad defaults make common use cases verbose</li>
</ul>
<p>We can define separate behaviors for 2 similar things by using a single configurable object. This maximizes code re-use since everything is in one place, and provides an easy to read abstraction over the code for quick changes later.  However, like inheritance it works much better for similar objects with small differences rather than different objects with shared behaviors, and can lead to “configuration creep” when the differences slowly grow, creating a monster configuration and spaghetti code that tries to handle all of the possible configuration options it could be passed.</p>
<p>A big design point with configuration based strategies is figuring out good defaults.  If an object is designed so that the default case requires minimal to no configuration, and only true edge cases require a lot of configuration, configuration based objects and APIs can be very pleasant to deal with.  But objects with bad or no defaults that require common cases to include extensive configuration eventually lead to bloated projects that are very difficult to debug.</p>
<h3>Mixins</h3>
<h4>Pros</h4>
<ul>
<li>
<p>Share individual behaviors or attributes well</p>
<h4>Cons</h4>
</li>
<li>Can break down when the behavior or attribute requires significant knowledge about the object</li>
</ul>
<p>In contrast to inheritance and configuration, <a href="https://en.wikipedia.org/wiki/Mixin">mixins</a> work well when objects are significantly different, but share similar behaviors. <code>Mixins</code> are the strategy of adding individual methods or properties to an object without implying any relationship between objects that use it.  Mixins are great when used to add a standalone behavior to different objects.  They avoid the problems of inheritance and don’t lock an object into a single API.</p>
<p>That said, it can often be hard to construct good mixins, since many behaviors require knowledge of the object that is performing the behavior, such as making assumptions about the structure of the objects data.  This either requires the objects implementing the mixin to obey rules about how they’re structured, similar to inheritance, involves offloading significant complexity into the mixin to allow it to handle different formats (making it a potential source of bugs), or it risks naming conflicts if the mixin tries to implement the data storage itself.  </p>
<h3>Composition</h3>
<h4>Pros</h4>
<ul>
<li>
<p>Incredibly flexible for handling subtly different behaviors</p>
<h4>Cons</h4>
</li>
<li>Can ramp up complexity, making it difficult to see the whole system</li>
<li>May end up pushing code re-use problems downwards instead of solving them, leading to many small similar modules</li>
</ul>
<p>Often when faced with 2 similar objects or functions, the best solution is to create more objects or functions.  Composition is trendy these days.  On the server side, you have people talking up micro-services and programs composed of small single-purpose modules.  On the client, React is the hottest library around.  The idea is appealing.  Instead of having one big complicated “thing”, I can create a few smaller “things” that I can wrap my mind around, and then get them to work together.  When this works well its great.  React for example, makes testing UIs much easier, since you can unit test individual components in a reliable way.  The problem is that it often moves complexity out of the components and into the architecture.  The hard part becomes figuring out how components fit together, designing interfaces and deciding what should be going where.  Although any individual piece of code may be comprehensible and simple, the system at large is harder to visualize and understand.</p>
<p>Like mixins, composition often works best when you have 2 or more fairly different “things” that share behavior.  The composition mindset is to treat code like lego blocks that you can snap together in different configurations as needed.  When done well, it allows for useful abstraction, letting developers create complex components out of meaningful sub-components without having to know all the details of the subcomponents.  When done poorly, it can lead to a fractured project with many undocumented dependencies between components.  </p>
<h2>All Together Now</h2>
<p>The great thing about these strategies is that none of them is the <strong>right answer</strong>.  All of them have their place, and can even be combined.  At my work we’ve developed code for describing workflows.  The workflows are described using an object that takes a configuration and uses it to layout a series of widgets.  Each widget inherits from a framework, and many of them use mixins to share behavior.  Most of the widgets are composed of several smaller views, and as developers we have pushed back against designs several times in order to allow greater widget re-use.  Each time we need to create a new automator we’ve started by copy and pasting some of the configuration boilerplate (which hopefully we’ll reduce going forward by providing better default behavior as we understand the requirements better). This is one feature of a large software product, and it uses all 6 reuse patterns I’ve described to perform its purpose.</p>
<p>In the end, what I hope you as a reader get out of this is not that one strategy is good or bad.  Instead I want to provide a way of thinking about the choices around re-use, so that we as developers can talk intelligently about the options and tradeoffs and make the right choice for a given situation.</p></div><div data-reactid="21"><hr data-reactid="22"/><div class="subscribe-container" data-reactid="23"><div class="subscribe-block" data-reactid="24"><p data-reactid="25"><!-- react-text: 26 -->Thanks for taking the time to read this post!<!-- /react-text --><!-- react-text: 27 --> Software engineering<!-- /react-text --><!-- react-text: 28 --> is one of the main topics of this blog, so if you enjoyed the post, please consider subscribing by using the feed, Twitter or my mailing list.<!-- /react-text --></p><div style="margin-bottom:3.875rem;" data-reactid="29"><div id="mc_embed_signup" data-reactid="30"><h6 style="margin:0;font-size:0.8165rem;line-height:1.55rem;letter-spacing:-0.25px;" data-reactid="31">EMAIL</h6><form action="//benmccormick.us8.list-manage.com/subscribe/post?u=115446b80fd9d930ba091cc27&amp;id=f5b9f5acf2" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="" data-reactid="32"><div id="mc_embed_signup_scroll" data-reactid="33"><div class="mc-field-group" style="padding-right:30px;" data-reactid="34"><input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Email Address" data-reactid="35"/><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button" data-reactid="36"/></div><div id="mce-responses" class="clear" data-reactid="37"><div class="response" id="mce-error-response" style="display:none;" data-reactid="38"></div><div class="response" id="mce-success-response" style="display:none;" data-reactid="39"></div></div><div style="position:absolute;left:-5000px;" aria-hidden="true" data-reactid="40"><input type="text" name="b_115446b80fd9d930ba091cc27_f5b9f5acf2" tabindex="-1" value="" data-reactid="41"/></div><div class="clear" data-reactid="42"></div></div></form></div><div class="rss" data-reactid="43"><h6 style="margin:0;font-size:0.8165rem;line-height:1.55rem;letter-spacing:-0.25px;" data-reactid="44">RSS</h6><a href="/rss/" data-reactid="45"><i class="rss-icon" data-reactid="46"><svg viewBox="0 0 10 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>rss</title><desc>Created with Sketch.</desc><defs></defs><g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="rss" fill="#000000"><path d="M2,13 L0,13 L0,11 C1.11,11 2,11.89 2,13 L2,13 Z M0,3 L0,4 C4.97,4 9,8.03 9,13 L10,13 C10,7.48 5.52,3 0,3 L0,3 Z M0,7 L0,8 C2.75,8 5,10.25 5,13 L6,13 C6,9.69 3.31,7 0,7 L0,7 Z" id="Shape"></path></g></g></svg></i><!-- react-text: 47 --> <!-- /react-text --><span data-reactid="48">RSS</span></a></div><div data-reactid="49"><h6 style="margin:0;font-size:0.8165rem;line-height:1.55rem;letter-spacing:-0.25px;" data-reactid="50">TWITTER</h6><div class="twitter-item" data-reactid="51"><span data-reactid="52">Site Feed: </span><a href="https://twitter.com/benmccormickorg" class="twitter-follow-button" data-show-count="false" data-reactid="53">Follow @benmccormickorg</a></div></div><div data-reactid="54"><div class="twitter-item" data-reactid="55"><span data-reactid="56">Personal Feed: </span><a href="https://twitter.com/ben336" class="twitter-follow-button" data-show-count="false" data-reactid="57">Follow @ben336</a></div></div></div></div><div class="up-next-block" data-reactid="58"><h6 style="margin:0;font-size:0.8165rem;line-height:1.55rem;letter-spacing:-0.25px;" data-reactid="59">You Might Also Like:</h6><div data-reactid="60"><h3 style="margin-top:0;margin-bottom:0.3875rem;" data-reactid="61"><a href="/[object Object]" data-reactid="62">Giving Context To Best Practices</a></h3><p data-reactid="63">What we talk about when we talk about best practices</p></div><div data-reactid="64"><hr data-reactid="65"/><h3 style="margin-top:0;margin-bottom:0.3875rem;" data-reactid="66"><a href="/[object Object]" data-reactid="67">Readable code: Know your audience </a></h3><p data-reactid="68">A quick observation about what it means to write readable code</p></div><div data-reactid="69"><hr data-reactid="70"/><h3 style="margin-top:0;margin-bottom:0.3875rem;" data-reactid="71"><a href="/[object Object]" data-reactid="72">Productive JavaScript Development</a></h3><p data-reactid="73">An examination of what makes JavaScript development productive</p></div></div></div></div><hr style="margin-bottom:3.1rem;" data-reactid="74"/><div title="Reusable Code Patterns" data-reactid="75"><div id="disqus_thread" data-reactid="76"></div><noscript data-reactid="77"><span data-reactid="78"><!-- react-text: 79 -->Please enable JavaScript to view the<!-- /react-text --><a href="http://disqus.com/?ref_noscript" data-reactid="80">comments powered by Disqus.</a></span></noscript><a href="http://disqus.com" class="dsq-brlink" data-reactid="81"><!-- react-text: 82 -->Blog comments powered by <!-- /react-text --><span class="logo-disqus" data-reactid="83">Disqus</span><!-- react-text: 84 -->.<!-- /react-text --></a></div></div><span style="display:block;clear:both;" data-reactid="85"> </span></div></div><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-37323973-1', 'auto');
            ga('send', 'pageview');
        </script><script>
          window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
      </script></body></html>