<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=yyxgnp97qG"/><link rel="icon" type="image/png" href="/favicon-32x32.png?v=yyxgnp97qG" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png?v=yyxgnp97qG" sizes="16x16"/><link rel="manifest" href="/manifest.json"/><link rel="mask-icon" href="/safari-pinned-tab.svg?v=yyxgnp97qG" color="##0193e8"/><link rel="alternate" title="JSON Feed" type="application/json" href="/feed.json"/><link rel="shortcut icon" href="/favicon.ico?v=yyxgnp97qG"/><meta name="theme-color" content="#ffffff"/><title data-react-helmet="true"></title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.4 'Work Sans','Helvetica Neue','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Work Sans','Helvetica Neue','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:inherit;font-family:'Inter','Helvetica Neue','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.6rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:inherit;font-family:'Inter','Helvetica Neue','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.32578rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:inherit;font-family:'Inter','Helvetica Neue','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.20684rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:inherit;font-family:'Inter','Helvetica Neue','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:inherit;font-family:'Inter','Helvetica Neue','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.91028rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:inherit;font-family:'Inter','Helvetica Neue','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.86849rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}ul{margin-left:1.4rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.4rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;font-size:0.85rem;line-height:1.1;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.05rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;font-size:1rem;line-height:1.4rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}blockquote{margin-left:1.4rem;margin-right:1.4rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.05rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.05rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.4rem;margin-bottom:calc(1.05rem / 2);margin-top:calc(1.05rem / 2);}li > ul{margin-left:1.4rem;margin-bottom:calc(1.05rem / 2);margin-top:calc(1.05rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.05rem / 2);}code{font-size:0.85rem;line-height:1.4rem;}kbd{font-size:0.85rem;line-height:1.4rem;}samp{font-size:0.85rem;line-height:1.4rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.93333rem;padding-right:0.93333rem;padding-top:0.7rem;padding-bottom:calc(0.7rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;font-size:12px;}pre code{background:none;line-height:1.1;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:none;}h1,h2,h3,h4,h5,h6{line-height:1.2;}@media only screen and (max-width:480px){html{font-size:112.5%;}}</style><meta data-react-helmet="true" name="keywords" content="CSS JavaScript Orthogonality Pragmatic Programmer"/><meta data-react-helmet="true" name="description" content="Ben McCormick&#x27;s blog on JavaScript and Web Development"/><meta name="generator" content="Gatsby 4.6.0"/><style data-href="/styles.21962497ee016fa624a6.css" data-identity="gatsby-global-css">.markdown pre{background:#343d46;color:#d8dee9;display:block;padding:.8rem}.markdown pre code:after{content:unset}.token.comment,.token.quote{color:#a7adba}.token.addition,.token.attr,.token.selector-tag,.token.string{color:#99c794}.token.doctag,.token.meta .token.meta-string,.token.regexp{color:#89ddf3}.token.built_in,.token.function{color:#5fb3b3}.token.name,.token.section,.token.selector-class,.token.selector-id,.token.title{color:#69c}.token.attribute,.token.class .token.title,.token.template-variable,.token.type,.token.variable{color:#fac863}.token.bullet,.token.link,.token.meta,.token.meta .token.keyword,.token.selector-attr,.token.selector-pseudo,.token.subst,.token.symbol{color:#f9ae58}.token.boolean,.token.deletion,.token.literal,.token.number{color:#f07178}.token.keyword{color:#c594c5}.token.formula{background:#a7adba}.token.emphasis{font-style:italic}.token.strong{font-weight:700}.gatsby-resp-image-wrapper{display:block;margin:40px auto 20px;max-width:75%}.bordered-img{border:3px solid ##0193e8}.img-group{display:flex;justify-content:space-between}.img-group img{height:auto;padding:0}.inline-img{display:inline-block;float:right;padding:2rem;width:45%}.revue-row{grid-gap:5px;align-items:center;display:grid;flex-direction:row;grid-template-columns:1fr;width:100%}.revue-form-footer{color:#777;font-size:10px}.revue-label{font-family:Inter,Helvetica Neue,Arial,sans-serif;font-size:20px;font-weight:700}#member_email{padding-left:5px}#member_email,#member_submit{font-family:Inter,Helvetica Neue,Arial,sans-serif;font-size:14px}#member_submit{background:#f1684e;border:none;border-radius:4px;color:#fff}@media (max-width:960px){#bd-email,#bd-submit{font-size:10px}#bd-label{font-size:12px}}.large-row #bd-email,.large-row #bd-submit{font-size:20px}@media (max-width:700px){.large-row #bd-email,.large-row #bd-submit{font-size:18px}}.bd-subscribe-form{display:block;margin:30px 0 50px}.bd-subscribe-row{grid-column-gap:5%;display:grid;grid-template-columns:60% 35%;grid-template-rows:1fr;margin-top:10px}@media (max-width:960px){.bd-subscribe-row{grid-row-gap:10%;grid-template-columns:1fr;grid-template-rows:1fr 1fr}}.twitter-tweet,twitterwidget{margin-left:auto;margin-right:auto}.carbon-wrap{grid-column-gap:10px;align-items:center;display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;margin-bottom:30px;padding-left:5px}@media (max-width:960px){.carbon-wrap{grid-row-gap:10px;grid-template-columns:1fr;grid-template-rows:110px 1fr;justify-items:center}}.carbon-wrap img{margin-bottom:0}.carbon-text{display:inline-block;line-height:1.3;overflow:hidden;padding:5px 5px 5px 0}.carbon-poweredby{bottom:0;color:#777;position:absolute;right:5px}.columns{grid-column-gap:25px;display:grid;grid-template-columns:665px 270px;grid-template-rows:1fr}@media (max-width:960px){.columns{grid-column-gap:2%;display:grid;grid-template-columns:70% 28%}}@media (max-width:700px){.columns{align-items:center;display:flex;flex-direction:column}.no-mobile{display:none}}@media (max-width:321px){html{font-size:100%!important}}body{color:#474747}a{color:#f1684e;cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}.footnote-backref,.footnote-ref{padding-left:3px;text-decoration:none}blockquote{background:#eee;border-left:5px solid #0193e8;font-size:.9rem;font-weight:400;margin:0 0 1rem;padding:1.5rem 2rem}blockquote p{margin-bottom:.667em}h3{color:#0193e8}h4{font-size:110%}.explanation{background:#eee;border-radius:10px;font-size:.85em;margin:20px auto;padding:10px}.footnotes{font-size:80%}.footnotes li>*{display:inline;margin-bottom:0}strong{color:#222}em{color:#666}.markdown iframe{margin:0 auto}</style><style id="glamor-styles">.css-1yerfx4,[data-css-1yerfx4]{color:#777777;font-size:16px;font-family:"Inter", "Helvetica Neue", "Helvetica", Arial, sans-serif;}.css-1yerfx4:hover,[data-css-1yerfx4]:hover{color:#F1684E;}.css-pe78rs,[data-css-pe78rs]{font-size:16px;font-family:"Inter", "Helvetica Neue", "Helvetica", Arial, sans-serif;}</style><script id="glamor-ids">
        // <![CDATA[
        window._glamor = ["1yerfx4","pe78rs"]
        // ]]>
        </script><title data-react-helmet="true">Orthogonality and CSS in JS | benmccormick.org</title><script data-react-helmet="true" type="application/ld+json">{
                  "@context": "http://schema.org"
                  "@type": "BlogPosting",
                  "headline": "Orthogonality and CSS in JS",
                  "genre": "Software Development",
                  "keywords": "CSS JavaScript Orthogonality Pragmatic Programmer",
                  "url": "http://benmccormick.org//2017/01/03/orthogonality-and-css-in-js/",
                  "image": "http://benmccormick.org/logo.png",
                  "datePublished": "2017-01-3",
                  
                  "articleBody": "<p>One of the realities of the constant change in the web development world is that “best practices” are often hotly contested.  One issue that the front end community doesn’t seem to have come to a consensus on yet is how tightly to bundle JavaScript, HTML and CSS in code.  Should they be bundled and managed completely separately?  Kept in different files and imported together into JavaScript component files?  Or can we remove HTML and CSS files entirely and generate everything in JavaScript? This is a discussion that still comes up all the time in my <a href=\"https://twitter.com/thomasfuchs/status/810885087214637057\">twitter</a> <a href=\"https://twitter.com/TheLarkInn/status/812089065210335232\">feed</a>.</p>
<p>Many new frameworks that encourage a component based architecture (including React, Vue, and Angular2 <sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>) provide affordances for including HTML and CSS directly in JavaScript, but those solutions are not yet used universally.  Many people are still very happy keeping CSS bundled separately.  I have no idea what the <em>best</em> solution is.  But I am interested in how people talk about the problem.  One major argument I have seen from people advocating both sides is that their preferred approach encourages good “separation of concerns”.</p>
<blockquote class=\"twitter-tweet\" data-lang=\"en\"><p lang=\"en\" dir=\"ltr\">I&#39;m moving from storing my CSS, JS and HTML in different files, to physically putting them on different drives. Keep those concerns separate</p>&mdash; Ben Lesh (@BenLesh) <a href=\"https://twitter.com/BenLesh/status/812092408519413761\">December 23, 2016</a></blockquote>
<p>I’d like to take a deeper look at this and give some vocabulary that can hopefully help anyone working through discussions on how to manage CSS for components.  I’ll focus specifically on CSS since frameworks tend to be more agnostic to how it is blended with JS than they are about HTML, and on components since that is the main context in which people are arguing for blending of css. For this piece, I’ll consider a component to be a set of HTML, CSS, and JavaScript that combine to form a reusable piece of UI <sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup>.</p>
<h3>Orthogonality, Cohesion, and Coupling</h3>
<p><a href=\"http://amzn.to/2hNzQ0t\">The Pragmatic Programmer</a>, one of the best books ever written on Software Engineering, uses the following three terms when talking about “Separation of Concerns”: orthogonality, cohesion, and coupling.</p>
<p>Orthogonality is the idea that modules should be written in a way that a change in one module should not require changes in any other module.</p>
<blockquote>
<p>Two or more things are orthogonal if changes in one do not affect any of the others. In a well-designed system, the database code will be orthogonal to the user interface: you can change the interface without affecting the database, and swap databases without changing the interface.</p>
<p><strong>— The Pragmatic Programmer</strong></p>
</blockquote>
<p>Cohesion is a measure of how well the internal contents of a module relate to each other. A cohesive module is one with a single well defined purpose, where all code in the module is related to that purpose.  A less cohesive module might have multiple purposes, with pieces of code that are completely unrelated to each other.  <a href=\"https://sites.google.com/site/unclebobconsultingllc/\">Robert C. Martin</a> describes this as each module having “a single reason to change”.</p>
<p>Coupling is a measure of how dependent different modules are on the internal workings of other modules. In a loosely coupled system, any module can be completely rewritten as long as it exposes the same public interface, without any other modules needing to change.  In a tightly coupled system, changing the internal details of one module may require changes in many other modules.</p>
<p>In the real world most systems are not purely orthogonal, and their modules are likely not 100% cohesive and uncoupled.  But striving for these goals is a good approximation of what many people mean when they talk about <em>separation of concerns</em>.</p>
<h3>Conways Law</h3>
<p><a href=\"http://amzn.to/2hNzQ0t\">The Pragmatic Programmer</a> does touch on another application of orthogonality to software engineering:</p>
<blockquote>
<p>Have you noticed how some project teams are efficient, with everyone knowing what to do and contributing fully, while the members of other teams are constantly bickering and don’t seem able to get out of each other’s way?</p>
<p>Often this is an orthogonality issue. When teams are organized with lots of overlap, members are confused about responsibilities. Every change needs a meeting of the entire team, because any one of them might be affected.</p>
<p>How do you organize teams into groups with well-defined responsibilities and minimal overlap? There’s no simple answer. It depends partly on the project and your analysis of the areas of potential change. It also depends on the people you have available. Our preference is to start by separating infrastructure from application. Each major infrastructure component (database, communications interface, middleware layer, and so on) gets its own subteam. Each obvious division of application functionality is similarly divided. Then we look at the people we have (or plan to have) and adjust the groupings accordingly.</p>
<p>You can get an informal measure of the orthogonality of a project team’s structure. Simply see how many people need to be involved in discussing each change that is requested. The larger the number, the less orthogonal the group. Clearly, an orthogonal team is more efficient.</p>
<p><strong>— The Pragmatic Programmer</strong></p>
</blockquote>
<p>The idea is that teams work more efficiently when each can work in its own areas without having to be bogged down by using another group (or individuals) code, and only interacting with those modules through a well communicated interface.  This is also known as <a href=\"https://en.wikipedia.org/wiki/Conway&#x27;s_law\">Conway’s Law</a>, which is often used disparagingly but still stands as a true observation about real life code.</p>
<blockquote>
<p>organizations which design systems … are constrained to produce designs which are copies of the communication structures of these organizations</p>
<p><strong>— Conway’s Law</strong></p>
</blockquote>
<p>Although it usually isn’t phrased quite so explicitly, I believe Conway’s law is often related to what people mean when they discuss separation of concerns in front end development.</p>
<h3>Boundaries and Interfaces between CSS and JavaScript</h3>
<p>Let’s look at 2 examples of how CSS can be structured.  We’ll use a “page view counter” as our example. The element will show the number of users who have viewed the page, and respond to click events by showing a modal with the most popular pages on the site.
First, for a more traditional example, I’ll show a <a href=\"http://marionettejs.com/\">Marionette</a> View, with separate CSS. For a more integrated example, I’ll use a React component.</p>
<h4>Marionette</h4>
<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//view-counter.js</span>

<span class=\"token keyword\">import</span> Mn <span class=\"token keyword\">from</span> <span class=\"token string\">'backbone.marionette'</span><span class=\"token punctuation\">;</span>
<span class=\"token keyword\">import</span> template <span class=\"token keyword\">from</span> <span class=\"token string\">'./view-counter.hbs'</span>
<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> getPageViews<span class=\"token punctuation\">,</span> showModal <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../util/page-views'</span><span class=\"token punctuation\">;</span>

<span class=\"token keyword\">var</span> ViewCounter <span class=\"token operator\">=</span> Mn<span class=\"token punctuation\">.</span>View<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>

  template<span class=\"token punctuation\">,</span>

  <span class=\"token literal-property property\">className</span><span class=\"token operator\">:</span> <span class=\"token string\">'page-view-counter'</span><span class=\"token punctuation\">,</span>

  <span class=\"token literal-property property\">ui</span><span class=\"token operator\">:</span>  <span class=\"token punctuation\">{</span>
    <span class=\"token string-property property\">'showPageViewsModal'</span><span class=\"token operator\">:</span> <span class=\"token string\">'.show-modal-js'</span><span class=\"token punctuation\">,</span>
  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>

  <span class=\"token literal-property property\">events</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>
    <span class=\"token string-property property\">'click @ui.showPageViewsModal'</span><span class=\"token operator\">:</span> <span class=\"token string\">'showPageViewsModal'</span><span class=\"token punctuation\">,</span>
  <span class=\"token punctuation\">}</span>

  <span class=\"token function\">templateContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>
        <span class=\"token literal-property property\">pageViews</span><span class=\"token operator\">:</span> <span class=\"token function\">getPageViews</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>
      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>
  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>

  <span class=\"token function\">showPageViewsModal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
    <span class=\"token function\">showModal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
  <span class=\"token punctuation\">}</span>

<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>
<div class=\"gatsby-highlight\" data-language=\"hbs\"><pre class=\"language-hbs\"><code class=\"language-hbs\"><span class=\"token comment\">{{!view-counter.hbs}}</span>

<span class=\"token punctuation\">&lt;</span><span class=\"token variable\">span</span> <span class=\"token variable\">class</span><span class=\"token punctuation\">=</span><span class=\"token string\">\"page-view-counter__title\"</span><span class=\"token punctuation\">></span> <span class=\"token variable\">Page</span> <span class=\"token variable\">Views</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">/</span><span class=\"token variable\">span</span><span class=\"token punctuation\">></span>
<span class=\"token punctuation\">&lt;</span><span class=\"token variable\">span</span> <span class=\"token variable\">class</span><span class=\"token punctuation\">=</span><span class=\"token string\">\"page-view-counter__counter show-modal-js\"</span><span class=\"token punctuation\">></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token variable\">pageViews</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">/</span><span class=\"token variable\">span</span><span class=\"token punctuation\">></span></code></pre></div>
<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">//view-counter.css

.page-view-counter</span> <span class=\"token punctuation\">{</span>
  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span>
<span class=\"token punctuation\">}</span>

<span class=\"token selector\">.page-view-counter__title</span> <span class=\"token punctuation\">{</span>
  <span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> 700<span class=\"token punctuation\">;</span>
  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 3px<span class=\"token punctuation\">;</span>
<span class=\"token punctuation\">}</span>

<span class=\"token selector\">.page-view-counter__counter</span> <span class=\"token punctuation\">{</span>
  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 3px<span class=\"token punctuation\">;</span>
<span class=\"token punctuation\">}</span></code></pre></div>
<h4>React</h4>
<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//view-counter.jsx</span>
<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>
<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> showModal <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../util/page-views'</span><span class=\"token punctuation\">;</span>

<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PageViewCounter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>
    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div style <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>
      <span class=\"token operator\">&lt;</span>span style <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>
        <span class=\"token literal-property property\">fontWeight</span><span class=\"token operator\">:</span> <span class=\"token number\">700</span><span class=\"token punctuation\">,</span>
        <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token string\">'3px'</span><span class=\"token punctuation\">,</span>
      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>
        Page Views<span class=\"token operator\">:</span>
      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>
      <span class=\"token operator\">&lt;</span>span style <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token string\">'3px'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>pageViews<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>
    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>
<span class=\"token punctuation\">}</span>
</code></pre></div>
<p>The React and Marionette examples have set different module boundaries. In the Marionette example, we have defined 3 modules, split by code type.  Ignoring the leaky abstractions in the Marionette boundaries <sup id=\"fnref-3\"><a href=\"#fn-3\" class=\"footnote-ref\">3</a></sup>, we can say we have 3 modules with clear singular purpose (styling, behavior,  structure) that use class names and  <code class=\"language-text\">templateContext</code> as interfaces.  The handlebars file exposes classes, which the CSS uses to style elements and the JavaScript code uses as attachment points for event handling.  The JavaScript view passes data to the template through templateContext.  In the React code we have defined a single module that exports a component as its only external interface. The module’s single purpose could be defined as “rendering a PageViewCounter”.</p>
<h3>How do we define module boundaries?</h3>
<p>If you’re excited to read which of the above examples is the <em>correct</em> module boundary definition, I’m sorry to disappoint you.  It turns out that module boundaries are more of an art than a science.  Let’s consider each of these examples by the criteria we laid out above.</p>
<p>The Marionette modules are <strong>cohesive</strong>.  Each module is single purpose, with a clear reason why it might change.  The React module is also cohesive, as it describes a single atomic component. However, it has more reasons it might change.  We might change that module because of a change in the look and feel of the site, because of a change in the expected behavior of the click event, or because we’re changing the text inside the component.</p>
<p>The Marionette modules are not quite <strong>decoupled</strong>.  While this CSS doesn’t nest selectors and we don’t have any explicit dependencies on the HTML structure, it is still written in a way that assumes <code class=\"language-text\">.page-view-counter__title</code> and <code class=\"language-text\">.page-view-counter__counter</code> will be direct children of <code class=\"language-text\">.page-view-counter</code>.  So changing the “internal details” of the Handlebars file by adding an extra element around those children would break the CSS. While the modules are not completely decoupled from each other, they don’t rely on any private details of other modules or global styles and can be used together as a reusable component.  The React module is similarly decoupled from the rest of the system, and as a single module faces no internal coupling issues.</p>
<p>Both components should be <strong>orthogonal</strong> from the rest of the system, even though the Marionette modules may be less orthogonal internally.  The question of how they meet a Conway’s law style of orthogonality depends on a team.  If your team has designers, and developers separately working on style/structure and behavior, the Marionette version may allow for more efficient division of labor, with communication centering on class based communication.  If you instead have a group of polyglot front end developers who implement mocks from designers across all 3 areas, the React version will instead present a simpler implementation that maps better to your team, with the focus on interfaces across different components.</p>
<p>In the end decisions like this are an exercise in understanding context and preferences.  What will make your team productive? You can accept the coupling of the first example in order to gain the benefits of small focused modules.  Or you can take the larger scope of the React component in exchange for keeping all information relevant to a component in one place.  Are you making single developers responsible for a set of components?  Or are they responsible for behavior generally, with design handled by someone else? Make the decisions that work for your project.</p>
<h3>More Resources</h3>
<ul>
<li><a href=\"http://amzn.to/2hNzQ0t\">The Pragmatic Programmer</a> is a great book. Much of the vocabulary in this post comes from its Chapter 8, but the whole book is worth a read and is highly recommended.</li>
<li>CSS Tricks has a good look at the <a href=\"https://css-tricks.com/the-debate-around-do-we-even-need-css-anymore/\">pros and cons of CSS in JS</a>.  I focused on theory here, but this is much more hands on about the practical concerns around this debate.</li>
</ul>
<div class=\"footnotes\">
<hr>
<ol>
<li id=\"fn-1\">This is a bit of a generalization.  React provides an abstraction over HTML that replaces hand-written HTML, but doesn’t specify anything for CSS, CSS in JS solutions are simply popular in that community.  Vue and Angular both allow  CSS and HTML to share a file with JS, but CSS can still be handled separately.<a href=\"#fnref-1\" class=\"footnote-backref\">↩</a></li>
<li id=\"fn-2\">There are some distinctions about CSS in JS vs importing CSS into JS using webpack that I’m not really dealing with here.  This is a post about how to think about these decisions moreso than the specific options for bundling CSS and JS<a href=\"#fnref-2\" class=\"footnote-backref\">↩</a></li>
<li id=\"fn-3\">The root HTML element in any Marionette component is always defined implicitly in JavaScript, and Handlebars is an expressive templating language that can handle more than structure.<a href=\"#fnref-3\" class=\"footnote-backref\">↩</a></li>
</ol>
</div>",
                    "author": {
                      "@type": "Person",
                      "name": "Ben McCormick"
                      "email": "mailto:ben@benmccormick.org",
                      "image": "/profile_pic.jpg",
                      "jobTitle": "Software Engineer",
                      "alumniOf": "Duke",
                      "birthPlace": "Pittsburgh, PA",
                      "gender": "male",
                      "url": "http://benmccormick.org",
                	    "sameAs" : [
                        "https://www.linkedin.com/in/benmccormick",
                        "http://twitter.com/_benmccormick",
                      ]
                   }
                }</script><link href="https://fonts.googleapis.com/css?family=Inter|Work+Sans&amp;display=swap" rel="stylesheet"/><link as="script" rel="preload" href="/webpack-runtime-27bb7198da2874802a78.js"/><link as="script" rel="preload" href="/framework-33fd2a29159c65f5ba17.js"/><link as="script" rel="preload" href="/app-adfb23151c91a243bacb.js"/><link as="script" rel="preload" href="/commons-62528db37e44861acd08.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-4516b2a8ec63c40e3c81.js"/><link as="fetch" rel="preload" href="/page-data/2017/01/03/orthogonality-and-css-in-js/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body class="landing-page" style="background:#FCFCFC"><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css hkr7jf">.css-hkr7jf{width:100%;max-width:1000px;margin:0 auto;padding:2.1rem 20px;}</style><div class="css-hkr7jf em100y90"><style data-emotion="css 1isguim">.css-1isguim{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-bottom:2rem;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}</style><div class="css-1isguim e1b8f8ar3"><style data-emotion="css txnzm6">.css-txnzm6{margin:0 20px 0 0;padding-bottom:0;}.css-txnzm6 a{box-shadow:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;}.css-txnzm6 a:hover{-webkit-text-decoration:none;text-decoration:none;}</style><h3 class="css-txnzm6 e1b8f8ar1"><a name="title" href="/">Ben McCormick</a></h3><style data-emotion="css 15ui8t3">.css-15ui8t3{color:#777777;}</style><div class="css-15ui8t3 e1b8f8ar0"><a class="css-1yerfx4" href="/archive/">Blog</a><style data-emotion="css 12jh0su">.css-12jh0su{padding:0 0.5rem;}@media all and (max-width: 400px){.css-12jh0su{padding:0 0.25rem;}}</style><span class="css-12jh0su e1b8f8ar2"></span><a class="css-1yerfx4" href="/subscribe/">Subscribe</a><span class="css-12jh0su e1b8f8ar2"></span><a class="css-1yerfx4" href="/speaking/">Speaking</a><span class="css-12jh0su e1b8f8ar2"></span><a class="css-1yerfx4" href="http://twitter.com/_benmccormick">Twitter</a><span class="css-12jh0su e1b8f8ar2"></span><a class="css-1yerfx4" href="/about/">About</a></div></div><article class="markdown"><div class="post-title-area"><style data-emotion="css 1wdikty">.css-1wdikty{display:block;max-width:100%;}</style><h1 class="css-1wdikty e15djruj3">Orthogonality and CSS in JS</h1></div><div class="columns"><style data-emotion="css qsg3oo">.css-qsg3oo{max-width:100%;}.css-qsg3oo li{padding-left:10px;}.css-qsg3oo .reading-img img{width:150px;float:right;margin:0px 10px 20px 10px;}.css-qsg3oo img.full-width{max-height:none;}.css-qsg3oo img.half-width{max-height:none;width:50%;}</style><div class="css-qsg3oo e15djruj1"><p>One of the realities of the constant change in the web development world is that “best practices” are often hotly contested.  One issue that the front end community doesn’t seem to have come to a consensus on yet is how tightly to bundle JavaScript, HTML and CSS in code.  Should they be bundled and managed completely separately?  Kept in different files and imported together into JavaScript component files?  Or can we remove HTML and CSS files entirely and generate everything in JavaScript? This is a discussion that still comes up all the time in my <a href="https://twitter.com/thomasfuchs/status/810885087214637057">twitter</a> <a href="https://twitter.com/TheLarkInn/status/812089065210335232">feed</a>.</p>
<p>Many new frameworks that encourage a component based architecture (including React, Vue, and Angular2 <sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>) provide affordances for including HTML and CSS directly in JavaScript, but those solutions are not yet used universally.  Many people are still very happy keeping CSS bundled separately.  I have no idea what the <em>best</em> solution is.  But I am interested in how people talk about the problem.  One major argument I have seen from people advocating both sides is that their preferred approach encourages good “separation of concerns”.</p>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">I&#39;m moving from storing my CSS, JS and HTML in different files, to physically putting them on different drives. Keep those concerns separate</p>&mdash; Ben Lesh (@BenLesh) <a href="https://twitter.com/BenLesh/status/812092408519413761">December 23, 2016</a></blockquote>
<p>I’d like to take a deeper look at this and give some vocabulary that can hopefully help anyone working through discussions on how to manage CSS for components.  I’ll focus specifically on CSS since frameworks tend to be more agnostic to how it is blended with JS than they are about HTML, and on components since that is the main context in which people are arguing for blending of css. For this piece, I’ll consider a component to be a set of HTML, CSS, and JavaScript that combine to form a reusable piece of UI <sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>.</p>
<h3>Orthogonality, Cohesion, and Coupling</h3>
<p><a href="http://amzn.to/2hNzQ0t">The Pragmatic Programmer</a>, one of the best books ever written on Software Engineering, uses the following three terms when talking about “Separation of Concerns”: orthogonality, cohesion, and coupling.</p>
<p>Orthogonality is the idea that modules should be written in a way that a change in one module should not require changes in any other module.</p>
<blockquote>
<p>Two or more things are orthogonal if changes in one do not affect any of the others. In a well-designed system, the database code will be orthogonal to the user interface: you can change the interface without affecting the database, and swap databases without changing the interface.</p>
<p><strong>— The Pragmatic Programmer</strong></p>
</blockquote>
<p>Cohesion is a measure of how well the internal contents of a module relate to each other. A cohesive module is one with a single well defined purpose, where all code in the module is related to that purpose.  A less cohesive module might have multiple purposes, with pieces of code that are completely unrelated to each other.  <a href="https://sites.google.com/site/unclebobconsultingllc/">Robert C. Martin</a> describes this as each module having “a single reason to change”.</p>
<p>Coupling is a measure of how dependent different modules are on the internal workings of other modules. In a loosely coupled system, any module can be completely rewritten as long as it exposes the same public interface, without any other modules needing to change.  In a tightly coupled system, changing the internal details of one module may require changes in many other modules.</p>
<p>In the real world most systems are not purely orthogonal, and their modules are likely not 100% cohesive and uncoupled.  But striving for these goals is a good approximation of what many people mean when they talk about <em>separation of concerns</em>.</p>
<h3>Conways Law</h3>
<p><a href="http://amzn.to/2hNzQ0t">The Pragmatic Programmer</a> does touch on another application of orthogonality to software engineering:</p>
<blockquote>
<p>Have you noticed how some project teams are efficient, with everyone knowing what to do and contributing fully, while the members of other teams are constantly bickering and don’t seem able to get out of each other’s way?</p>
<p>Often this is an orthogonality issue. When teams are organized with lots of overlap, members are confused about responsibilities. Every change needs a meeting of the entire team, because any one of them might be affected.</p>
<p>How do you organize teams into groups with well-defined responsibilities and minimal overlap? There’s no simple answer. It depends partly on the project and your analysis of the areas of potential change. It also depends on the people you have available. Our preference is to start by separating infrastructure from application. Each major infrastructure component (database, communications interface, middleware layer, and so on) gets its own subteam. Each obvious division of application functionality is similarly divided. Then we look at the people we have (or plan to have) and adjust the groupings accordingly.</p>
<p>You can get an informal measure of the orthogonality of a project team’s structure. Simply see how many people need to be involved in discussing each change that is requested. The larger the number, the less orthogonal the group. Clearly, an orthogonal team is more efficient.</p>
<p><strong>— The Pragmatic Programmer</strong></p>
</blockquote>
<p>The idea is that teams work more efficiently when each can work in its own areas without having to be bogged down by using another group (or individuals) code, and only interacting with those modules through a well communicated interface.  This is also known as <a href="https://en.wikipedia.org/wiki/Conway&#x27;s_law">Conway’s Law</a>, which is often used disparagingly but still stands as a true observation about real life code.</p>
<blockquote>
<p>organizations which design systems … are constrained to produce designs which are copies of the communication structures of these organizations</p>
<p><strong>— Conway’s Law</strong></p>
</blockquote>
<p>Although it usually isn’t phrased quite so explicitly, I believe Conway’s law is often related to what people mean when they discuss separation of concerns in front end development.</p>
<h3>Boundaries and Interfaces between CSS and JavaScript</h3>
<p>Let’s look at 2 examples of how CSS can be structured.  We’ll use a “page view counter” as our example. The element will show the number of users who have viewed the page, and respond to click events by showing a modal with the most popular pages on the site.
First, for a more traditional example, I’ll show a <a href="http://marionettejs.com/">Marionette</a> View, with separate CSS. For a more integrated example, I’ll use a React component.</p>
<h4>Marionette</h4>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">//view-counter.js</span>

<span class="token keyword">import</span> Mn <span class="token keyword">from</span> <span class="token string">'backbone.marionette'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> template <span class="token keyword">from</span> <span class="token string">'./view-counter.hbs'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getPageViews<span class="token punctuation">,</span> showModal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../util/page-views'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> ViewCounter <span class="token operator">=</span> Mn<span class="token punctuation">.</span>View<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  template<span class="token punctuation">,</span>

  <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">'page-view-counter'</span><span class="token punctuation">,</span>

  <span class="token literal-property property">ui</span><span class="token operator">:</span>  <span class="token punctuation">{</span>
    <span class="token string-property property">'showPageViewsModal'</span><span class="token operator">:</span> <span class="token string">'.show-modal-js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">events</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'click @ui.showPageViewsModal'</span><span class="token operator">:</span> <span class="token string">'showPageViewsModal'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  <span class="token function">templateContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">pageViews</span><span class="token operator">:</span> <span class="token function">getPageViews</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">showPageViewsModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="hbs"><pre class="language-hbs"><code class="language-hbs"><span class="token comment">{{!view-counter.hbs}}</span>

<span class="token punctuation">&lt;</span><span class="token variable">span</span> <span class="token variable">class</span><span class="token punctuation">=</span><span class="token string">"page-view-counter__title"</span><span class="token punctuation">></span> <span class="token variable">Page</span> <span class="token variable">Views</span><span class="token punctuation">:</span> <span class="token punctuation">&lt;</span><span class="token punctuation">/</span><span class="token variable">span</span><span class="token punctuation">></span>
<span class="token punctuation">&lt;</span><span class="token variable">span</span> <span class="token variable">class</span><span class="token punctuation">=</span><span class="token string">"page-view-counter__counter show-modal-js"</span><span class="token punctuation">></span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token variable">pageViews</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">&lt;</span><span class="token punctuation">/</span><span class="token variable">span</span><span class="token punctuation">></span></code></pre></div>
<div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">//view-counter.css

.page-view-counter</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.page-view-counter__title</span> <span class="token punctuation">{</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.page-view-counter__counter</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h4>React</h4>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">//view-counter.jsx</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> showModal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../util/page-views'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">PageViewCounter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">'flex'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>span style <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>
        <span class="token literal-property property">fontWeight</span><span class="token operator">:</span> <span class="token number">700</span><span class="token punctuation">,</span>
        <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">'3px'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>
        Page Views<span class="token operator">:</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
      <span class="token operator">&lt;</span>span style <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">'3px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>pageViews<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>The React and Marionette examples have set different module boundaries. In the Marionette example, we have defined 3 modules, split by code type.  Ignoring the leaky abstractions in the Marionette boundaries <sup id="fnref-3"><a href="#fn-3" class="footnote-ref">3</a></sup>, we can say we have 3 modules with clear singular purpose (styling, behavior,  structure) that use class names and  <code class="language-text">templateContext</code> as interfaces.  The handlebars file exposes classes, which the CSS uses to style elements and the JavaScript code uses as attachment points for event handling.  The JavaScript view passes data to the template through templateContext.  In the React code we have defined a single module that exports a component as its only external interface. The module’s single purpose could be defined as “rendering a PageViewCounter”.</p>
<h3>How do we define module boundaries?</h3>
<p>If you’re excited to read which of the above examples is the <em>correct</em> module boundary definition, I’m sorry to disappoint you.  It turns out that module boundaries are more of an art than a science.  Let’s consider each of these examples by the criteria we laid out above.</p>
<p>The Marionette modules are <strong>cohesive</strong>.  Each module is single purpose, with a clear reason why it might change.  The React module is also cohesive, as it describes a single atomic component. However, it has more reasons it might change.  We might change that module because of a change in the look and feel of the site, because of a change in the expected behavior of the click event, or because we’re changing the text inside the component.</p>
<p>The Marionette modules are not quite <strong>decoupled</strong>.  While this CSS doesn’t nest selectors and we don’t have any explicit dependencies on the HTML structure, it is still written in a way that assumes <code class="language-text">.page-view-counter__title</code> and <code class="language-text">.page-view-counter__counter</code> will be direct children of <code class="language-text">.page-view-counter</code>.  So changing the “internal details” of the Handlebars file by adding an extra element around those children would break the CSS. While the modules are not completely decoupled from each other, they don’t rely on any private details of other modules or global styles and can be used together as a reusable component.  The React module is similarly decoupled from the rest of the system, and as a single module faces no internal coupling issues.</p>
<p>Both components should be <strong>orthogonal</strong> from the rest of the system, even though the Marionette modules may be less orthogonal internally.  The question of how they meet a Conway’s law style of orthogonality depends on a team.  If your team has designers, and developers separately working on style/structure and behavior, the Marionette version may allow for more efficient division of labor, with communication centering on class based communication.  If you instead have a group of polyglot front end developers who implement mocks from designers across all 3 areas, the React version will instead present a simpler implementation that maps better to your team, with the focus on interfaces across different components.</p>
<p>In the end decisions like this are an exercise in understanding context and preferences.  What will make your team productive? You can accept the coupling of the first example in order to gain the benefits of small focused modules.  Or you can take the larger scope of the React component in exchange for keeping all information relevant to a component in one place.  Are you making single developers responsible for a set of components?  Or are they responsible for behavior generally, with design handled by someone else? Make the decisions that work for your project.</p>
<h3>More Resources</h3>
<ul>
<li><a href="http://amzn.to/2hNzQ0t">The Pragmatic Programmer</a> is a great book. Much of the vocabulary in this post comes from its Chapter 8, but the whole book is worth a read and is highly recommended.</li>
<li>CSS Tricks has a good look at the <a href="https://css-tricks.com/the-debate-around-do-we-even-need-css-anymore/">pros and cons of CSS in JS</a>.  I focused on theory here, but this is much more hands on about the practical concerns around this debate.</li>
</ul>
<div class="footnotes">
<hr>
<ol>
<li id="fn-1">This is a bit of a generalization.  React provides an abstraction over HTML that replaces hand-written HTML, but doesn’t specify anything for CSS, CSS in JS solutions are simply popular in that community.  Vue and Angular both allow  CSS and HTML to share a file with JS, but CSS can still be handled separately.<a href="#fnref-1" class="footnote-backref">↩</a></li>
<li id="fn-2">There are some distinctions about CSS in JS vs importing CSS into JS using webpack that I’m not really dealing with here.  This is a post about how to think about these decisions moreso than the specific options for bundling CSS and JS<a href="#fnref-2" class="footnote-backref">↩</a></li>
<li id="fn-3">The root HTML element in any Marionette component is always defined implicitly in JavaScript, and Handlebars is an expressive templating language that can handle more than structure.<a href="#fnref-3" class="footnote-backref">↩</a></li>
</ol>
</div></div><style data-emotion="css nrqgw7">.css-nrqgw7{padding-left:2rem;overflow:hidden;}</style><div class="no-mobile css-nrqgw7 e15djruj0"><style data-emotion="css 1y23a7j">.css-1y23a7j{overflow:hidden;margin:0;}.css-1y23a7j #mc_embed_signup form{margin-bottom:20px;}@media all and (max-width: 700px){.css-1y23a7j{padding-right:0;width:100%!important;padding:0 10px;}.css-1y23a7j .mc-field-group{width:100%!important;}.css-1y23a7j .mc-field-group input{width:100%!important;font-size:0.8em;height:2.4em;}}</style><div class="css-1y23a7j e1qbom70"><div id="revue-embed"><form action="http://herdinglions.benmccormick.org/add_subscriber" method="post" id="revue-form" name="revue-form" target="_blank"><div class="revue-row"><div>Subscribe To My Newsletter</div><input type="email" class="revue-form-field" placeholder="Your email address..." name="member[email]" id="member_email"/><input type="submit" value="Subscribe" name="member[subscribe]" id="member_submit"/><div class="revue-form-footer">By subscribing, you agree with Revue’s<!-- --> <a target="_blank" href="https://www.getrevue.co/terms">Terms of Service</a> <!-- -->and<!-- --> <a target="_blank" href="https://www.getrevue.co/privacy">Privacy Policy</a>.</div></div></form></div></div><style data-emotion="css 1cdsqjf">.css-1cdsqjf{width:100%;overflow:hidden;margin:0 0 1rem 0;font-size:14px;position:relative;font-family:"Inter","Helvetica Neue","Helvetica",Arial,sans-serif;background:rgba(99, 159, 110, 0.25);border:1px solid rgba(90, 150, 100, 0.5);padding:4px;min-height:100px;opacity:0;-webkit-transition:opacity ease 3s;transition:opacity ease 3s;}@media all and (max-width: 700px){.css-1cdsqjf{display:none;}}</style><div class="css-1cdsqjf etmlefq0"></div><style data-emotion="css fbgm9t">.css-fbgm9t{font-size:13px;background-color:rgba(150, 178, 198, 0.4);border:1px solid rgb(150, 178, 198);padding:0.5rem;}.css-fbgm9t>h4{font-size:20px;margin-bottom:6px;}.css-fbgm9t>h6{font-size:16px;margin-bottom:6px;margin-top:12px;}</style><div class="css-fbgm9t e15djruj2"><h4>Article Info</h4><h6>Author</h6><a href="/about">Ben McCormick</a><h6>Publish Date</h6>January 3rd 2017<h6>Category</h6><a href="/category/software-productivity"><style data-emotion="css 1bs7qd7">.css-1bs7qd7:hover{-webkit-text-decoration:none;text-decoration:none;}</style><div class="css-1bs7qd7 e1nsgn8x0">Software Productivity</div></a></div></div></div></article></div><style data-emotion="css 1jou7jf">.css-1jou7jf{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:3em 0 1em 0;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;background-color:rgba(150, 178, 198, 0.4);border-top:1px solid rgb(150, 178, 198);}</style><div class="css-1jou7jf e7oz9l34"><style data-emotion="css 1iyv46l">.css-1iyv46l{width:100%;min-height:200px;max-width:960px;margin:0 auto;padding:0 1.05rem;display:grid;grid-template-columns:45% 45%;grid-column-gap:10%;grid-row-gap:30px;}@media all and (max-width: 450px){.css-1iyv46l{grid-template-columns:100%;}}</style><div class="css-1iyv46l e7oz9l33"><div><h2 class="css-0 e7oz9l31">Content</h2><style data-emotion="css xqihar">.css-xqihar{display:grid;grid-template-columns:1fr;grid-auto-rows:1fr;grid-row-gap:20px;}</style><div class="css-xqihar e7oz9l32"><a class="css-pe78rs" href="/archive/">Blog Archive</a><a class="css-pe78rs" href="/reviews-archive/">Book Reviews</a><a class="css-pe78rs" href="https://buttondown.email/benmccormick">Newsletter Archives</a><a class="css-pe78rs" href="/speaking/">Speaking</a></div></div><div><h2 class="css-0 e7oz9l31">Meta</h2><div class="css-xqihar e7oz9l32"><a class="css-pe78rs" href="/subscribe/">Subscribe To The Newsletter</a><a class="css-pe78rs" href="/built-with/">Built With</a><a class="css-pe78rs" href="http://twitter.com/_benmccormick">Personal Twitter</a><a class="css-pe78rs" href="http://twitter.com/benmccormickorg">Blog Twitter</a><a class="css-pe78rs" href="/about/">About Me</a></div></div><style data-emotion="css lfoydm">.css-lfoydm{font-family:"Inter","Helvetica Neue","Helvetica",Arial,sans-serif;font-size:14px;overflow:visible;white-space:nowrap;}</style><div class="css-lfoydm e7oz9l30">Copyright © 2012-2021 · Ben McCormick</div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-37323973-1', 'auto');
            ga('send', 'pageview');
        </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2017/01/03/orthogonality-and-css-in-js/";window.___webpackCompilationHash="c2b7a7d72d0beca34400";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-1160cb89470df92342a6.js"],"app":["/app-adfb23151c91a243bacb.js"],"component---src-pages-archive-js":["/component---src-pages-archive-js-0931ec0ced6486598e09.js"],"component---src-pages-index-js":["/component---src-pages-index-js-7a70f21961d3966b2ed9.js"],"component---src-pages-links-archive-js":["/component---src-pages-links-archive-js-897e809be2d8bce650a1.js"],"component---src-pages-lions-archive-js":["/component---src-pages-lions-archive-js-e5c6f4241adfca5990fb.js"],"component---src-pages-reviews-archive-js":["/component---src-pages-reviews-archive-js-76ac8639c604e8a08e4c.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-4516b2a8ec63c40e3c81.js"],"component---src-templates-category-page-js":["/component---src-templates-category-page-js-162607b2be33c1e98678.js"],"component---src-templates-topic-page-js":["/component---src-templates-topic-page-js-e54725d3d472f5e6a7c6.js"]};/*]]>*/</script><script src="/polyfill-1160cb89470df92342a6.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-4516b2a8ec63c40e3c81.js" async=""></script><script src="/commons-62528db37e44861acd08.js" async=""></script><script src="/app-adfb23151c91a243bacb.js" async=""></script><script src="/framework-33fd2a29159c65f5ba17.js" async=""></script><script src="/webpack-runtime-27bb7198da2874802a78.js" async=""></script></body></html>