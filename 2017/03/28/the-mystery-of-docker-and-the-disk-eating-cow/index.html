<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=yyxgnp97qG"/><link rel="icon" type="image/png" href="/favicon-32x32.png?v=yyxgnp97qG" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png?v=yyxgnp97qG" sizes="16x16"/><link rel="manifest" href="/manifest.json"/><link rel="mask-icon" href="/safari-pinned-tab.svg?v=yyxgnp97qG" color="##0193e8"/><link rel="alternate" title="JSON Feed" type="application/json" href="/feed.json"/><link rel="shortcut icon" href="/favicon.ico?v=yyxgnp97qG"/><meta name="theme-color" content="#ffffff"/><title data-react-helmet="true"></title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.4 'Work Sans','Helvetica Neue','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Work Sans','Helvetica Neue','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:inherit;font-family:'Inter','Helvetica Neue','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.6rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:inherit;font-family:'Inter','Helvetica Neue','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.32578rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:inherit;font-family:'Inter','Helvetica Neue','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.20684rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:inherit;font-family:'Inter','Helvetica Neue','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:inherit;font-family:'Inter','Helvetica Neue','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.91028rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:inherit;font-family:'Inter','Helvetica Neue','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.86849rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}ul{margin-left:1.4rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.4rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;font-size:0.85rem;line-height:1.1;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.05rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;font-size:1rem;line-height:1.4rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}blockquote{margin-left:1.4rem;margin-right:1.4rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.05rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.05rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.4rem;margin-bottom:calc(1.05rem / 2);margin-top:calc(1.05rem / 2);}li > ul{margin-left:1.4rem;margin-bottom:calc(1.05rem / 2);margin-top:calc(1.05rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.05rem / 2);}code{font-size:0.85rem;line-height:1.4rem;}kbd{font-size:0.85rem;line-height:1.4rem;}samp{font-size:0.85rem;line-height:1.4rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.93333rem;padding-right:0.93333rem;padding-top:0.7rem;padding-bottom:calc(0.7rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;font-size:12px;}pre code{background:none;line-height:1.1;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:none;}h1,h2,h3,h4,h5,h6{line-height:1.2;}@media only screen and (max-width:480px){html{font-size:112.5%;}}</style><meta data-react-helmet="true" name="keywords" content="Docker Daisy Disk MacOS"/><meta data-react-helmet="true" name="description" content="Ben McCormick&#x27;s blog on JavaScript and Web Development"/><meta name="generator" content="Gatsby 4.6.0"/><style data-href="/styles.1cca886f470c0fa9d85b.css" data-identity="gatsby-global-css">.markdown pre{background:#343d46;color:#d8dee9;display:block;padding:.8rem}.markdown pre code:after{content:unset}.token.comment,.token.quote{color:#a7adba}.token.addition,.token.attr,.token.selector-tag,.token.string{color:#99c794}.token.doctag,.token.meta .token.meta-string,.token.regexp{color:#89ddf3}.token.built_in,.token.function{color:#5fb3b3}.token.name,.token.section,.token.selector-class,.token.selector-id,.token.title{color:#69c}.token.attribute,.token.class .token.title,.token.template-variable,.token.type,.token.variable{color:#fac863}.token.bullet,.token.link,.token.meta,.token.meta .token.keyword,.token.selector-attr,.token.selector-pseudo,.token.subst,.token.symbol{color:#f9ae58}.token.boolean,.token.deletion,.token.literal,.token.number{color:#f07178}.token.keyword{color:#c594c5}.token.formula{background:#a7adba}.token.emphasis{font-style:italic}.token.strong{font-weight:700}.gatsby-resp-image-wrapper{display:block;margin:40px auto 20px;max-width:75%}.bordered-img{border:3px solid ##0193e8}.img-group{display:flex;justify-content:space-between}.img-group img{height:auto;padding:0}.inline-img{display:inline-block;float:right;padding:2rem;width:45%}#bd-label{font-family:Inter,Helvetica Neue,Arial,sans-serif;font-weight:700}#bd-label.large-label{font-size:20px}#bd-email{padding-left:5px}#bd-email,#bd-submit{font-family:Inter,Helvetica Neue,Arial,sans-serif;font-size:14px}#bd-submit{background:#f1684e;border:none;border-radius:4px;color:#fff}@media (max-width:960px){#bd-email,#bd-submit{font-size:10px}#bd-label{font-size:12px}}.large-row #bd-email,.large-row #bd-submit{font-size:20px}@media (max-width:700px){.large-row #bd-email,.large-row #bd-submit{font-size:18px}}.bd-subscribe-form{display:block;margin:30px 0 50px}.bd-subscribe-row{grid-column-gap:5%;display:grid;grid-template-columns:60% 35%;grid-template-rows:1fr;margin-top:10px}@media (max-width:960px){.bd-subscribe-row{grid-row-gap:10%;grid-template-columns:1fr;grid-template-rows:1fr 1fr}}.twitter-tweet,twitterwidget{margin-left:auto;margin-right:auto}.carbon-wrap{grid-column-gap:10px;align-items:center;display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;margin-bottom:30px;padding-left:5px}@media (max-width:960px){.carbon-wrap{grid-row-gap:10px;grid-template-columns:1fr;grid-template-rows:110px 1fr;justify-items:center}}.carbon-wrap img{margin-bottom:0}.carbon-text{display:inline-block;line-height:1.3;overflow:hidden;padding:5px 5px 5px 0}.carbon-poweredby{bottom:0;color:#777;position:absolute;right:5px}.columns{grid-column-gap:25px;display:grid;grid-template-columns:665px 270px;grid-template-rows:1fr}@media (max-width:960px){.columns{grid-column-gap:2%;display:grid;grid-template-columns:70% 28%}}@media (max-width:700px){.columns{align-items:center;display:flex;flex-direction:column}.no-mobile{display:none}}@media (max-width:321px){html{font-size:100%!important}}body{color:#474747}a{color:#f1684e;cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}.footnote-backref,.footnote-ref{padding-left:3px;text-decoration:none}blockquote{background:#eee;border-left:5px solid #0193e8;font-size:.9rem;font-weight:400;margin:0 0 1rem;padding:1.5rem 2rem}blockquote p{margin-bottom:.667em}h3{color:#0193e8}h4{font-size:110%}.explanation{background:#eee;border-radius:10px;font-size:.85em;margin:20px auto;padding:10px}.footnotes{font-size:80%}.footnotes li>*{display:inline;margin-bottom:0}strong{color:#222}em{color:#666}.markdown iframe{margin:0 auto}</style><style id="glamor-styles">.css-1yerfx4,[data-css-1yerfx4]{color:#777777;font-size:16px;font-family:"Inter", "Helvetica Neue", "Helvetica", Arial, sans-serif;}.css-1yerfx4:hover,[data-css-1yerfx4]:hover{color:#F1684E;}.css-pe78rs,[data-css-pe78rs]{font-size:16px;font-family:"Inter", "Helvetica Neue", "Helvetica", Arial, sans-serif;}</style><script id="glamor-ids">
        // <![CDATA[
        window._glamor = ["1yerfx4","pe78rs"]
        // ]]>
        </script><title data-react-helmet="true">The Mystery Of Docker And The Disk-Eating Cow | benmccormick.org</title><script data-react-helmet="true" type="application/ld+json">{
                  "@context": "http://schema.org"
                  "@type": "BlogPosting",
                  "headline": "The Mystery Of Docker And The Disk-Eating Cow",
                  "genre": "Software Development",
                  "keywords": "Docker Daisy Disk MacOS",
                  "url": "http://benmccormick.org//2017/03/28/the-mystery-of-docker-and-the-disk-eating-cow/",
                  "image": "http://benmccormick.org/logo.png",
                  "datePublished": "2017-03-28",
                  
                  "articleBody": "<p>Yesterday morning I was innocently minding my own business, downloading some files, when I noticed that nearly all the disk space on my 256GB work laptop had been consumed.  This seemed rather unlikely to me, given that I’d only had the laptop for about a year and I didn’t store anything other than code and work documents on it.  Text files just don’t take up that much space most of the time.  So I decided to make a purchase I’d considered for a while, bought <a href=\"https://daisydiskapp.com/\">Daisy Disk</a>, and began investigating.</p>
<p>The first thing I noticed was a huge amount of the disk space (about half) was taken up by the <code class=\"language-text\">~/Library/Containers</code> folder. That folder contained my email history and also data on my <a href=\"https://www.docker.com/\">Docker</a> containers. Docker functions as a lightweight VM, and essentially holds copies of virtualized operating systems and file systems inside each docker container and image, so it made sense to me that it could be taking up a lot of space, though >120GB still seemed wrong for my paltry 4 containers.  So my first step was to delete all of the containers and images on my laptop.  That cleared about 20GB of space but still left my drive looking like this:</p>
<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 570px; \">
      <a class=\"gatsby-resp-image-link\" href=\"/static/738d6393507d403118839c48ca17b0da/98b29/daisy.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">
    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 74.82517482517483%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsrAAALLwGbQGAnAAACr0lEQVQ4y42T70sUQRjH7z+xwrubnZndu93Z3du7Wz1/a6gkZOWLQO2FhD+yTD1CpSIwKIpKsAgrM9GI6FVCYW+CkhJ9YxH1one+jKN0S8m9/cadR1qp+eLDPDMMn/k+zIyvUOiLwtZXCBfLilnhFB7sdYrqk060utURVrETiZc5PBx1glRzCBNZmGI6PBTJjhmobCzxUMRlijnrk5j4KnEd64gcOiSWmRvZmrDcWq5WdRtmtDiLHkkgpMWytTALPvgIE6nc5rQkG16QaZ5fCnt+qngBGvIIE57ERXbcATdzUJBq79aFTIBQ1QsEFAijGEUlR3GsOYnq6gYw2QCVjY2Um9JuIp1L/z4rDEgqyk/0eYev3UfjhXtoO/MM11uXMNq0AKEVIo9wUL4uJVsICRMbQippKdNKoHFyyru0vICrznm0fXqM44tv0DH5APXxejRUHUGAqlsl+1fIuJ7SFQtXnnZ54+k+9K7048DyMMR0B0aSt/Cq7gZq7drdCykVKdtIYGyu0xtbO4nW9BAK5y9C8xuoz69EIlSAPEn+fcP/b5mLVESxMTTV6j1CL3qcs6j7dgdF84NQB5uxd48CphhbirYUElmkLBJDy+lD3rTbh6EfXeh2zqEFN9GVvoyqjirsywuDKvq20j+EfqalDMVCpSj1Bkab8MLrx0P0YGT1FCbQgyffkyiqSSA/oILK+v9blpieCnKBcjXhleolaO9rwO2X7Zj42I27s50YGG5ETUUFgkTbXctBqn3JPFY/09YsJeoWkLhbJordKrvU3W+VuWYw5sZ4zKVcz/wGV1r/FX/zMydc8MmiYFXWbMhhCzQcgaxZUMNRmGEbpmqDh0wEmAbC9G0Tbkr62ce1+HOuxt4yxZzhoUgWqpgzJJSDixmJiRmyM68JE3NBqo3/AtIaBTYng0MOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>
  <img class=\"gatsby-resp-image-image\" alt=\"daisy disk showing 100+GB of docker\" title=\"daisy disk showing 100+GB of docker\" src=\"/static/738d6393507d403118839c48ca17b0da/432e7/daisy.png\" srcset=\"/static/738d6393507d403118839c48ca17b0da/a6b04/daisy.png 143w,
/static/738d6393507d403118839c48ca17b0da/0e2fe/daisy.png 285w,
/static/738d6393507d403118839c48ca17b0da/432e7/daisy.png 570w,
/static/738d6393507d403118839c48ca17b0da/77800/daisy.png 855w,
/static/738d6393507d403118839c48ca17b0da/98b29/daisy.png 937w\" sizes=\"(max-width: 570px) 100vw, 570px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">
  </a>
    </span></p>
<p>At this point, I was annoyed.  103.5 GB was taken up by some folder called Docker.qcow2 and Daisy Disk wouldn’t show me what was inside.  So I drilled in on the file system and immediately found out that Docker.qcow2 was not a directory like I’d assumed due to size, but a single 100+GB file.  At that point I decided to poll my teammates to see if I was the only one dealing with this:</p>
<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 570px; \">
      <a class=\"gatsby-resp-image-link\" href=\"/static/eafd4ae8771dc7dea9d49817f530f12f/5ebd7/slack.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">
    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 112.58741258741259%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsTAAALEwEAmpwYAAADaElEQVQ4y41VXY/cNBTNn0d9BcFPgAckhHjpqkJ0KWqBigf6Ad1lh87OJDOTxPG3k9j5cHKQvTOznd1Wi6Wjazv2udfX1ycJrXKsVitstzt47yPGcYwYhuFoJz9inoF5nk8QWvhurUVd10gaU6KqCgghoZSCMQZN06Jt27jIOQdnLfzQ41MtBNH3fVyb/PniNzz74XvkhGCdpsg2G0il0FqLfhgiuqGP4wh3Y61zEcFxOMWhJW3TQgqFfLtDtkqxSzfYrFJs1xnS5Qq7VQa2ziGLCkYo1AFSRxguTwhDCpIDc7OjMBlBnRGYbYVO1ehkjU416GWNQbcRfbC1xWAsetUcIzvkMxnGAcZaEGYghIFUDaiy0J2HHSc81OY74+Tt+Uucff41qJbIsg1IVcW8jaOHH0dMk8c8TftbPbXh2sO3aY94ZKca8KyEEAz5NkORb8GqEloJCFaBUQKlBGqj0NT6aAOU5HC2wdA79J07zSGtSmw3Kcoyx26bxcWCMwhOUZECZbEDZxScVZCCoW1qGC3Rdxbj0EWcEIYNAWFxsIE0EJEyjwjOSJEfyeMJOI2Ow54wjoRlUeDy4gLGaBBSoiIltFawtsU8+ZjDafYxb9N+7H14SUOED/A3/Uh4/tNTfPXFl7Cqgag4JBVomELLNCxTsZzaUqCl+7lKYppmTKPH5KcbjP62bA5HNusSbSXR5DzWowubqYqkgdDuycJcJwwc17FOXehTFUkj4eLvd/j58RMwQlGkW2TvV6AFgXMdRu+PtTbvS+QoDNN8vybDkf9ZrHD+7A80OYUsKBSTMLpGLTQMEaiJhE7L+Hr0dQ69zGE2FfS6QFtw9KaNr2lo3f2n53Iej10XDKbgcW603Q3cwfa3c22Ai/Dd/lLGzqFRAuvNBsvrazDOIYRArQ0aazF8oCT/pyX59Xu8+fUX5CVBKKGhH+LN7ZNyT1AfQvLk8RkeffYI2pgorgFBMKdPJP3BCGtjQMoSlDJIeavaAUHSm7bdq3jz0YjuOkqu3l3i6dmPSLMMFxeXeP36DRaLf/cOVBTQruvif+Oj8nUn6uTl89/x3TffIk1TXF0tsFwuQUgFzsUxssPG6QOpOsjVvQgXb//CqxfPQTlHnucoigKUsXjTjHForWMawk8sOAh9pXSMPpDeJfwPQa7mBT+92NQAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>
  <img class=\"gatsby-resp-image-image\" alt=\"daisy disk showing 100+GB of docker\" title=\"daisy disk showing 100+GB of docker\" src=\"/static/eafd4ae8771dc7dea9d49817f530f12f/432e7/slack.png\" srcset=\"/static/eafd4ae8771dc7dea9d49817f530f12f/a6b04/slack.png 143w,
/static/eafd4ae8771dc7dea9d49817f530f12f/0e2fe/slack.png 285w,
/static/eafd4ae8771dc7dea9d49817f530f12f/432e7/slack.png 570w,
/static/eafd4ae8771dc7dea9d49817f530f12f/5ebd7/slack.png 704w\" sizes=\"(max-width: 570px) 100vw, 570px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">
  </a>
    </span></p>
<p>So between the 5 of us, we each had “cow files” taking up between 23 and 103GB of disk space. Some Googling revealed a <a href=\"https://github.com/docker/for-mac/issues/371\">github thread</a> that showed this is a so far unsolved issue with Docker For Mac.  Summary: qcow2 files are a format for saving disk images.  Docker For Mac’s implementation works well for writing and updating images, but doesn’t automatically free up disk space when a container or image is deleted. So as you use and delete containers over time this file gradually grows.  I have a habit of deleting and recreating containers when I’m trying to debug something, which explains why I had a much larger file than others.  There isn’t currently a true fix for this issue, but you can delete the file.  You’ll lose all your containers and images, but when you recreate them the file will be small again.  There also is supposed to be some automatic limiting of the file.  The current cap is 64GB, but there is work on making it configurable.  Unfortunately the current cap is not respected if you had previously used docker-machine to control docker on your machine, which is how my file exceeded the cap.  I’m also unclear on what happens when the file hits the cap.  I get the impression that things stop working and you need to delete everything anyway (you just avoid running out of disk space on the host machine).</p>
<p>Fortunately it was no problem for me to delete everything, and so I was able to clear things out, at which point my disk looked a lot happier:</p>
<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 570px; \">
      <a class=\"gatsby-resp-image-link\" href=\"/static/22b1203e29be4211209bdd1c97f9bc85/7de01/daisy2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">
    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.94405594405594%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsRAAALEwFNUj0TAAACCElEQVQoz4WSvW/TYBCHs7IVJXE+3CZOYidxPuz4K7GjVImbZKChICSWSIXSSixV6dBOfJSFgYn/ACQG2JEYYGZkq8TCyIpYGdGDXqcOpapgOJ3O791zv7tzol0M0OUuWsrAaNxgtHVCuPUEP9zHNTfouVOa5QA13aGasdEkK/J63qMhd9Flj3rOpZ53I58QCXFSVepQSbaoJNuoKQNVxClzCYuBNdmh1xjjaEOsyjqtgk+3HuLVRiTiRDVtUbxqoqZs1KQAm5RWWmiS/ZcyATeVAdPgJkFzTC3rRLl+c8zI2VwAy6kORsFj1hviuwNGk01muzvM53sYioeWtpYKhWpL7kfFRqkfxaKZVR7Qb08XwErK4vmd23x7e8zndwe8+rTP0elrHn39yezWUzTJQFsCLexVH7c0RE976JIXqTaKAUFrsgCKDvPBhC8vH8D3h7z/dcxdTtj78YHe8IBWWizcI953J+8RmjN8bYyx2o+AXX2DoX3tzw7lFYN2zub+0XUmp9s4H6ccvnnMi+kz5uY21aw4mo2WsahlXJzCkK4S0lkbRGPb6np0mOWV61mbStpCvmKgKy6uFrKztsth8x6eEkSjxs2rkhWpii0+lrDE+d9B+HrOpibZtJUAJdcil9SpiKIzddp58IVaYYnLHkSh6FbLONQzztm3xcgXYf8EXny8LP6f/Qavx1wPt4+KbwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>
  <img class=\"gatsby-resp-image-image\" alt=\"daisy disk showing 100+GB of docker\" title=\"daisy disk showing 100+GB of docker\" src=\"/static/22b1203e29be4211209bdd1c97f9bc85/432e7/daisy2.png\" srcset=\"/static/22b1203e29be4211209bdd1c97f9bc85/a6b04/daisy2.png 143w,
/static/22b1203e29be4211209bdd1c97f9bc85/0e2fe/daisy2.png 285w,
/static/22b1203e29be4211209bdd1c97f9bc85/432e7/daisy2.png 570w,
/static/22b1203e29be4211209bdd1c97f9bc85/7de01/daisy2.png 794w\" sizes=\"(max-width: 570px) 100vw, 570px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">
  </a>
    </span></p>
<h3>Lessons Learned</h3>
<p>I had 3 takeaways from this interesting adventure.</p>
<ol>
<li>If you’re using Docker For Mac, keep an eye on your disk space.  If you’re able to occasionally delete and recreate your containers without data loss, consider occasionally doing that and deleting the cow file.  If you can’t do that, be careful how many containers you add and delete, and make sure you manage your disk space well.</li>
<li><a href=\"https://daisydiskapp.com/\">Daisy Disk</a> is awesome and highly recommended.  It’s an example of a rare breed: the beautiful system utility. The visualizations it shows are both pretty and useful; it made diagnosing this issue a breeze.</li>
<li>One more thing I learned from my coworkers slack yesterday: <code class=\"language-text\">ls</code> takes an <code class=\"language-text\">-h</code> argument that shows file sizes in KBs/MBs/GBs instead of all in bytes.  This is super helpful when examining large files.  Compare the 2 lists of files from my Downloads folder in the image below. The normal form is very nice for comparing 2 files side by side and seeing which one is bigger, but the second form is much more helpful when you want to get an idea of exactly how big something is, or communicate it to others.  Most of us don’t think about file sizes in terms of bytes anymore.</li>
</ol>
<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 570px; \">
      <a class=\"gatsby-resp-image-link\" href=\"/static/444921e84047cde23158b43eab28f35a/8c557/downloads.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">
    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 59.44055944055944%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB7klEQVQoz1VSWbKqMBRk/zuzShEJY0IIAUcQ5G6gc6uP4n3v41SAhE5PUd5ckNp7qNwd4zRjnufwnGc8n0+ZZVkCv82z7GFZZvn2er3Cuq6yLsuC7UzUNA1c14XOD7C2Rdu20FpjHB+o6xp5nqPrOpmqqmTKooC1FkPfYxiG78VcI6M1NwM3bdOAFxRFjmma0DmH4/H4/m4MskyhLEsopZApJaD3+/1fJYiMMWQV+t4LGIc/3a5XxPEBcRxD6xpFniNNU2GfJAniw0HOZlkm7KdpCo/HA1FVlTDGBO+9SKyqGmmqwE0yIUOeKYoCp9NJLNjv99jtdvJOUJLp+z5cLhdEjbVonQvDcIbvOj7LIcqgP7zEOYfWtbwYWhvxsW0tzuezSF3XFVs4Ue0uKLsx1P6O22MSoGmShMMn6UA/t9Q5kvDPj6S8pS/tYCi11jC2DdZ5aP32kAzIjpLIigwpmX5xlWY4R5ni3fyu2SdlhmLtJxQjAAyFcpRKBdwYLWD0j4HQWzaAPpPZ1sMvIGvjfY/GNF/A6/UqIGVZfEPhMJC/tI+ihMDjOP7V5g3o2bXAxAnofRdOSULwUFVlyPM8ZFkuNUqSJCilwrtuPdWF2+32H6D4wQLznTIpmQz5TDZboTn0kPvzsjAgJo2PbPwCI65i9sU9jH0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>
  <img class=\"gatsby-resp-image-image\" alt=\"daisy disk showing 100+GB of docker\" title=\"daisy disk showing 100+GB of docker\" src=\"/static/444921e84047cde23158b43eab28f35a/432e7/downloads.png\" srcset=\"/static/444921e84047cde23158b43eab28f35a/a6b04/downloads.png 143w,
/static/444921e84047cde23158b43eab28f35a/0e2fe/downloads.png 285w,
/static/444921e84047cde23158b43eab28f35a/432e7/downloads.png 570w,
/static/444921e84047cde23158b43eab28f35a/8c557/downloads.png 700w\" sizes=\"(max-width: 570px) 100vw, 570px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">
  </a>
    </span></p>",
                    "author": {
                      "@type": "Person",
                      "name": "Ben McCormick"
                      "email": "mailto:ben@benmccormick.org",
                      "image": "/profile_pic.jpg",
                      "jobTitle": "Software Engineer",
                      "alumniOf": "Duke",
                      "birthPlace": "Pittsburgh, PA",
                      "gender": "male",
                      "url": "http://benmccormick.org",
                	    "sameAs" : [
                        "https://www.linkedin.com/in/benmccormick",
                        "http://twitter.com/_benmccormick",
                      ]
                   }
                }</script><link href="https://fonts.googleapis.com/css?family=Inter|Work+Sans&amp;display=swap" rel="stylesheet"/><link as="script" rel="preload" href="/webpack-runtime-8ea7416905922108737d.js"/><link as="script" rel="preload" href="/framework-33fd2a29159c65f5ba17.js"/><link as="script" rel="preload" href="/app-adfb23151c91a243bacb.js"/><link as="script" rel="preload" href="/commons-62528db37e44861acd08.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-b9f8b3ddcec9dc33a020.js"/><link as="fetch" rel="preload" href="/page-data/2017/03/28/the-mystery-of-docker-and-the-disk-eating-cow/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body class="landing-page" style="background:#FCFCFC"><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css hkr7jf">.css-hkr7jf{width:100%;max-width:1000px;margin:0 auto;padding:2.1rem 20px;}</style><div class="css-hkr7jf em100y90"><style data-emotion="css 1isguim">.css-1isguim{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-bottom:2rem;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}</style><div class="css-1isguim e1b8f8ar3"><style data-emotion="css txnzm6">.css-txnzm6{margin:0 20px 0 0;padding-bottom:0;}.css-txnzm6 a{box-shadow:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;}.css-txnzm6 a:hover{-webkit-text-decoration:none;text-decoration:none;}</style><h3 class="css-txnzm6 e1b8f8ar1"><a name="title" href="/">Ben McCormick</a></h3><style data-emotion="css 15ui8t3">.css-15ui8t3{color:#777777;}</style><div class="css-15ui8t3 e1b8f8ar0"><a class="css-1yerfx4" href="/archive/">Blog</a><style data-emotion="css 12jh0su">.css-12jh0su{padding:0 0.5rem;}@media all and (max-width: 400px){.css-12jh0su{padding:0 0.25rem;}}</style><span class="css-12jh0su e1b8f8ar2"></span><a class="css-1yerfx4" href="/subscribe/">Subscribe</a><span class="css-12jh0su e1b8f8ar2"></span><a class="css-1yerfx4" href="/speaking/">Speaking</a><span class="css-12jh0su e1b8f8ar2"></span><a class="css-1yerfx4" href="http://twitter.com/_benmccormick">Twitter</a><span class="css-12jh0su e1b8f8ar2"></span><a class="css-1yerfx4" href="/about/">About</a></div></div><article class="markdown"><div class="post-title-area"><style data-emotion="css 1wdikty">.css-1wdikty{display:block;max-width:100%;}</style><h1 class="css-1wdikty e15djruj3">The Mystery Of Docker And The Disk-Eating Cow</h1></div><div class="columns"><style data-emotion="css qsg3oo">.css-qsg3oo{max-width:100%;}.css-qsg3oo li{padding-left:10px;}.css-qsg3oo .reading-img img{width:150px;float:right;margin:0px 10px 20px 10px;}.css-qsg3oo img.full-width{max-height:none;}.css-qsg3oo img.half-width{max-height:none;width:50%;}</style><div class="css-qsg3oo e15djruj1"><p>Yesterday morning I was innocently minding my own business, downloading some files, when I noticed that nearly all the disk space on my 256GB work laptop had been consumed.  This seemed rather unlikely to me, given that I’d only had the laptop for about a year and I didn’t store anything other than code and work documents on it.  Text files just don’t take up that much space most of the time.  So I decided to make a purchase I’d considered for a while, bought <a href="https://daisydiskapp.com/">Daisy Disk</a>, and began investigating.</p>
<p>The first thing I noticed was a huge amount of the disk space (about half) was taken up by the <code class="language-text">~/Library/Containers</code> folder. That folder contained my email history and also data on my <a href="https://www.docker.com/">Docker</a> containers. Docker functions as a lightweight VM, and essentially holds copies of virtualized operating systems and file systems inside each docker container and image, so it made sense to me that it could be taking up a lot of space, though >120GB still seemed wrong for my paltry 4 containers.  So my first step was to delete all of the containers and images on my laptop.  That cleared about 20GB of space but still left my drive looking like this:</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 570px; ">
      <a class="gatsby-resp-image-link" href="/static/738d6393507d403118839c48ca17b0da/98b29/daisy.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 74.82517482517483%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsrAAALLwGbQGAnAAACr0lEQVQ4y42T70sUQRjH7z+xwrubnZndu93Z3du7Wz1/a6gkZOWLQO2FhD+yTD1CpSIwKIpKsAgrM9GI6FVCYW+CkhJ9YxH1one+jKN0S8m9/cadR1qp+eLDPDMMn/k+zIyvUOiLwtZXCBfLilnhFB7sdYrqk060utURVrETiZc5PBx1glRzCBNZmGI6PBTJjhmobCzxUMRlijnrk5j4KnEd64gcOiSWmRvZmrDcWq5WdRtmtDiLHkkgpMWytTALPvgIE6nc5rQkG16QaZ5fCnt+qngBGvIIE57ERXbcATdzUJBq79aFTIBQ1QsEFAijGEUlR3GsOYnq6gYw2QCVjY2Um9JuIp1L/z4rDEgqyk/0eYev3UfjhXtoO/MM11uXMNq0AKEVIo9wUL4uJVsICRMbQippKdNKoHFyyru0vICrznm0fXqM44tv0DH5APXxejRUHUGAqlsl+1fIuJ7SFQtXnnZ54+k+9K7048DyMMR0B0aSt/Cq7gZq7drdCykVKdtIYGyu0xtbO4nW9BAK5y9C8xuoz69EIlSAPEn+fcP/b5mLVESxMTTV6j1CL3qcs6j7dgdF84NQB5uxd48CphhbirYUElmkLBJDy+lD3rTbh6EfXeh2zqEFN9GVvoyqjirsywuDKvq20j+EfqalDMVCpSj1Bkab8MLrx0P0YGT1FCbQgyffkyiqSSA/oILK+v9blpieCnKBcjXhleolaO9rwO2X7Zj42I27s50YGG5ETUUFgkTbXctBqn3JPFY/09YsJeoWkLhbJordKrvU3W+VuWYw5sZ4zKVcz/wGV1r/FX/zMydc8MmiYFXWbMhhCzQcgaxZUMNRmGEbpmqDh0wEmAbC9G0Tbkr62ce1+HOuxt4yxZzhoUgWqpgzJJSDixmJiRmyM68JE3NBqo3/AtIaBTYng0MOAAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="daisy disk showing 100+GB of docker" title="daisy disk showing 100+GB of docker" src="/static/738d6393507d403118839c48ca17b0da/432e7/daisy.png" srcset="/static/738d6393507d403118839c48ca17b0da/a6b04/daisy.png 143w,
/static/738d6393507d403118839c48ca17b0da/0e2fe/daisy.png 285w,
/static/738d6393507d403118839c48ca17b0da/432e7/daisy.png 570w,
/static/738d6393507d403118839c48ca17b0da/77800/daisy.png 855w,
/static/738d6393507d403118839c48ca17b0da/98b29/daisy.png 937w" sizes="(max-width: 570px) 100vw, 570px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
  </a>
    </span></p>
<p>At this point, I was annoyed.  103.5 GB was taken up by some folder called Docker.qcow2 and Daisy Disk wouldn’t show me what was inside.  So I drilled in on the file system and immediately found out that Docker.qcow2 was not a directory like I’d assumed due to size, but a single 100+GB file.  At that point I decided to poll my teammates to see if I was the only one dealing with this:</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 570px; ">
      <a class="gatsby-resp-image-link" href="/static/eafd4ae8771dc7dea9d49817f530f12f/5ebd7/slack.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 112.58741258741259%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsTAAALEwEAmpwYAAADaElEQVQ4y41VXY/cNBTNn0d9BcFPgAckhHjpqkJ0KWqBigf6Ad1lh87OJDOTxPG3k9j5cHKQvTOznd1Wi6Wjazv2udfX1ycJrXKsVitstzt47yPGcYwYhuFoJz9inoF5nk8QWvhurUVd10gaU6KqCgghoZSCMQZN06Jt27jIOQdnLfzQ41MtBNH3fVyb/PniNzz74XvkhGCdpsg2G0il0FqLfhgiuqGP4wh3Y61zEcFxOMWhJW3TQgqFfLtDtkqxSzfYrFJs1xnS5Qq7VQa2ziGLCkYo1AFSRxguTwhDCpIDc7OjMBlBnRGYbYVO1ehkjU416GWNQbcRfbC1xWAsetUcIzvkMxnGAcZaEGYghIFUDaiy0J2HHSc81OY74+Tt+Uucff41qJbIsg1IVcW8jaOHH0dMk8c8TftbPbXh2sO3aY94ZKca8KyEEAz5NkORb8GqEloJCFaBUQKlBGqj0NT6aAOU5HC2wdA79J07zSGtSmw3Kcoyx26bxcWCMwhOUZECZbEDZxScVZCCoW1qGC3Rdxbj0EWcEIYNAWFxsIE0EJEyjwjOSJEfyeMJOI2Ow54wjoRlUeDy4gLGaBBSoiIltFawtsU8+ZjDafYxb9N+7H14SUOED/A3/Uh4/tNTfPXFl7Cqgag4JBVomELLNCxTsZzaUqCl+7lKYppmTKPH5KcbjP62bA5HNusSbSXR5DzWowubqYqkgdDuycJcJwwc17FOXehTFUkj4eLvd/j58RMwQlGkW2TvV6AFgXMdRu+PtTbvS+QoDNN8vybDkf9ZrHD+7A80OYUsKBSTMLpGLTQMEaiJhE7L+Hr0dQ69zGE2FfS6QFtw9KaNr2lo3f2n53Iej10XDKbgcW603Q3cwfa3c22Ai/Dd/lLGzqFRAuvNBsvrazDOIYRArQ0aazF8oCT/pyX59Xu8+fUX5CVBKKGhH+LN7ZNyT1AfQvLk8RkeffYI2pgorgFBMKdPJP3BCGtjQMoSlDJIeavaAUHSm7bdq3jz0YjuOkqu3l3i6dmPSLMMFxeXeP36DRaLf/cOVBTQruvif+Oj8nUn6uTl89/x3TffIk1TXF0tsFwuQUgFzsUxssPG6QOpOsjVvQgXb//CqxfPQTlHnucoigKUsXjTjHForWMawk8sOAh9pXSMPpDeJfwPQa7mBT+92NQAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="daisy disk showing 100+GB of docker" title="daisy disk showing 100+GB of docker" src="/static/eafd4ae8771dc7dea9d49817f530f12f/432e7/slack.png" srcset="/static/eafd4ae8771dc7dea9d49817f530f12f/a6b04/slack.png 143w,
/static/eafd4ae8771dc7dea9d49817f530f12f/0e2fe/slack.png 285w,
/static/eafd4ae8771dc7dea9d49817f530f12f/432e7/slack.png 570w,
/static/eafd4ae8771dc7dea9d49817f530f12f/5ebd7/slack.png 704w" sizes="(max-width: 570px) 100vw, 570px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
  </a>
    </span></p>
<p>So between the 5 of us, we each had “cow files” taking up between 23 and 103GB of disk space. Some Googling revealed a <a href="https://github.com/docker/for-mac/issues/371">github thread</a> that showed this is a so far unsolved issue with Docker For Mac.  Summary: qcow2 files are a format for saving disk images.  Docker For Mac’s implementation works well for writing and updating images, but doesn’t automatically free up disk space when a container or image is deleted. So as you use and delete containers over time this file gradually grows.  I have a habit of deleting and recreating containers when I’m trying to debug something, which explains why I had a much larger file than others.  There isn’t currently a true fix for this issue, but you can delete the file.  You’ll lose all your containers and images, but when you recreate them the file will be small again.  There also is supposed to be some automatic limiting of the file.  The current cap is 64GB, but there is work on making it configurable.  Unfortunately the current cap is not respected if you had previously used docker-machine to control docker on your machine, which is how my file exceeded the cap.  I’m also unclear on what happens when the file hits the cap.  I get the impression that things stop working and you need to delete everything anyway (you just avoid running out of disk space on the host machine).</p>
<p>Fortunately it was no problem for me to delete everything, and so I was able to clear things out, at which point my disk looked a lot happier:</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 570px; ">
      <a class="gatsby-resp-image-link" href="/static/22b1203e29be4211209bdd1c97f9bc85/7de01/daisy2.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.94405594405594%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsRAAALEwFNUj0TAAACCElEQVQoz4WSvW/TYBCHs7IVJXE+3CZOYidxPuz4K7GjVImbZKChICSWSIXSSixV6dBOfJSFgYn/ACQG2JEYYGZkq8TCyIpYGdGDXqcOpapgOJ3O791zv7tzol0M0OUuWsrAaNxgtHVCuPUEP9zHNTfouVOa5QA13aGasdEkK/J63qMhd9Flj3rOpZ53I58QCXFSVepQSbaoJNuoKQNVxClzCYuBNdmh1xjjaEOsyjqtgk+3HuLVRiTiRDVtUbxqoqZs1KQAm5RWWmiS/ZcyATeVAdPgJkFzTC3rRLl+c8zI2VwAy6kORsFj1hviuwNGk01muzvM53sYioeWtpYKhWpL7kfFRqkfxaKZVR7Qb08XwErK4vmd23x7e8zndwe8+rTP0elrHn39yezWUzTJQFsCLexVH7c0RE976JIXqTaKAUFrsgCKDvPBhC8vH8D3h7z/dcxdTtj78YHe8IBWWizcI953J+8RmjN8bYyx2o+AXX2DoX3tzw7lFYN2zub+0XUmp9s4H6ccvnnMi+kz5uY21aw4mo2WsahlXJzCkK4S0lkbRGPb6np0mOWV61mbStpCvmKgKy6uFrKztsth8x6eEkSjxs2rkhWpii0+lrDE+d9B+HrOpibZtJUAJdcil9SpiKIzddp58IVaYYnLHkSh6FbLONQzztm3xcgXYf8EXny8LP6f/Qavx1wPt4+KbwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="daisy disk showing 100+GB of docker" title="daisy disk showing 100+GB of docker" src="/static/22b1203e29be4211209bdd1c97f9bc85/432e7/daisy2.png" srcset="/static/22b1203e29be4211209bdd1c97f9bc85/a6b04/daisy2.png 143w,
/static/22b1203e29be4211209bdd1c97f9bc85/0e2fe/daisy2.png 285w,
/static/22b1203e29be4211209bdd1c97f9bc85/432e7/daisy2.png 570w,
/static/22b1203e29be4211209bdd1c97f9bc85/7de01/daisy2.png 794w" sizes="(max-width: 570px) 100vw, 570px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
  </a>
    </span></p>
<h3>Lessons Learned</h3>
<p>I had 3 takeaways from this interesting adventure.</p>
<ol>
<li>If you’re using Docker For Mac, keep an eye on your disk space.  If you’re able to occasionally delete and recreate your containers without data loss, consider occasionally doing that and deleting the cow file.  If you can’t do that, be careful how many containers you add and delete, and make sure you manage your disk space well.</li>
<li><a href="https://daisydiskapp.com/">Daisy Disk</a> is awesome and highly recommended.  It’s an example of a rare breed: the beautiful system utility. The visualizations it shows are both pretty and useful; it made diagnosing this issue a breeze.</li>
<li>One more thing I learned from my coworkers slack yesterday: <code class="language-text">ls</code> takes an <code class="language-text">-h</code> argument that shows file sizes in KBs/MBs/GBs instead of all in bytes.  This is super helpful when examining large files.  Compare the 2 lists of files from my Downloads folder in the image below. The normal form is very nice for comparing 2 files side by side and seeing which one is bigger, but the second form is much more helpful when you want to get an idea of exactly how big something is, or communicate it to others.  Most of us don’t think about file sizes in terms of bytes anymore.</li>
</ol>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 570px; ">
      <a class="gatsby-resp-image-link" href="/static/444921e84047cde23158b43eab28f35a/8c557/downloads.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.44055944055944%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB7klEQVQoz1VSWbKqMBRk/zuzShEJY0IIAUcQ5G6gc6uP4n3v41SAhE5PUd5ckNp7qNwd4zRjnufwnGc8n0+ZZVkCv82z7GFZZvn2er3Cuq6yLsuC7UzUNA1c14XOD7C2Rdu20FpjHB+o6xp5nqPrOpmqqmTKooC1FkPfYxiG78VcI6M1NwM3bdOAFxRFjmma0DmH4/H4/m4MskyhLEsopZApJaD3+/1fJYiMMWQV+t4LGIc/3a5XxPEBcRxD6xpFniNNU2GfJAniw0HOZlkm7KdpCo/HA1FVlTDGBO+9SKyqGmmqwE0yIUOeKYoCp9NJLNjv99jtdvJOUJLp+z5cLhdEjbVonQvDcIbvOj7LIcqgP7zEOYfWtbwYWhvxsW0tzuezSF3XFVs4Ue0uKLsx1P6O22MSoGmShMMn6UA/t9Q5kvDPj6S8pS/tYCi11jC2DdZ5aP32kAzIjpLIigwpmX5xlWY4R5ni3fyu2SdlhmLtJxQjAAyFcpRKBdwYLWD0j4HQWzaAPpPZ1sMvIGvjfY/GNF/A6/UqIGVZfEPhMJC/tI+ihMDjOP7V5g3o2bXAxAnofRdOSULwUFVlyPM8ZFkuNUqSJCilwrtuPdWF2+32H6D4wQLznTIpmQz5TDZboTn0kPvzsjAgJo2PbPwCI65i9sU9jH0AAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="daisy disk showing 100+GB of docker" title="daisy disk showing 100+GB of docker" src="/static/444921e84047cde23158b43eab28f35a/432e7/downloads.png" srcset="/static/444921e84047cde23158b43eab28f35a/a6b04/downloads.png 143w,
/static/444921e84047cde23158b43eab28f35a/0e2fe/downloads.png 285w,
/static/444921e84047cde23158b43eab28f35a/432e7/downloads.png 570w,
/static/444921e84047cde23158b43eab28f35a/8c557/downloads.png 700w" sizes="(max-width: 570px) 100vw, 570px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
  </a>
    </span></p></div><style data-emotion="css nrqgw7">.css-nrqgw7{padding-left:2rem;overflow:hidden;}</style><div class="no-mobile css-nrqgw7 e15djruj0"><style data-emotion="css 1y23a7j">.css-1y23a7j{overflow:hidden;margin:0;}.css-1y23a7j #mc_embed_signup form{margin-bottom:20px;}@media all and (max-width: 700px){.css-1y23a7j{padding-right:0;width:100%!important;padding:0 10px;}.css-1y23a7j .mc-field-group{width:100%!important;}.css-1y23a7j .mc-field-group input{width:100%!important;font-size:0.8em;height:2.4em;}}</style><div class="css-1y23a7j e1qbom70"><form action="https://buttondown.email/api/emails/embed-subscribe/benmccormick" method="post" target="popupwindow" class="embeddable-buttondown-form"><label for="bd-email" id="bd-label">Subscribe to the Newsletter</label><input type="hidden" value="1" name="embed"/><div class="bd-subscribe-row"><input type="email" name="email" id="bd-email" placeholder="Your Email"/><input type="submit" value="Subscribe" id="bd-submit"/></div></form></div><style data-emotion="css 1cdsqjf">.css-1cdsqjf{width:100%;overflow:hidden;margin:0 0 1rem 0;font-size:14px;position:relative;font-family:"Inter","Helvetica Neue","Helvetica",Arial,sans-serif;background:rgba(99, 159, 110, 0.25);border:1px solid rgba(90, 150, 100, 0.5);padding:4px;min-height:100px;opacity:0;-webkit-transition:opacity ease 3s;transition:opacity ease 3s;}@media all and (max-width: 700px){.css-1cdsqjf{display:none;}}</style><div class="css-1cdsqjf etmlefq0"></div><style data-emotion="css fbgm9t">.css-fbgm9t{font-size:13px;background-color:rgba(150, 178, 198, 0.4);border:1px solid rgb(150, 178, 198);padding:0.5rem;}.css-fbgm9t>h4{font-size:20px;margin-bottom:6px;}.css-fbgm9t>h6{font-size:16px;margin-bottom:6px;margin-top:12px;}</style><div class="css-fbgm9t e15djruj2"><h4>Article Info</h4><h6>Author</h6><a href="/about">Ben McCormick</a><h6>Publish Date</h6>March 28th 2017<h6>Category</h6><a href="/category/tools"><style data-emotion="css 1bs7qd7">.css-1bs7qd7:hover{-webkit-text-decoration:none;text-decoration:none;}</style><div class="css-1bs7qd7 e1nsgn8x0">Software Tools</div></a></div></div></div></article></div><style data-emotion="css 1jou7jf">.css-1jou7jf{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:3em 0 1em 0;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;background-color:rgba(150, 178, 198, 0.4);border-top:1px solid rgb(150, 178, 198);}</style><div class="css-1jou7jf e7oz9l34"><style data-emotion="css 1iyv46l">.css-1iyv46l{width:100%;min-height:200px;max-width:960px;margin:0 auto;padding:0 1.05rem;display:grid;grid-template-columns:45% 45%;grid-column-gap:10%;grid-row-gap:30px;}@media all and (max-width: 450px){.css-1iyv46l{grid-template-columns:100%;}}</style><div class="css-1iyv46l e7oz9l33"><div><h2 class="css-0 e7oz9l31">Content</h2><style data-emotion="css xqihar">.css-xqihar{display:grid;grid-template-columns:1fr;grid-auto-rows:1fr;grid-row-gap:20px;}</style><div class="css-xqihar e7oz9l32"><a class="css-pe78rs" href="/archive/">Blog Archive</a><a class="css-pe78rs" href="/reviews-archive/">Book Reviews</a><a class="css-pe78rs" href="https://buttondown.email/benmccormick">Newsletter Archives</a><a class="css-pe78rs" href="/speaking/">Speaking</a></div></div><div><h2 class="css-0 e7oz9l31">Meta</h2><div class="css-xqihar e7oz9l32"><a class="css-pe78rs" href="/subscribe/">Subscribe To The Newsletter</a><a class="css-pe78rs" href="/built-with/">Built With</a><a class="css-pe78rs" href="http://twitter.com/_benmccormick">Personal Twitter</a><a class="css-pe78rs" href="http://twitter.com/benmccormickorg">Blog Twitter</a><a class="css-pe78rs" href="/about/">About Me</a></div></div><style data-emotion="css lfoydm">.css-lfoydm{font-family:"Inter","Helvetica Neue","Helvetica",Arial,sans-serif;font-size:14px;overflow:visible;white-space:nowrap;}</style><div class="css-lfoydm e7oz9l30">Copyright © 2012-2021 · Ben McCormick</div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-37323973-1', 'auto');
            ga('send', 'pageview');
        </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2017/03/28/the-mystery-of-docker-and-the-disk-eating-cow/";window.___webpackCompilationHash="e08d32c4c623d9d75c0a";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-1160cb89470df92342a6.js"],"app":["/app-adfb23151c91a243bacb.js"],"component---src-pages-archive-js":["/component---src-pages-archive-js-0931ec0ced6486598e09.js"],"component---src-pages-index-js":["/component---src-pages-index-js-7a70f21961d3966b2ed9.js"],"component---src-pages-links-archive-js":["/component---src-pages-links-archive-js-897e809be2d8bce650a1.js"],"component---src-pages-lions-archive-js":["/component---src-pages-lions-archive-js-e5c6f4241adfca5990fb.js"],"component---src-pages-reviews-archive-js":["/component---src-pages-reviews-archive-js-76ac8639c604e8a08e4c.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-b9f8b3ddcec9dc33a020.js"],"component---src-templates-category-page-js":["/component---src-templates-category-page-js-162607b2be33c1e98678.js"],"component---src-templates-topic-page-js":["/component---src-templates-topic-page-js-e54725d3d472f5e6a7c6.js"]};/*]]>*/</script><script src="/polyfill-1160cb89470df92342a6.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-b9f8b3ddcec9dc33a020.js" async=""></script><script src="/commons-62528db37e44861acd08.js" async=""></script><script src="/app-adfb23151c91a243bacb.js" async=""></script><script src="/framework-33fd2a29159c65f5ba17.js" async=""></script><script src="/webpack-runtime-8ea7416905922108737d.js" async=""></script></body></html>