<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=yyxgnp97qG"/><link rel="icon" type="image/png" href="/favicon-32x32.png?v=yyxgnp97qG" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png?v=yyxgnp97qG" sizes="16x16"/><link rel="manifest" href="/manifest.json"/><link rel="mask-icon" href="/safari-pinned-tab.svg?v=yyxgnp97qG" color="#57a3e8"/><link rel="alternate" title="JSON Feed" type="application/json" href="/feed.json"/><link rel="shortcut icon" href="/favicon.ico?v=yyxgnp97qG"/><meta name="theme-color" content="#ffffff"/><script type="text/javascript" src="//use.typekit.net/msd6bqv.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script><title data-react-helmet="true">Learning Vim in 2014: Search | benmccormick.org</title><meta data-react-helmet="true" name="description" content="How to search for anything in Vim"/><meta data-react-helmet="true" name="keywords" content="vim, search"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:site" content="@benmccormickorg"/><meta data-react-helmet="true" name="twitter:creator" content="@ben336"/><meta data-react-helmet="true" name="twitter:title" content="Learning Vim in 2014: Search"/><meta data-react-helmet="true" name="twitter:description" content="How to search for anything in Vim"/><meta data-react-helmet="true" name="twitter:image" content="http://benmccormick.org/logo.png"/><script data-react-helmet="true" type="application/ld+json">{
                "@context": "http://schema.org"
                "@type": "BlogPosting",
                "headline": "Learning Vim in 2014: Search",
                "genre": "Software Development",
                "keywords": "vim, search",
                "url": "http://benmccormick.org/2014/08/04/learning-vim-in-2014-search/",
                "image": "http://benmccormick.org/logo.png",
                "datePublished": "2014-08-3",
                "description": "How to search for anything in Vim",
                "articleBody": "<p>Have you ever tried to summarize something that was just too big to explain?  I’ve covered a lot of ground in my posts on Vim this past month, but it’s only scratched the surface of what Vim has to offer.  The goal was to create a foundation that people could start with, and then let them build on their own. There’s not a conclusive way to say what somebody “needs to know” when learning Vim.  Most people don’t (and shouldn’t) use every feature of the editor, they use the ones that make sense for them.  So I’ve tried to cover the things that I know people have found useful, and the philosophy behind how Vim works, and then let you figure out what you’d like to use on your own.  This post wraps up the series, but I wanted to highlight one last feature of Vim, its fantastic search capabilities.</p>
<h3>Search</h3>
<p>Vim has an extremely powerful built in search tool.  To use it, you can type <code>/</code> at anytime in normal mode to start entering search terms.  For instance <code>/foo</code> followed by enter searches for the next occurrence of <code>foo</code> in the document.  You can then skip over matches with <code>n</code> or go backwards with <code>N</code>.  If you wanted to start by searching backwards, you could have started with <code>?foo</code> instead of <code>/foo</code>, in which case <code>n</code> and <code>N</code> would reverse behavior, with <code>N</code> moving forward in the document and <code>n</code> moving back.  It’s easiest to think of <code>n</code> as “next match” and <code>N</code> as “previous match”, with the direction determined by the search operator, <code>/</code> or <code>?</code>.</p>
<p>The search tool can be used for more than simple literal expressions, it also takes regular expressions.  So <code>/fo.\|bar</code> will match <code>foo</code>, <code>fox</code>, and <code>bar</code>.  You also can search for lines containing both foo and bar with the expression <code>/.*foo\&amp;.*bar</code>.  If you want to dig deeper into Vim’s regex language, I’d recommend typing in <code>:h pattern</code> to check out the excellent documentation.</p>
<h3>Substitute</h3>
<p>Search is great, but in many cases what we want to use it for is replacing or acting on each instance.  Vim’s search and replace command looks something like <code>:%s/foo/bar/g</code>, which will replace all occurences of <code>foo</code> in the document with <code>bar</code>.  Let’s break that down a bit.  <code>:s</code> (substitute) is Vim’s search and replace command.  By default it only works on the current line, so in order to get it to act on the whole document I prepended the <code>%</code> character, which sets the range to include everything.  If you want a smaller range, you can select the text you want to act on in visual mode. Typing <code>:</code> will then preload the range into the command area.  Substitute takes an expression in the form <code>/&lt;search expression&gt;/&lt;replace string&gt;/&lt;modifiers&gt;</code>  where search expression defines the search, replace string is the text to substitute in, and modifiers are single letter arguments that change the behavior.  By default only the first instance of an expression per line is substituted, so I added the <code>g</code> modifier to tell Vim to substitute all instances of the search expression on a line.  Other useful modifiers are <code>i</code>, which makes the search case insensitive, and <code>c</code> which has Vim prompt for confirmation before substituting each instance. Confirmation is helpful if you want to change most but not all occurences of a phrase. One useful behavior of substitute to be aware of: If you leave the search expression blank, it reuses your last search.  So if you’ve been playing around with a regex to get the right expression, once you get it right you can type <code>:%s//&lt;replacement&gt;/g</code>, and it will replace all instances, without forcing you to retype your complicated regex.</p>
<p>Finally, it’s worth noting that search plays nicely with Vim’s <a href=\"http://benmccormick.org/2014/07/02/learning-vim-in-2014-vim-as-language/\">composable actions</a>, and you can use it as a motion command with <code>y</code>, <code>c</code>, <code>d</code> or other actions.  For instance <code>d/foo</code> will delete all text up to the next occurence of foo in the document. <code>y?foo</code> will yank all text backwards to the previous occurence of foo in the document.</p>
<h3>Inline Searching</h3>
<p>Along with the primary search and substitute commands, Vim has other specialty searching tools.  One of these is its <code>f</code> and <code>t</code> commands. <code>f&lt;char&gt;</code> moves to a single character on the current line.  While less powerful than <code>/</code>, this can be super useful because of its quick composability and guarantee of not moving out of the current scope.  It’s really easy to type <code>cf)</code> to delete through the end of the parentheses.  <code>t</code> works similarly, but is non-inclusive, so you can use <code>ct)</code> to delete everything up to and not including the parentheses.  I remember it as “change find character” and “change to character” respectively.  Like <code>/</code>, these commands support backwards and repeated search.  <code>F</code> and <code>T</code> search backwards on the current line, and <code>;</code> and <code>,</code> are the default commands for “next match” and “previous match” respectively.</p>
<h3>Cross-file searching with vimgrep and grep</h3>
<p>Searching within a file is nice, but what if you want to search in multiple files?  Vim provides 2 commands for that.  The first, <code>:vimgrep</code>, uses Vim’s internal regex engines to search across multiple files. You could for instance type <code>:vimgrep /function/i ./*.js</code> to search all Javascript files in the current directory for the “function” keyword.  You’d then be able to loop through them using the <code>:ln</code> and <code>:lp</code> commands.</p>
<p>The second command, <code>:grep</code>, integrates with an external search application (grep by default), to do the searching.  The advantage of the first is that it’s portable and will be available anywhere and everywhere that Vim is.  But generally external tools are going to be faster than Vim’s internal search engine.  Grep for instance is faster than vimgrep.  I personally use the external tool <a href=\"http://beyondgrep.com/\">ack</a> which is faster than grep.  Regardless though, Vim has support for whatever approach you choose to take.</p>
<h3>Cross-file replace with the arglist</h3>
<p>Up till now we’ve mostly been dealing with tasks that Vim has good answers for.  If you want to do a search and replace across multiple files in Vim though, you end up in some of the more esoteric parts of Vim-land.  In order to do a search and replace across multiple files in Vim, you need to first define a set of files to edit, and then run the replace command.  Unfortunately there is no way in Vim to cleanly do this all in a single command.  Instead you must pull your list of files from one of 3 places, the arglist, the buffer list, or the window list.  The arglist is by default the files that you specified to open when you initially opened Vim, the buffer list is your list of currently opened buffers, and the window list is the list of files in currently open windows.  Since you probably don’t want to have to open or view all the files that you want to run a search/replace on, and you may want to have files open or visible without running a replace on them, the arglist is the list of choice for replacements.  Vim allows you to edit the contents of the arglist at any time using the <code>:argadd</code> and <code>argdelete</code> commands.  So to replace <code>foo</code> with <code>bar</code> for all javascript files in the current directory you might type something like.</p>
<pre><code class=\"language-vimscript\">:<span class=\"hljs-keyword\">argd</span> * <span class=\"hljs-comment\">\"Clear arglist</span>
:<span class=\"hljs-keyword\">arga</span> ./*.js  <span class=\"hljs-comment\">\"Add javascript files</span>
:<span class=\"hljs-keyword\">argdo</span> %s/foo/bar/g <span class=\"hljs-comment\">\"Substitute on each file</span>
</code></pre>
<p><code>argdo</code> is the command to execute a command across all files in the arglist.  <code>bufdo</code>, <code>tabdo</code>, and <code>windo</code> work the same way for every “open buffer”, “active window in each tab”, and “window in the current tab” respectively. Personally I find this all to be a pain.  A single command that let you specify an action and a range to run it on like <code>:do '%s/foo/bar/g' ./*.js</code> would make plenty of sense.  But since that doesn’t exist, it’s worth at least knowing that the arglist is there, and being able to resort to it if necessary.</p>
<h3>The Power Of Search</h3>
<p>Most people start out using Vim knowing that they can move around with <em>hjkl</em> and switch between files with <code>:e &lt;filename&gt;</code> as they learn more they grow their toolbox. Search is a great tool for moving quickly around text in Vim, and for powerfully making big edits.  Searching allows you to allow your brain to focus on the big picture, rather than remembering exactly where each piece of code or content is located. Like everything else in Vim, it’s a tool that you can combine with other tools to create powerful workflows.</p>
<hr>
<h3>More Resources</h3>
<ul>
<li>
<p><a href=\"http://vimcasts.org/episodes/operating-on-search-matches-using-gn/\">Vimcasts</a> has a nice piece on the <code>gn</code> command, an alternative to <code>n</code> that lets you select the next search match in visual mode</p>
</li>
<li>
<p><a href=\"http://vim.wikia.com/wiki/Search_and_replace\">Vim’s wiki</a> also has a nice writeup of the <code>:substitute</code> command, with lots of examples and details.</p>
</li>
</ul>
",
                  "author": {
                    "@type": "Person",
                    "name": "Ben McCormick"
                    "email": "mailto:ben@benmccormick.org",
                    "image": "/profile_pic.jpg",
                    "jobTitle": "Software Engineer",
                    "alumniOf": "Duke",
                    "birthPlace": "Pittsburgh, PA",
                    "gender": "male",
                    "url": "http://benmccormick.org",
              	    "sameAs" : [
                      "https://www.linkedin.com/in/benmccormick",
                      "http://twitter.com/ben336",
                    ]
                 }
              }</script><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:125%/1.55em brandon-grotesque,Brandon Grotesque,Helvetica Neue,Helvetica,Arial,Lucida Sans,Geneva,Verdana,sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:brandon-grotesque,Brandon Grotesque,Helvetica Neue,Helvetica,Arial,Lucida Sans,Geneva,Verdana,sans-serif;font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:brandon-grotesque,Brandon Grotesque,Helvetica Neue,Helvetica,Arial,Lucida Sans,Geneva,Verdana,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.5rem;line-height:2.325rem;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:brandon-grotesque,Brandon Grotesque,Helvetica Neue,Helvetica,Arial,Lucida Sans,Geneva,Verdana,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.27542rem;line-height:1.55rem;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:brandon-grotesque,Brandon Grotesque,Helvetica Neue,Helvetica,Arial,Lucida Sans,Geneva,Verdana,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.17608rem;line-height:1.55rem;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:brandon-grotesque,Brandon Grotesque,Helvetica Neue,Helvetica,Arial,Lucida Sans,Geneva,Verdana,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.55rem;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:brandon-grotesque,Brandon Grotesque,Helvetica Neue,Helvetica,Arial,Lucida Sans,Geneva,Verdana,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.92211rem;line-height:1.55rem;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:brandon-grotesque,Brandon Grotesque,Helvetica Neue,Helvetica,Arial,Lucida Sans,Geneva,Verdana,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.88547rem;line-height:1.55rem;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}ul{margin-left:1.55rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.55rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;font-size:0.85rem;line-height:1.1;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.1625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;font-size:1rem;line-height:1.55rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}blockquote{margin-left:1.55rem;margin-right:1.55rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.1625rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.1625rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.55rem;margin-bottom:calc(1.1625rem / 2);margin-top:calc(1.1625rem / 2);}li > ul{margin-left:1.55rem;margin-bottom:calc(1.1625rem / 2);margin-top:calc(1.1625rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.1625rem / 2);}code{font-size:0.85rem;line-height:1.55rem;}kbd{font-size:0.85rem;line-height:1.55rem;}samp{font-size:0.85rem;line-height:1.55rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:tnum;-moz-font-feature-settings:tnum;-ms-font-feature-settings:tnum;-webkit-font-feature-settings:tnum;padding-left:1.03333rem;padding-right:1.03333rem;padding-top:0.775rem;padding-bottom:calc(0.775rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;font-size:75%;}pre code{background:none;line-height:1.1;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:"";}h1,h2,h3,h4,h5,h6{line-height:1.1;}@media only screen and (max-width:480px){html{font-size:112.5%;}}</style><style>.header-link{color:hsla(0,0%,39%,.7)}.header-link:hover{color:#e2777a}#carbonads{height:100px;font-size:14px;width:300px;position:relative;background:#f0f0f0}.carbon-wrap{height:100px;display:-ms-flexbox;display:flex}.carbon-text{padding:5px 10px;max-height:80px;display:inline-block;overflow:hidden;line-height:1.3}.carbon-poweredby{color:hsla(0,0%,39%,.7);position:absolute;right:5px;bottom:0}@media (max-width:600px){#carbonads,.no-mobile{display:none}.subscribe-block{padding-right:0;padding:0 10px}.subscribe-block,.subscribe-block .mc-field-group{width:100%!important}.subscribe-block .mc-field-group input{width:100%!important;font-size:.8em;height:2.4em}.up-next-block{width:100%!important;padding:0 10px}}@media (max-width:321px){html{font-size:100%!important}}.subscribe-container{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-wrap:wrap;flex-wrap:wrap}.subscribe-block{width:400px;padding-right:30px;overflow:hidden}.subscribe-block #mc_embed_signup form{margin-bottom:20px}.up-next-block{width:300px}.subscribe-button{color:#fff;background:#57a3e8;border-radius:4px;border:0;padding:5px 10px;margin:20px 0;cursor:pointer}.rss{padding-bottom:10px}.rss a{display:-ms-flexbox;display:flex}.rss-icon{display:block;width:17px;margin-right:.5em;height:50px}.rss-icon *{fill:#e2777a}.twitter-item{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;margin-bottom:15px}.twitter-item iframe{margin:0 0 0 10px}.hljs,.markdown pre{display:block;background:#fdf6e3;color:#657b83}.hljs{overflow-x:auto;padding:.5em}.hljs-comment,.hljs-quote{color:#93a1a1}.hljs-addition,.hljs-keyword,.hljs-selector-tag{color:#859900}.hljs-doctag,.hljs-literal,.hljs-meta .hljs-meta-string,.hljs-number,.hljs-regexp,.hljs-string{color:#2aa198}.hljs-name,.hljs-section,.hljs-selector-class,.hljs-selector-id,.hljs-title{color:#268bd2}.hljs-attr,.hljs-attribute,.hljs-class .hljs-title,.hljs-template-variable,.hljs-type,.hljs-variable{color:#b58900}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-meta .hljs-keyword,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-subst,.hljs-symbol{color:#cb4b16}.hljs-built_in,.hljs-deletion{color:#dc322f}.hljs-formula{background:#eee8d5}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}a{color:#e2777a;text-decoration:none}blockquote{border-left:5px solid #57a3e8;font-style:italic;background:#eee;font-weight:400;font-size:.9rem;padding:10px 20px;margin:0 0 30px -25px}blockquote p{margin-bottom:.667em}h2,h3{color:#57a3e8}.explanation{padding:10px;background:#eee;border-radius:10px;margin:20px auto;font-size:.85em}.footnote p{display:inline-block;margin-bottom:0}.article-body .reading-img img{width:150px;float:right;margin:0 10px 20px}.article-body img{max-height:200px;display:block;margin:40px auto 20px}.article-body img.full-width{max-height:none}.article-body img.half-width{max-height:none;width:50%}.bordered-img{border:3px solid #57a3e8}.img-group{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.img-group img{padding:0;height:auto}twitterwidget{margin-left:auto;margin-right:auto}.mc-field-group{width:400px;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-align:center;align-items:center;padding:8px 0}.mc-field-group input{border-radius:3px;max-width:350px;width:80vw;border:1px solid #ccc;margin-right:10px;height:30px}.mc-field-group label{font-size:.9em;font-weight:600}#mc-embedded-subscribe{color:#fff;background:#57a3e8;border-radius:4px;border:0;padding:0 10px;margin:10px 0;cursor:pointer;width:40vw}#mc-embedded-subscribe:hover{background:#3e8acf}.twitter-row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.twitter-row>div{padding-right:20px;min-width:300px}.category-icon-wrapper{color:rgba(87,163,232,.5)}.category-icon{display:inline-block;width:.75em;margin-right:.5em}.category-icon *{fill:#57a3e8;fill:rgba(87,163,232,.5)}.category-icon>i{height:30px}</style></head><body class="landing-page" style="background:#FCFCFC;padding:0 10px;"><div id="react-mount"><div style="max-width:40.3rem;margin-left:auto;margin-right:auto;padding:2.325rem 1.1625rem;" data-reactroot="" data-reactid="1" data-react-checksum="1465888022"><div style="display:flex;padding-bottom:0.5rem;margin-bottom:0.5rem;" data-reactid="2"><div style="flex-grow:3;display:flex;flex-direction:column;justify-content:space-around;" data-reactid="3"><h3 style="margin:0;padding-bottom:0;" data-reactid="4"><a style="box-shadow:none;text-decoration:none;color:inherit;" name="title" href="/" data-reactid="5">benmccormick.org</a></h3><div style="color:rgba(100,100,100, 0.7);" data-reactid="6"><a class="header-link" href="/subscribe/" data-reactid="7">Subscribe</a><span style="padding:0 0.33rem;" data-reactid="8">•</span><a class="header-link" href="/archive/" data-reactid="9">Archive</a><span style="padding:0 0.33rem;" data-reactid="10">•</span><a class="header-link" href="http://twitter.com/ben336" data-reactid="11">Twitter</a><span style="padding:0 0.33rem;" data-reactid="12">•</span><a class="header-link" href="/about/" data-reactid="13">About</a></div></div><div style="flex-shrink:2;" data-reactid="14"><span data-reactid="15"></span></div></div><div class="markdown" data-reactid="16"><!-- react-empty: 17 --><h5 style="display:block;color:rgba(100,100,100, 0.7);margin-bottom:0.3875rem;" data-reactid="18">August 3, 2014</h5><h1 style="margin-top:0;margin-bottom:1rem;" data-reactid="19">Learning Vim in 2014: Search</h1><div class="article-body" data-reactid="20"><p>Have you ever tried to summarize something that was just too big to explain?  I’ve covered a lot of ground in my posts on Vim this past month, but it’s only scratched the surface of what Vim has to offer.  The goal was to create a foundation that people could start with, and then let them build on their own. There’s not a conclusive way to say what somebody “needs to know” when learning Vim.  Most people don’t (and shouldn’t) use every feature of the editor, they use the ones that make sense for them.  So I’ve tried to cover the things that I know people have found useful, and the philosophy behind how Vim works, and then let you figure out what you’d like to use on your own.  This post wraps up the series, but I wanted to highlight one last feature of Vim, its fantastic search capabilities.</p>
<h3>Search</h3>
<p>Vim has an extremely powerful built in search tool.  To use it, you can type <code>/</code> at anytime in normal mode to start entering search terms.  For instance <code>/foo</code> followed by enter searches for the next occurrence of <code>foo</code> in the document.  You can then skip over matches with <code>n</code> or go backwards with <code>N</code>.  If you wanted to start by searching backwards, you could have started with <code>?foo</code> instead of <code>/foo</code>, in which case <code>n</code> and <code>N</code> would reverse behavior, with <code>N</code> moving forward in the document and <code>n</code> moving back.  It’s easiest to think of <code>n</code> as “next match” and <code>N</code> as “previous match”, with the direction determined by the search operator, <code>/</code> or <code>?</code>.</p>
<p>The search tool can be used for more than simple literal expressions, it also takes regular expressions.  So <code>/fo.\|bar</code> will match <code>foo</code>, <code>fox</code>, and <code>bar</code>.  You also can search for lines containing both foo and bar with the expression <code>/.*foo\&amp;.*bar</code>.  If you want to dig deeper into Vim’s regex language, I’d recommend typing in <code>:h pattern</code> to check out the excellent documentation.</p>
<h3>Substitute</h3>
<p>Search is great, but in many cases what we want to use it for is replacing or acting on each instance.  Vim’s search and replace command looks something like <code>:%s/foo/bar/g</code>, which will replace all occurences of <code>foo</code> in the document with <code>bar</code>.  Let’s break that down a bit.  <code>:s</code> (substitute) is Vim’s search and replace command.  By default it only works on the current line, so in order to get it to act on the whole document I prepended the <code>%</code> character, which sets the range to include everything.  If you want a smaller range, you can select the text you want to act on in visual mode. Typing <code>:</code> will then preload the range into the command area.  Substitute takes an expression in the form <code>/&lt;search expression&gt;/&lt;replace string&gt;/&lt;modifiers&gt;</code>  where search expression defines the search, replace string is the text to substitute in, and modifiers are single letter arguments that change the behavior.  By default only the first instance of an expression per line is substituted, so I added the <code>g</code> modifier to tell Vim to substitute all instances of the search expression on a line.  Other useful modifiers are <code>i</code>, which makes the search case insensitive, and <code>c</code> which has Vim prompt for confirmation before substituting each instance. Confirmation is helpful if you want to change most but not all occurences of a phrase. One useful behavior of substitute to be aware of: If you leave the search expression blank, it reuses your last search.  So if you’ve been playing around with a regex to get the right expression, once you get it right you can type <code>:%s//&lt;replacement&gt;/g</code>, and it will replace all instances, without forcing you to retype your complicated regex.</p>
<p>Finally, it’s worth noting that search plays nicely with Vim’s <a href="http://benmccormick.org/2014/07/02/learning-vim-in-2014-vim-as-language/">composable actions</a>, and you can use it as a motion command with <code>y</code>, <code>c</code>, <code>d</code> or other actions.  For instance <code>d/foo</code> will delete all text up to the next occurence of foo in the document. <code>y?foo</code> will yank all text backwards to the previous occurence of foo in the document.</p>
<h3>Inline Searching</h3>
<p>Along with the primary search and substitute commands, Vim has other specialty searching tools.  One of these is its <code>f</code> and <code>t</code> commands. <code>f&lt;char&gt;</code> moves to a single character on the current line.  While less powerful than <code>/</code>, this can be super useful because of its quick composability and guarantee of not moving out of the current scope.  It’s really easy to type <code>cf)</code> to delete through the end of the parentheses.  <code>t</code> works similarly, but is non-inclusive, so you can use <code>ct)</code> to delete everything up to and not including the parentheses.  I remember it as “change find character” and “change to character” respectively.  Like <code>/</code>, these commands support backwards and repeated search.  <code>F</code> and <code>T</code> search backwards on the current line, and <code>;</code> and <code>,</code> are the default commands for “next match” and “previous match” respectively.</p>
<h3>Cross-file searching with vimgrep and grep</h3>
<p>Searching within a file is nice, but what if you want to search in multiple files?  Vim provides 2 commands for that.  The first, <code>:vimgrep</code>, uses Vim’s internal regex engines to search across multiple files. You could for instance type <code>:vimgrep /function/i ./*.js</code> to search all Javascript files in the current directory for the “function” keyword.  You’d then be able to loop through them using the <code>:ln</code> and <code>:lp</code> commands.</p>
<p>The second command, <code>:grep</code>, integrates with an external search application (grep by default), to do the searching.  The advantage of the first is that it’s portable and will be available anywhere and everywhere that Vim is.  But generally external tools are going to be faster than Vim’s internal search engine.  Grep for instance is faster than vimgrep.  I personally use the external tool <a href="http://beyondgrep.com/">ack</a> which is faster than grep.  Regardless though, Vim has support for whatever approach you choose to take.</p>
<h3>Cross-file replace with the arglist</h3>
<p>Up till now we’ve mostly been dealing with tasks that Vim has good answers for.  If you want to do a search and replace across multiple files in Vim though, you end up in some of the more esoteric parts of Vim-land.  In order to do a search and replace across multiple files in Vim, you need to first define a set of files to edit, and then run the replace command.  Unfortunately there is no way in Vim to cleanly do this all in a single command.  Instead you must pull your list of files from one of 3 places, the arglist, the buffer list, or the window list.  The arglist is by default the files that you specified to open when you initially opened Vim, the buffer list is your list of currently opened buffers, and the window list is the list of files in currently open windows.  Since you probably don’t want to have to open or view all the files that you want to run a search/replace on, and you may want to have files open or visible without running a replace on them, the arglist is the list of choice for replacements.  Vim allows you to edit the contents of the arglist at any time using the <code>:argadd</code> and <code>argdelete</code> commands.  So to replace <code>foo</code> with <code>bar</code> for all javascript files in the current directory you might type something like.</p>
<pre><code class="language-vimscript">:<span class="hljs-keyword">argd</span> * <span class="hljs-comment">"Clear arglist</span>
:<span class="hljs-keyword">arga</span> ./*.js  <span class="hljs-comment">"Add javascript files</span>
:<span class="hljs-keyword">argdo</span> %s/foo/bar/g <span class="hljs-comment">"Substitute on each file</span>
</code></pre>
<p><code>argdo</code> is the command to execute a command across all files in the arglist.  <code>bufdo</code>, <code>tabdo</code>, and <code>windo</code> work the same way for every “open buffer”, “active window in each tab”, and “window in the current tab” respectively. Personally I find this all to be a pain.  A single command that let you specify an action and a range to run it on like <code>:do '%s/foo/bar/g' ./*.js</code> would make plenty of sense.  But since that doesn’t exist, it’s worth at least knowing that the arglist is there, and being able to resort to it if necessary.</p>
<h3>The Power Of Search</h3>
<p>Most people start out using Vim knowing that they can move around with <em>hjkl</em> and switch between files with <code>:e &lt;filename&gt;</code> as they learn more they grow their toolbox. Search is a great tool for moving quickly around text in Vim, and for powerfully making big edits.  Searching allows you to allow your brain to focus on the big picture, rather than remembering exactly where each piece of code or content is located. Like everything else in Vim, it’s a tool that you can combine with other tools to create powerful workflows.</p>
<hr>
<h3>More Resources</h3>
<ul>
<li>
<p><a href="http://vimcasts.org/episodes/operating-on-search-matches-using-gn/">Vimcasts</a> has a nice piece on the <code>gn</code> command, an alternative to <code>n</code> that lets you select the next search match in visual mode</p>
</li>
<li>
<p><a href="http://vim.wikia.com/wiki/Search_and_replace">Vim’s wiki</a> also has a nice writeup of the <code>:substitute</code> command, with lots of examples and details.</p>
</li>
</ul>
</div><div data-reactid="21"><hr data-reactid="22"/><div class="subscribe-container" data-reactid="23"><div class="subscribe-block" data-reactid="24"><p data-reactid="25"><!-- react-text: 26 -->Thanks for taking the time to read this post!<!-- /react-text --><!-- react-text: 27 --> Software tooling<!-- /react-text --><!-- react-text: 28 --> is one of the main topics of this blog, so if you enjoyed the post, please consider subscribing by using the feed, Twitter or my mailing list.<!-- /react-text --></p><div style="margin-bottom:3.875rem;" data-reactid="29"><div id="mc_embed_signup" data-reactid="30"><h6 style="margin:0;font-size:0.8165rem;line-height:1.55rem;letter-spacing:-0.25px;" data-reactid="31">EMAIL</h6><form action="//benmccormick.us8.list-manage.com/subscribe/post?u=115446b80fd9d930ba091cc27&amp;id=f5b9f5acf2" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="" data-reactid="32"><div id="mc_embed_signup_scroll" data-reactid="33"><div class="mc-field-group" style="padding-right:30px;" data-reactid="34"><input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Email Address" data-reactid="35"/><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button" data-reactid="36"/></div><div id="mce-responses" class="clear" data-reactid="37"><div class="response" id="mce-error-response" style="display:none;" data-reactid="38"></div><div class="response" id="mce-success-response" style="display:none;" data-reactid="39"></div></div><div style="position:absolute;left:-5000px;" aria-hidden="true" data-reactid="40"><input type="text" name="b_115446b80fd9d930ba091cc27_f5b9f5acf2" tabindex="-1" value="" data-reactid="41"/></div><div class="clear" data-reactid="42"></div></div></form></div><div class="rss" data-reactid="43"><h6 style="margin:0;font-size:0.8165rem;line-height:1.55rem;letter-spacing:-0.25px;" data-reactid="44">RSS</h6><a href="/rss/" data-reactid="45"><i class="rss-icon" data-reactid="46"><svg viewBox="0 0 10 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>rss</title><desc>Created with Sketch.</desc><defs></defs><g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="rss" fill="#000000"><path d="M2,13 L0,13 L0,11 C1.11,11 2,11.89 2,13 L2,13 Z M0,3 L0,4 C4.97,4 9,8.03 9,13 L10,13 C10,7.48 5.52,3 0,3 L0,3 Z M0,7 L0,8 C2.75,8 5,10.25 5,13 L6,13 C6,9.69 3.31,7 0,7 L0,7 Z" id="Shape"></path></g></g></svg></i><!-- react-text: 47 --> <!-- /react-text --><span data-reactid="48">RSS</span></a></div><div data-reactid="49"><h6 style="margin:0;font-size:0.8165rem;line-height:1.55rem;letter-spacing:-0.25px;" data-reactid="50">TWITTER</h6><div class="twitter-item" data-reactid="51"><span data-reactid="52">Site Feed: </span><a href="https://twitter.com/benmccormickorg" class="twitter-follow-button" data-show-count="false" data-reactid="53">Follow @benmccormickorg</a></div></div><div data-reactid="54"><div class="twitter-item" data-reactid="55"><span data-reactid="56">Personal Feed: </span><a href="https://twitter.com/ben336" class="twitter-follow-button" data-show-count="false" data-reactid="57">Follow @ben336</a></div></div></div></div><div class="up-next-block" data-reactid="58"><h6 style="margin:0;font-size:0.8165rem;line-height:1.55rem;letter-spacing:-0.25px;" data-reactid="59">You Might Also Like:</h6><div data-reactid="60"><h3 style="margin-top:0;margin-bottom:0.3875rem;" data-reactid="61"><a href="/learning-vim-in-2014/?readNext=true#title" data-reactid="62">Learning Vim in 2014</a></h3><p data-reactid="63">A series of beginner level articles on Vim</p></div><div data-reactid="64"><hr data-reactid="65"/><h3 style="margin-top:0;margin-bottom:0.3875rem;" data-reactid="66"><a href="/2014/11/10/vim-workflows-file-switching-strategies/?readNext=true#title" data-reactid="67">Vim Workflows: File Switching</a></h3><p data-reactid="68">A look at the different approaches you can take to managing files in Vim</p></div><div data-reactid="69"><hr data-reactid="70"/><h3 style="margin-top:0;margin-bottom:0.3875rem;" data-reactid="71"><a href="/2014/07/02/learning-vim-in-2014-vim-as-language/?readNext=true#title" data-reactid="72">Learning Vim in 2014: Vim as Language</a></h3><p data-reactid="73">An explanation of the grammar behind Vim</p></div></div></div></div><hr style="margin-bottom:3.1rem;" data-reactid="74"/><div title="Learning Vim in 2014: Search" data-reactid="75"><div id="disqus_thread" data-reactid="76"></div><noscript data-reactid="77"><span data-reactid="78"><!-- react-text: 79 -->Please enable JavaScript to view the<!-- /react-text --><a href="http://disqus.com/?ref_noscript" data-reactid="80">comments powered by Disqus.</a></span></noscript><a href="http://disqus.com" class="dsq-brlink" data-reactid="81"><!-- react-text: 82 -->Blog comments powered by <!-- /react-text --><span class="logo-disqus" data-reactid="83">Disqus</span><!-- react-text: 84 -->.<!-- /react-text --></a></div></div><span style="display:block;clear:both;" data-reactid="85"> </span></div></div><script src="/bundle.js?t=1496526464304"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-37323973-1', 'auto');
            ga('send', 'pageview');
        </script><script type="text/javascript">
              // adapted from: https://css-tricks.com/serviceworker-for-offline/
              // ServiceWorker is a progressive technology. Ignore unsupported browsers
              if ('serviceWorker' in navigator) {
              console.log('CLIENT: service worker registration in progress.');
              navigator.serviceWorker.register('/sw.js').then(function() {
                console.log('CLIENT: service worker registration complete.');
              }, function() {
                console.log('CLIENT: service worker registration failure.');
              });
              } else {
              console.log('CLIENT: service worker is not supported.');
              }
            </script></body></html>