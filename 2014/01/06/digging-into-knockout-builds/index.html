<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=yyxgnp97qG"/><link rel="icon" type="image/png" href="/favicon-32x32.png?v=yyxgnp97qG" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png?v=yyxgnp97qG" sizes="16x16"/><link rel="manifest" href="/manifest.json"/><link rel="mask-icon" href="/safari-pinned-tab.svg?v=yyxgnp97qG" color="#rgb(42, 194, 240)"/><link rel="alternate" title="JSON Feed" type="application/json" href="/feed.json"/><link rel="shortcut icon" href="/favicon.ico?v=yyxgnp97qG"/><meta name="theme-color" content="#ffffff"/><title data-react-helmet="true"></title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.6 'minion-3','Garamond',serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'minion-3','Garamond',serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.6rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.32578rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.20684rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.91028rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.86849rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}ul{margin-left:1.6rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.6rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;font-size:0.85rem;line-height:1.1;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.2rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;font-size:1rem;line-height:1.6rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}blockquote{margin-left:1.6rem;margin-right:1.6rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.2rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.2rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.6rem;margin-bottom:calc(1.2rem / 2);margin-top:calc(1.2rem / 2);}li > ul{margin-left:1.6rem;margin-bottom:calc(1.2rem / 2);margin-top:calc(1.2rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.2rem / 2);}code{font-size:0.85rem;line-height:1.6rem;}kbd{font-size:0.85rem;line-height:1.6rem;}samp{font-size:0.85rem;line-height:1.6rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.06667rem;padding-right:1.06667rem;padding-top:0.8rem;padding-bottom:calc(0.8rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;font-size:14px;}pre code{background:none;line-height:1.1;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:"Â ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:"";}h1,h2,h3,h4,h5,h6{line-height:1.1;}@media only screen and (max-width:480px){html{font-size:112.5%;}}</style><style data-href="/component---src-templates-blog-post-js.3e434419df5438fbbf14.css">.markdown pre{display:block;background:#343d46;color:#d8dee9;padding:.8rem}.markdown pre code:after{content:unset}.token.comment,.token.quote{color:#a7adba}.token.addition,.token.attr,.token.selector-tag,.token.string{color:#99c794}.token.doctag,.token.meta .token.meta-string,.token.regexp{color:#89ddf3}.token.built_in,.token.function{color:#5fb3b3}.token.name,.token.section,.token.selector-class,.token.selector-id,.token.title{color:#69c}.token.attribute,.token.class .token.title,.token.template-variable,.token.type,.token.variable{color:#fac863}.token.bullet,.token.link,.token.meta,.token.meta .token.keyword,.token.selector-attr,.token.selector-pseudo,.token.subst,.token.symbol{color:#f9ae58}.token.boolean,.token.deletion,.token.literal,.token.number{color:#f07178}.token.keyword{color:#c594c5}.token.formula{background:#a7adba}.token.emphasis{font-style:italic}.token.strong{font-weight:700}.gatsby-resp-image-wrapper{max-width:75%;display:block;margin:40px auto 20px}.bordered-img{border:3px solid #rgb(42,194,240)}.img-group{display:flex;justify-content:space-between}.img-group img{padding:0;height:auto}.inline-img{width:45%;display:inline-block;float:right;padding:2rem}#bd-label{font-family:mr-eaves-xl-modern,Helvetica Neue,Arial,sans-serif;font-weight:700}#bd-label.large-label{font-size:20px}#bd-email{padding-left:5px}#bd-email,#bd-submit{font-family:mr-eaves-xl-modern,Helvetica Neue,Arial,sans-serif;font-size:14px}#bd-submit{background:#f1684e;color:#fff;border-radius:4px;border:none}@media (max-width:960px){#bd-email,#bd-submit{font-size:10px}#bd-label{font-size:12px}}.large-row #bd-email,.large-row #bd-submit{font-size:30px}@media (max-width:700px){.large-row #bd-email,.large-row #bd-submit{font-size:18px}}.bd-subscribe-form{margin:30px 0 50px;display:block}.bd-subscribe-row{display:grid;grid-template-columns:60% 35%;grid-column-gap:5%;grid-template-rows:1fr;margin-top:10px}@media (max-width:960px){.bd-subscribe-row{grid-template-columns:1fr;grid-row-gap:10%;grid-template-rows:1fr 1fr}}.twitter-tweet,twitterwidget{margin-left:auto;margin-right:auto}body{color:#474747}a{color:#f1684e;text-decoration:none;cursor:pointer}a:hover{text-decoration:underline}.footnote-backref,.footnote-ref{text-decoration:none;padding-left:3px}blockquote{border-left:5px solid #2ac2f0;background:#eee;font-weight:400;font-size:.9rem;padding:1.5rem 2rem;margin:0 0 1rem}blockquote p{margin-bottom:.667em}h3{color:#2ac2f0}h4{font-size:110%}.explanation{padding:10px;background:#eee;border-radius:10px;margin:20px auto;font-size:.85em}.footnotes{font-size:80%}.footnotes li>*{display:inline;margin-bottom:0}strong{color:#639f6e}em{color:#9a74aa}.markdown iframe{margin:0 auto}.carbon-wrap{display:grid;grid-template-columns:1fr 1fr;grid-column-gap:10px;grid-template-rows:1fr;margin-bottom:30px;align-items:center;padding-left:5px}@media (max-width:960px){.carbon-wrap{grid-template-columns:1fr;grid-template-rows:110px 1fr;grid-row-gap:10px;justify-items:center}}.carbon-wrap img{margin-bottom:0}.carbon-text{padding:5px 5px 5px 0;display:inline-block;overflow:hidden;line-height:1.3}.carbon-poweredby{color:#999;position:absolute;right:5px;bottom:0}.columns{display:grid;grid-template-columns:665px 270px;grid-template-rows:1fr;grid-column-gap:25px}@media (max-width:960px){.columns{display:grid;grid-template-columns:70% 28%;grid-column-gap:2%}}@media (max-width:700px){.columns{display:flex;flex-direction:column;align-items:center}.no-mobile{display:none}}@media (max-width:321px){html{font-size:100%!important}}</style><meta name="generator" content="Gatsby 2.0.75"/><style id="glamor-styles">.css-tcc0st,[data-css-tcc0st]{color:#999999;font-size:16px;font-family:"mr-eaves-xl-modern", "Helvetica Neue", Arial, sans-serif;}.css-tcc0st:hover,[data-css-tcc0st]:hover{color:#F1684E;}.css-1gs5qio,[data-css-1gs5qio]{font-size:16px;font-family:"mr-eaves-xl-modern", "Helvetica Neue", Arial, sans-serif;}.css-1yx29dl,[data-css-1yx29dl]{font-family:"mr-eaves-xl-modern", "Helvetica Neue", Arial, sans-serif;font-size:0.75rem;background:rgba(240, 219, 79, 1.00);color:#333;display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;flex-direction:row;justify-content:flex-start;align-items:center;border-radius:0.25rem;padding:0.125rem 0.35rem;width:12rem;height:2rem;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;}.css-1yx29dl:hover,[data-css-1yx29dl]:hover{text-decoration:none;}@media all and (max-width: 960px){.css-1yx29dl,[data-css-1yx29dl]{height:1.6rem;width:7rem;font-size:0.55rem;}}</style><script id="glamor-ids">
        // <![CDATA[
        window._glamor = ["tcc0st","1gs5qio","1yx29dl"]
        // ]]>
        </script><title data-react-helmet="true">Digging Into Knockout Builds | benmccormick.org</title><meta data-react-helmet="true" name="description" content="Ben McCormick&#x27;s blog on JavaScript and Web Development"/><meta data-react-helmet="true" name="keywords"/><script data-react-helmet="true" type="application/ld+json">{
                  "@context": "http://schema.org"
                  "@type": "BlogPosting",
                  "headline": "Digging Into Knockout Builds",
                  "genre": "Software Development",
                  "keywords": "",
                  "url": "http://benmccormick.org//2014/01/06/digging-into-knockout-builds",
                  "image": "http://benmccormick.org/logo.png",
                  "datePublished": "2014-01-6",
                  
                  "articleBody": "<p>Thereâs a lot you can learn by looking through other peopleâs code.  This is especially true when youâre looking at widely used open-source libraries, where you can see how people have solved real problems with code that has been battle-tested and debated.</p>
<p>In this spirit of code literacy, I spent some time this past weekend to look through the source code for <a href=\"http://knockoutjs.com/\">KnockoutJS</a>.  Knockout is a MVVM library in Javascript designed to make 2 way declarative bindings easy.  Iâm wanted to write a bit about what I saw in Knockoutâs structure and build process.</p>
<h3>Intro</h3>
<p>Some of the first decisions a developer has to make when starting a new javascript project revolve around project structure and build processes.  They need to decide how theyâll handle things like testing and minification.  For a library like Knockout, developers also need to figure out how to make sure that they donât expose any internal logic to the global scope.  This post takes a look at how Knockout deals with these challenges.  You can follow along by getting <a href=\"https://github.com/knockout/knockout\">the source</a> off of Github.</p>
<h3>Project Structure</h3>
<p>Knockout is organized with a traditional <code class=\"language-text\">src</code>,<code class=\"language-text\">spec</code>,<code class=\"language-text\">build</code> structure, with the main src code in the src directory, <a href=\"http://pivotal.github.io/jasmine/\">Jasmine</a> tests in the spec directory, and build-related files in the build directory.  The src directory is fairly flat, with directories for bindings, templating and subscribables.  The spec directory does not mirror it exactly.  The spec files are organized around functional categories at the root of the source files, with a separate directory holding tests for the default bindings.   The build direction contains several files related to the build process, which Iâll discuss below.  In the root directory there are dotfiles for <a href=\"https://npmjs.org/\">NPM</a>, <a href=\"http://git-scm.com/\">git</a>, and <a href=\"http://about.travis-ci.org/\">TravisCI</a>, a package.json file, and the gruntfile.</p>
<h3>Grunt</h3>
<p>Knockoutâs build process is automated using Grunt, an automation tool built on <a href=\"xmpux.cisco.com\">NodeJS</a>.  Knockoutâs gruntfile weighs in at a very readable 150 lines of code, and only defines one task.  That default task looks like this:</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//Grunt Default Task</span>
grunt<span class=\"token punctuation\">.</span><span class=\"token function\">registerTask</span><span class=\"token punctuation\">(</span><span class=\"token string\">'default'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'clean'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'checktrailingspaces'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'build'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'test'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>
<p>So when you build knockout youâre executing 4 steps.</p>
<h4>Clean</h4>
<p>This deletes the knockout-latest.debug.js and knockout-latest.min.js files from the <code class=\"language-text\">build/output</code> directory</p>
<h4>Check Trailing Spaces</h4>
<p>This checks source files for trailing spaces and throws an error if they exist, ending the build.</p>
<h4>Build</h4>
<p>More detail on this below.</p>
<h4>Test</h4>
<p>Test spawns a child process which calls 2 scripts: âspec/runner.phantom.jsâ and âspec/runner.node.jsâ.  The script runs asynchronously in the background, with the results being passed to standard out through a callback.</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//Grunt Test Task</span>
grunt<span class=\"token punctuation\">.</span><span class=\"token function\">initConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>
    <span class=\"token comment\">//...</span>
    test<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>
        phantomjs<span class=\"token punctuation\">:</span> <span class=\"token string\">'spec/runner.phantom.js'</span><span class=\"token punctuation\">,</span>
        node<span class=\"token punctuation\">:</span> <span class=\"token string\">'spec/runner.node.js'</span>
    <span class=\"token punctuation\">}</span>
<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

grunt<span class=\"token punctuation\">.</span><span class=\"token function\">registerMultiTask</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Run tests'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
    <span class=\"token keyword\">var</span> done <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">async</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
    grunt<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> cmd<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>
        <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">,</span> code</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>code <span class=\"token operator\">===</span> <span class=\"token number\">127</span> <span class=\"token comment\">/*not found*/</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
                grunt<span class=\"token punctuation\">.</span>verbose<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>stderr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
                <span class=\"token comment\">// ignore this error</span>
                <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>
                grunt<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">.</span><span class=\"token function\">writeln</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>stdout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>
                    grunt<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>stderr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
                <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
            <span class=\"token punctuation\">}</span>
        <span class=\"token punctuation\">}</span>
    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>
<p>Overall a few things stand out about Knockoutâs gruntfile.</p>
<ol>
<li>
<p>Itâs written with no dependencies other than the base grunt-cli package, which is specifically called out in package.json to be run locally.  This is in sharp contrast to most Grunt-based projects Iâve seen, which assume a global install of Grunt and then make heavy use of the Grunt plugin ecosystem.</p>
</li>
<li>
<p>The only code consistency check is flagging trailing whitespace. Rather than enforce styling with a tool like jsHint, the build process only protects the integrity of the diffs with the whitespace check. This is probably a consequence of the plugin-free build file set up.  Overall the build philosophy seems to aim to keep things as simple as possible.</p>
</li>
</ol>
<h3>The Build Process</h3>
<p>So what happens with the build command?  When itâs executed the build command runs a task which creates 2 files, knockout-latest.debug.js and knockout-latest.min. Each of them contain the same content, with the debug version wrapped in an <a href=\"http://benalman.com/news/2010/11/immediately-invoked-function-expression/\">IIFE</a>, and the minified version run through Google closure compiler.</p>
<p>The content is pulled together with the <code class=\"language-text\">getCombinedSources</code> function:</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//Grunt Build Task</span>
<span class=\"token keyword\">function</span> <span class=\"token function\">getCombinedSources</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
    <span class=\"token keyword\">var</span> fragments <span class=\"token operator\">=</span> grunt<span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fragments'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>
        sourceFilenames <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>
            fragments <span class=\"token operator\">+</span> <span class=\"token string\">'extern-pre.js'</span><span class=\"token punctuation\">,</span>
            fragments <span class=\"token operator\">+</span> <span class=\"token string\">'amd-pre.js'</span><span class=\"token punctuation\">,</span>
            <span class=\"token function\">getReferencedSources</span><span class=\"token punctuation\">(</span>fragments <span class=\"token operator\">+</span> <span class=\"token string\">'source-references.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>
            fragments <span class=\"token operator\">+</span> <span class=\"token string\">'amd-post.js'</span><span class=\"token punctuation\">,</span>
            fragments <span class=\"token operator\">+</span> <span class=\"token string\">'extern-post.js'</span>
        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>
        flattenedSourceFilenames <span class=\"token operator\">=</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> sourceFilenames<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>
        combinedSources <span class=\"token operator\">=</span> flattenedSourceFilenames<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">filename</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
            <span class=\"token keyword\">return</span> grunt<span class=\"token punctuation\">.</span>file<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./'</span> <span class=\"token operator\">+</span> filename<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

    <span class=\"token keyword\">return</span> combinedSources<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'##VERSION##'</span><span class=\"token punctuation\">,</span> grunt<span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pkg.version'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
<span class=\"token punctuation\">}</span></code></pre></div>
<p>So this takes each of the files returned by the getReferencedSources function, and wraps them with 2 more files on each side.  Lets look at the wrapper files first.</p>
<p>extern-pre.js sets up an IIFE and defines several global values within the local scope.  This is done in order to protect against any reuse of these names in the local scope where knockout is loaded.</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//extern-pre.js</span>
<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">undefined</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>
    <span class=\"token comment\">// (0, eval)('this') is a robust way of getting a reference to the global object</span>
    <span class=\"token comment\">// For details, see http://stackoverflow.com/questions/14119988/return-this-0-evalthis/14120023#14120023</span>
    <span class=\"token keyword\">var</span> window <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> eval<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>
        document <span class=\"token operator\">=</span> window<span class=\"token punctuation\">[</span><span class=\"token string\">'document'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>
        navigator <span class=\"token operator\">=</span> window<span class=\"token punctuation\">[</span><span class=\"token string\">'navigator'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>
        jQuery <span class=\"token operator\">=</span> window<span class=\"token punctuation\">[</span><span class=\"token string\">\"jQuery\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>
        <span class=\"token constant\">JSON</span> <span class=\"token operator\">=</span> window<span class=\"token punctuation\">[</span><span class=\"token string\">\"JSON\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>
<p>amd-pre.js determines the type of module system in use (if any) and passes the correct object into the inner scope as koExports.</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//amd-pre.js</span>
<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">factory</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
  <span class=\"token comment\">// Support three module loading scenarios</span>
  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> require <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">typeof</span> exports <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">typeof</span> module <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
    <span class=\"token comment\">// [1] CommonJS/Node.js</span>
    <span class=\"token keyword\">var</span> target <span class=\"token operator\">=</span> module<span class=\"token punctuation\">[</span><span class=\"token string\">'exports'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> exports<span class=\"token punctuation\">;</span> <span class=\"token comment\">//module.exports is for Node.js</span>
    <span class=\"token function\">factory</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> define <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> define<span class=\"token punctuation\">[</span><span class=\"token string\">'amd'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
    <span class=\"token comment\">// [2] AMD anonymous module</span>
    <span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'exports'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> factory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>
    <span class=\"token comment\">// [3] No module loader (plain &lt;script> tag) - put directly in global namespace</span>
    <span class=\"token function\">factory</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">[</span><span class=\"token string\">'ko'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
  <span class=\"token punctuation\">}</span>
<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>
<p>The *-post.js files simply close these function statements.</p>
<p>So in the end weâre left with an IIFE that wraps all of the content and defines global variables within the scope, and then executes a second IIFE which determines the module format in use and executes the inner factory function accordingly.  The factory function is made up of the various files in the src directory, concatenated together in the order specified in build/fragments/source-references.js.</p>
<h3>Initializing the library</h3>
<p>The first few files loaded into the inner function are short files designed to provide a base for the library.</p>
<p>namespace.js sets up the ko object that is referenced internally in the file.</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//namespace.js</span>
<span class=\"token comment\">// Internally, all KO objects are attached to koExports (even the non-exported ones whose names will be minified by the closure compiler).</span>
<span class=\"token comment\">// In the future, the following \"ko\" variable may be made distinct from \"koExports\" so that private objects are not externally reachable.</span>
<span class=\"token keyword\">var</span> ko <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> koExports <span class=\"token operator\">!==</span> <span class=\"token string\">'undefined'</span> <span class=\"token operator\">?</span> koExports <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>
<p>google-closure-compiler-utils.js defines two helper functions, exportSymbol and exportProperty which allow for greater minimization of the internal ko library while maintaining a consistent external api.  These functions are used everywhere throughout the library for defining externally facing function and property names.</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//google-closure-compiler-utils.js</span>

<span class=\"token comment\">// Google Closure Compiler helpers (used only to make the minified file smaller)</span>
ko<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exportSymbol</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">koPath<span class=\"token punctuation\">,</span> object</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
    <span class=\"token keyword\">var</span> tokens <span class=\"token operator\">=</span> koPath<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

    <span class=\"token comment\">// In the future, \"ko\" may become distinct from \"koExports\" (so that non-exported objects are not reachable)</span>
    <span class=\"token comment\">// At that point, \"target\" would be set to: (typeof koExports !== \"undefined\" ? koExports : ko)</span>
    <span class=\"token keyword\">var</span> target <span class=\"token operator\">=</span> ko<span class=\"token punctuation\">;</span>

    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> tokens<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>
        target <span class=\"token operator\">=</span> target<span class=\"token punctuation\">[</span>tokens<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>
    target<span class=\"token punctuation\">[</span>tokens<span class=\"token punctuation\">[</span>tokens<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> object<span class=\"token punctuation\">;</span>
<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>
ko<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exportProperty</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">owner<span class=\"token punctuation\">,</span> publicName<span class=\"token punctuation\">,</span> object</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
  owner<span class=\"token punctuation\">[</span>publicName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> object<span class=\"token punctuation\">;</span>
<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>
<p>Finally version.js sets up a placeholder for ko.version, which is then replaced with the version number in Package.json as part of the grunt build task.</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//version.js</span>
ko<span class=\"token punctuation\">.</span>version <span class=\"token operator\">=</span> <span class=\"token string\">\"##VERSION##\"</span><span class=\"token punctuation\">;</span>

ko<span class=\"token punctuation\">.</span><span class=\"token function\">exportSymbol</span><span class=\"token punctuation\">(</span><span class=\"token string\">'version'</span><span class=\"token punctuation\">,</span> ko<span class=\"token punctuation\">.</span>version<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>
<h3>Conclusion</h3>
<p>There are a few interesting things we can note from Knockoutâs build approach.</p>
<h4>Using IIFEâs to isolate local scope is a practical and important technique for library design</h4>
<p>If youâve been counting, the debug version of the library is wrapped in 3 different levels of IIFEs before any code exposing external functionality is actually included.  This allows Knockout to provide several layers of data protection and abstraction, making sure that it is referencing the correct global variables and preventing scope leaks.</p>
<h4>Its relatively straightforward to support module formats even if your library doesnât use them internally</h4>
<p>Take a look again at amd-pre.js.  Its 15 lines of code to support AMD loaders, CommonJS loaders and normal script tag loading.  Knockout doesnât use a modern âmodule solutionâ approach to code organization.  Instead it uses a more traditional namespacing approach wrapped in IIFEs.  But it still plays well with others nicely.  Itâs hard to see how this type of effort wouldnât be worth it for library designers.</p>",
                    "author": {
                      "@type": "Person",
                      "name": "Ben McCormick"
                      "email": "mailto:ben@benmccormick.org",
                      "image": "/profile_pic.jpg",
                      "jobTitle": "Software Engineer",
                      "alumniOf": "Duke",
                      "birthPlace": "Pittsburgh, PA",
                      "gender": "male",
                      "url": "http://benmccormick.org",
                	    "sameAs" : [
                        "https://www.linkedin.com/in/benmccormick",
                        "http://twitter.com/_benmccormick",
                      ]
                   }
                }</script><link as="script" rel="preload" href="/component---src-templates-blog-post-js-1e63aff18a9e6b601064.js"/><link as="script" rel="preload" href="/app-fdecb815d6ce0f0dde0a.js"/><link as="script" rel="preload" href="/2-e1627e618ebaecccc690.js"/><link as="script" rel="preload" href="/0-af517986d2c36b03453d.js"/><link as="script" rel="preload" href="/webpack-runtime-df6ffd39a9b95e3f0000.js"/><link as="fetch" rel="preload" href="/static/d/170/path---2014-01-06-digging-into-knockout-builds-647-fad-yvJjsX0CuMmDdbDyBLHQETWeZ4.json" crossorigin="use-credentials"/></head><body class="landing-page" style="background:#FCFCFC"><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><style data-emotion-css="1f3kluc">.css-1f3kluc{width:100%;max-width:1000px;margin:0 auto;padding:2.4rem 20px;}</style><div class="css-1f3kluc em100y90"><style data-emotion-css="13vv67v">.css-13vv67v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-bottom:2rem;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}</style><div class="css-13vv67v e1b8f8ar0"><style data-emotion-css="txnzm6">.css-txnzm6{margin:0 20px 0 0;padding-bottom:0;}.css-txnzm6 a{box-shadow:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;}.css-txnzm6 a:hover{-webkit-text-decoration:none;text-decoration:none;}</style><h3 class="css-txnzm6 e1b8f8ar2"><a name="title" href="/">Ben McCormick</a></h3><style data-emotion-css="177tisd">.css-177tisd{color:#999999;}</style><div class="css-177tisd e1b8f8ar3"><a class="css-tcc0st" href="/archive/">Blog</a><style data-emotion-css="12jh0su">.css-12jh0su{padding:0 0.5rem;}@media all and (max-width:400px){.css-12jh0su{padding:0 0.25rem;}}</style><span class="css-12jh0su e1b8f8ar1"></span><a class="css-tcc0st" href="/subscribe/">Subscribe</a><span class="css-12jh0su e1b8f8ar1"></span><a class="css-tcc0st" href="/speaking/">Speaking</a><span class="css-12jh0su e1b8f8ar1"></span><a class="css-tcc0st" href="http://twitter.com/_benmccormick">Twitter</a><span class="css-12jh0su e1b8f8ar1"></span><a class="css-tcc0st" href="/about/">About</a></div></div><article class="markdown"><div class="post-title-area"><style data-emotion-css="92repi">.css-92repi{display:block;max-width:100%;}</style><h1 class="css-92repi e15djruj0">Digging Into Knockout Builds</h1></div><div class="columns"><style data-emotion-css="qsg3oo">.css-qsg3oo{max-width:100%;}.css-qsg3oo li{padding-left:10px;}.css-qsg3oo .reading-img img{width:150px;float:right;margin:0px 10px 20px 10px;}.css-qsg3oo img.full-width{max-height:none;}.css-qsg3oo img.half-width{max-height:none;width:50%;}</style><div class="css-qsg3oo e15djruj2"><p>Thereâs a lot you can learn by looking through other peopleâs code.  This is especially true when youâre looking at widely used open-source libraries, where you can see how people have solved real problems with code that has been battle-tested and debated.</p>
<p>In this spirit of code literacy, I spent some time this past weekend to look through the source code for <a href="http://knockoutjs.com/">KnockoutJS</a>.  Knockout is a MVVM library in Javascript designed to make 2 way declarative bindings easy.  Iâm wanted to write a bit about what I saw in Knockoutâs structure and build process.</p>
<h3>Intro</h3>
<p>Some of the first decisions a developer has to make when starting a new javascript project revolve around project structure and build processes.  They need to decide how theyâll handle things like testing and minification.  For a library like Knockout, developers also need to figure out how to make sure that they donât expose any internal logic to the global scope.  This post takes a look at how Knockout deals with these challenges.  You can follow along by getting <a href="https://github.com/knockout/knockout">the source</a> off of Github.</p>
<h3>Project Structure</h3>
<p>Knockout is organized with a traditional <code class="language-text">src</code>,<code class="language-text">spec</code>,<code class="language-text">build</code> structure, with the main src code in the src directory, <a href="http://pivotal.github.io/jasmine/">Jasmine</a> tests in the spec directory, and build-related files in the build directory.  The src directory is fairly flat, with directories for bindings, templating and subscribables.  The spec directory does not mirror it exactly.  The spec files are organized around functional categories at the root of the source files, with a separate directory holding tests for the default bindings.   The build direction contains several files related to the build process, which Iâll discuss below.  In the root directory there are dotfiles for <a href="https://npmjs.org/">NPM</a>, <a href="http://git-scm.com/">git</a>, and <a href="http://about.travis-ci.org/">TravisCI</a>, a package.json file, and the gruntfile.</p>
<h3>Grunt</h3>
<p>Knockoutâs build process is automated using Grunt, an automation tool built on <a href="xmpux.cisco.com">NodeJS</a>.  Knockoutâs gruntfile weighs in at a very readable 150 lines of code, and only defines one task.  That default task looks like this:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">//Grunt Default Task</span>
grunt<span class="token punctuation">.</span><span class="token function">registerTask</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'clean'</span><span class="token punctuation">,</span> <span class="token string">'checktrailingspaces'</span><span class="token punctuation">,</span> <span class="token string">'build'</span><span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>So when you build knockout youâre executing 4 steps.</p>
<h4>Clean</h4>
<p>This deletes the knockout-latest.debug.js and knockout-latest.min.js files from the <code class="language-text">build/output</code> directory</p>
<h4>Check Trailing Spaces</h4>
<p>This checks source files for trailing spaces and throws an error if they exist, ending the build.</p>
<h4>Build</h4>
<p>More detail on this below.</p>
<h4>Test</h4>
<p>Test spawns a child process which calls 2 scripts: âspec/runner.phantom.jsâ and âspec/runner.node.jsâ.  The script runs asynchronously in the background, with the results being passed to standard out through a callback.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">//Grunt Test Task</span>
grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    test<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        phantomjs<span class="token punctuation">:</span> <span class="token string">'spec/runner.phantom.js'</span><span class="token punctuation">,</span>
        node<span class="token punctuation">:</span> <span class="token string">'spec/runner.node.js'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

grunt<span class="token punctuation">.</span><span class="token function">registerMultiTask</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token string">'Run tests'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> done <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    grunt<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">spawn</span><span class="token punctuation">(</span><span class="token punctuation">{</span> cmd<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">,</span> args<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> result<span class="token punctuation">,</span> code</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">===</span> <span class="token number">127</span> <span class="token comment">/*not found*/</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                grunt<span class="token punctuation">.</span>verbose<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>stderr<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// ignore this error</span>
                <span class="token function">done</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                grunt<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">writeln</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>stdout<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span>
                    grunt<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>stderr<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">done</span><span class="token punctuation">(</span><span class="token operator">!</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Overall a few things stand out about Knockoutâs gruntfile.</p>
<ol>
<li>
<p>Itâs written with no dependencies other than the base grunt-cli package, which is specifically called out in package.json to be run locally.  This is in sharp contrast to most Grunt-based projects Iâve seen, which assume a global install of Grunt and then make heavy use of the Grunt plugin ecosystem.</p>
</li>
<li>
<p>The only code consistency check is flagging trailing whitespace. Rather than enforce styling with a tool like jsHint, the build process only protects the integrity of the diffs with the whitespace check. This is probably a consequence of the plugin-free build file set up.  Overall the build philosophy seems to aim to keep things as simple as possible.</p>
</li>
</ol>
<h3>The Build Process</h3>
<p>So what happens with the build command?  When itâs executed the build command runs a task which creates 2 files, knockout-latest.debug.js and knockout-latest.min. Each of them contain the same content, with the debug version wrapped in an <a href="http://benalman.com/news/2010/11/immediately-invoked-function-expression/">IIFE</a>, and the minified version run through Google closure compiler.</p>
<p>The content is pulled together with the <code class="language-text">getCombinedSources</code> function:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">//Grunt Build Task</span>
<span class="token keyword">function</span> <span class="token function">getCombinedSources</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> fragments <span class="token operator">=</span> grunt<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token string">'fragments'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        sourceFilenames <span class="token operator">=</span> <span class="token punctuation">[</span>
            fragments <span class="token operator">+</span> <span class="token string">'extern-pre.js'</span><span class="token punctuation">,</span>
            fragments <span class="token operator">+</span> <span class="token string">'amd-pre.js'</span><span class="token punctuation">,</span>
            <span class="token function">getReferencedSources</span><span class="token punctuation">(</span>fragments <span class="token operator">+</span> <span class="token string">'source-references.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            fragments <span class="token operator">+</span> <span class="token string">'amd-post.js'</span><span class="token punctuation">,</span>
            fragments <span class="token operator">+</span> <span class="token string">'extern-post.js'</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        flattenedSourceFilenames <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sourceFilenames<span class="token punctuation">)</span><span class="token punctuation">,</span>
        combinedSources <span class="token operator">=</span> flattenedSourceFilenames<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">filename</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> grunt<span class="token punctuation">.</span>file<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">'./'</span> <span class="token operator">+</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> combinedSources<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'##VERSION##'</span><span class="token punctuation">,</span> grunt<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token string">'pkg.version'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>So this takes each of the files returned by the getReferencedSources function, and wraps them with 2 more files on each side.  Lets look at the wrapper files first.</p>
<p>extern-pre.js sets up an IIFE and defines several global values within the local scope.  This is done in order to protect against any reuse of these names in the local scope where knockout is loaded.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">//extern-pre.js</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">undefined</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// (0, eval)('this') is a robust way of getting a reference to the global object</span>
    <span class="token comment">// For details, see http://stackoverflow.com/questions/14119988/return-this-0-evalthis/14120023#14120023</span>
    <span class="token keyword">var</span> window <span class="token operator">=</span> <span class="token keyword">this</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> eval<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'this'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        document <span class="token operator">=</span> window<span class="token punctuation">[</span><span class="token string">'document'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        navigator <span class="token operator">=</span> window<span class="token punctuation">[</span><span class="token string">'navigator'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        jQuery <span class="token operator">=</span> window<span class="token punctuation">[</span><span class="token string">"jQuery"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token constant">JSON</span> <span class="token operator">=</span> window<span class="token punctuation">[</span><span class="token string">"JSON"</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></div>
<p>amd-pre.js determines the type of module system in use (if any) and passes the correct object into the inner scope as koExports.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">//amd-pre.js</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">factory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Support three module loading scenarios</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> require <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// [1] CommonJS/Node.js</span>
    <span class="token keyword">var</span> target <span class="token operator">=</span> module<span class="token punctuation">[</span><span class="token string">'exports'</span><span class="token punctuation">]</span> <span class="token operator">||</span> exports<span class="token punctuation">;</span> <span class="token comment">//module.exports is for Node.js</span>
    <span class="token function">factory</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">[</span><span class="token string">'amd'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// [2] AMD anonymous module</span>
    <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'exports'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// [3] No module loader (plain &lt;script> tag) - put directly in global namespace</span>
    <span class="token function">factory</span><span class="token punctuation">(</span>window<span class="token punctuation">[</span><span class="token string">'ko'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>The *-post.js files simply close these function statements.</p>
<p>So in the end weâre left with an IIFE that wraps all of the content and defines global variables within the scope, and then executes a second IIFE which determines the module format in use and executes the inner factory function accordingly.  The factory function is made up of the various files in the src directory, concatenated together in the order specified in build/fragments/source-references.js.</p>
<h3>Initializing the library</h3>
<p>The first few files loaded into the inner function are short files designed to provide a base for the library.</p>
<p>namespace.js sets up the ko object that is referenced internally in the file.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">//namespace.js</span>
<span class="token comment">// Internally, all KO objects are attached to koExports (even the non-exported ones whose names will be minified by the closure compiler).</span>
<span class="token comment">// In the future, the following "ko" variable may be made distinct from "koExports" so that private objects are not externally reachable.</span>
<span class="token keyword">var</span> ko <span class="token operator">=</span> <span class="token keyword">typeof</span> koExports <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">?</span> koExports <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>google-closure-compiler-utils.js defines two helper functions, exportSymbol and exportProperty which allow for greater minimization of the internal ko library while maintaining a consistent external api.  These functions are used everywhere throughout the library for defining externally facing function and property names.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">//google-closure-compiler-utils.js</span>

<span class="token comment">// Google Closure Compiler helpers (used only to make the minified file smaller)</span>
ko<span class="token punctuation">.</span><span class="token function-variable function">exportSymbol</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">koPath<span class="token punctuation">,</span> object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> tokens <span class="token operator">=</span> koPath<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// In the future, "ko" may become distinct from "koExports" (so that non-exported objects are not reachable)</span>
    <span class="token comment">// At that point, "target" would be set to: (typeof koExports !== "undefined" ? koExports : ko)</span>
    <span class="token keyword">var</span> target <span class="token operator">=</span> ko<span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tokens<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        target <span class="token operator">=</span> target<span class="token punctuation">[</span>tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    target<span class="token punctuation">[</span>tokens<span class="token punctuation">[</span>tokens<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> object<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
ko<span class="token punctuation">.</span><span class="token function-variable function">exportProperty</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">owner<span class="token punctuation">,</span> publicName<span class="token punctuation">,</span> object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  owner<span class="token punctuation">[</span>publicName<span class="token punctuation">]</span> <span class="token operator">=</span> object<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Finally version.js sets up a placeholder for ko.version, which is then replaced with the version number in Package.json as part of the grunt build task.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">//version.js</span>
ko<span class="token punctuation">.</span>version <span class="token operator">=</span> <span class="token string">"##VERSION##"</span><span class="token punctuation">;</span>

ko<span class="token punctuation">.</span><span class="token function">exportSymbol</span><span class="token punctuation">(</span><span class="token string">'version'</span><span class="token punctuation">,</span> ko<span class="token punctuation">.</span>version<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h3>Conclusion</h3>
<p>There are a few interesting things we can note from Knockoutâs build approach.</p>
<h4>Using IIFEâs to isolate local scope is a practical and important technique for library design</h4>
<p>If youâve been counting, the debug version of the library is wrapped in 3 different levels of IIFEs before any code exposing external functionality is actually included.  This allows Knockout to provide several layers of data protection and abstraction, making sure that it is referencing the correct global variables and preventing scope leaks.</p>
<h4>Its relatively straightforward to support module formats even if your library doesnât use them internally</h4>
<p>Take a look again at amd-pre.js.  Its 15 lines of code to support AMD loaders, CommonJS loaders and normal script tag loading.  Knockout doesnât use a modern âmodule solutionâ approach to code organization.  Instead it uses a more traditional namespacing approach wrapped in IIFEs.  But it still plays well with others nicely.  Itâs hard to see how this type of effort wouldnât be worth it for library designers.</p></div><style data-emotion-css="rd3zyi">.css-rd3zyi{padding-left:2rem;overflow:hidden;}</style><div class="no-mobile css-rd3zyi e15djruj3"><style data-emotion-css="1y23a7j">.css-1y23a7j{overflow:hidden;margin:0;}.css-1y23a7j #mc_embed_signup form{margin-bottom:20px;}@media all and (max-width:700px){.css-1y23a7j{padding-right:0;width:100% !important;padding:0 10px;}.css-1y23a7j .mc-field-group{width:100% !important;}.css-1y23a7j .mc-field-group input{width:100% !important;font-size:0.8em;height:2.4em;}}</style><div class="css-1y23a7j e1qbom70"><form action="https://buttondown.email/api/emails/embed-subscribe/benmccormick" method="post" target="popupwindow" class="embeddable-buttondown-form"><label for="bd-email" id="bd-label">Subscribe to the Newsletter</label><input type="hidden" value="1" name="embed"/><div class="bd-subscribe-row"><input type="email" name="email" id="bd-email" placeholder="Your Email"/><input type="submit" value="Subscribe" id="bd-submit"/></div></form></div><style data-emotion-css="wtijjp">.css-wtijjp{width:100%;overflow:hidden;margin:0 0 1rem 0;font-size:14px;position:relative;font-family:"mr-eaves-xl-modern","Helvetica Neue",Arial,sans-serif;background:rgba(99,159,110,0.25);border:1px solid rgba(90,150,100,0.5);padding:4px;min-height:100px;opacity:0;-webkit-transition:opacity ease 3s;transition:opacity ease 3s;}@media all and (max-width:700px){.css-wtijjp{display:none;}}</style><div class="css-wtijjp etmlefq0"></div><style data-emotion-css="1ui09x8">.css-1ui09x8{font-size:14px;background-color:RGBA(191,237,253,0.5);border:1px solid #68d4fa;padding:0.5rem;}.css-1ui09x8 > h4{font-size:20px;margin-bottom:6px;}.css-1ui09x8 > h6{font-size:18px;margin-bottom:6px;margin-top:12px;}</style><div class="css-1ui09x8 e15djruj1"><h4>Article Info</h4><h6>Author</h6><a href="/about">Ben McCormick</a><h6>Publish Date</h6>January 6th 2014<h6>Category</h6><a class="css-1yx29dl" href="/category/frameworks"><style data-emotion-css="e7v39i">.css-e7v39i{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;margin-right:0.1rem;}@media all and (max-width:960px){.css-e7v39i{margin-right:0;}}</style><div class="css-e7v39i e1nsgn8x1"><style data-emotion-css="e7cou1">.css-e7cou1{display:block;width:0.8rem;height:0.8rem;margin-right:0.5rem;}.css-e7cou1 *{fill:#333;}.css-e7cou1 > i{height:0.16000000000000003rem;}</style><span color="#333" class="css-e7cou1 efpzdjd0"><i><svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>beaker</title><desc>Created with Sketch.</desc><defs></defs><g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="beaker" fill="#000000"><path d="M14.3797254,14.59 L10.9997254,7 L10.9997254,3 L11.9997254,3 L11.9997254,2 L2.99972539,2 L2.99972539,3 L3.99972539,3 L3.99972539,7 L0.62972539,14.59 C0.32972539,15.25 0.81972539,16 1.53972539,16 L13.4797254,16 C14.1997254,16 14.6797254,15.25 14.3897254,14.59 L14.3797254,14.59 Z M3.74972539,10 L4.99972539,7 L4.99972539,3 L9.99972539,3 L9.99972539,7 L11.2497254,10 L3.74972539,10 L3.74972539,10 Z M7.99972539,8 L8.99972539,8 L8.99972539,9 L7.99972539,9 L7.99972539,8 L7.99972539,8 Z M6.99972539,7 L5.99972539,7 L5.99972539,6 L6.99972539,6 L6.99972539,7 L6.99972539,7 Z M6.99972539,4 L7.99972539,4 L7.99972539,5 L6.99972539,5 L6.99972539,4 L6.99972539,4 Z M6.99972539,1 L5.99972539,1 L5.99972539,0 L6.99972539,0 L6.99972539,1 L6.99972539,1 Z" id="Shape"></path></g></g></svg></i></span></div><style data-emotion-css="1bs7qd7">.css-1bs7qd7:hover{-webkit-text-decoration:none;text-decoration:none;}</style><div class="css-1bs7qd7 e1nsgn8x0">JavaScript Libraries</div></a></div></div></div></article></div><style data-emotion-css="1tfasoy">.css-1tfasoy{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:3em 0 1em 0;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background-color:RGBA(191,237,253,0.5);border-top:1px solid #68d4fa;}</style><div class="css-1tfasoy e7oz9l30"><style data-emotion-css="7bdmpt">.css-7bdmpt{width:100%;min-height:200px;max-width:960px;margin:0 auto;padding:0 1.2rem;display:grid;grid-template-columns:45% 45%;grid-column-gap:10%;grid-row-gap:30px;}@media all and (max-width:450px){.css-7bdmpt{grid-template-columns:100%;}}</style><div class="css-7bdmpt e7oz9l31"><div><h2 class="css-0 e7oz9l33">Content</h2><style data-emotion-css="1xfqzqa">.css-1xfqzqa{display:grid;grid-template-columns:1fr;grid-auto-rows:1fr;grid-row-gap:20px;}</style><div class="css-1xfqzqa e7oz9l32"><a class="css-1gs5qio" href="/archive/">Blog Archive</a><a class="css-1gs5qio" href="/reviews-archive/">Book Reviews</a><a class="css-1gs5qio" href="https://buttondown.email/benmccormick">Newsletter Archives</a><a class="css-1gs5qio" href="/speaking/">Speaking</a></div></div><div><h2 class="css-0 e7oz9l33">Meta</h2><div class="css-1xfqzqa e7oz9l32"><a class="css-1gs5qio" href="/subscribe/">Subscribe To The Newsletter</a><a class="css-1gs5qio" href="/built-with/">Built With</a><a class="css-1gs5qio" href="http://twitter.com/_benmccormick">Personal Twitter</a><a class="css-1gs5qio" href="http://twitter.com/benmccormickorg">Blog Twitter</a><a class="css-1gs5qio" href="/about/">About Me</a></div></div><style data-emotion-css="i3iawv">.css-i3iawv{font-family:"mr-eaves-xl-modern","Helvetica Neue",Arial,sans-serif;font-size:14px;overflow:visible;white-space:nowrap;}</style><div class="css-i3iawv e7oz9l34">Copyright Â© 2012-2019 Â· Ben McCormick</div></div></div></div></div><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-37323973-1', 'auto');
            ga('send', 'pageview');
        </script><script>
          (function(d) {
            var config = {
              kitId: 'msd6bqv',
              scriptTimeout: 300,
              async: true
            },
            h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/wf-loading/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
          })(document);
        </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"2014-01-06-digging-into-knockout-builds-647","path":"/2014/01/06/digging-into-knockout-builds"};window.dataPath="170/path---2014-01-06-digging-into-knockout-builds-647-fad-yvJjsX0CuMmDdbDyBLHQETWeZ4";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-fdecb815d6ce0f0dde0a.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js.3e434419df5438fbbf14.css","/component---src-templates-blog-post-js-1e63aff18a9e6b601064.js"],"component---src-templates-category-page-js":["/component---src-templates-category-page-js-a34200e3e24ce9b23de1.js"],"component---src-templates-topic-page-js":["/component---src-templates-topic-page-js-26b9f17dd74b0804a88d.js"],"component---src-pages-archive-js":["/component---src-pages-archive-js-c6b64cf60ffab0ff1ea4.js"],"component---src-pages-index-js":["/component---src-pages-index-js-8045aae41fb100c2591f.js"],"component---src-pages-links-archive-js":["/component---src-pages-links-archive-js-67bdf897266670335e2d.js"],"component---src-pages-lions-archive-js":["/component---src-pages-lions-archive-js-fb3692f2351bbf05976b.js"],"component---src-pages-reviews-archive-js":["/component---src-pages-reviews-archive-js-d5842c998a384bac8d56.js"]};/*]]>*/</script><script src="/webpack-runtime-df6ffd39a9b95e3f0000.js" async=""></script><script src="/0-af517986d2c36b03453d.js" async=""></script><script src="/2-e1627e618ebaecccc690.js" async=""></script><script src="/app-fdecb815d6ce0f0dde0a.js" async=""></script><script src="/component---src-templates-blog-post-js-1e63aff18a9e6b601064.js" async=""></script></body></html>