<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=yyxgnp97qG"/><link rel="icon" type="image/png" href="/favicon-32x32.png?v=yyxgnp97qG" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png?v=yyxgnp97qG" sizes="16x16"/><link rel="manifest" href="/manifest.json"/><link rel="mask-icon" href="/safari-pinned-tab.svg?v=yyxgnp97qG" color="#rgb(42, 194, 240)"/><link rel="alternate" title="JSON Feed" type="application/json" href="/feed.json"/><link rel="shortcut icon" href="/favicon.ico?v=yyxgnp97qG"/><meta name="theme-color" content="#ffffff"/><title data-react-helmet="true"></title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.6 'minion-3','Garamond',serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'minion-3','Garamond',serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.6rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.32578rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.20684rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.91028rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.86849rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}ul{margin-left:1.6rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.6rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;font-size:0.85rem;line-height:1.1;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.2rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;font-size:1rem;line-height:1.6rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}blockquote{margin-left:1.6rem;margin-right:1.6rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.2rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.2rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.6rem;margin-bottom:calc(1.2rem / 2);margin-top:calc(1.2rem / 2);}li > ul{margin-left:1.6rem;margin-bottom:calc(1.2rem / 2);margin-top:calc(1.2rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.2rem / 2);}code{font-size:0.85rem;line-height:1.6rem;}kbd{font-size:0.85rem;line-height:1.6rem;}samp{font-size:0.85rem;line-height:1.6rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.06667rem;padding-right:1.06667rem;padding-top:0.8rem;padding-bottom:calc(0.8rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;font-size:14px;}pre code{background:none;line-height:1.1;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:"";}h1,h2,h3,h4,h5,h6{line-height:1.1;}@media only screen and (max-width:480px){html{font-size:112.5%;}}</style><style data-href="/0.ba34fc3a38fbc4ed7939.css">a{color:#f1684e;text-decoration:none;cursor:pointer}a:hover{text-decoration:underline}.footnote-backref,.footnote-ref{text-decoration:none;padding-left:3px}blockquote{border-left:5px solid #2ac2f0;background:#eee;font-weight:400;font-size:.9rem;padding:1.5rem 2rem;margin:0 0 1rem}blockquote p{margin-bottom:.667em}h3{color:#2ac2f0}h4{font-size:110%}.explanation{padding:10px;background:#eee;border-radius:10px;margin:20px auto;font-size:.85em}.footnotes{font-size:80%}.footnotes li>*{display:inline;margin-bottom:0}.markdown strong{color:#639f6e}.markdown em{color:#9a74aa}
#carbonads{height:300px;font-size:14px;width:150px;position:relative;border:3px solid #f0f0f0;padding:7px}.carbon-wrap{width:130px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.carbon-text{padding:5px 10px;max-height:120px;display:inline-block;overflow:hidden;line-height:1.3}.carbon-poweredby{color:#999;position:absolute;right:5px;bottom:0}
.columns{display:grid;grid-template-columns:600px 1fr;grid-template-rows:1fr;grid-column-gap:50px}@media (max-width:700px){.columns{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.no-mobile{display:none}}@media (max-width:321px){html{font-size:100%!important}}

/*# sourceMappingURL=0.ba34fc3a38fbc4ed7939.css.map*/</style><style data-href="/component---src-templates-blog-post-js.9b3d8d681b5b5d0a8285.css">.markdown pre{display:block;background:#343d46;color:#d8dee9;padding:.8rem}.markdown pre code:after{content:unset}.token.comment,.token.quote{color:#a7adba}.token.addition,.token.attr,.token.selector-tag,.token.string{color:#99c794}.token.doctag,.token.meta .token.meta-string,.token.regexp{color:#89ddf3}.token.built_in,.token.function{color:#5fb3b3}.token.name,.token.section,.token.selector-class,.token.selector-id,.token.title{color:#69c}.token.attribute,.token.class .token.title,.token.template-variable,.token.type,.token.variable{color:#fac863}.token.bullet,.token.link,.token.meta,.token.meta .token.keyword,.token.selector-attr,.token.selector-pseudo,.token.subst,.token.symbol{color:#f9ae58}.token.boolean,.token.deletion,.token.literal,.token.number{color:#f07178}.token.keyword{color:#c594c5}.token.formula{background:#a7adba}.token.emphasis{font-style:italic}.token.strong{font-weight:700}
.gatsby-resp-image-wrapper{max-width:75%;display:block;margin:40px auto 20px}.bordered-img{border:3px solid #rgb(42,194,240)}.img-group{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.img-group img{padding:0;height:auto}.inline-img{display:inline-block;float:right;padding:2rem}
.subscribe-page-group{width:400px;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-align:center;align-items:center;padding:8px 0}.subscribe-page-group input{border-radius:3px;max-width:350px;width:80vw;border:1px solid #ccc;margin-right:10px;height:30px}.mc-field-group label{font-size:.9em;font-weight:600}.subscribe-button-large{font-family:-apple-system,system-ui,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;color:#fff;background:#rgb(42,194,240);border-radius:4px;border:0;padding:0 10px;margin:10px 0;cursor:pointer;width:40vw}.subscribe-button-large:hover{background:#3e8acf}.twitter-row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.twitter-row>div{padding-right:20px;min-width:300px}
.twitter-tweet,twitterwidget{margin-left:auto;margin-right:auto}
.sidebar-group{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-align:center;align-items:center;padding:8px 0}.sidebar{padding-left:2rem}.subscribe-container{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;-ms-flex-wrap:wrap;flex-wrap:wrap}.subscribe-email{padding:0 .1rem;margin:0 .2rem 0 0;font-size:.7rem;height:1.5rem;width:6rem}.subscribe-button{color:#fff;background:#rgb(42,194,240);border-radius:4px;font-size:1rem;line-height:1rem;height:1.5rem;width:1.5rem;max-width:2rem;-ms-flex-positive:0;flex-grow:0;border:0;margin:0;cursor:pointer}.rss{padding-bottom:10px}.rss a{display:-ms-flexbox;display:flex}.rss-icon{display:block;width:17px;margin-right:.5em;height:50px}.rss-icon *{fill:#f1684e}.twitter-item{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;margin-bottom:15px}.twitter-item iframe{margin:0 0 0 10px}

/*# sourceMappingURL=component---src-templates-blog-post-js.9b3d8d681b5b5d0a8285.css.map*/</style><style id="glamor-styles">.css-tcc0st,[data-css-tcc0st]{color:#999999;font-size:16px;font-family:"mr-eaves-xl-modern", "Helvetica Neue", Arial, sans-serif;}.css-tcc0st:hover,[data-css-tcc0st]:hover{color:#F1684E;}.css-5xytwl,[data-css-5xytwl]{font-family:"mr-eaves-xl-modern", "Helvetica Neue", Arial, sans-serif;font-size:120%;margin:0 1px 0.8rem 1px;color:initial;background:#FFFFFF;transition:all 0.5s ease;display:grid;grid-template-columns:5rem 1fr 6rem;grid-template-rows:1fr;box-shadow:0 1px 2px 0 rgba(43, 59, 93, 0.29);-webkit-transition:all 0.5s ease;-moz-transition:all 0.5s ease;-ms-grid-template-columns:5rem 1fr 6rem;-ms-grid-template-rows:1fr;}.css-5xytwl:hover,[data-css-5xytwl]:hover{text-decoration:none;box-shadow:0 10px 30px 0 rgba(0, 0, 0, 0.29);}@media all and (max-width: 700px){.css-5xytwl,[data-css-5xytwl]{grid-template-columns:5rem 1fr 0px;-ms-grid-template-columns:5rem 1fr 0px;}}.css-4u7z7f,[data-css-4u7z7f]{max-width:960px;margin:0 auto;padding:2.4rem 1.2rem;}.css-1rrcu7t,[data-css-1rrcu7t]{display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;padding-bottom:2rem;flex-direction:row;justify-content:space-between;flex-wrap:wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-webkit-box-lines:multiple;-webkit-flex-wrap:wrap;}.css-nj9d06,[data-css-nj9d06]{margin:0 20px 0 0;padding-bottom:0;}.css-nj9d06 a,[data-css-nj9d06] a{box-shadow:none;text-decoration:none;color:inherit;}.css-nj9d06 a:hover,[data-css-nj9d06] a:hover{text-decoration:none;}.css-ph524j,[data-css-ph524j]{color:#999999;}.css-1821md7,[data-css-1821md7]{padding:0 0.5rem;}@media all and (max-width: 400px){.css-1821md7,[data-css-1821md7]{padding:0 0.25rem;}}.css-1beg117,[data-css-1beg117]{display:block;font-family:"minion-3", Garamond, serif;font-size:16px;color:rgba(100,100,100, 0.8);margin-top:0.8rem;margin-bottom:0.8rem;}.css-d0z96,[data-css-d0z96]{display:block;max-width:100%;}.css-n40tvx,[data-css-n40tvx]{max-width:100%;}.css-n40tvx li,[data-css-n40tvx] li{padding-left:10px;}.css-n40tvx .reading-img img,[data-css-n40tvx] .reading-img img{width:150px;float:right;margin:0px 10px 20px 10px;}.css-n40tvx img.full-width,[data-css-n40tvx] img.full-width{max-height:none;}.css-n40tvx img.half-width,[data-css-n40tvx] img.half-width{max-height:none;width:50%;}.css-y3ugfx,[data-css-y3ugfx]{padding-left:2rem;}.css-1aluta2,[data-css-1aluta2]{height:300px;width:150px;overflow:hidden;margin:0 0 1rem 0;}@media all and (max-width: 700px){.css-1aluta2,[data-css-1aluta2]{display:none;}}.css-m9l7q0,[data-css-m9l7q0]{overflow:hidden;margin:0;}.css-m9l7q0 #mc_embed_signup form,[data-css-m9l7q0] #mc_embed_signup form{margin-bottom:20px;}@media all and (max-width: 700px){.css-m9l7q0,[data-css-m9l7q0]{padding-right:0;width:100% !important;padding:0 10px;}.css-m9l7q0 .mc-field-group,[data-css-m9l7q0] .mc-field-group{width:100% !important;}.css-m9l7q0 .mc-field-group input,[data-css-m9l7q0] .mc-field-group input{width:100% !important;font-size:0.8em;height:2.4em;}}.css-h2hkv8,[data-css-h2hkv8]{margin:0;font-size:0.79057rem;line-height:1.6rem;letter-spacing:-0.25px;}.css-4w3jde,[data-css-4w3jde]{color:inherit;}.css-33c833,[data-css-33c833]{margin-left:0;padding-left:0;}.css-7krt15,[data-css-7krt15]{display:block;width:2em;height:2em;margin-right:0.5em;}.css-7krt15 *,[data-css-7krt15] *{fill:rgba(256,256,256,1);}.css-7krt15 > i,[data-css-7krt15] > i{height:30px;}.css-a0bmeo,[data-css-a0bmeo]{max-width:60vw;display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;justify-content:space-between;align-items:center;padding:1rem;-webkit-box-pack:justify;-webkit-justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;}@media all and (max-width: 700px){.css-a0bmeo,[data-css-a0bmeo]{max-width:100vw;}}.css-1si8vwk,[data-css-1si8vwk]{display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;justify-content:space-between;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;}.css-1si8vwk> *,[data-css-1si8vwk]> *{margin-right:10px;}@media all and (max-width: 700px){.css-1si8vwk,[data-css-1si8vwk]{font-size:80%;}}.css-15odo6z,[data-css-15odo6z]{font-family:"minion-3", Garamond, serif;font-size:18px;margin:0;}@media all and (max-width: 700px){.css-15odo6z,[data-css-15odo6z]{font-size:70%;}}.css-gpdfjo,[data-css-gpdfjo]{white-space:nowrap;display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;font-size:18px;justify-content:space-between;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;}@media all and (max-width: 700px){.css-gpdfjo,[data-css-gpdfjo]{display:none;}}.css-1og8rco,[data-css-1og8rco]{background:rgba(240, 219, 79, 1.00);display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;padding-left:0.5rem;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-webkit-box-align:center;-webkit-align-items:center;}</style><script id="glamor-ids">
        // <![CDATA[
        window._glamor = ["tcc0st","5xytwl","4u7z7f","1rrcu7t","nj9d06","ph524j","1821md7","1beg117","d0z96","n40tvx","y3ugfx","1aluta2","m9l7q0","h2hkv8","4w3jde","33c833","7krt15","a0bmeo","1si8vwk","15odo6z","gpdfjo","1og8rco"]
        // ]]>
        </script><title data-react-helmet="true">Revertible Observables in Knockout | benmccormick.org</title><meta data-react-helmet="true" name="description" content="Ben McCormick&#x27;s blog on JavaScript and Web Development"/><meta data-react-helmet="true" name="keywords"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:site" content="@benmccormickorg"/><meta data-react-helmet="true" name="twitter:creator" content="@ben336"/><meta data-react-helmet="true" name="twitter:title" content="Revertible Observables in Knockout"/><meta data-react-helmet="true" name="twitter:description" content=""/><meta data-react-helmet="true" name="twitter:image" content="http://benmccormick.org/logo.png"/><script data-react-helmet="true" type="application/ld+json">{
                  "@context": "http://schema.org"
                  "@type": "BlogPosting",
                  "headline": "Revertible Observables in Knockout",
                  "genre": "Software Development",
                  "keywords": "",
                  "url": "http://benmccormick.org//2013/05/07/revertible-observables-in-knockout",
                  "image": "http://benmccormick.org/logo.png",
                  "datePublished": "2013-05-7",
                  
                  "articleBody": "<p>Last week I was looking for a way to use KnockoutJS on a configuration menu that required the user to be able to cancel or accept their input after filling out the menu.</p>
<p>Initially I was just copying the initial data and refilling my data model manually on cancel.  I wasn’t satisfied with that solution though.  It didn’t seem like it would scale well if the menu got more complicated, and it lacked the elegance and frictionless nature of most knockout data management.</p>
<p>After some searching I found <a href=\"http://www.knockmeout.net/2011/03/guard-your-model-accept-or-cancel-edits.html\">Ryan Niemeyer’s Protected Observable example</a>, and it initially seemed like exactly what I wanted, a way to only persist changes to the view model if they were explicitly confirmed.</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\">
      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//knockout-protected.js</span>
<span class=\"token comment\">//https://gist.github.com/benmccormick/5537138</span>

<span class=\"token comment\">//wrapper to an observable that requires accept/cancel</span>
ko<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">protectedObservable</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>initialValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
    <span class=\"token comment\">//private variables</span>
    <span class=\"token keyword\">var</span> _actualValue <span class=\"token operator\">=</span> ko<span class=\"token punctuation\">.</span><span class=\"token function\">observable</span><span class=\"token punctuation\">(</span>initialValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>
        _tempValue <span class=\"token operator\">=</span> initialValue<span class=\"token punctuation\">;</span>

    <span class=\"token comment\">//computed observable that we will return</span>
    <span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> ko<span class=\"token punctuation\">.</span><span class=\"token function\">computed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>
        <span class=\"token comment\">//always return the actual value</span>
        read<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
           <span class=\"token keyword\">return</span> <span class=\"token function\">_actualValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>
        <span class=\"token comment\">//stored in a temporary spot until commit</span>
        write<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>newValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
             _tempValue <span class=\"token operator\">=</span> newValue<span class=\"token punctuation\">;</span>
        <span class=\"token punctuation\">}</span>
    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

    <span class=\"token comment\">//if different, commit temp value</span>
    result<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">commit</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>_tempValue <span class=\"token operator\">!==</span> <span class=\"token function\">_actualValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
             <span class=\"token function\">_actualValue</span><span class=\"token punctuation\">(</span>_tempValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
        <span class=\"token punctuation\">}</span>
    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>

    <span class=\"token comment\">//force subscribers to take original</span>
    result<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">reset</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
        _actualValue<span class=\"token punctuation\">.</span><span class=\"token function\">valueHasMutated</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
        _tempValue <span class=\"token operator\">=</span> <span class=\"token function\">_actualValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//reset temp value</span>
    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>

    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>
<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>
      </div>
<p>There was a problem with this approach though.  Ryan’s model saves the update to a temporary value and then moves it into an observable if the result is committed.  That works great for simple models and mostly behaves well if the user cancels out of the edit screen without committing or resetting. But it breaks down if you have another computed observable that depends on the value of the protected observable.  In my case I had an output that I wanted to show dynamically changing based on the input allowing experimentation.  Here’s a simplified example using a protected observable:</p>
<iframe width=\"100%\" height=\"300\" src=\"https://jsfiddle.net/tc299/4/embedded/\" allowfullscreen=\"allowfullscreen\" frameborder=\"0\"></iframe>
<p>As you can see, the tables field doesn’t update until you confirm the entry. Ideally though we’d like it to update as the user changes their guest number, so they can see the effect on cost and space used before they confirm a change in guests.  We want to do this while still preserving the users abilities to cancel changes if they don’t like the results though.  So how to we do this?  We make a small change to the default value returned by the protected observable.  Here’s what I’m calling a Revertible Observable:</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\">
      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/*
knockout-revertible.js
https://gist.github.com/benmccormick/5537115
*/</span>

 <span class=\"token comment\">//wrapper to an observable that requires accept/cancel</span>
ko<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">revertibleObservable</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>initialValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
    <span class=\"token comment\">//private variables</span>
    <span class=\"token keyword\">var</span> _actualValue <span class=\"token operator\">=</span> initialValue<span class=\"token punctuation\">,</span>
        _tempValue <span class=\"token operator\">=</span> ko<span class=\"token punctuation\">.</span><span class=\"token function\">observable</span><span class=\"token punctuation\">(</span>initialValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

    <span class=\"token comment\">//computed observable that we will return</span>
    <span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> ko<span class=\"token punctuation\">.</span><span class=\"token function\">computed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>
        <span class=\"token comment\">//always return the current value</span>
        read<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
           <span class=\"token keyword\">return</span> <span class=\"token function\">_tempValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>
        <span class=\"token comment\">//stored in a temporary spot until commit</span>
        write<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>newValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
             <span class=\"token function\">_tempValue</span><span class=\"token punctuation\">(</span>newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
        <span class=\"token punctuation\">}</span>
    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

    <span class=\"token comment\">//if different, commit temp value</span>
    result<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">commit</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">_tempValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> _actualValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
            _tempValue<span class=\"token punctuation\">.</span><span class=\"token function\">valueHasMutated</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
             _actualValue <span class=\"token operator\">=</span> <span class=\"token function\">_tempValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
        <span class=\"token punctuation\">}</span>
    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>

    <span class=\"token comment\">//force subscribers to take original</span>
    result<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">reset</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
        <span class=\"token function\">_tempValue</span><span class=\"token punctuation\">(</span>_actualValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//reset temp value</span>
    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>

    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>
<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>
      </div>
<p>This preserves the ability to see the results of your changes in realtime, while also allowing you to easily revert with a simple cancel button and no explicit data tracking.  Now our example can work as we’d like, with the customer getting immediate feedback on how their guest changes effect the total cost.</p>
<iframe width=\"100%\" height=\"300\" src=\"https://jsfiddle.net/QQYrL/8/embedded/\" allowfullscreen=\"allowfullscreen\" frameborder=\"0\"></iframe>
<p>Note that this isn’t a silver bullet.  An explicit confirmation is no longer required for the changes to be passed through, so its important to make sure that the user either confirms or resets the values after entering them.  But it allows for instant feedback on changes while still supporting the ability to dump the changes if the user decides they don’t like the result.  I think its a useful pattern for any situation where the user is entering data and you want to show them a preview of the outcome.  I hope others will find it as useful as I have.</p>
<h3>Update</h3>
<p>I showed this to Ryan and he replied with a nice simplification of the concept.</p>
<blockquote class=\"twitter-tweet\"><p>@<a href=\"https://twitter.com/ben336\">ben336</a> nice Ben. I have had to do something similar in the past. Here is a simplified version that I have used: <a href=\"http://t.co/IiqFe90kwi\" title=\"https://jsfiddle.net/rniemeyer/SFCgr/\">jsfiddle.net/rniemeyer/SFCg…</a></p>&mdash; Ryan Niemeyer (@RPNiemeyer) <a href=\"https://twitter.com/RPNiemeyer/status/331954950009663488\">May 8, 2013</a></blockquote>
<div class=\"gatsby-highlight\" data-language=\"javascript\">
      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//Ryan Niemeyer's simplified knockout-revertible.js</span>
<span class=\"token comment\">//https://jsfiddle.net/rniemeyer/SFCgr/ Fiddle</span>
 ko<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">revertibleObservable</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>initialValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
    <span class=\"token comment\">//private variables</span>
    <span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> ko<span class=\"token punctuation\">.</span><span class=\"token function\">observable</span><span class=\"token punctuation\">(</span>initialValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

    result<span class=\"token punctuation\">.</span>forEditing <span class=\"token operator\">=</span> ko<span class=\"token punctuation\">.</span><span class=\"token function\">observable</span><span class=\"token punctuation\">(</span>initialValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

    <span class=\"token comment\">//if different, commit edit value</span>
    result<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">commit</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
        <span class=\"token keyword\">var</span> editValue <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span><span class=\"token function\">forEditing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>editValue <span class=\"token operator\">!==</span> <span class=\"token function\">result</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
            <span class=\"token function\">result</span><span class=\"token punctuation\">(</span>editValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
        <span class=\"token punctuation\">}</span>
    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>

    <span class=\"token comment\">//force subscribers to take original</span>
    result<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">reset</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
        result<span class=\"token punctuation\">.</span><span class=\"token function\">forEditing</span><span class=\"token punctuation\">(</span><span class=\"token function\">result</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>

    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>
<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>
      </div>",
                    "author": {
                      "@type": "Person",
                      "name": "Ben McCormick"
                      "email": "mailto:ben@benmccormick.org",
                      "image": "/profile_pic.jpg",
                      "jobTitle": "Software Engineer",
                      "alumniOf": "Duke",
                      "birthPlace": "Pittsburgh, PA",
                      "gender": "male",
                      "url": "http://benmccormick.org",
                	    "sameAs" : [
                        "https://www.linkedin.com/in/benmccormick",
                        "http://twitter.com/ben336",
                      ]
                   }
                }</script><link as="script" rel="preload" href="/component---src-templates-blog-post-js-79bad4759221583444b7.js"/><link as="script" rel="preload" href="/app-953fe7113783f75e617e.js"/><link as="script" rel="preload" href="/1-d8186e9e88935cc53f94.js"/><link as="script" rel="preload" href="/0-bb117d64e954362e8a01.js"/><link as="script" rel="preload" href="/webpack-runtime-d39491491a83c0a3f44f.js"/><link rel="preload" href="/static/d/527/path---2013-05-07-revertible-observables-in-knockout-4-e-0-1e4-o61gvjeda1Abm8rPpyVuLtCRBU.json" as="fetch" crossOrigin="use-credentials"/></head><body class="landing-page" style="background:#FCFCFC;padding:0 10px"><div id="___gatsby"><div class="css-4u7z7f" data-reactroot=""><div class="css-1rrcu7t"><h3 class="css-nj9d06"><a name="title" href="/">benmccormick.org</a></h3><div class="css-ph524j"><a class="css-tcc0st" href="/archive/">Blog</a><span class="css-1821md7"></span><a class="css-tcc0st" href="/subscribe/">Subscribe</a><span class="css-1821md7"></span><a class="css-tcc0st" href="/speaking/">Speaking</a><span class="css-1821md7"></span><a class="css-tcc0st" href="http://twitter.com/ben336">Twitter</a><span class="css-1821md7"></span><a class="css-tcc0st" href="/about/">About</a></div></div><article class="markdown"><div class="post-title-area"><h5 class="css-1beg117">May 7th 2013</h5><h1 class="css-d0z96">Revertible Observables in Knockout</h1></div><div class="columns"><div class="css-n40tvx"><p>Last week I was looking for a way to use KnockoutJS on a configuration menu that required the user to be able to cancel or accept their input after filling out the menu.</p>
<p>Initially I was just copying the initial data and refilling my data model manually on cancel.  I wasn’t satisfied with that solution though.  It didn’t seem like it would scale well if the menu got more complicated, and it lacked the elegance and frictionless nature of most knockout data management.</p>
<p>After some searching I found <a href="http://www.knockmeout.net/2011/03/guard-your-model-accept-or-cancel-edits.html">Ryan Niemeyer’s Protected Observable example</a>, and it initially seemed like exactly what I wanted, a way to only persist changes to the view model if they were explicitly confirmed.</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">//knockout-protected.js</span>
<span class="token comment">//https://gist.github.com/benmccormick/5537138</span>

<span class="token comment">//wrapper to an observable that requires accept/cancel</span>
ko<span class="token punctuation">.</span><span class="token function-variable function">protectedObservable</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//private variables</span>
    <span class="token keyword">var</span> _actualValue <span class="token operator">=</span> ko<span class="token punctuation">.</span><span class="token function">observable</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span><span class="token punctuation">,</span>
        _tempValue <span class="token operator">=</span> initialValue<span class="token punctuation">;</span>

    <span class="token comment">//computed observable that we will return</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> ko<span class="token punctuation">.</span><span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">//always return the actual value</span>
        read<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token function">_actualValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//stored in a temporary spot until commit</span>
        write<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             _tempValue <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//if different, commit temp value</span>
    result<span class="token punctuation">.</span><span class="token function-variable function">commit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_tempValue <span class="token operator">!==</span> <span class="token function">_actualValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token function">_actualValue</span><span class="token punctuation">(</span>_tempValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">//force subscribers to take original</span>
    result<span class="token punctuation">.</span><span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _actualValue<span class="token punctuation">.</span><span class="token function">valueHasMutated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        _tempValue <span class="token operator">=</span> <span class="token function">_actualValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//reset temp value</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>There was a problem with this approach though.  Ryan’s model saves the update to a temporary value and then moves it into an observable if the result is committed.  That works great for simple models and mostly behaves well if the user cancels out of the edit screen without committing or resetting. But it breaks down if you have another computed observable that depends on the value of the protected observable.  In my case I had an output that I wanted to show dynamically changing based on the input allowing experimentation.  Here’s a simplified example using a protected observable:</p>
<iframe width="100%" height="300" src="https://jsfiddle.net/tc299/4/embedded/" allowfullscreen="allowfullscreen" frameborder="0"></iframe>
<p>As you can see, the tables field doesn’t update until you confirm the entry. Ideally though we’d like it to update as the user changes their guest number, so they can see the effect on cost and space used before they confirm a change in guests.  We want to do this while still preserving the users abilities to cancel changes if they don’t like the results though.  So how to we do this?  We make a small change to the default value returned by the protected observable.  Here’s what I’m calling a Revertible Observable:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">/*
knockout-revertible.js
https://gist.github.com/benmccormick/5537115
*/</span>

 <span class="token comment">//wrapper to an observable that requires accept/cancel</span>
ko<span class="token punctuation">.</span><span class="token function-variable function">revertibleObservable</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//private variables</span>
    <span class="token keyword">var</span> _actualValue <span class="token operator">=</span> initialValue<span class="token punctuation">,</span>
        _tempValue <span class="token operator">=</span> ko<span class="token punctuation">.</span><span class="token function">observable</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//computed observable that we will return</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> ko<span class="token punctuation">.</span><span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">//always return the current value</span>
        read<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token function">_tempValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//stored in a temporary spot until commit</span>
        write<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token function">_tempValue</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//if different, commit temp value</span>
    result<span class="token punctuation">.</span><span class="token function-variable function">commit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">_tempValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> _actualValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            _tempValue<span class="token punctuation">.</span><span class="token function">valueHasMutated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             _actualValue <span class="token operator">=</span> <span class="token function">_tempValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">//force subscribers to take original</span>
    result<span class="token punctuation">.</span><span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">_tempValue</span><span class="token punctuation">(</span>_actualValue<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//reset temp value</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>This preserves the ability to see the results of your changes in realtime, while also allowing you to easily revert with a simple cancel button and no explicit data tracking.  Now our example can work as we’d like, with the customer getting immediate feedback on how their guest changes effect the total cost.</p>
<iframe width="100%" height="300" src="https://jsfiddle.net/QQYrL/8/embedded/" allowfullscreen="allowfullscreen" frameborder="0"></iframe>
<p>Note that this isn’t a silver bullet.  An explicit confirmation is no longer required for the changes to be passed through, so its important to make sure that the user either confirms or resets the values after entering them.  But it allows for instant feedback on changes while still supporting the ability to dump the changes if the user decides they don’t like the result.  I think its a useful pattern for any situation where the user is entering data and you want to show them a preview of the outcome.  I hope others will find it as useful as I have.</p>
<h3>Update</h3>
<p>I showed this to Ryan and he replied with a nice simplification of the concept.</p>
<blockquote class="twitter-tweet"><p>@<a href="https://twitter.com/ben336">ben336</a> nice Ben. I have had to do something similar in the past. Here is a simplified version that I have used: <a href="http://t.co/IiqFe90kwi" title="https://jsfiddle.net/rniemeyer/SFCgr/">jsfiddle.net/rniemeyer/SFCg…</a></p>&mdash; Ryan Niemeyer (@RPNiemeyer) <a href="https://twitter.com/RPNiemeyer/status/331954950009663488">May 8, 2013</a></blockquote>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">//Ryan Niemeyer's simplified knockout-revertible.js</span>
<span class="token comment">//https://jsfiddle.net/rniemeyer/SFCgr/ Fiddle</span>
 ko<span class="token punctuation">.</span><span class="token function-variable function">revertibleObservable</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//private variables</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> ko<span class="token punctuation">.</span><span class="token function">observable</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span><span class="token punctuation">;</span>

    result<span class="token punctuation">.</span>forEditing <span class="token operator">=</span> ko<span class="token punctuation">.</span><span class="token function">observable</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//if different, commit edit value</span>
    result<span class="token punctuation">.</span><span class="token function-variable function">commit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> editValue <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">forEditing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>editValue <span class="token operator">!==</span> <span class="token function">result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">result</span><span class="token punctuation">(</span>editValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">//force subscribers to take original</span>
    result<span class="token punctuation">.</span><span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result<span class="token punctuation">.</span><span class="token function">forEditing</span><span class="token punctuation">(</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
      </div></div><div class="css-y3ugfx no-mobile"><div class="css-1aluta2"></div><div class="css-m9l7q0"><div id="mc_embed_signup"><h6 class="css-h2hkv8">Subscribe via email</h6><form action="//benmccormick.us8.list-manage.com/subscribe/post?u=115446b80fd9d930ba091cc27&amp;id=f5b9f5acf2" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group sidebar-group"><input type="email" name="EMAIL" class="subscribe-email required email" id="mce-EMAIL" placeholder="Email Address" value=""/><input type="submit" value="&gt;" name="subscribe" id="mc-embedded-subscribe" class="subscribe-button button"/></div><div id="mce-responses" class="clear"><div class="response" id="mce-error-response" style="display:none"></div><div class="response" id="mce-success-response" style="display:none"></div></div><div style="position:absolute;left:-5000px" aria-hidden="true"><input type="text" name="b_115446b80fd9d930ba091cc27_f5b9f5acf2" tabindex="-1" value=""/></div><div class="clear"></div></div></form></div></div></div></div><div><hr/><div class=""><h2 class="css-4w3jde">You Might Also Like These Articles</h2><ul class="css-33c833"><a class="css-5xytwl" href="/2013/05/07/revertible-observables-in-knockout"><div class="css-1og8rco"><span class="css-7krt15"><i><svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>beaker</title><desc>Created with Sketch.</desc><defs></defs><g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="beaker" fill="#000000"><path d="M14.3797254,14.59 L10.9997254,7 L10.9997254,3 L11.9997254,3 L11.9997254,2 L2.99972539,2 L2.99972539,3 L3.99972539,3 L3.99972539,7 L0.62972539,14.59 C0.32972539,15.25 0.81972539,16 1.53972539,16 L13.4797254,16 C14.1997254,16 14.6797254,15.25 14.3897254,14.59 L14.3797254,14.59 Z M3.74972539,10 L4.99972539,7 L4.99972539,3 L9.99972539,3 L9.99972539,7 L11.2497254,10 L3.74972539,10 L3.74972539,10 Z M7.99972539,8 L8.99972539,8 L8.99972539,9 L7.99972539,9 L7.99972539,8 L7.99972539,8 Z M6.99972539,7 L5.99972539,7 L5.99972539,6 L6.99972539,6 L6.99972539,7 L6.99972539,7 Z M6.99972539,4 L7.99972539,4 L7.99972539,5 L6.99972539,5 L6.99972539,4 L6.99972539,4 Z M6.99972539,1 L5.99972539,1 L5.99972539,0 L6.99972539,0 L6.99972539,1 L6.99972539,1 Z" id="Shape"></path></g></g></svg></i></span></div><div class="css-a0bmeo"><div><div class="css-1si8vwk">Revertible Observables in Knockout</div><p class="css-15odo6z">Building an observable with simple undo functionality</p></div></div><span class="css-gpdfjo no-mobile">May 7th 2013</span></a><a class="css-5xytwl" href="/2013/02/13/simple-publish-subscribe-with-jquery"><div class="css-1og8rco"><span class="css-7krt15"><i><svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>beaker</title><desc>Created with Sketch.</desc><defs></defs><g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="beaker" fill="#000000"><path d="M14.3797254,14.59 L10.9997254,7 L10.9997254,3 L11.9997254,3 L11.9997254,2 L2.99972539,2 L2.99972539,3 L3.99972539,3 L3.99972539,7 L0.62972539,14.59 C0.32972539,15.25 0.81972539,16 1.53972539,16 L13.4797254,16 C14.1997254,16 14.6797254,15.25 14.3897254,14.59 L14.3797254,14.59 Z M3.74972539,10 L4.99972539,7 L4.99972539,3 L9.99972539,3 L9.99972539,7 L11.2497254,10 L3.74972539,10 L3.74972539,10 Z M7.99972539,8 L8.99972539,8 L8.99972539,9 L7.99972539,9 L7.99972539,8 L7.99972539,8 Z M6.99972539,7 L5.99972539,7 L5.99972539,6 L6.99972539,6 L6.99972539,7 L6.99972539,7 Z M6.99972539,4 L7.99972539,4 L7.99972539,5 L6.99972539,5 L6.99972539,4 L6.99972539,4 Z M6.99972539,1 L5.99972539,1 L5.99972539,0 L6.99972539,0 L6.99972539,1 L6.99972539,1 Z" id="Shape"></path></g></g></svg></i></span></div><div class="css-a0bmeo"><div><div class="css-1si8vwk">Simple Publish-Subscribe with jQuery</div><p class="css-15odo6z">Building a basic pub-sub wrapper around jQuery</p></div></div><span class="css-gpdfjo no-mobile">Feb 13th 2013</span></a><a class="css-5xytwl" href="/2014/11/08/all-about-angular-2-0"><div class="css-1og8rco"><span class="css-7krt15"><i><svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>beaker</title><desc>Created with Sketch.</desc><defs></defs><g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="beaker" fill="#000000"><path d="M14.3797254,14.59 L10.9997254,7 L10.9997254,3 L11.9997254,3 L11.9997254,2 L2.99972539,2 L2.99972539,3 L3.99972539,3 L3.99972539,7 L0.62972539,14.59 C0.32972539,15.25 0.81972539,16 1.53972539,16 L13.4797254,16 C14.1997254,16 14.6797254,15.25 14.3897254,14.59 L14.3797254,14.59 Z M3.74972539,10 L4.99972539,7 L4.99972539,3 L9.99972539,3 L9.99972539,7 L11.2497254,10 L3.74972539,10 L3.74972539,10 Z M7.99972539,8 L8.99972539,8 L8.99972539,9 L7.99972539,9 L7.99972539,8 L7.99972539,8 Z M6.99972539,7 L5.99972539,7 L5.99972539,6 L6.99972539,6 L6.99972539,7 L6.99972539,7 Z M6.99972539,4 L7.99972539,4 L7.99972539,5 L6.99972539,5 L6.99972539,4 L6.99972539,4 Z M6.99972539,1 L5.99972539,1 L5.99972539,0 L6.99972539,0 L6.99972539,1 L6.99972539,1 Z" id="Shape"></path></g></g></svg></i></span></div><div class="css-a0bmeo"><div><div class="css-1si8vwk">Thoughts on Angular 2.0</div><p class="css-15odo6z">An early look at the next version of Angular</p></div></div><span class="css-gpdfjo no-mobile">Nov 8th 2014</span></a></ul></div></div></article></div></div><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-37323973-1', 'auto');
            ga('send', 'pageview');
        </script><script>
          (function(d) {
            var config = {
              kitId: 'msd6bqv',
              scriptTimeout: 300,
              async: true
            },
            h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/wf-loading/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
          })(document);
        </script><script>
          window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"2013-05-07-revertible-observables-in-knockout-4e0","path":"/2013/05/07/revertible-observables-in-knockout"};window.dataPath="527/path---2013-05-07-revertible-observables-in-knockout-4-e-0-1e4-o61gvjeda1Abm8rPpyVuLtCRBU";/*]]>*/</script><script src="/webpack-runtime-d39491491a83c0a3f44f.js" async=""></script><script src="/0-bb117d64e954362e8a01.js" async=""></script><script src="/1-d8186e9e88935cc53f94.js" async=""></script><script src="/app-953fe7113783f75e617e.js" async=""></script><script src="/component---src-templates-blog-post-js-79bad4759221583444b7.js" async=""></script></body></html>