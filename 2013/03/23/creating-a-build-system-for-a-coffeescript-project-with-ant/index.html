<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=yyxgnp97qG"/><link rel="icon" type="image/png" href="/favicon-32x32.png?v=yyxgnp97qG" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png?v=yyxgnp97qG" sizes="16x16"/><link rel="manifest" href="/manifest.json"/><link rel="mask-icon" href="/safari-pinned-tab.svg?v=yyxgnp97qG" color="#57a3e8"/><link rel="alternate" title="JSON Feed" type="application/json" href="/feed.json"/><link rel="shortcut icon" href="/favicon.ico?v=yyxgnp97qG"/><meta name="theme-color" content="#ffffff"/><script type="text/javascript" src="//use.typekit.net/msd6bqv.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script><title data-react-helmet="true">Creating a Build System For a Coffeescript Project with Ant | benmccormick.org</title><meta data-react-helmet="true" name="description" content="Ben McCormick&#x27;s blog on JavaScript and Web Development"/><meta data-react-helmet="true" name="keywords" content=""/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:site" content="@benmccormickorg"/><meta data-react-helmet="true" name="twitter:creator" content="@ben336"/><meta data-react-helmet="true" name="twitter:title" content="Creating a Build System For a Coffeescript Project with Ant"/><meta data-react-helmet="true" name="twitter:description" content=""/><meta data-react-helmet="true" name="twitter:image" content="http://benmccormick.org/logo.png"/><script data-react-helmet="true" type="application/ld+json">{
                  "@context": "http://schema.org"
                  "@type": "BlogPosting",
                  "headline": "Creating a Build System For a Coffeescript Project with Ant",
                  "genre": "Software Development",
                  "keywords": "",
                  "url": "http://benmccormick.org/2013/03/23/creating-a-build-system-for-a-coffeescript-project-with-ant",
                  "image": "http://benmccormick.org/logo.png",
                  "datePublished": "2017-07-10",
                  
                  "articleBody": "<p>I’ve recently taken the time to develop an organized build system for a <a href=\"http://Coffeescript.org/\">Coffeescript</a> and <a href=\"http://sass-lang.com/\">SASS</a> <a href=\"https://bitbucket.org/ben336/scratchcalc\">project</a> that I’ve been working on in my free time.  I learned a lot during the process, and I wanted to share my experience here.  I used Ant for my build system, and worked in a variety of different libraries for minification, testing and documentation.</p>
<h3>Getting Started</h3>
<p>The first step is to install Ant.  It comes preinstalled on OSX, is <a href=\"http://www.rndblog.com/how-to-install-ant-on-linux/\">fairly straightforward</a> to install on Linux, and is <a href=\"http://www.nczonline.net/blog/2012/04/12/how-to-install-apache-ant-on-windows/\">a bit more involved</a> to install on Windows  If you’re using my exact setup, you’ll also need <a href=\"http://nodejs.org/\">NodeJS</a> (for Coffeescript, UglifyJS,and Docco) and <a href=\"http://www.ruby-lang.org/\">Ruby</a> (for SASS) installed.</p>
<h3>My Project Structure</h3>
<p>I went for a structure with 4 directories.</p>
<ul>
<li>src</li>
<li>build</li>
<li>test</li>
<li>docs</li>
</ul>
<p>All of the source files are in the source directory, with Javascript and Coffeescript files in a scripts directory, and SASS styles in a styles folder.  This particular app has only a single HTML file, which sits in the root of the source directory.  The test folder contains a single HTML page, and a series of unit test files written in Coffeescript, in a structure that mirrors the src directory.  The build and docs directories are initially empty.</p>
<h3>The Basics</h3>
<p>We start with a simple Ant setup.  We’ll create an init task, a clean task, and debug and production tasks.  The following code goes into our build.xml file, which is placed at the root of the project directory.</p>
<div class=\"gatsby-highlight\">
      <pre class=\"language-none\"><code><project name=\"scratchcalc\" default=\"debug\">

    <loadproperties srcfile=\"build.properties\" />

    <target name=\"debug\" depends=\"clean, init\">
        <echo>ScratchCalc Version ${version} (Debug Version)</echo>
    </target>

    <target name=\"production\" depends=\"clean, init\">
        <echo>ScratchCalc Version ${version}</echo>
    </target>

    <target name= \"init\">
        <mkdir dir=\"${build.dir}\" />
    </target>

    <target name=\"clean\">
        <delete dir=\"${build.dir}\" />
    </target>

</project></code></pre>
      </div>
<p>So for this project, we now have 4 tasks that we can call.  To call the init task, all we need to do is run</p>
<div class=\"gatsby-highlight\">
      <pre class=\"language-none\"><code>Ant init</code></pre>
      </div>
<p>from the command line.   Both our debug and production tasks mark clean and init as dependencies, so running them will remove and restore the build directory.  Beyond that, our build doesn’t do much right now.  Lets change that.</p>
<h3>Copying</h3>
<p>The simplest thing we can do with our Ant file is basic copying of files.  So lets start with a task that just copies over our files from the src directory to the build directory.</p>
<div class=\"gatsby-highlight\">
      <pre class=\"language-xml\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>copy<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">description</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Copies files from src to build dirs<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>echo</span><span class=\"token punctuation\">></span></span>Copying JS, CSS &amp; HTML Files<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>echo</span><span class=\"token punctuation\">></span></span>
     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>copy</span> <span class=\"token attr-name\">todir</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.dir}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fileset</span> <span class=\"token attr-name\">dir</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${src.dir}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">includes</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>**/*.HTML,**/*.css,**/*.js<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>copy</span><span class=\"token punctuation\">></span></span>
<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>target</span><span class=\"token punctuation\">></span></span>
</code></pre>
      </div>
<p>This simply copies any HTML, CSS, or Javascript files in the src directory over to an equivalent position in the build directory.  The segments in the <code>${}</code> format are variables defined in our build.properties file.  For my project, that looks something like this so far:</p>
<div class=\"gatsby-highlight\">
      <pre class=\"language-none\"><code>version = 0.0.1
copyright = Copyright 2012-2013 Ben McCormick.
src.dir = ./src
build.dir = ./build
test.dir = ./test
lib.dir = ${src.dir}/ext</code></pre>
      </div>
<p>This would be a great place to start for a project thats currently running without a build system.  If you’re able to get your project to build like this, it will set you up to be able to start more interesting things going forward.</p>
<p>And we of course want to do more interesting things.  This project uses Coffeescript and SASS, so we’ll need to do a bit more than just copy files.  So lets copy those scripts as well, but convert them to Javascript and CSS while we do.</p>
<div class=\"gatsby-highlight\">
      <pre class=\"language-xml\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>copy<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">description</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Compiles Coffeescript and SASS files,copies the rest<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>echo</span><span class=\"token punctuation\">></span></span>Copying Coffeescript Files<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>echo</span><span class=\"token punctuation\">></span></span>
     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>copy</span> <span class=\"token attr-name\">todir</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.dir}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fileset</span> <span class=\"token attr-name\">dir</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${src.dir}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">includes</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>**/*.HTML,**/*.css,**/*.js<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>copy</span><span class=\"token punctuation\">></span></span>
     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>exec</span> <span class=\"token attr-name\">executable</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>coffee<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--compile<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>
          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--map<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--output<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.script.dir}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${src.script.dir}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>exec</span><span class=\"token punctuation\">></span></span>
     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mkdir</span> <span class=\"token attr-name\">dir</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.styles.dir}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>apply</span> <span class=\"token attr-name\">executable</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sass<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dest</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.dir}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">verbose</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">force</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">failonerror</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--unix-newlines<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>srcfile</span> <span class=\"token punctuation\">/></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>targetfile</span> <span class=\"token punctuation\">/></span></span>
        &lt;filelist dir =\"${src.dir}\" files=\"styles/scratch.sass\" />
        <span class=\"token comment\" spellcheck=\"true\">&lt;!--&lt;fileset dir=\"${src.dir}\" includes=\"**/*.sass\"  />--></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mapper</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>glob<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">from</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>*.sass<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>*.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>apply</span><span class=\"token punctuation\">></span></span>
<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>target</span><span class=\"token punctuation\">></span></span>
</code></pre>
      </div>
<p>So along with copying the raw files, we also now copy the Coffeescript and SASS files.  For Coffeescript, we run the coffee executable against the entire src dir, and have it mirror the output to the build dir.  For Sass, we only want to run the compile on a single file, which pulls all of the other files into it through import statements.  So we use the filelist and mapper to specify the input and output files.</p>
<h3>Concatenation</h3>
<p>Mirroring your directory can be helpful for debugging, and is a good initial step if you’re converting to Ant from a locally run project.  But we’d really like to limit the amount of requests we make when deploying our site.  To do that, we’ll concatenate the js files together.  For my project I create 2 files, one for my external dependencies, and one for my own local files.  I may eventually reduce this to 1, but for now I like separating the 2 for debugging clarity.</p>
<div class=\"gatsby-highlight\">
      <pre class=\"language-xml\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>concatenatejs<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">description</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Concatenate All the JS together<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
    <span class=\"token comment\" spellcheck=\"true\">&lt;!-- Instead of concatenating the JS files directly, use coffee to preserve the source map --></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>echo</span><span class=\"token punctuation\">></span></span>Concatenating the JS<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>echo</span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>concat</span> <span class=\"token attr-name\">destfile</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.libs}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
         &lt;filelist dir =\"${build.script.dir}\" files=\"lib/jquery.js,lib/knockout.js,lib/BigDecimal.js\" />

          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fileset</span> <span class=\"token attr-name\">dir</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.script.dir}/lib<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">includes</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>**/*.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>concat</span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>apply</span> <span class=\"token attr-name\">executable</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>coffee<span class=\"token punctuation\">\"</span></span>  <span class=\"token attr-name\">verbose</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">force</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">failonerror</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parallel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--compile<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--map<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--join<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.script.output}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>srcfile</span> <span class=\"token punctuation\">/></span></span>
    &lt;filelist dir =\"${src.script.dir}\" files=\"editor/toolkit.coffee,editor/markupGen.coffee,parser/eqTreeBuilder.coffee,parser/NumberValue.coffee,parser/eqScanner.coffee,parser/eqTokenizer.coffee,parser/tablePlaceHolder.coffee,parser/EQParser.coffee,parser/calcFramework.coffee,editor/editor.coffee\" />
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>apply</span><span class=\"token punctuation\">></span></span>
<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>target</span><span class=\"token punctuation\">></span></span>
</code></pre>
      </div>
<p>For the external libraries I use Ant’s built in <code>concat</code> task to concatenate the files together.  For the Coffeescript files, I use the coffee compiler rather than concatenating the files that I copied.  I was hoping to do this in order to preserve the source map, which allows for easier debugging.  Unfortunately the compiler has trouble generating source maps for joined files right now.  I’m hoping to fix that in the future, in the meantime I may be using a different approach, possibly using uglifyjs to concatenate the files and generate the maps.</p>
<h2>Minify</h2>
<p>Speaking of <a href=\"https://github.com/mishoo/UglifyJS2\">uglifyjs</a>, I use that for minifying my Javascript.</p>
<div class=\"gatsby-highlight\">
      <pre class=\"language-xml\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>minify<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">description</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Minify the JS for Production<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>echo</span><span class=\"token punctuation\">></span></span>Minifying the JS For Production with UglifyJS<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>echo</span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>apply</span> <span class=\"token attr-name\">executable</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>uglifyjs<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">verbose</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">force</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">failonerror</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>srcfile</span> <span class=\"token punctuation\">/></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--output<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.script.output}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
        &lt;filelist  files =\"${build.script.output}\"/>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>apply</span><span class=\"token punctuation\">></span></span>
<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>target</span><span class=\"token punctuation\">></span></span>
</code></pre>
      </div>
<p>I only require this for the production task, and leave the full source available for the debug task to preserve the readability of the generated JS.</p>
<h3>Documentation</h3>
<p>I use <a href=\"http://jashkenas.github.com/docco\">docco</a> for my Coffeescript documentation.  It converts comments into documentation and runs them through a <a href=\"http://daringfireball.net/projects/markdown/\">Markdown</a> parser to generate a clean HTML page with the code and comments intermingled.</p>
<div class=\"gatsby-highlight\">
      <pre class=\"language-xml\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>documentation<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">description</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Generate Docco Documentation for coffee files<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>echo</span><span class=\"token punctuation\">></span></span>Generating Documentation with Docco<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>echo</span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>apply</span> <span class=\"token attr-name\">executable</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>docco<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">verbose</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">force</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">failonerror</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>srcfile</span> <span class=\"token punctuation\">/></span></span>
        &lt;fileset dir =\"${src.script.dir}\" >
            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>**/*.coffee<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>fileset</span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>apply</span><span class=\"token punctuation\">></span></span>
<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>target</span><span class=\"token punctuation\">></span></span>
</code></pre>
      </div>
<h3>Testing</h3>
<p>I use Jasmine for testing.  <a href=\"http://pivotal.github.com/jasmine\">Jasmine</a> is a “Behavior Driven Development” style unit testing framework for Javascript.  In an ideal world I would be setting up a build task to run on the server and display the results when I run the build.  Unfortunately I wasn’t able to find a way to do that without generating additional dependencies.  Its possible with NodeJS or RequireJS style modules and dependencies, and its also possible using phantomJS, but I didn’t want to require either of those for testing.   So instead I have my build task generate an HTML page with the test results.  I may add some scripting to open this page by default after running a production build in the future.</p>
<div class=\"gatsby-highlight\">
      <pre class=\"language-xml\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>test<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">description</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Generate the JS for testing with Jasmine<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
  <span class=\"token comment\" spellcheck=\"true\">&lt;!-- Ideally this would run a server side jasmine test, but that requires better dependency management than we have right now--></span>
  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>echo</span><span class=\"token punctuation\">></span></span>Generating the Test JS with jasmine<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>echo</span><span class=\"token punctuation\">></span></span>
  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>apply</span> <span class=\"token attr-name\">executable</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>coffee<span class=\"token punctuation\">\"</span></span>  <span class=\"token attr-name\">verbose</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">force</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">failonerror</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parallel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--compile<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--join<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${test.output}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>srcfile</span> <span class=\"token punctuation\">/></span></span>
    &lt;fileset dir =\"${test.dir}\" >
      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>**/*.coffee<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>fileset</span><span class=\"token punctuation\">></span></span>
  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>apply</span><span class=\"token punctuation\">></span></span>
<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>target</span><span class=\"token punctuation\">></span></span>
</code></pre>
      </div>
<h3>Summary</h3>
<p>Adding a build system has been great for my project.  Its allowed me to be a lot more organized and to do some cool things that are a pain by hand (unit testing, Coffeescript).  I definitely recommend looking into doing this for any non-trivial Javascript/web project that you’re working on.</p>
<div class=\"gatsby-highlight\">
      <pre class=\"language-none\"><code><project name=\"scratchcalc\" default=\"debug\">

  <loadproperties srcfile=\"build.properties\" />

  <target name=\"debug\" depends=\"clean, init, copy,concatenatejs\">
    <echo>ScratchCalc Version ${version} (Debug Version)</echo>
  </target>

  <target name=\"production\" depends=\"clean, init, copy,concatenatejs,minify,documentation,test\">
    <echo>ScratchCalc Version ${version}</echo>
  </target>

  <target name=\"copy\" description=\"Compiles Coffeescript and SASS files,copies the rest\">
    <echo>Copying Coffeescript Files</echo>
     <copy todir=\"${build.dir}\">
      <fileset dir=\"${src.dir}\" includes=\"**/*.HTML,**/*.css,**/*.js\" />
     </copy>
     <exec executable=\"coffee\">
        <arg value=\"--compile\"/>
        <arg value=\"--map\" />
        <arg value=\"--output\" />
        <arg value=\"${build.script.dir}\" />
        <arg value=\"${src.script.dir}\" />
     </exec>
     <mkdir dir=\"${build.styles.dir}\" />
     <apply executable=\"sass\" dest=\"${build.dir}\" verbose=\"true\" force=\"true\" failonerror=\"true\">
          <arg value=\"--unix-newlines\" />
          <srcfile />
          <targetfile />
          <filelist dir =\"${src.dir}\" files=\"styles/scratch.sass\" />
          <!--<fileset dir=\"${src.dir}\" includes=\"**/*.sass\"  />-->
          <mapper type=\"glob\" from=\"*.sass\" to=\"*.css\"/>
      </apply>
  </target>

  <target name=\"concatenatejs\" description=\"Concatenate All the JS together\">
    <!-- Instead of concatenating the JS files directly, use coffee to preserve the source map -->
    <echo>Concatenating the JS</echo>
    <concat destfile=\"${build.libs}\">
       <filelist dir =\"${build.script.dir}\" files=\"lib/jquery.js,lib/knockout.js,lib/BigDecimal.js\" />

        <fileset dir=\"${build.script.dir}/lib\" includes=\"**/*.js\"/>
    </concat>
    <apply executable=\"coffee\"  verbose=\"true\" force=\"true\" failonerror=\"true\" parallel=\"true\">
      <arg value=\"--compile\" />
      <arg value=\"--map\" />
      <arg value=\"--join\" />
      <arg value=\"${build.script.output}\" />
      <srcfile />
      <filelist dir =\"${src.script.dir}\" files=\"...\" />
    </apply>
  </target>

  <target name=\"documentation\" description=\"Generate Docco Documentation for coffee files\">
    <echo>Generating Documentation with Docco</echo>
    <apply executable=\"docco\" verbose=\"true\" force=\"true\" failonerror=\"true\">
          <srcfile />
          <fileset dir =\"${src.script.dir}\" >
            <include name=\"**/*.coffee\"/>
          </fileset>
      </apply>
  </target>

  <target name=\"test\" description=\"Generate the JS for testing with Jasmine\">
    <!-- Ideally this would run a server side jasmine test, but that requires better dependency management than we have right now-->
    <echo>Generating the Test JS with jasmine</echo>
    <apply executable=\"coffee\"  verbose=\"true\" force=\"true\" failonerror=\"true\" parallel=\"true\">
      <arg value=\"--compile\" />
      <arg value=\"--join\" />
      <arg value=\"${test.output}\" />
      <srcfile />
      <fileset dir =\"${test.dir}\" >
        <include name=\"**/*.coffee\"/>
      </fileset>
    </apply>
  </target>

  <target name=\"minify\" description=\"Minify the JS for Production\">
    <echo>Minifying the JS For Production with UglifyJS</echo>
    <apply executable=\"uglifyjs\" verbose=\"true\" force=\"true\" failonerror=\"true\">
          <srcfile />
          <arg value=\"--output\" />
          <arg value=\"${build.script.output}\" />
          <filelist  files =\"${build.script.output}\"/>
      </apply>
  </target>

  <target name= \"init\">
    <mkdir dir=\"${build.dir}\" />
  </target>

  <target name=\"clean\">
    <delete dir=\"${build.dir}\" />
  </target>

</project></code></pre>
      </div>
<p><em>Update June 2014: Since writing this post, Javascript based build tools have continued to mature and grow.  These days I’d recommend <a href=\"http://gruntjs.com/\">Grunt</a> or <a href=\"http://gulpjs.com/\">Gulp</a> for your front end build script needs, though Ant is still a fine choice if you’re integrating your builds with a Java project, or have lots of experience with it.</em></p>
<hr>
<h3>Further Reading</h3>
<ul>
<li><a href=\"http://www.amazon.com/gp/product/1449327680/ref=as_li_tl?ie=UTF8&camp=1789&creative=390957&creativeASIN=1449327680&linkCode=as2&tag=productjavasc-20\">Maintainable JavaScript</a><img src=\"http://ir-na.amazon-adsystem.com/e/ir?t=productjavasc-20&#x26;l=as2&#x26;o=1&#x26;a=1449327680\" alt=\"\"> - This is a great little book for anyone writing Javascript applications in teams.  It has a great section on developing a Javascript build system with Ant</li>
</ul>",
                    "author": {
                      "@type": "Person",
                      "name": "Ben McCormick"
                      "email": "mailto:ben@benmccormick.org",
                      "image": "/profile_pic.jpg",
                      "jobTitle": "Software Engineer",
                      "alumniOf": "Duke",
                      "birthPlace": "Pittsburgh, PA",
                      "gender": "male",
                      "url": "http://benmccormick.org",
                	    "sameAs" : [
                        "https://www.linkedin.com/in/benmccormick",
                        "http://twitter.com/ben336",
                      ]
                   }
                }</script><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:125%/1.55em 'brandon-grotesque','Brandon Grotesque','Helvetica Neue','Helvetica','Arial','Lucida Sans','Geneva','Verdana','sans-serif';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'brandon-grotesque','Brandon Grotesque','Helvetica Neue','Helvetica','Arial','Lucida Sans','Geneva','Verdana','sans-serif';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:'brandon-grotesque','Brandon Grotesque','Helvetica Neue','Helvetica','Arial','Lucida Sans','Geneva','Verdana','sans-serif';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.5rem;line-height:2.325rem;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:'brandon-grotesque','Brandon Grotesque','Helvetica Neue','Helvetica','Arial','Lucida Sans','Geneva','Verdana','sans-serif';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.27542rem;line-height:1.55rem;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:'brandon-grotesque','Brandon Grotesque','Helvetica Neue','Helvetica','Arial','Lucida Sans','Geneva','Verdana','sans-serif';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.17608rem;line-height:1.55rem;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:'brandon-grotesque','Brandon Grotesque','Helvetica Neue','Helvetica','Arial','Lucida Sans','Geneva','Verdana','sans-serif';font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.55rem;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:'brandon-grotesque','Brandon Grotesque','Helvetica Neue','Helvetica','Arial','Lucida Sans','Geneva','Verdana','sans-serif';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.92211rem;line-height:1.55rem;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;color:inherit;font-family:'brandon-grotesque','Brandon Grotesque','Helvetica Neue','Helvetica','Arial','Lucida Sans','Geneva','Verdana','sans-serif';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.88547rem;line-height:1.55rem;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}ul{margin-left:1.55rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.55rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;font-size:0.85rem;line-height:1.1;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.1625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;font-size:1rem;line-height:1.55rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}blockquote{margin-left:1.55rem;margin-right:1.55rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.1625rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.1625rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.1625rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.55rem;margin-bottom:calc(1.1625rem / 2);margin-top:calc(1.1625rem / 2);}li > ul{margin-left:1.55rem;margin-bottom:calc(1.1625rem / 2);margin-top:calc(1.1625rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.1625rem / 2);}code{font-size:0.85rem;line-height:1.55rem;}kbd{font-size:0.85rem;line-height:1.55rem;}samp{font-size:0.85rem;line-height:1.55rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.03333rem;padding-right:1.03333rem;padding-top:0.775rem;padding-bottom:calc(0.775rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;font-size:75%;}pre code{background:none;line-height:1.1;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:"";}h1,h2,h3,h4,h5,h6{line-height:1.1;}@media only screen and (max-width:480px){html{font-size:112.5%;}}</style><style>.subscribe-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-wrap:wrap;flex-wrap:wrap}.subscribe-block{width:400px;padding-right:30px;overflow:hidden}.subscribe-block #mc_embed_signup form{margin-bottom:20px}.up-next-block{width:300px}.subscribe-button{color:#fff;background:#57a3e8;border-radius:4px;border:0;padding:5px 10px;margin:20px 0;cursor:pointer}.rss{padding-bottom:10px}.rss a{display:-webkit-box;display:-ms-flexbox;display:flex}.rss-icon{display:block;width:17px;margin-right:.5em;height:50px}.rss-icon *{fill:#e2777a}.twitter-item{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:15px}.twitter-item iframe{margin:0 0 0 10px}.markdown pre{display:block;background:#343d46;color:#d8dee9}.token.comment,.token.quote{color:#a7adba}.token.addition,.token.attr,.token.selector-tag,.token.string{color:#99c794}.token.doctag,.token.meta .token.meta-string,.token.regexp{color:#89ddf3}.token.built_in,.token.function{color:#5fb3b3}.token.name,.token.section,.token.selector-class,.token.selector-id,.token.title{color:#69c}.token.attribute,.token.class .token.title,.token.template-variable,.token.type,.token.variable{color:#fac863}.token.bullet,.token.link,.token.meta,.token.meta .token.keyword,.token.selector-attr,.token.selector-pseudo,.token.subst,.token.symbol{color:#f9ae58}.token.boolean,.token.deletion,.token.literal,.token.number{color:#f07178}.token.keyword{color:#c594c5}.token.formula{background:#a7adba}.token.emphasis{font-style:italic}.token.strong{font-weight:700}a{color:#e2777a;text-decoration:none}blockquote{border-left:5px solid #57a3e8;font-style:italic;background:#eee;font-weight:400;font-size:.9rem;padding:10px 20px;margin:0 0 30px -25px}blockquote p{margin-bottom:.667em}h2,h3{color:#57a3e8}.explanation{padding:10px;background:#eee;border-radius:10px;margin:20px auto;font-size:.85em}.footnotes li>*{display:inline;margin-bottom:0}.article-body .reading-img img{width:150px;float:right;margin:0 10px 20px}.gatsby-resp-image-wrapper{max-width:75%;display:block;margin:40px auto 20px}.article-body img.full-width{max-height:none}.article-body img.half-width{max-height:none;width:50%}.bordered-img{border:3px solid #57a3e8}.img-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.img-group img{padding:0;height:auto}twitterwidget{margin-left:auto;margin-right:auto}.mc-field-group{width:400px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 0}.mc-field-group input{border-radius:3px;max-width:350px;width:80vw;border:1px solid #ccc;margin-right:10px;height:30px}.mc-field-group label{font-size:.9em;font-weight:600}#mc-embedded-subscribe{color:#fff;background:#57a3e8;border-radius:4px;border:0;padding:0 10px;margin:10px 0;cursor:pointer;width:40vw}#mc-embedded-subscribe:hover{background:#3e8acf}.twitter-row{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.twitter-row>div{padding-right:20px;min-width:300px}.category-icon-wrapper{color:rgba(87,163,232,.5)}.category-icon{display:inline-block;width:.75em;margin-right:.5em}.category-icon *{fill:#57a3e8;fill:rgba(87,163,232,.5)}.category-icon>i{height:30px}.header-link{color:hsla(0,0%,39%,.7)}.header-link:hover{color:#e2777a}#carbonads{height:100px;font-size:14px;width:300px;position:relative;background:#f0f0f0}.carbon-wrap{height:100px;display:-webkit-box;display:-ms-flexbox;display:flex}.carbon-text{padding:5px 10px;max-height:80px;display:inline-block;overflow:hidden;line-height:1.3}.carbon-poweredby{color:hsla(0,0%,39%,.7);position:absolute;right:5px;bottom:0}@media (max-width:600px){#carbonads,.no-mobile{display:none}.subscribe-block{padding-right:0;padding:0 10px}.subscribe-block,.subscribe-block .mc-field-group{width:100%!important}.subscribe-block .mc-field-group input{width:100%!important;font-size:.8em;height:2.4em}.up-next-block{width:100%!important;padding:0 10px}}@media (max-width:321px){html{font-size:100%!important}}</style><link rel="preload" href="/page-component---src-templates-blog-post-js-bc36df2fd45ce0df8dd2.js" as="script"/><link rel="preload" href="/path---2013-03-23-creating-a-build-system-for-a-coffeescript-project-with-ant-67765834de988b72d8ae.js" as="script"/><link rel="preload" href="/layout-component---index-2a0f238b798982c2c7da.js" as="script"/><link rel="preload" href="/app-1327f22c85ebf1a110ae.js" as="script"/><link rel="preload" href="/commons-5ade941a0ddda2740b0b.js" as="script"/><script id="webpack-manifest">
            //<![CDATA[
            window.webpackManifest = {"1":"page-component---src-templates-blog-post-js-bc36df2fd45ce0df8dd2.js","2":"page-component---src-pages-index-js-b681681bf0f3a02c39a5.js","3":"page-component---src-templates-category-page-js-e32fa790baa77d7b6697.js","4":"layout-component---index-2a0f238b798982c2c7da.js","5":"page-component---src-pages-archive-js-9b089d0476698fd685a1.js","6":"path---subscribe-9d07ad1449664b42db8e.js","7":"path---speaking-bf5b9ff2805f22fb5ecd.js","8":"path---readinglist-af86d2e598dc41ab048f.js","9":"path---offline-plugin-app-shell-fallback-586c7e095e534a3909ec.js","10":"path---marionette-explained-ddba2f5e7267009ce7f3.js","11":"path---learning-vim-in-2014-7f04426060bfd9071729.js","12":"path---index-a84a5419dc93ee63bc12.js","13":"path---category-tools-bda59cae5b40cf4d002b.js","14":"path---category-software-productivity-c80b4a0e114d837f4f67.js","15":"path---category-reviews-97450eb28d815998d257.js","16":"path---category-platform-ff9863ab04fef5d65840.js","17":"path---category-opinion-d8fa2a46dc40441b9693.js","18":"path---category-meta-a7c47ffb0f8e8aae5d09.js","19":"path---category-javascript-fa4b8b5ecf8ef9d7b628.js","20":"path---category-frameworks-51500b62b7b79cd7ae3b.js","21":"path---archive-a239a18ef353e177998f.js","22":"path---about-b7ab44f54c67d0d09497.js","23":"path---a-note-to-recruiters-ef7d9ea83f3f9990eb88.js","24":"path---404-html-8d887396e724b5a578ed.js","25":"path---2017-07-10-how-to-follow-the-javascript-roadmap-9aabfef574d521e7a06d.js","26":"path---2017-06-03-rss-atom-json-gatsby-e0ec6ddf368a22b52d0f.js","27":"path---2017-05-29-atom-tips-8294917950af9a3615de.js","28":"path---2017-05-28-mariana-syntax-atom-11592c1d5030df0870bf.js","29":"path---2017-05-11-building-normal-curves-highcharts-919b97b598c159de3f76.js","30":"path---2017-04-14-grading-applications-on-config-portability-b085be6aaa9e51193806.js","31":"path---2017-03-28-the-mystery-of-docker-and-the-disk-eating-cow-47fd1f2456c52925b152.js","32":"path---2017-02-26-running-jest-tests-before-each-git-commit-47047d75ffa6fa98e455.js","33":"path---2017-02-18-context-to-best-practices-5f0395f1e0eee671180a.js","34":"path---2017-02-13-improving-site-performance-with-lighthouse-c98259bd117da052f108.js","35":"path---2017-01-09-mobx-first-impressions-699ea765b0b8211b9cee.js","36":"path---2017-01-03-orthogonality-and-css-in-js-9b85e3b5a504265d60e0.js","37":"path---2016-12-31-2016-roundup-4c58332bad7c8ea292aa.js","38":"path---2016-12-14-what-are-higher-order-components-f6fd49afddc31eb73f85.js","39":"path---2016-12-11-readable-code-audience-0dc01c3db15f3738666d.js","40":"path---2016-12-10-saving-time-with-jest-9622b12ea1d456a49887.js","41":"path---2016-12-02-whole-new-site-2d6de89271759db789c4.js","42":"path---2016-09-19-testing-with-jest-snapshots-first-impressions-edffb6634a09f058232e.js","43":"path---2016-06-26-quick-tip-take-advantage-of-lodash-collections-2-46bf4ecf9ccc6e5b29b9.js","44":"path---2016-06-04-what-are-mutable-and-immutable-data-structures-2-27255bab83de5debf169.js","45":"path---2016-05-02-digging-into-react-choosing-component-styles-63b5d6306fbbf17fc2cb.js","46":"path---2016-04-30-ack-tips-ece0ea997c800abf38ea.js","47":"path---2016-03-09-stability-vs-decline-9e10f66cd502d417e004.js","48":"path---2016-03-07-the-sad-state-of-the-backbone-ecosystem-df20fe7fbe700ff97a22.js","49":"path---2016-01-25-staying-productive-6af046c9c1507c2d0540.js","50":"path---2016-01-11-the-most-interesting-atom-packages-ive-found-so-far-e32391b9c02307512153.js","51":"path---2016-01-08-reusable-code-patterns-022385be084ad6b13a2b.js","52":"path---2015-12-31-2015-roundup-2-8a6f726624cdede2403a.js","53":"path---2015-12-30-es-6-patterns-converting-callbacks-to-promises-7b62b42925ce353ad857.js","54":"path---2015-11-30-es-6-patterns-clean-higher-order-functions-ba8b64ceb092e8eca9cd.js","55":"path---2015-11-25-productive-javascript-development-c891ba6e6ed5d1d61537.js","56":"path---2015-09-14-es-5-es-6-es-2016-es-next-whats-going-on-with-javascript-versioning-9892cfdb19e2ade00d8f.js","57":"path---2015-09-09-what-can-backbone-developers-learn-from-react-a3f88b31e87e4a8395c5.js","58":"path---2015-07-06-backbone-and-es-6-classes-revisited-10d822e94c83496e33e4.js","59":"path---2015-06-15-book-review-talking-with-tech-leads-74eb3d0970a46a6ce7f2.js","60":"path---2015-06-14-mozilla-the-state-of-web-components-1f4d17b79ff9c9d05aea.js","61":"path---2015-06-10-is-safari-being-left-behind-2a695e0ed374dea50098.js","62":"path---2015-06-08-how-jquery-works-an-introduction-e9b571cfb1b5f81b567e.js","63":"path---2015-05-28-moving-past-requirejs-ba90d7da1584a69f2911.js","64":"path---2015-05-25-marionette-service-service-objects-for-marionette-08c10c433b654471e54f.js","65":"path---2015-04-07-es-6-classes-and-backbone-js-8d0498ffcc6c14a86af9.js","66":"path---2015-03-23-staying-dry-with-marionette-behaviors-1be71d8f619d8b56dbe4.js","67":"path---2015-02-22-rauchg-on-es-6-d499e66287bed5e02f3b.js","68":"path---2015-01-26-backbone-radio-6c433ea9fcc12cd0ced2.js","69":"path---2015-01-22-is-bower-useful-e209cf3f315d0ddcf280.js","70":"path---2015-01-05-marionette-view-life-cycles-bc365b25d23d3626279b.js","71":"path---2014-12-22-building-complex-layouts-with-marionette-js-d0c01156ab327cba5355.js","72":"path---2014-12-18-come-build-with-me-61337a21923c5c316191.js","73":"path---2014-12-10-marionette-explained-connecting-your-data-to-your-views-685edcb36af583ed7008.js","74":"path---2014-12-02-the-case-for-marionette-js-66338e7925825a28bf46.js","75":"path---2014-11-24-alternative-javascript-6285d7e44cf7ee5676fa.js","76":"path---2014-11-12-underscore-vs-lodash-7fed57aa12ec5fb2efaa.js","77":"path---2014-11-10-vim-workflows-file-switching-strategies-980840c5335501d2d640.js","78":"path---2014-11-08-all-about-angular-2-0-cb7f8b0119274c614b9e.js","79":"path---2014-11-04-a-quick-review-of-google-inbox-105c768ca058cede7076.js","80":"path---2014-10-13-setting-up-your-text-editor-for-javascript-development-82a5326998dcee511230.js","81":"path---2014-08-28-custom-elements-by-example-a19a602f0218b460ad53.js","82":"path---2014-08-19-the-debugging-toolbox-0aba0e87a3f0458ac168.js","83":"path---2014-08-07-component-based-development-d1d4c33d08d3682d5c5f.js","84":"path---2014-08-04-learning-vim-in-2014-search-4e2c52c3fb0bc74f0074.js","85":"path---2014-07-27-learning-vim-in-2014-copy-and-paste-the-vim-way-c94833b5e4f20cd10a03.js","86":"path---2014-07-24-one-day-left-in-practical-vim-giveaway-38f22bd09925fcb22b9e.js","87":"path---2014-07-21-learning-vim-in-2014-getting-more-from-vim-with-plugins-c9363ab6967e51617620.js","88":"path---2014-07-16-learning-vim-in-2014-vim-as-art-558389ee2e2c7c0a0b82.js","89":"path---2014-07-14-learning-vim-in-2014-configuring-vim-2b8e2ca70eb800982013.js","90":"path---2014-07-11-new-twitter-feed-and-practical-vim-giveaway-2c5d77390650eeda5725.js","91":"path---2014-07-09-understanding-the-backbone-mindset-a-review-of-building-backbone-plugins-by-derick-bailey-51e9d9c85786f51ceb89.js","92":"path---2014-07-07-learning-vim-in-2014-working-with-files-12a05ee916c6a6ca0acf.js","93":"path---2014-07-02-learning-vim-in-2014-vim-as-language-57de70a788ebc9a287c0.js","94":"path---2014-06-30-learning-vim-in-2014-the-basics-862334683a176472dd9f.js","95":"path---2014-06-02-discovering-vim-fa52d61c1f01e74a9566.js","96":"path---2014-01-06-digging-into-knockout-builds-87ce4f18c4ab19ec6515.js","97":"path---2013-12-30-meetings-and-concurrency-9d70e1dd212334ff2d4e.js","98":"path---2013-11-25-a-look-at-ack-5270f071ce969c77bc05.js","99":"path---2013-11-14-modern-dojo-exploring-dojo-basedeclare-225fc3a1ec1ac9a6eb60.js","100":"path---2013-11-13-modern-dojo-exploring-dojoquery-164fffd1e9a5d38a0e87.js","101":"path---2013-09-10-blendconf-2013-takeaways-from-a-very-human-tech-conference-f52bc69039bb9370b4c5.js","102":"path---2013-08-16-searching-for-the-perfect-reading-device-my-nexus-7-2013-review-f45ab56791001fb9b664.js","103":"path---2013-08-15-somewhat-open-a8df5c359f6dd6c6d96d.js","104":"path---2013-08-12-book-review-user-centered-design-6af536c102bb0ab2602a.js","105":"path---2013-06-29-rss-roundup-c0f06904b001fc2d2a76.js","106":"path---2013-06-11-how-i-use-stack-overflow-22dd1ab9cbfe5f977a48.js","107":"path---2013-06-11-evergreen-browsers-2a561209b6bb51cd2e55.js","108":"path---2013-06-09-90-done-halfway-there-e968b667b4233c3e75da.js","109":"path---2013-06-08-customer-culture-revisited-719e268f3f8a6132ec47.js","110":"path---2013-05-07-revertible-observables-in-knockout-31002f9621cefef1f3ed.js","111":"path---2013-05-04-irreplaceable-3f82d5ecd9b970f0682d.js","112":"path---2013-04-23-book-review-javascript-testing-with-jasmine-67faa99303f380b50968.js","113":"path---2013-04-06-a-new-look-95fb87f3b8f928052c30.js","114":"path---2013-03-23-creating-a-build-system-for-a-coffeescript-project-with-ant-67765834de988b72d8ae.js","115":"path---2013-02-23-coffeescript-is-great-0dc728c22ddbdc77bf71.js","116":"path---2013-02-13-simple-publish-subscribe-with-jquery-5535507b1c5c6e240a2a.js","117":"path---2013-02-03-how-i-work-refactoring-b7e64a52459043392180.js","118":"path---2013-01-25-career-fairs-how-to-not-get-hired-and-how-to-give-yourself-a-chance-4c2b11dbfa2f0be12cb3.js","119":"path---2013-01-15-unexpected-javascript-that-doesnt-do-what-you-think-31737c04241d4c8fe4e5.js","120":"path---2013-01-12-explaining-javascript-object-oriented-programming-69110d4ac5c25d494103.js","121":"path---2013-01-08-explaining-javascript-closures-148933ec786413deb673.js","122":"path---2013-01-06-book-review-effective-javascript-3b979a00c0857eeb9852.js","123":"path---2013-01-03-sublime-text-for-javascript-plugins-0bd9b7f3df9a5799c48a.js","124":"path---2013-01-01-sublime-text-for-javascript-configuration-8d00f2ac9c66125efba2.js","125":"path---2012-12-30-sublime-text-for-javascript-keyboard-shortcuts-bb46a0c0d9175c349759.js","126":"path---2012-12-29-i-hate-computing-ecosystems-ba93cc9876cc3aa490c2.js","127":"path---2012-12-29-cleaning-my-digital-house-012dd13511395f52d2b0.js","128":"path---2012-12-25-medium-the-end-of-history-and-the-last-website-4475548a8da477df1544.js","129":"path---2012-12-20-awesome-software-trello-16120edbf30f8e12def2.js","130":"path---2012-11-09-bayesian-witch-hunt-f31381414894168f9507.js","131":"path---2012-11-08-shutdown-tiles-for-windows-8-start-screen-294bb3e73e5c93b1f2e1.js","132":"path---2012-11-07-sync-multiple-google-calendars-in-windows-8-ef71242a3b90a0eac612.js","133":"path---2012-10-06-it-took-a-month-to-get-sick-of-php-9491db8da57cd7ec4ff4.js","134":"path---2012-09-19-the-iphone-5-conversation-so-far-e55cab5d0b28e0e07043.js","135":"page-component---node-modules-gatsby-plugin-offline-app-shell-js-4f0dddda43ae15168f16.js","136":"app-1327f22c85ebf1a110ae.js"}
            //]]>
            </script><script>
  !function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",[
  "/commons-5ade941a0ddda2740b0b.js","/app-1327f22c85ebf1a110ae.js","/layout-component---index-2a0f238b798982c2c7da.js","/path---2013-03-23-creating-a-build-system-for-a-coffeescript-project-with-ant-67765834de988b72d8ae.js","/page-component---src-templates-blog-post-js-bc36df2fd45ce0df8dd2.js"
])
  </script></head><body class="landing-page" style="background:#FCFCFC;padding:0 10px;"><div id="___gatsby"><div style="max-width:40.3rem;margin-left:auto;margin-right:auto;padding:2.325rem 1.1625rem;" data-reactroot="" data-reactid="1" data-react-checksum="-1326739413"><div style="display:flex;padding-bottom:0.5rem;margin-bottom:0.5rem;" data-reactid="2"><div style="flex-grow:3;display:flex;flex-direction:column;justify-content:space-around;" data-reactid="3"><h3 style="margin:0;padding-bottom:0;" data-reactid="4"><a style="box-shadow:none;text-decoration:none;color:inherit;" name="title" href="/" data-reactid="5">benmccormick.org</a></h3><div style="color:rgba(100,100,100, 0.7);" data-reactid="6"><a class="header-link" href="/subscribe/" data-reactid="7">Subscribe</a><span style="padding:0 0.33rem;" data-reactid="8">•</span><a class="header-link" href="/archive/" data-reactid="9">Archive</a><span style="padding:0 0.33rem;" data-reactid="10">•</span><a class="header-link" href="http://twitter.com/ben336" data-reactid="11">Twitter</a><span style="padding:0 0.33rem;" data-reactid="12">•</span><a class="header-link" href="/about/" data-reactid="13">About</a></div></div><div style="flex-shrink:2;" data-reactid="14"><span data-reactid="15"></span></div></div><div class="markdown" data-reactid="16"><!-- react-empty: 17 --><h5 style="display:block;color:rgba(100,100,100, 0.7);margin-bottom:0.3875rem;" data-reactid="18">July 10, 2017</h5><h1 style="margin-top:0;margin-bottom:1rem;" data-reactid="19">Creating a Build System For a Coffeescript Project with Ant</h1><div class="article-body" data-reactid="20"><p>I’ve recently taken the time to develop an organized build system for a <a href="http://Coffeescript.org/">Coffeescript</a> and <a href="http://sass-lang.com/">SASS</a> <a href="https://bitbucket.org/ben336/scratchcalc">project</a> that I’ve been working on in my free time.  I learned a lot during the process, and I wanted to share my experience here.  I used Ant for my build system, and worked in a variety of different libraries for minification, testing and documentation.</p>
<h3>Getting Started</h3>
<p>The first step is to install Ant.  It comes preinstalled on OSX, is <a href="http://www.rndblog.com/how-to-install-ant-on-linux/">fairly straightforward</a> to install on Linux, and is <a href="http://www.nczonline.net/blog/2012/04/12/how-to-install-apache-ant-on-windows/">a bit more involved</a> to install on Windows  If you’re using my exact setup, you’ll also need <a href="http://nodejs.org/">NodeJS</a> (for Coffeescript, UglifyJS,and Docco) and <a href="http://www.ruby-lang.org/">Ruby</a> (for SASS) installed.</p>
<h3>My Project Structure</h3>
<p>I went for a structure with 4 directories.</p>
<ul>
<li>src</li>
<li>build</li>
<li>test</li>
<li>docs</li>
</ul>
<p>All of the source files are in the source directory, with Javascript and Coffeescript files in a scripts directory, and SASS styles in a styles folder.  This particular app has only a single HTML file, which sits in the root of the source directory.  The test folder contains a single HTML page, and a series of unit test files written in Coffeescript, in a structure that mirrors the src directory.  The build and docs directories are initially empty.</p>
<h3>The Basics</h3>
<p>We start with a simple Ant setup.  We’ll create an init task, a clean task, and debug and production tasks.  The following code goes into our build.xml file, which is placed at the root of the project directory.</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code><project name="scratchcalc" default="debug">

    <loadproperties srcfile="build.properties" />

    <target name="debug" depends="clean, init">
        <echo>ScratchCalc Version ${version} (Debug Version)</echo>
    </target>

    <target name="production" depends="clean, init">
        <echo>ScratchCalc Version ${version}</echo>
    </target>

    <target name= "init">
        <mkdir dir="${build.dir}" />
    </target>

    <target name="clean">
        <delete dir="${build.dir}" />
    </target>

</project></code></pre>
      </div>
<p>So for this project, we now have 4 tasks that we can call.  To call the init task, all we need to do is run</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code>Ant init</code></pre>
      </div>
<p>from the command line.   Both our debug and production tasks mark clean and init as dependencies, so running them will remove and restore the build directory.  Beyond that, our build doesn’t do much right now.  Lets change that.</p>
<h3>Copying</h3>
<p>The simplest thing we can do with our Ant file is basic copying of files.  So lets start with a task that just copies over our files from the src directory to the build directory.</p>
<div class="gatsby-highlight">
      <pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>copy<span class="token punctuation">"</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Copies files from src to build dirs<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>echo</span><span class="token punctuation">></span></span>Copying JS, CSS &amp; HTML Files<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>echo</span><span class="token punctuation">></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>copy</span> <span class="token attr-name">todir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.dir}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileset</span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${src.dir}<span class="token punctuation">"</span></span> <span class="token attr-name">includes</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>**/*.HTML,**/*.css,**/*.js<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>copy</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span>
</code></pre>
      </div>
<p>This simply copies any HTML, CSS, or Javascript files in the src directory over to an equivalent position in the build directory.  The segments in the <code>${}</code> format are variables defined in our build.properties file.  For my project, that looks something like this so far:</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code>version = 0.0.1
copyright = Copyright 2012-2013 Ben McCormick.
src.dir = ./src
build.dir = ./build
test.dir = ./test
lib.dir = ${src.dir}/ext</code></pre>
      </div>
<p>This would be a great place to start for a project thats currently running without a build system.  If you’re able to get your project to build like this, it will set you up to be able to start more interesting things going forward.</p>
<p>And we of course want to do more interesting things.  This project uses Coffeescript and SASS, so we’ll need to do a bit more than just copy files.  So lets copy those scripts as well, but convert them to Javascript and CSS while we do.</p>
<div class="gatsby-highlight">
      <pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>copy<span class="token punctuation">"</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Compiles Coffeescript and SASS files,copies the rest<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>echo</span><span class="token punctuation">></span></span>Copying Coffeescript Files<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>echo</span><span class="token punctuation">></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>copy</span> <span class="token attr-name">todir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.dir}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileset</span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${src.dir}<span class="token punctuation">"</span></span> <span class="token attr-name">includes</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>**/*.HTML,**/*.css,**/*.js<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>copy</span><span class="token punctuation">></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec</span> <span class="token attr-name">executable</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>coffee<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--compile<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--map<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--output<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.script.dir}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${src.script.dir}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec</span><span class="token punctuation">></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mkdir</span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.styles.dir}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>apply</span> <span class="token attr-name">executable</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sass<span class="token punctuation">"</span></span> <span class="token attr-name">dest</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.dir}<span class="token punctuation">"</span></span> <span class="token attr-name">verbose</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">force</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">failonerror</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--unix-newlines<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>srcfile</span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>targetfile</span> <span class="token punctuation">/></span></span>
        &lt;filelist dir ="${src.dir}" files="styles/scratch.sass" />
        <span class="token comment" spellcheck="true">&lt;!--&lt;fileset dir="${src.dir}" includes="**/*.sass"  />--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>glob<span class="token punctuation">"</span></span> <span class="token attr-name">from</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>*.sass<span class="token punctuation">"</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>*.css<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>apply</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span>
</code></pre>
      </div>
<p>So along with copying the raw files, we also now copy the Coffeescript and SASS files.  For Coffeescript, we run the coffee executable against the entire src dir, and have it mirror the output to the build dir.  For Sass, we only want to run the compile on a single file, which pulls all of the other files into it through import statements.  So we use the filelist and mapper to specify the input and output files.</p>
<h3>Concatenation</h3>
<p>Mirroring your directory can be helpful for debugging, and is a good initial step if you’re converting to Ant from a locally run project.  But we’d really like to limit the amount of requests we make when deploying our site.  To do that, we’ll concatenate the js files together.  For my project I create 2 files, one for my external dependencies, and one for my own local files.  I may eventually reduce this to 1, but for now I like separating the 2 for debugging clarity.</p>
<div class="gatsby-highlight">
      <pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>concatenatejs<span class="token punctuation">"</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Concatenate All the JS together<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!-- Instead of concatenating the JS files directly, use coffee to preserve the source map --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>echo</span><span class="token punctuation">></span></span>Concatenating the JS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>echo</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>concat</span> <span class="token attr-name">destfile</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.libs}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
         &lt;filelist dir ="${build.script.dir}" files="lib/jquery.js,lib/knockout.js,lib/BigDecimal.js" />

          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileset</span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.script.dir}/lib<span class="token punctuation">"</span></span> <span class="token attr-name">includes</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>**/*.js<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>concat</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>apply</span> <span class="token attr-name">executable</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>coffee<span class="token punctuation">"</span></span>  <span class="token attr-name">verbose</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">force</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">failonerror</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">parallel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--compile<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--map<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--join<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.script.output}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>srcfile</span> <span class="token punctuation">/></span></span>
    &lt;filelist dir ="${src.script.dir}" files="editor/toolkit.coffee,editor/markupGen.coffee,parser/eqTreeBuilder.coffee,parser/NumberValue.coffee,parser/eqScanner.coffee,parser/eqTokenizer.coffee,parser/tablePlaceHolder.coffee,parser/EQParser.coffee,parser/calcFramework.coffee,editor/editor.coffee" />
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>apply</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span>
</code></pre>
      </div>
<p>For the external libraries I use Ant’s built in <code>concat</code> task to concatenate the files together.  For the Coffeescript files, I use the coffee compiler rather than concatenating the files that I copied.  I was hoping to do this in order to preserve the source map, which allows for easier debugging.  Unfortunately the compiler has trouble generating source maps for joined files right now.  I’m hoping to fix that in the future, in the meantime I may be using a different approach, possibly using uglifyjs to concatenate the files and generate the maps.</p>
<h2>Minify</h2>
<p>Speaking of <a href="https://github.com/mishoo/UglifyJS2">uglifyjs</a>, I use that for minifying my Javascript.</p>
<div class="gatsby-highlight">
      <pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>minify<span class="token punctuation">"</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Minify the JS for Production<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>echo</span><span class="token punctuation">></span></span>Minifying the JS For Production with UglifyJS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>echo</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>apply</span> <span class="token attr-name">executable</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>uglifyjs<span class="token punctuation">"</span></span> <span class="token attr-name">verbose</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">force</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">failonerror</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>srcfile</span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--output<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.script.output}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        &lt;filelist  files ="${build.script.output}"/>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>apply</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span>
</code></pre>
      </div>
<p>I only require this for the production task, and leave the full source available for the debug task to preserve the readability of the generated JS.</p>
<h3>Documentation</h3>
<p>I use <a href="http://jashkenas.github.com/docco">docco</a> for my Coffeescript documentation.  It converts comments into documentation and runs them through a <a href="http://daringfireball.net/projects/markdown/">Markdown</a> parser to generate a clean HTML page with the code and comments intermingled.</p>
<div class="gatsby-highlight">
      <pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>documentation<span class="token punctuation">"</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Generate Docco Documentation for coffee files<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>echo</span><span class="token punctuation">></span></span>Generating Documentation with Docco<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>echo</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>apply</span> <span class="token attr-name">executable</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>docco<span class="token punctuation">"</span></span> <span class="token attr-name">verbose</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">force</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">failonerror</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>srcfile</span> <span class="token punctuation">/></span></span>
        &lt;fileset dir ="${src.script.dir}" >
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>**/*.coffee<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileset</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>apply</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span>
</code></pre>
      </div>
<h3>Testing</h3>
<p>I use Jasmine for testing.  <a href="http://pivotal.github.com/jasmine">Jasmine</a> is a “Behavior Driven Development” style unit testing framework for Javascript.  In an ideal world I would be setting up a build task to run on the server and display the results when I run the build.  Unfortunately I wasn’t able to find a way to do that without generating additional dependencies.  Its possible with NodeJS or RequireJS style modules and dependencies, and its also possible using phantomJS, but I didn’t want to require either of those for testing.   So instead I have my build task generate an HTML page with the test results.  I may add some scripting to open this page by default after running a production build in the future.</p>
<div class="gatsby-highlight">
      <pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>test<span class="token punctuation">"</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Generate the JS for testing with Jasmine<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token comment" spellcheck="true">&lt;!-- Ideally this would run a server side jasmine test, but that requires better dependency management than we have right now--></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>echo</span><span class="token punctuation">></span></span>Generating the Test JS with jasmine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>echo</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>apply</span> <span class="token attr-name">executable</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>coffee<span class="token punctuation">"</span></span>  <span class="token attr-name">verbose</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">force</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">failonerror</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">parallel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--compile<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--join<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${test.output}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>srcfile</span> <span class="token punctuation">/></span></span>
    &lt;fileset dir ="${test.dir}" >
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>**/*.coffee<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileset</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>apply</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span>
</code></pre>
      </div>
<h3>Summary</h3>
<p>Adding a build system has been great for my project.  Its allowed me to be a lot more organized and to do some cool things that are a pain by hand (unit testing, Coffeescript).  I definitely recommend looking into doing this for any non-trivial Javascript/web project that you’re working on.</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code><project name="scratchcalc" default="debug">

  <loadproperties srcfile="build.properties" />

  <target name="debug" depends="clean, init, copy,concatenatejs">
    <echo>ScratchCalc Version ${version} (Debug Version)</echo>
  </target>

  <target name="production" depends="clean, init, copy,concatenatejs,minify,documentation,test">
    <echo>ScratchCalc Version ${version}</echo>
  </target>

  <target name="copy" description="Compiles Coffeescript and SASS files,copies the rest">
    <echo>Copying Coffeescript Files</echo>
     <copy todir="${build.dir}">
      <fileset dir="${src.dir}" includes="**/*.HTML,**/*.css,**/*.js" />
     </copy>
     <exec executable="coffee">
        <arg value="--compile"/>
        <arg value="--map" />
        <arg value="--output" />
        <arg value="${build.script.dir}" />
        <arg value="${src.script.dir}" />
     </exec>
     <mkdir dir="${build.styles.dir}" />
     <apply executable="sass" dest="${build.dir}" verbose="true" force="true" failonerror="true">
          <arg value="--unix-newlines" />
          <srcfile />
          <targetfile />
          <filelist dir ="${src.dir}" files="styles/scratch.sass" />
          <!--<fileset dir="${src.dir}" includes="**/*.sass"  />-->
          <mapper type="glob" from="*.sass" to="*.css"/>
      </apply>
  </target>

  <target name="concatenatejs" description="Concatenate All the JS together">
    <!-- Instead of concatenating the JS files directly, use coffee to preserve the source map -->
    <echo>Concatenating the JS</echo>
    <concat destfile="${build.libs}">
       <filelist dir ="${build.script.dir}" files="lib/jquery.js,lib/knockout.js,lib/BigDecimal.js" />

        <fileset dir="${build.script.dir}/lib" includes="**/*.js"/>
    </concat>
    <apply executable="coffee"  verbose="true" force="true" failonerror="true" parallel="true">
      <arg value="--compile" />
      <arg value="--map" />
      <arg value="--join" />
      <arg value="${build.script.output}" />
      <srcfile />
      <filelist dir ="${src.script.dir}" files="..." />
    </apply>
  </target>

  <target name="documentation" description="Generate Docco Documentation for coffee files">
    <echo>Generating Documentation with Docco</echo>
    <apply executable="docco" verbose="true" force="true" failonerror="true">
          <srcfile />
          <fileset dir ="${src.script.dir}" >
            <include name="**/*.coffee"/>
          </fileset>
      </apply>
  </target>

  <target name="test" description="Generate the JS for testing with Jasmine">
    <!-- Ideally this would run a server side jasmine test, but that requires better dependency management than we have right now-->
    <echo>Generating the Test JS with jasmine</echo>
    <apply executable="coffee"  verbose="true" force="true" failonerror="true" parallel="true">
      <arg value="--compile" />
      <arg value="--join" />
      <arg value="${test.output}" />
      <srcfile />
      <fileset dir ="${test.dir}" >
        <include name="**/*.coffee"/>
      </fileset>
    </apply>
  </target>

  <target name="minify" description="Minify the JS for Production">
    <echo>Minifying the JS For Production with UglifyJS</echo>
    <apply executable="uglifyjs" verbose="true" force="true" failonerror="true">
          <srcfile />
          <arg value="--output" />
          <arg value="${build.script.output}" />
          <filelist  files ="${build.script.output}"/>
      </apply>
  </target>

  <target name= "init">
    <mkdir dir="${build.dir}" />
  </target>

  <target name="clean">
    <delete dir="${build.dir}" />
  </target>

</project></code></pre>
      </div>
<p><em>Update June 2014: Since writing this post, Javascript based build tools have continued to mature and grow.  These days I’d recommend <a href="http://gruntjs.com/">Grunt</a> or <a href="http://gulpjs.com/">Gulp</a> for your front end build script needs, though Ant is still a fine choice if you’re integrating your builds with a Java project, or have lots of experience with it.</em></p>
<hr>
<h3>Further Reading</h3>
<ul>
<li><a href="http://www.amazon.com/gp/product/1449327680/ref=as_li_tl?ie=UTF8&camp=1789&creative=390957&creativeASIN=1449327680&linkCode=as2&tag=productjavasc-20">Maintainable JavaScript</a><img src="http://ir-na.amazon-adsystem.com/e/ir?t=productjavasc-20&#x26;l=as2&#x26;o=1&#x26;a=1449327680" alt=""> - This is a great little book for anyone writing Javascript applications in teams.  It has a great section on developing a Javascript build system with Ant</li>
</ul></div><div data-reactid="21"><hr data-reactid="22"/><div class="subscribe-container" data-reactid="23"><div class="subscribe-block" data-reactid="24"><p data-reactid="25"><!-- react-text: 26 -->Thanks for taking the time to read this post!<!-- /react-text --><!-- react-text: 27 --> Software tooling<!-- /react-text --><!-- react-text: 28 --> is one of the main topics of this blog, so if you enjoyed the post, please consider subscribing by using the feed, Twitter or my mailing list.<!-- /react-text --></p><div style="margin-bottom:3.875rem;" data-reactid="29"><div id="mc_embed_signup" data-reactid="30"><h6 style="margin:0;font-size:0.8165rem;line-height:1.55rem;letter-spacing:-0.25px;" data-reactid="31">EMAIL</h6><form action="//benmccormick.us8.list-manage.com/subscribe/post?u=115446b80fd9d930ba091cc27&amp;id=f5b9f5acf2" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="" data-reactid="32"><div id="mc_embed_signup_scroll" data-reactid="33"><div class="mc-field-group" style="padding-right:30px;" data-reactid="34"><input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Email Address" data-reactid="35"/><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button" data-reactid="36"/></div><div id="mce-responses" class="clear" data-reactid="37"><div class="response" id="mce-error-response" style="display:none;" data-reactid="38"></div><div class="response" id="mce-success-response" style="display:none;" data-reactid="39"></div></div><div style="position:absolute;left:-5000px;" aria-hidden="true" data-reactid="40"><input type="text" name="b_115446b80fd9d930ba091cc27_f5b9f5acf2" tabindex="-1" value="" data-reactid="41"/></div><div class="clear" data-reactid="42"></div></div></form></div><div class="rss" data-reactid="43"><h6 style="margin:0;font-size:0.8165rem;line-height:1.55rem;letter-spacing:-0.25px;" data-reactid="44">RSS</h6><a href="/rss/" data-reactid="45"><i class="rss-icon" data-reactid="46"><svg viewBox="0 0 10 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>rss</title><desc>Created with Sketch.</desc><defs></defs><g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="rss" fill="#000000"><path d="M2,13 L0,13 L0,11 C1.11,11 2,11.89 2,13 L2,13 Z M0,3 L0,4 C4.97,4 9,8.03 9,13 L10,13 C10,7.48 5.52,3 0,3 L0,3 Z M0,7 L0,8 C2.75,8 5,10.25 5,13 L6,13 C6,9.69 3.31,7 0,7 L0,7 Z" id="Shape"></path></g></g></svg></i><!-- react-text: 47 --> <!-- /react-text --><span data-reactid="48">RSS</span></a></div><div data-reactid="49"><h6 style="margin:0;font-size:0.8165rem;line-height:1.55rem;letter-spacing:-0.25px;" data-reactid="50">TWITTER</h6><div class="twitter-item" data-reactid="51"><span data-reactid="52">Site Feed: </span><a href="https://twitter.com/benmccormickorg" class="twitter-follow-button" data-show-count="false" data-reactid="53">Follow @benmccormickorg</a></div></div><div data-reactid="54"><div class="twitter-item" data-reactid="55"><span data-reactid="56">Personal Feed: </span><a href="https://twitter.com/ben336" class="twitter-follow-button" data-show-count="false" data-reactid="57">Follow @ben336</a></div></div></div></div><div class="up-next-block" data-reactid="58"><h6 style="margin:0;font-size:0.8165rem;line-height:1.55rem;letter-spacing:-0.25px;" data-reactid="59">You Might Also Like:</h6><div data-reactid="60"><h3 style="margin-top:0;margin-bottom:0.3875rem;" data-reactid="61"><a href="/[object Object]" data-reactid="62">Atom Productivity Tips</a></h3><p data-reactid="63">Getting the most out of Atom</p></div><div data-reactid="64"><hr data-reactid="65"/><h3 style="margin-top:0;margin-bottom:0.3875rem;" data-reactid="66"><a href="/[object Object]" data-reactid="67">Mariana Syntax Theme For Atom</a></h3><p data-reactid="68">Announcing a port of the Mariana color scheme to Atom</p></div><div data-reactid="69"><hr data-reactid="70"/><h3 style="margin-top:0;margin-bottom:0.3875rem;" data-reactid="71"><a href="/[object Object]" data-reactid="72">Grading Applications on Config Portability</a></h3><p data-reactid="73">Which applications allow syncing settings cross-device?</p></div></div></div></div><hr style="margin-bottom:3.1rem;" data-reactid="74"/><div title="Creating a Build System For a Coffeescript Project with Ant" data-reactid="75"><div id="disqus_thread" data-reactid="76"></div><noscript data-reactid="77"><span data-reactid="78"><!-- react-text: 79 -->Please enable JavaScript to view the<!-- /react-text --><a href="http://disqus.com/?ref_noscript" data-reactid="80">comments powered by Disqus.</a></span></noscript><a href="http://disqus.com" class="dsq-brlink" data-reactid="81"><!-- react-text: 82 -->Blog comments powered by <!-- /react-text --><span class="logo-disqus" data-reactid="83">Disqus</span><!-- react-text: 84 -->.<!-- /react-text --></a></div></div><span style="display:block;clear:both;" data-reactid="85"> </span></div></div><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-37323973-1', 'auto');
            ga('send', 'pageview');
        </script></body></html>