<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=yyxgnp97qG"/><link rel="icon" type="image/png" href="/favicon-32x32.png?v=yyxgnp97qG" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png?v=yyxgnp97qG" sizes="16x16"/><link rel="manifest" href="/manifest.json"/><link rel="mask-icon" href="/safari-pinned-tab.svg?v=yyxgnp97qG" color="#rgb(42, 194, 240)"/><link rel="alternate" title="JSON Feed" type="application/json" href="/feed.json"/><link rel="shortcut icon" href="/favicon.ico?v=yyxgnp97qG"/><meta name="theme-color" content="#ffffff"/><title data-react-helmet="true"></title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.6 'minion-3','Garamond',serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'minion-3','Garamond',serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.6rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.32578rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.20684rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.91028rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:'mr-eaves-xl-modern',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.86849rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}ul{margin-left:1.6rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.6rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;font-size:0.85rem;line-height:1.1;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.2rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;font-size:1rem;line-height:1.6rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}blockquote{margin-left:1.6rem;margin-right:1.6rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.2rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.2rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.6rem;margin-bottom:calc(1.2rem / 2);margin-top:calc(1.2rem / 2);}li > ul{margin-left:1.6rem;margin-bottom:calc(1.2rem / 2);margin-top:calc(1.2rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.2rem / 2);}code{font-size:0.85rem;line-height:1.6rem;}kbd{font-size:0.85rem;line-height:1.6rem;}samp{font-size:0.85rem;line-height:1.6rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.06667rem;padding-right:1.06667rem;padding-top:0.8rem;padding-bottom:calc(0.8rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;font-size:14px;}pre code{background:none;line-height:1.1;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:"";}h1,h2,h3,h4,h5,h6{line-height:1.1;}@media only screen and (max-width:480px){html{font-size:112.5%;}}</style><style data-href="/0.946d6799245b4ead607b.css">a{color:#f1684e;text-decoration:none;cursor:pointer}a:hover{text-decoration:underline}.footnote-backref,.footnote-ref{text-decoration:none;padding-left:3px}blockquote{border-left:5px solid #2ac2f0;background:#eee;font-weight:400;font-size:.9rem;padding:1.5rem 2rem;margin:0 0 1rem}blockquote p{margin-bottom:.667em}h3{color:#2ac2f0}h4{font-size:110%}.explanation{padding:10px;background:#eee;border-radius:10px;margin:20px auto;font-size:.85em}.footnotes{font-size:80%}.footnotes li>*{display:inline;margin-bottom:0}strong{color:#639f6e}em{color:#9a74aa}#carbonads{font-size:14px;position:relative;font-family:mr-eaves-xl-modern,Helvetica Neue,Arial,sans-serif;background:rgba(99,159,110,.25);border:1px solid #f0f0f0;padding:2px}.carbon-wrap{display:grid;grid-template-columns:1fr 1fr;grid-column-gap:10px;grid-template-rows:1fr;margin-bottom:30px;align-items:center;padding-left:5px}@media (max-width:960px){.carbon-wrap{grid-template-columns:1fr;grid-template-rows:110px 1fr;grid-row-gap:10px;justify-items:center}}.carbon-wrap img{margin-bottom:0}.carbon-text{padding:5px 5px 5px 0;display:inline-block;overflow:hidden;line-height:1.3}.carbon-poweredby{color:#999;position:absolute;right:5px;bottom:0}.columns{display:grid;grid-template-columns:665px 270px;grid-template-rows:1fr;grid-column-gap:25px}@media (max-width:960px){.columns{display:grid;grid-template-columns:70% 28%;grid-column-gap:2%}}@media (max-width:700px){.columns{display:flex;flex-direction:column;align-items:center}.no-mobile{display:none}}@media (max-width:321px){html{font-size:100%!important}}</style><style data-href="/component---src-templates-blog-post-js.59aadf62793e0bf7c444.css">.markdown pre{display:block;background:#343d46;color:#d8dee9;padding:.8rem}.markdown pre code:after{content:unset}.token.comment,.token.quote{color:#a7adba}.token.addition,.token.attr,.token.selector-tag,.token.string{color:#99c794}.token.doctag,.token.meta .token.meta-string,.token.regexp{color:#89ddf3}.token.built_in,.token.function{color:#5fb3b3}.token.name,.token.section,.token.selector-class,.token.selector-id,.token.title{color:#69c}.token.attribute,.token.class .token.title,.token.template-variable,.token.type,.token.variable{color:#fac863}.token.bullet,.token.link,.token.meta,.token.meta .token.keyword,.token.selector-attr,.token.selector-pseudo,.token.subst,.token.symbol{color:#f9ae58}.token.boolean,.token.deletion,.token.literal,.token.number{color:#f07178}.token.keyword{color:#c594c5}.token.formula{background:#a7adba}.token.emphasis{font-style:italic}.token.strong{font-weight:700}.gatsby-resp-image-wrapper{max-width:75%;display:block;margin:40px auto 20px}.bordered-img{border:3px solid #rgb(42,194,240)}.img-group{display:flex;justify-content:space-between}.img-group img{padding:0;height:auto}.inline-img{width:45%;display:inline-block;float:right;padding:2rem}#bd-label{font-family:mr-eaves-xl-modern,Helvetica Neue,Arial,sans-serif;font-weight:700}#bd-label.large-label{font-size:20px}#bd-email{padding-left:5px}#bd-email,#bd-submit{font-family:mr-eaves-xl-modern,Helvetica Neue,Arial,sans-serif;font-size:14px}#bd-submit{background:#f1684e;color:#fff;border-radius:4px;border:none}@media (max-width:960px){#bd-email,#bd-submit{font-size:10px}#bd-label{font-size:12px}}.large-row #bd-email,.large-row #bd-submit{font-size:30px}@media (max-width:700px){.large-row #bd-email,.large-row #bd-submit{font-size:18px}}.bd-subscribe-form{margin:30px 0 50px;display:block}.bd-subscribe-row{display:grid;grid-template-columns:60% 35%;grid-column-gap:5%;grid-template-rows:1fr;margin-top:10px}.twitter-tweet,twitterwidget{margin-left:auto;margin-right:auto}.sidebar-group{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;padding:8px 0}.sidebar{padding-left:2rem}.subscribe-container{display:flex;justify-content:flex-end;flex-wrap:wrap}.subscribe-email{padding:0 .1rem;margin:0 .2rem 0 0;font-size:.7rem;height:1.5rem;width:6rem}.subscribe-button{color:#fff;background:#rgb(42,194,240);border-radius:4px;font-size:1rem;line-height:1rem;height:1.5rem;width:1.5rem;max-width:2rem;flex-grow:0;border:0;margin:0;cursor:pointer}.rss{padding-bottom:10px}.rss a{display:flex}.rss-icon{display:block;width:17px;margin-right:.5em;height:50px}.rss-icon *{fill:#f1684e}.twitter-item{display:flex;align-items:center;margin-bottom:15px}.twitter-item iframe{margin:0 0 0 10px}</style><meta name="generator" content="Gatsby 2.0.75"/><style id="glamor-styles">.css-tcc0st,[data-css-tcc0st]{color:#999999;font-size:16px;font-family:"mr-eaves-xl-modern", "Helvetica Neue", Arial, sans-serif;}.css-tcc0st:hover,[data-css-tcc0st]:hover{color:#F1684E;}.css-1gs5qio,[data-css-1gs5qio]{font-size:16px;font-family:"mr-eaves-xl-modern", "Helvetica Neue", Arial, sans-serif;}.css-5xytwl,[data-css-5xytwl]{font-family:"mr-eaves-xl-modern", "Helvetica Neue", Arial, sans-serif;font-size:120%;margin:0 1px 0.8rem 1px;color:initial;background:#FFFFFF;transition:all 0.5s ease;display:grid;grid-template-columns:5rem 1fr 6rem;grid-template-rows:1fr;box-shadow:0 1px 2px 0 rgba(43, 59, 93, 0.29);-webkit-transition:all 0.5s ease;-moz-transition:all 0.5s ease;-ms-grid-template-columns:5rem 1fr 6rem;-ms-grid-template-rows:1fr;}.css-5xytwl:hover,[data-css-5xytwl]:hover{text-decoration:none;box-shadow:0 10px 30px 0 rgba(0, 0, 0, 0.29);}@media all and (max-width: 700px){.css-5xytwl,[data-css-5xytwl]{grid-template-columns:5rem 1fr 0px;-ms-grid-template-columns:5rem 1fr 0px;}}.css-1iamx74,[data-css-1iamx74]{width:100%;max-width:960px;margin:0 auto;padding:2.4rem 1.2rem;}.css-1rrcu7t,[data-css-1rrcu7t]{display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;padding-bottom:2rem;flex-direction:row;justify-content:space-between;flex-wrap:wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-webkit-box-lines:multiple;-webkit-flex-wrap:wrap;}.css-nj9d06,[data-css-nj9d06]{margin:0 20px 0 0;padding-bottom:0;}.css-nj9d06 a,[data-css-nj9d06] a{box-shadow:none;text-decoration:none;color:inherit;}.css-nj9d06 a:hover,[data-css-nj9d06] a:hover{text-decoration:none;}.css-ph524j,[data-css-ph524j]{color:#999999;}.css-1821md7,[data-css-1821md7]{padding:0 0.5rem;}@media all and (max-width: 400px){.css-1821md7,[data-css-1821md7]{padding:0 0.25rem;}}.css-d0z96,[data-css-d0z96]{display:block;max-width:100%;}.css-n40tvx,[data-css-n40tvx]{max-width:100%;}.css-n40tvx li,[data-css-n40tvx] li{padding-left:10px;}.css-n40tvx .reading-img img,[data-css-n40tvx] .reading-img img{width:150px;float:right;margin:0px 10px 20px 10px;}.css-n40tvx img.full-width,[data-css-n40tvx] img.full-width{max-height:none;}.css-n40tvx img.half-width,[data-css-n40tvx] img.half-width{max-height:none;width:50%;}.css-khxvw8,[data-css-khxvw8]{padding-left:2rem;overflow:hidden;}.css-m9l7q0,[data-css-m9l7q0]{overflow:hidden;margin:0;}.css-m9l7q0 #mc_embed_signup form,[data-css-m9l7q0] #mc_embed_signup form{margin-bottom:20px;}@media all and (max-width: 700px){.css-m9l7q0,[data-css-m9l7q0]{padding-right:0;width:100% !important;padding:0 10px;}.css-m9l7q0 .mc-field-group,[data-css-m9l7q0] .mc-field-group{width:100% !important;}.css-m9l7q0 .mc-field-group input,[data-css-m9l7q0] .mc-field-group input{width:100% !important;font-size:0.8em;height:2.4em;}}.css-1xksjga,[data-css-1xksjga]{width:100%;overflow:hidden;margin:0 0 1rem 0;}@media all and (max-width: 700px){.css-1xksjga,[data-css-1xksjga]{display:none;}}.css-gpzr7f,[data-css-gpzr7f]{width:100%;display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;padding-bottom:2rem;flex-direction:column;justify-content:center;background-color:RGBA(191, 237, 253, 0.5);border-top:1px solid #68d4fa;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;}.css-1r4ayr,[data-css-1r4ayr]{width:100%;min-height:200px;max-width:960px;margin:0 auto;padding:2.4rem 1.2rem;display:grid;grid-template-columns:45% 45%;grid-column-gap:10%;grid-row-gap:30px;-ms-grid-template-columns:45% 45%;-ms-grid-column-gap:10%;-ms-grid-row-gap:30px;}@media all and (max-width: 450px){.css-1r4ayr,[data-css-1r4ayr]{grid-template-columns:100%;-ms-grid-template-columns:100%;}}.css-1s90cbl,[data-css-1s90cbl]{display:grid;grid-template-columns:1fr;grid-auto-rows:1fr;grid-row-gap:20px;-ms-grid-template-columns:1fr;-ms-grid-auto-rows:1fr;-ms-grid-row-gap:20px;}.css-1nllbc3,[data-css-1nllbc3]{font-size:14px;overflow:visible;white-space:nowrap;}.css-1beg117,[data-css-1beg117]{display:block;font-family:"minion-3", Garamond, serif;font-size:16px;color:rgba(100,100,100, 0.8);margin-top:0.8rem;margin-bottom:0.8rem;}.css-4w3jde,[data-css-4w3jde]{color:inherit;}.css-33c833,[data-css-33c833]{margin-left:0;padding-left:0;}.css-a0bmeo,[data-css-a0bmeo]{max-width:60vw;display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;justify-content:space-between;align-items:center;padding:1rem;-webkit-box-pack:justify;-webkit-justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;}@media all and (max-width: 700px){.css-a0bmeo,[data-css-a0bmeo]{max-width:100vw;}}.css-1si8vwk,[data-css-1si8vwk]{display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;justify-content:space-between;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;}.css-1si8vwk> *,[data-css-1si8vwk]> *{margin-right:10px;}@media all and (max-width: 700px){.css-1si8vwk,[data-css-1si8vwk]{font-size:80%;}}.css-15odo6z,[data-css-15odo6z]{font-family:"minion-3", Garamond, serif;font-size:18px;margin:0;}@media all and (max-width: 700px){.css-15odo6z,[data-css-15odo6z]{font-size:70%;}}.css-gpdfjo,[data-css-gpdfjo]{white-space:nowrap;display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;font-size:18px;justify-content:space-between;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;}@media all and (max-width: 700px){.css-gpdfjo,[data-css-gpdfjo]{display:none;}}</style><script id="glamor-ids">
        // <![CDATA[
        window._glamor = ["tcc0st","1gs5qio","5xytwl","1iamx74","1rrcu7t","nj9d06","ph524j","1821md7","d0z96","n40tvx","khxvw8","m9l7q0","1xksjga","gpzr7f","1r4ayr","1s90cbl","1nllbc3","1beg117","4w3jde","33c833","a0bmeo","1si8vwk","15odo6z","gpdfjo"]
        // ]]>
        </script><title data-react-helmet="true">Creating a Build System For a Coffeescript Project with Ant | benmccormick.org</title><meta data-react-helmet="true" name="description" content="Ben McCormick&#x27;s blog on JavaScript and Web Development"/><meta data-react-helmet="true" name="keywords"/><script data-react-helmet="true" type="application/ld+json">{
                  "@context": "http://schema.org"
                  "@type": "BlogPosting",
                  "headline": "Creating a Build System For a Coffeescript Project with Ant",
                  "genre": "Software Development",
                  "keywords": "",
                  "url": "http://benmccormick.org//2013/03/23/creating-a-build-system-for-a-coffeescript-project-with-ant",
                  "image": "http://benmccormick.org/logo.png",
                  "datePublished": "2013-03-23",
                  
                  "articleBody": "<p>I’ve recently taken the time to develop an organized build system for a <a href=\"http://Coffeescript.org/\">Coffeescript</a> and <a href=\"http://sass-lang.com/\">SASS</a> <a href=\"https://bitbucket.org/ben336/scratchcalc\">project</a> that I’ve been working on in my free time.  I learned a lot during the process, and I wanted to share my experience here.  I used Ant for my build system, and worked in a variety of different libraries for minification, testing and documentation.</p>
<h3>Getting Started</h3>
<p>The first step is to install Ant.  It comes preinstalled on OSX, is <a href=\"http://www.rndblog.com/how-to-install-ant-on-linux/\">fairly straightforward</a> to install on Linux, and is <a href=\"http://www.nczonline.net/blog/2012/04/12/how-to-install-apache-ant-on-windows/\">a bit more involved</a> to install on Windows  If you’re using my exact setup, you’ll also need <a href=\"http://nodejs.org/\">NodeJS</a> (for Coffeescript, UglifyJS,and Docco) and <a href=\"http://www.ruby-lang.org/\">Ruby</a> (for SASS) installed.</p>
<h3>My Project Structure</h3>
<p>I went for a structure with 4 directories.</p>
<ul>
<li>src</li>
<li>build</li>
<li>test</li>
<li>docs</li>
</ul>
<p>All of the source files are in the source directory, with Javascript and Coffeescript files in a scripts directory, and SASS styles in a styles folder.  This particular app has only a single HTML file, which sits in the root of the source directory.  The test folder contains a single HTML page, and a series of unit test files written in Coffeescript, in a structure that mirrors the src directory.  The build and docs directories are initially empty.</p>
<h3>The Basics</h3>
<p>We start with a simple Ant setup.  We’ll create an init task, a clean task, and debug and production tasks.  The following code goes into our build.xml file, which is placed at the root of the project directory.</p>
<div class=\"gatsby-highlight\" data-language=\"text\">
      <pre class=\"language-text\"><code class=\"language-text\">&lt;project name=&quot;scratchcalc&quot; default=&quot;debug&quot;&gt;

    &lt;loadproperties srcfile=&quot;build.properties&quot; /&gt;

    &lt;target name=&quot;debug&quot; depends=&quot;clean, init&quot;&gt;
        &lt;echo&gt;ScratchCalc Version ${version} (Debug Version)&lt;/echo&gt;
    &lt;/target&gt;

    &lt;target name=&quot;production&quot; depends=&quot;clean, init&quot;&gt;
        &lt;echo&gt;ScratchCalc Version ${version}&lt;/echo&gt;
    &lt;/target&gt;

    &lt;target name= &quot;init&quot;&gt;
        &lt;mkdir dir=&quot;${build.dir}&quot; /&gt;
    &lt;/target&gt;

    &lt;target name=&quot;clean&quot;&gt;
        &lt;delete dir=&quot;${build.dir}&quot; /&gt;
    &lt;/target&gt;

&lt;/project&gt;</code></pre>
      </div>
<p>So for this project, we now have 4 tasks that we can call.  To call the init task, all we need to do is run</p>
<div class=\"gatsby-highlight\" data-language=\"text\">
      <pre class=\"language-text\"><code class=\"language-text\">Ant init</code></pre>
      </div>
<p>from the command line.   Both our debug and production tasks mark clean and init as dependencies, so running them will remove and restore the build directory.  Beyond that, our build doesn’t do much right now.  Lets change that.</p>
<h3>Copying</h3>
<p>The simplest thing we can do with our Ant file is basic copying of files.  So lets start with a task that just copies over our files from the src directory to the build directory.</p>
<div class=\"gatsby-highlight\" data-language=\"xml\">
      <pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>copy<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">description</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Copies files from src to build dirs<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>echo</span><span class=\"token punctuation\">></span></span>Copying JS, CSS &amp; HTML Files<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>echo</span><span class=\"token punctuation\">></span></span>
     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>copy</span> <span class=\"token attr-name\">todir</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.dir}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fileset</span> <span class=\"token attr-name\">dir</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${src.dir}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">includes</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>**/*.HTML,**/*.css,**/*.js<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>copy</span><span class=\"token punctuation\">></span></span>
<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>target</span><span class=\"token punctuation\">></span></span></code></pre>
      </div>
<p>This simply copies any HTML, CSS, or Javascript files in the src directory over to an equivalent position in the build directory.  The segments in the <code class=\"language-text\">${}</code> format are variables defined in our build.properties file.  For my project, that looks something like this so far:</p>
<div class=\"gatsby-highlight\" data-language=\"text\">
      <pre class=\"language-text\"><code class=\"language-text\">version = 0.0.1
copyright = Copyright 2012-2013 Ben McCormick.
src.dir = ./src
build.dir = ./build
test.dir = ./test
lib.dir = ${src.dir}/ext</code></pre>
      </div>
<p>This would be a great place to start for a project thats currently running without a build system.  If you’re able to get your project to build like this, it will set you up to be able to start more interesting things going forward.</p>
<p>And we of course want to do more interesting things.  This project uses Coffeescript and SASS, so we’ll need to do a bit more than just copy files.  So lets copy those scripts as well, but convert them to Javascript and CSS while we do.</p>
<div class=\"gatsby-highlight\" data-language=\"xml\">
      <pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>copy<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">description</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Compiles Coffeescript and SASS files,copies the rest<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>echo</span><span class=\"token punctuation\">></span></span>Copying Coffeescript Files<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>echo</span><span class=\"token punctuation\">></span></span>
     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>copy</span> <span class=\"token attr-name\">todir</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.dir}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fileset</span> <span class=\"token attr-name\">dir</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${src.dir}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">includes</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>**/*.HTML,**/*.css,**/*.js<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>copy</span><span class=\"token punctuation\">></span></span>
     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>exec</span> <span class=\"token attr-name\">executable</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>coffee<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--compile<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>
          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--map<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--output<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.script.dir}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${src.script.dir}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>exec</span><span class=\"token punctuation\">></span></span>
     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mkdir</span> <span class=\"token attr-name\">dir</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.styles.dir}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>apply</span> <span class=\"token attr-name\">executable</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sass<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dest</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.dir}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">verbose</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">force</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">failonerror</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--unix-newlines<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>srcfile</span> <span class=\"token punctuation\">/></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>targetfile</span> <span class=\"token punctuation\">/></span></span>
        &lt;filelist dir =\"${src.dir}\" files=\"styles/scratch.sass\" />
        <span class=\"token comment\">&lt;!--&lt;fileset dir=\"${src.dir}\" includes=\"**/*.sass\"  />--></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mapper</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>glob<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">from</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>*.sass<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>*.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>apply</span><span class=\"token punctuation\">></span></span>
<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>target</span><span class=\"token punctuation\">></span></span></code></pre>
      </div>
<p>So along with copying the raw files, we also now copy the Coffeescript and SASS files.  For Coffeescript, we run the coffee executable against the entire src dir, and have it mirror the output to the build dir.  For Sass, we only want to run the compile on a single file, which pulls all of the other files into it through import statements.  So we use the filelist and mapper to specify the input and output files.</p>
<h3>Concatenation</h3>
<p>Mirroring your directory can be helpful for debugging, and is a good initial step if you’re converting to Ant from a locally run project.  But we’d really like to limit the amount of requests we make when deploying our site.  To do that, we’ll concatenate the js files together.  For my project I create 2 files, one for my external dependencies, and one for my own local files.  I may eventually reduce this to 1, but for now I like separating the 2 for debugging clarity.</p>
<div class=\"gatsby-highlight\" data-language=\"xml\">
      <pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>concatenatejs<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">description</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Concatenate All the JS together<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
    <span class=\"token comment\">&lt;!-- Instead of concatenating the JS files directly, use coffee to preserve the source map --></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>echo</span><span class=\"token punctuation\">></span></span>Concatenating the JS<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>echo</span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>concat</span> <span class=\"token attr-name\">destfile</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.libs}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
         &lt;filelist dir =\"${build.script.dir}\" files=\"lib/jquery.js,lib/knockout.js,lib/BigDecimal.js\" />

          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fileset</span> <span class=\"token attr-name\">dir</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.script.dir}/lib<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">includes</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>**/*.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>concat</span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>apply</span> <span class=\"token attr-name\">executable</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>coffee<span class=\"token punctuation\">\"</span></span>  <span class=\"token attr-name\">verbose</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">force</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">failonerror</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parallel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--compile<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--map<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--join<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.script.output}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>srcfile</span> <span class=\"token punctuation\">/></span></span>
    &lt;filelist dir =\"${src.script.dir}\" files=\"editor/toolkit.coffee,editor/markupGen.coffee,parser/eqTreeBuilder.coffee,parser/NumberValue.coffee,parser/eqScanner.coffee,parser/eqTokenizer.coffee,parser/tablePlaceHolder.coffee,parser/EQParser.coffee,parser/calcFramework.coffee,editor/editor.coffee\" />
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>apply</span><span class=\"token punctuation\">></span></span>
<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>target</span><span class=\"token punctuation\">></span></span></code></pre>
      </div>
<p>For the external libraries I use Ant’s built in <code class=\"language-text\">concat</code> task to concatenate the files together.  For the Coffeescript files, I use the coffee compiler rather than concatenating the files that I copied.  I was hoping to do this in order to preserve the source map, which allows for easier debugging.  Unfortunately the compiler has trouble generating source maps for joined files right now.  I’m hoping to fix that in the future, in the meantime I may be using a different approach, possibly using uglifyjs to concatenate the files and generate the maps.</p>
<h2>Minify</h2>
<p>Speaking of <a href=\"https://github.com/mishoo/UglifyJS2\">uglifyjs</a>, I use that for minifying my Javascript.</p>
<div class=\"gatsby-highlight\" data-language=\"xml\">
      <pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>minify<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">description</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Minify the JS for Production<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>echo</span><span class=\"token punctuation\">></span></span>Minifying the JS For Production with UglifyJS<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>echo</span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>apply</span> <span class=\"token attr-name\">executable</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>uglifyjs<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">verbose</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">force</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">failonerror</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>srcfile</span> <span class=\"token punctuation\">/></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--output<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${build.script.output}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
        &lt;filelist  files =\"${build.script.output}\"/>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>apply</span><span class=\"token punctuation\">></span></span>
<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>target</span><span class=\"token punctuation\">></span></span></code></pre>
      </div>
<p>I only require this for the production task, and leave the full source available for the debug task to preserve the readability of the generated JS.</p>
<h3>Documentation</h3>
<p>I use <a href=\"http://jashkenas.github.com/docco\">docco</a> for my Coffeescript documentation.  It converts comments into documentation and runs them through a <a href=\"http://daringfireball.net/projects/markdown/\">Markdown</a> parser to generate a clean HTML page with the code and comments intermingled.</p>
<div class=\"gatsby-highlight\" data-language=\"xml\">
      <pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>documentation<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">description</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Generate Docco Documentation for coffee files<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>echo</span><span class=\"token punctuation\">></span></span>Generating Documentation with Docco<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>echo</span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>apply</span> <span class=\"token attr-name\">executable</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>docco<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">verbose</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">force</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">failonerror</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>srcfile</span> <span class=\"token punctuation\">/></span></span>
        &lt;fileset dir =\"${src.script.dir}\" >
            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>**/*.coffee<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>
        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>fileset</span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>apply</span><span class=\"token punctuation\">></span></span>
<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>target</span><span class=\"token punctuation\">></span></span></code></pre>
      </div>
<h3>Testing</h3>
<p>I use Jasmine for testing.  <a href=\"http://pivotal.github.com/jasmine\">Jasmine</a> is a “Behavior Driven Development” style unit testing framework for Javascript.  In an ideal world I would be setting up a build task to run on the server and display the results when I run the build.  Unfortunately I wasn’t able to find a way to do that without generating additional dependencies.  Its possible with NodeJS or RequireJS style modules and dependencies, and its also possible using phantomJS, but I didn’t want to require either of those for testing.   So instead I have my build task generate an HTML page with the test results.  I may add some scripting to open this page by default after running a production build in the future.</p>
<div class=\"gatsby-highlight\" data-language=\"xml\">
      <pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>test<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">description</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Generate the JS for testing with Jasmine<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
  <span class=\"token comment\">&lt;!-- Ideally this would run a server side jasmine test, but that requires better dependency management than we have right now--></span>
  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>echo</span><span class=\"token punctuation\">></span></span>Generating the Test JS with jasmine<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>echo</span><span class=\"token punctuation\">></span></span>
  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>apply</span> <span class=\"token attr-name\">executable</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>coffee<span class=\"token punctuation\">\"</span></span>  <span class=\"token attr-name\">verbose</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">force</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">failonerror</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parallel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--compile<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>--join<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>${test.output}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>srcfile</span> <span class=\"token punctuation\">/></span></span>
    &lt;fileset dir =\"${test.dir}\" >
      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>**/*.coffee<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>
    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>fileset</span><span class=\"token punctuation\">></span></span>
  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>apply</span><span class=\"token punctuation\">></span></span>
<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>target</span><span class=\"token punctuation\">></span></span></code></pre>
      </div>
<h3>Summary</h3>
<p>Adding a build system has been great for my project.  Its allowed me to be a lot more organized and to do some cool things that are a pain by hand (unit testing, Coffeescript).  I definitely recommend looking into doing this for any non-trivial Javascript/web project that you’re working on.</p>
<div class=\"gatsby-highlight\" data-language=\"text\">
      <pre class=\"language-text\"><code class=\"language-text\">&lt;project name=&quot;scratchcalc&quot; default=&quot;debug&quot;&gt;

  &lt;loadproperties srcfile=&quot;build.properties&quot; /&gt;

  &lt;target name=&quot;debug&quot; depends=&quot;clean, init, copy,concatenatejs&quot;&gt;
    &lt;echo&gt;ScratchCalc Version ${version} (Debug Version)&lt;/echo&gt;
  &lt;/target&gt;

  &lt;target name=&quot;production&quot; depends=&quot;clean, init, copy,concatenatejs,minify,documentation,test&quot;&gt;
    &lt;echo&gt;ScratchCalc Version ${version}&lt;/echo&gt;
  &lt;/target&gt;

  &lt;target name=&quot;copy&quot; description=&quot;Compiles Coffeescript and SASS files,copies the rest&quot;&gt;
    &lt;echo&gt;Copying Coffeescript Files&lt;/echo&gt;
     &lt;copy todir=&quot;${build.dir}&quot;&gt;
      &lt;fileset dir=&quot;${src.dir}&quot; includes=&quot;**/*.HTML,**/*.css,**/*.js&quot; /&gt;
     &lt;/copy&gt;
     &lt;exec executable=&quot;coffee&quot;&gt;
        &lt;arg value=&quot;--compile&quot;/&gt;
        &lt;arg value=&quot;--map&quot; /&gt;
        &lt;arg value=&quot;--output&quot; /&gt;
        &lt;arg value=&quot;${build.script.dir}&quot; /&gt;
        &lt;arg value=&quot;${src.script.dir}&quot; /&gt;
     &lt;/exec&gt;
     &lt;mkdir dir=&quot;${build.styles.dir}&quot; /&gt;
     &lt;apply executable=&quot;sass&quot; dest=&quot;${build.dir}&quot; verbose=&quot;true&quot; force=&quot;true&quot; failonerror=&quot;true&quot;&gt;
          &lt;arg value=&quot;--unix-newlines&quot; /&gt;
          &lt;srcfile /&gt;
          &lt;targetfile /&gt;
          &lt;filelist dir =&quot;${src.dir}&quot; files=&quot;styles/scratch.sass&quot; /&gt;
          &lt;!--&lt;fileset dir=&quot;${src.dir}&quot; includes=&quot;**/*.sass&quot;  /&gt;--&gt;
          &lt;mapper type=&quot;glob&quot; from=&quot;*.sass&quot; to=&quot;*.css&quot;/&gt;
      &lt;/apply&gt;
  &lt;/target&gt;

  &lt;target name=&quot;concatenatejs&quot; description=&quot;Concatenate All the JS together&quot;&gt;
    &lt;!-- Instead of concatenating the JS files directly, use coffee to preserve the source map --&gt;
    &lt;echo&gt;Concatenating the JS&lt;/echo&gt;
    &lt;concat destfile=&quot;${build.libs}&quot;&gt;
       &lt;filelist dir =&quot;${build.script.dir}&quot; files=&quot;lib/jquery.js,lib/knockout.js,lib/BigDecimal.js&quot; /&gt;

        &lt;fileset dir=&quot;${build.script.dir}/lib&quot; includes=&quot;**/*.js&quot;/&gt;
    &lt;/concat&gt;
    &lt;apply executable=&quot;coffee&quot;  verbose=&quot;true&quot; force=&quot;true&quot; failonerror=&quot;true&quot; parallel=&quot;true&quot;&gt;
      &lt;arg value=&quot;--compile&quot; /&gt;
      &lt;arg value=&quot;--map&quot; /&gt;
      &lt;arg value=&quot;--join&quot; /&gt;
      &lt;arg value=&quot;${build.script.output}&quot; /&gt;
      &lt;srcfile /&gt;
      &lt;filelist dir =&quot;${src.script.dir}&quot; files=&quot;...&quot; /&gt;
    &lt;/apply&gt;
  &lt;/target&gt;

  &lt;target name=&quot;documentation&quot; description=&quot;Generate Docco Documentation for coffee files&quot;&gt;
    &lt;echo&gt;Generating Documentation with Docco&lt;/echo&gt;
    &lt;apply executable=&quot;docco&quot; verbose=&quot;true&quot; force=&quot;true&quot; failonerror=&quot;true&quot;&gt;
          &lt;srcfile /&gt;
          &lt;fileset dir =&quot;${src.script.dir}&quot; &gt;
            &lt;include name=&quot;**/*.coffee&quot;/&gt;
          &lt;/fileset&gt;
      &lt;/apply&gt;
  &lt;/target&gt;

  &lt;target name=&quot;test&quot; description=&quot;Generate the JS for testing with Jasmine&quot;&gt;
    &lt;!-- Ideally this would run a server side jasmine test, but that requires better dependency management than we have right now--&gt;
    &lt;echo&gt;Generating the Test JS with jasmine&lt;/echo&gt;
    &lt;apply executable=&quot;coffee&quot;  verbose=&quot;true&quot; force=&quot;true&quot; failonerror=&quot;true&quot; parallel=&quot;true&quot;&gt;
      &lt;arg value=&quot;--compile&quot; /&gt;
      &lt;arg value=&quot;--join&quot; /&gt;
      &lt;arg value=&quot;${test.output}&quot; /&gt;
      &lt;srcfile /&gt;
      &lt;fileset dir =&quot;${test.dir}&quot; &gt;
        &lt;include name=&quot;**/*.coffee&quot;/&gt;
      &lt;/fileset&gt;
    &lt;/apply&gt;
  &lt;/target&gt;

  &lt;target name=&quot;minify&quot; description=&quot;Minify the JS for Production&quot;&gt;
    &lt;echo&gt;Minifying the JS For Production with UglifyJS&lt;/echo&gt;
    &lt;apply executable=&quot;uglifyjs&quot; verbose=&quot;true&quot; force=&quot;true&quot; failonerror=&quot;true&quot;&gt;
          &lt;srcfile /&gt;
          &lt;arg value=&quot;--output&quot; /&gt;
          &lt;arg value=&quot;${build.script.output}&quot; /&gt;
          &lt;filelist  files =&quot;${build.script.output}&quot;/&gt;
      &lt;/apply&gt;
  &lt;/target&gt;

  &lt;target name= &quot;init&quot;&gt;
    &lt;mkdir dir=&quot;${build.dir}&quot; /&gt;
  &lt;/target&gt;

  &lt;target name=&quot;clean&quot;&gt;
    &lt;delete dir=&quot;${build.dir}&quot; /&gt;
  &lt;/target&gt;

&lt;/project&gt;</code></pre>
      </div>
<p><em>Update June 2014: Since writing this post, Javascript based build tools have continued to mature and grow.  These days I’d recommend <a href=\"http://gruntjs.com/\">Grunt</a> or <a href=\"http://gulpjs.com/\">Gulp</a> for your front end build script needs, though Ant is still a fine choice if you’re integrating your builds with a Java project, or have lots of experience with it.</em></p>
<hr>
<h3>Further Reading</h3>
<ul>
<li><a href=\"http://www.amazon.com/gp/product/1449327680/ref=as_li_tl?ie=UTF8&camp=1789&creative=390957&creativeASIN=1449327680&linkCode=as2&tag=productjavasc-20\">Maintainable JavaScript</a><img src=\"http://ir-na.amazon-adsystem.com/e/ir?t=productjavasc-20&amp;l=as2&amp;o=1&amp;a=1449327680\" width=\"1\" height=\"1\" border=\"0\" alt=\"\" style=\"border:none !important; margin:0px !important;\"> - This is a great little book for anyone writing Javascript applications in teams.  It has a great section on developing a Javascript build system with Ant</li>
</ul>",
                    "author": {
                      "@type": "Person",
                      "name": "Ben McCormick"
                      "email": "mailto:ben@benmccormick.org",
                      "image": "/profile_pic.jpg",
                      "jobTitle": "Software Engineer",
                      "alumniOf": "Duke",
                      "birthPlace": "Pittsburgh, PA",
                      "gender": "male",
                      "url": "http://benmccormick.org",
                	    "sameAs" : [
                        "https://www.linkedin.com/in/benmccormick",
                        "http://twitter.com/ben336",
                      ]
                   }
                }</script><link as="script" rel="preload" href="/app-ed37ad1c98e33716c81d.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-1273ab007af3aba82140.js"/><link as="script" rel="preload" href="/0-ef538a5a40e3af9d5d50.js"/><link as="script" rel="preload" href="/1-468b9b1270453aa7200a.js"/><link as="script" rel="preload" href="/webpack-runtime-5b5631854508068bdaa9.js"/><link as="fetch" rel="preload" href="/static/d/186/path---2013-03-23-creating-a-build-system-for-a-coffeescript-project-with-ant-16-d-e1f-ywoeOqjcFDYmlIVcwMKAEzwfI4.json" crossOrigin="use-credentials"/></head><body class="landing-page" style="background:#FCFCFC"><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="css-1iamx74"><div class="css-1rrcu7t"><h3 class="css-nj9d06"><a name="title" href="/">Ben McCormick</a></h3><div class="css-ph524j"><a class="css-tcc0st" href="/archive/">Blog</a><span class="css-1821md7"></span><a class="css-tcc0st" href="/subscribe/">Subscribe</a><span class="css-1821md7"></span><a class="css-tcc0st" href="/speaking/">Speaking</a><span class="css-1821md7"></span><a class="css-tcc0st" href="http://twitter.com/ben336">Twitter</a><span class="css-1821md7"></span><a class="css-tcc0st" href="/about/">About</a></div></div><article class="markdown"><div class="post-title-area"><h5 class="css-1beg117">March 23rd 2013</h5><h1 class="css-d0z96">Creating a Build System For a Coffeescript Project with Ant</h1></div><div class="columns"><div class="css-n40tvx"><p>I’ve recently taken the time to develop an organized build system for a <a href="http://Coffeescript.org/">Coffeescript</a> and <a href="http://sass-lang.com/">SASS</a> <a href="https://bitbucket.org/ben336/scratchcalc">project</a> that I’ve been working on in my free time.  I learned a lot during the process, and I wanted to share my experience here.  I used Ant for my build system, and worked in a variety of different libraries for minification, testing and documentation.</p>
<h3>Getting Started</h3>
<p>The first step is to install Ant.  It comes preinstalled on OSX, is <a href="http://www.rndblog.com/how-to-install-ant-on-linux/">fairly straightforward</a> to install on Linux, and is <a href="http://www.nczonline.net/blog/2012/04/12/how-to-install-apache-ant-on-windows/">a bit more involved</a> to install on Windows  If you’re using my exact setup, you’ll also need <a href="http://nodejs.org/">NodeJS</a> (for Coffeescript, UglifyJS,and Docco) and <a href="http://www.ruby-lang.org/">Ruby</a> (for SASS) installed.</p>
<h3>My Project Structure</h3>
<p>I went for a structure with 4 directories.</p>
<ul>
<li>src</li>
<li>build</li>
<li>test</li>
<li>docs</li>
</ul>
<p>All of the source files are in the source directory, with Javascript and Coffeescript files in a scripts directory, and SASS styles in a styles folder.  This particular app has only a single HTML file, which sits in the root of the source directory.  The test folder contains a single HTML page, and a series of unit test files written in Coffeescript, in a structure that mirrors the src directory.  The build and docs directories are initially empty.</p>
<h3>The Basics</h3>
<p>We start with a simple Ant setup.  We’ll create an init task, a clean task, and debug and production tasks.  The following code goes into our build.xml file, which is placed at the root of the project directory.</p>
<div class="gatsby-highlight" data-language="text">
      <pre class="language-text"><code class="language-text">&lt;project name=&quot;scratchcalc&quot; default=&quot;debug&quot;&gt;

    &lt;loadproperties srcfile=&quot;build.properties&quot; /&gt;

    &lt;target name=&quot;debug&quot; depends=&quot;clean, init&quot;&gt;
        &lt;echo&gt;ScratchCalc Version ${version} (Debug Version)&lt;/echo&gt;
    &lt;/target&gt;

    &lt;target name=&quot;production&quot; depends=&quot;clean, init&quot;&gt;
        &lt;echo&gt;ScratchCalc Version ${version}&lt;/echo&gt;
    &lt;/target&gt;

    &lt;target name= &quot;init&quot;&gt;
        &lt;mkdir dir=&quot;${build.dir}&quot; /&gt;
    &lt;/target&gt;

    &lt;target name=&quot;clean&quot;&gt;
        &lt;delete dir=&quot;${build.dir}&quot; /&gt;
    &lt;/target&gt;

&lt;/project&gt;</code></pre>
      </div>
<p>So for this project, we now have 4 tasks that we can call.  To call the init task, all we need to do is run</p>
<div class="gatsby-highlight" data-language="text">
      <pre class="language-text"><code class="language-text">Ant init</code></pre>
      </div>
<p>from the command line.   Both our debug and production tasks mark clean and init as dependencies, so running them will remove and restore the build directory.  Beyond that, our build doesn’t do much right now.  Lets change that.</p>
<h3>Copying</h3>
<p>The simplest thing we can do with our Ant file is basic copying of files.  So lets start with a task that just copies over our files from the src directory to the build directory.</p>
<div class="gatsby-highlight" data-language="xml">
      <pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>copy<span class="token punctuation">"</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Copies files from src to build dirs<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>echo</span><span class="token punctuation">></span></span>Copying JS, CSS &amp; HTML Files<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>echo</span><span class="token punctuation">></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>copy</span> <span class="token attr-name">todir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.dir}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileset</span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${src.dir}<span class="token punctuation">"</span></span> <span class="token attr-name">includes</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>**/*.HTML,**/*.css,**/*.js<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>copy</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span></code></pre>
      </div>
<p>This simply copies any HTML, CSS, or Javascript files in the src directory over to an equivalent position in the build directory.  The segments in the <code class="language-text">${}</code> format are variables defined in our build.properties file.  For my project, that looks something like this so far:</p>
<div class="gatsby-highlight" data-language="text">
      <pre class="language-text"><code class="language-text">version = 0.0.1
copyright = Copyright 2012-2013 Ben McCormick.
src.dir = ./src
build.dir = ./build
test.dir = ./test
lib.dir = ${src.dir}/ext</code></pre>
      </div>
<p>This would be a great place to start for a project thats currently running without a build system.  If you’re able to get your project to build like this, it will set you up to be able to start more interesting things going forward.</p>
<p>And we of course want to do more interesting things.  This project uses Coffeescript and SASS, so we’ll need to do a bit more than just copy files.  So lets copy those scripts as well, but convert them to Javascript and CSS while we do.</p>
<div class="gatsby-highlight" data-language="xml">
      <pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>copy<span class="token punctuation">"</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Compiles Coffeescript and SASS files,copies the rest<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>echo</span><span class="token punctuation">></span></span>Copying Coffeescript Files<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>echo</span><span class="token punctuation">></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>copy</span> <span class="token attr-name">todir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.dir}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileset</span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${src.dir}<span class="token punctuation">"</span></span> <span class="token attr-name">includes</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>**/*.HTML,**/*.css,**/*.js<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>copy</span><span class="token punctuation">></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec</span> <span class="token attr-name">executable</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>coffee<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--compile<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--map<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--output<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.script.dir}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${src.script.dir}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec</span><span class="token punctuation">></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mkdir</span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.styles.dir}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>apply</span> <span class="token attr-name">executable</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sass<span class="token punctuation">"</span></span> <span class="token attr-name">dest</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.dir}<span class="token punctuation">"</span></span> <span class="token attr-name">verbose</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">force</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">failonerror</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--unix-newlines<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>srcfile</span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>targetfile</span> <span class="token punctuation">/></span></span>
        &lt;filelist dir ="${src.dir}" files="styles/scratch.sass" />
        <span class="token comment">&lt;!--&lt;fileset dir="${src.dir}" includes="**/*.sass"  />--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>glob<span class="token punctuation">"</span></span> <span class="token attr-name">from</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>*.sass<span class="token punctuation">"</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>*.css<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>apply</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span></code></pre>
      </div>
<p>So along with copying the raw files, we also now copy the Coffeescript and SASS files.  For Coffeescript, we run the coffee executable against the entire src dir, and have it mirror the output to the build dir.  For Sass, we only want to run the compile on a single file, which pulls all of the other files into it through import statements.  So we use the filelist and mapper to specify the input and output files.</p>
<h3>Concatenation</h3>
<p>Mirroring your directory can be helpful for debugging, and is a good initial step if you’re converting to Ant from a locally run project.  But we’d really like to limit the amount of requests we make when deploying our site.  To do that, we’ll concatenate the js files together.  For my project I create 2 files, one for my external dependencies, and one for my own local files.  I may eventually reduce this to 1, but for now I like separating the 2 for debugging clarity.</p>
<div class="gatsby-highlight" data-language="xml">
      <pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>concatenatejs<span class="token punctuation">"</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Concatenate All the JS together<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- Instead of concatenating the JS files directly, use coffee to preserve the source map --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>echo</span><span class="token punctuation">></span></span>Concatenating the JS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>echo</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>concat</span> <span class="token attr-name">destfile</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.libs}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
         &lt;filelist dir ="${build.script.dir}" files="lib/jquery.js,lib/knockout.js,lib/BigDecimal.js" />

          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileset</span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.script.dir}/lib<span class="token punctuation">"</span></span> <span class="token attr-name">includes</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>**/*.js<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>concat</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>apply</span> <span class="token attr-name">executable</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>coffee<span class="token punctuation">"</span></span>  <span class="token attr-name">verbose</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">force</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">failonerror</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">parallel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--compile<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--map<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--join<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.script.output}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>srcfile</span> <span class="token punctuation">/></span></span>
    &lt;filelist dir ="${src.script.dir}" files="editor/toolkit.coffee,editor/markupGen.coffee,parser/eqTreeBuilder.coffee,parser/NumberValue.coffee,parser/eqScanner.coffee,parser/eqTokenizer.coffee,parser/tablePlaceHolder.coffee,parser/EQParser.coffee,parser/calcFramework.coffee,editor/editor.coffee" />
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>apply</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span></code></pre>
      </div>
<p>For the external libraries I use Ant’s built in <code class="language-text">concat</code> task to concatenate the files together.  For the Coffeescript files, I use the coffee compiler rather than concatenating the files that I copied.  I was hoping to do this in order to preserve the source map, which allows for easier debugging.  Unfortunately the compiler has trouble generating source maps for joined files right now.  I’m hoping to fix that in the future, in the meantime I may be using a different approach, possibly using uglifyjs to concatenate the files and generate the maps.</p>
<h2>Minify</h2>
<p>Speaking of <a href="https://github.com/mishoo/UglifyJS2">uglifyjs</a>, I use that for minifying my Javascript.</p>
<div class="gatsby-highlight" data-language="xml">
      <pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>minify<span class="token punctuation">"</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Minify the JS for Production<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>echo</span><span class="token punctuation">></span></span>Minifying the JS For Production with UglifyJS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>echo</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>apply</span> <span class="token attr-name">executable</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>uglifyjs<span class="token punctuation">"</span></span> <span class="token attr-name">verbose</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">force</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">failonerror</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>srcfile</span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--output<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${build.script.output}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        &lt;filelist  files ="${build.script.output}"/>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>apply</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span></code></pre>
      </div>
<p>I only require this for the production task, and leave the full source available for the debug task to preserve the readability of the generated JS.</p>
<h3>Documentation</h3>
<p>I use <a href="http://jashkenas.github.com/docco">docco</a> for my Coffeescript documentation.  It converts comments into documentation and runs them through a <a href="http://daringfireball.net/projects/markdown/">Markdown</a> parser to generate a clean HTML page with the code and comments intermingled.</p>
<div class="gatsby-highlight" data-language="xml">
      <pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>documentation<span class="token punctuation">"</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Generate Docco Documentation for coffee files<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>echo</span><span class="token punctuation">></span></span>Generating Documentation with Docco<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>echo</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>apply</span> <span class="token attr-name">executable</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>docco<span class="token punctuation">"</span></span> <span class="token attr-name">verbose</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">force</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">failonerror</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>srcfile</span> <span class="token punctuation">/></span></span>
        &lt;fileset dir ="${src.script.dir}" >
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>**/*.coffee<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileset</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>apply</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span></code></pre>
      </div>
<h3>Testing</h3>
<p>I use Jasmine for testing.  <a href="http://pivotal.github.com/jasmine">Jasmine</a> is a “Behavior Driven Development” style unit testing framework for Javascript.  In an ideal world I would be setting up a build task to run on the server and display the results when I run the build.  Unfortunately I wasn’t able to find a way to do that without generating additional dependencies.  Its possible with NodeJS or RequireJS style modules and dependencies, and its also possible using phantomJS, but I didn’t want to require either of those for testing.   So instead I have my build task generate an HTML page with the test results.  I may add some scripting to open this page by default after running a production build in the future.</p>
<div class="gatsby-highlight" data-language="xml">
      <pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>test<span class="token punctuation">"</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Generate the JS for testing with Jasmine<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- Ideally this would run a server side jasmine test, but that requires better dependency management than we have right now--></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>echo</span><span class="token punctuation">></span></span>Generating the Test JS with jasmine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>echo</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>apply</span> <span class="token attr-name">executable</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>coffee<span class="token punctuation">"</span></span>  <span class="token attr-name">verbose</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">force</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">failonerror</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">parallel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--compile<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>--join<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${test.output}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>srcfile</span> <span class="token punctuation">/></span></span>
    &lt;fileset dir ="${test.dir}" >
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>**/*.coffee<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileset</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>apply</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span></code></pre>
      </div>
<h3>Summary</h3>
<p>Adding a build system has been great for my project.  Its allowed me to be a lot more organized and to do some cool things that are a pain by hand (unit testing, Coffeescript).  I definitely recommend looking into doing this for any non-trivial Javascript/web project that you’re working on.</p>
<div class="gatsby-highlight" data-language="text">
      <pre class="language-text"><code class="language-text">&lt;project name=&quot;scratchcalc&quot; default=&quot;debug&quot;&gt;

  &lt;loadproperties srcfile=&quot;build.properties&quot; /&gt;

  &lt;target name=&quot;debug&quot; depends=&quot;clean, init, copy,concatenatejs&quot;&gt;
    &lt;echo&gt;ScratchCalc Version ${version} (Debug Version)&lt;/echo&gt;
  &lt;/target&gt;

  &lt;target name=&quot;production&quot; depends=&quot;clean, init, copy,concatenatejs,minify,documentation,test&quot;&gt;
    &lt;echo&gt;ScratchCalc Version ${version}&lt;/echo&gt;
  &lt;/target&gt;

  &lt;target name=&quot;copy&quot; description=&quot;Compiles Coffeescript and SASS files,copies the rest&quot;&gt;
    &lt;echo&gt;Copying Coffeescript Files&lt;/echo&gt;
     &lt;copy todir=&quot;${build.dir}&quot;&gt;
      &lt;fileset dir=&quot;${src.dir}&quot; includes=&quot;**/*.HTML,**/*.css,**/*.js&quot; /&gt;
     &lt;/copy&gt;
     &lt;exec executable=&quot;coffee&quot;&gt;
        &lt;arg value=&quot;--compile&quot;/&gt;
        &lt;arg value=&quot;--map&quot; /&gt;
        &lt;arg value=&quot;--output&quot; /&gt;
        &lt;arg value=&quot;${build.script.dir}&quot; /&gt;
        &lt;arg value=&quot;${src.script.dir}&quot; /&gt;
     &lt;/exec&gt;
     &lt;mkdir dir=&quot;${build.styles.dir}&quot; /&gt;
     &lt;apply executable=&quot;sass&quot; dest=&quot;${build.dir}&quot; verbose=&quot;true&quot; force=&quot;true&quot; failonerror=&quot;true&quot;&gt;
          &lt;arg value=&quot;--unix-newlines&quot; /&gt;
          &lt;srcfile /&gt;
          &lt;targetfile /&gt;
          &lt;filelist dir =&quot;${src.dir}&quot; files=&quot;styles/scratch.sass&quot; /&gt;
          &lt;!--&lt;fileset dir=&quot;${src.dir}&quot; includes=&quot;**/*.sass&quot;  /&gt;--&gt;
          &lt;mapper type=&quot;glob&quot; from=&quot;*.sass&quot; to=&quot;*.css&quot;/&gt;
      &lt;/apply&gt;
  &lt;/target&gt;

  &lt;target name=&quot;concatenatejs&quot; description=&quot;Concatenate All the JS together&quot;&gt;
    &lt;!-- Instead of concatenating the JS files directly, use coffee to preserve the source map --&gt;
    &lt;echo&gt;Concatenating the JS&lt;/echo&gt;
    &lt;concat destfile=&quot;${build.libs}&quot;&gt;
       &lt;filelist dir =&quot;${build.script.dir}&quot; files=&quot;lib/jquery.js,lib/knockout.js,lib/BigDecimal.js&quot; /&gt;

        &lt;fileset dir=&quot;${build.script.dir}/lib&quot; includes=&quot;**/*.js&quot;/&gt;
    &lt;/concat&gt;
    &lt;apply executable=&quot;coffee&quot;  verbose=&quot;true&quot; force=&quot;true&quot; failonerror=&quot;true&quot; parallel=&quot;true&quot;&gt;
      &lt;arg value=&quot;--compile&quot; /&gt;
      &lt;arg value=&quot;--map&quot; /&gt;
      &lt;arg value=&quot;--join&quot; /&gt;
      &lt;arg value=&quot;${build.script.output}&quot; /&gt;
      &lt;srcfile /&gt;
      &lt;filelist dir =&quot;${src.script.dir}&quot; files=&quot;...&quot; /&gt;
    &lt;/apply&gt;
  &lt;/target&gt;

  &lt;target name=&quot;documentation&quot; description=&quot;Generate Docco Documentation for coffee files&quot;&gt;
    &lt;echo&gt;Generating Documentation with Docco&lt;/echo&gt;
    &lt;apply executable=&quot;docco&quot; verbose=&quot;true&quot; force=&quot;true&quot; failonerror=&quot;true&quot;&gt;
          &lt;srcfile /&gt;
          &lt;fileset dir =&quot;${src.script.dir}&quot; &gt;
            &lt;include name=&quot;**/*.coffee&quot;/&gt;
          &lt;/fileset&gt;
      &lt;/apply&gt;
  &lt;/target&gt;

  &lt;target name=&quot;test&quot; description=&quot;Generate the JS for testing with Jasmine&quot;&gt;
    &lt;!-- Ideally this would run a server side jasmine test, but that requires better dependency management than we have right now--&gt;
    &lt;echo&gt;Generating the Test JS with jasmine&lt;/echo&gt;
    &lt;apply executable=&quot;coffee&quot;  verbose=&quot;true&quot; force=&quot;true&quot; failonerror=&quot;true&quot; parallel=&quot;true&quot;&gt;
      &lt;arg value=&quot;--compile&quot; /&gt;
      &lt;arg value=&quot;--join&quot; /&gt;
      &lt;arg value=&quot;${test.output}&quot; /&gt;
      &lt;srcfile /&gt;
      &lt;fileset dir =&quot;${test.dir}&quot; &gt;
        &lt;include name=&quot;**/*.coffee&quot;/&gt;
      &lt;/fileset&gt;
    &lt;/apply&gt;
  &lt;/target&gt;

  &lt;target name=&quot;minify&quot; description=&quot;Minify the JS for Production&quot;&gt;
    &lt;echo&gt;Minifying the JS For Production with UglifyJS&lt;/echo&gt;
    &lt;apply executable=&quot;uglifyjs&quot; verbose=&quot;true&quot; force=&quot;true&quot; failonerror=&quot;true&quot;&gt;
          &lt;srcfile /&gt;
          &lt;arg value=&quot;--output&quot; /&gt;
          &lt;arg value=&quot;${build.script.output}&quot; /&gt;
          &lt;filelist  files =&quot;${build.script.output}&quot;/&gt;
      &lt;/apply&gt;
  &lt;/target&gt;

  &lt;target name= &quot;init&quot;&gt;
    &lt;mkdir dir=&quot;${build.dir}&quot; /&gt;
  &lt;/target&gt;

  &lt;target name=&quot;clean&quot;&gt;
    &lt;delete dir=&quot;${build.dir}&quot; /&gt;
  &lt;/target&gt;

&lt;/project&gt;</code></pre>
      </div>
<p><em>Update June 2014: Since writing this post, Javascript based build tools have continued to mature and grow.  These days I’d recommend <a href="http://gruntjs.com/">Grunt</a> or <a href="http://gulpjs.com/">Gulp</a> for your front end build script needs, though Ant is still a fine choice if you’re integrating your builds with a Java project, or have lots of experience with it.</em></p>
<hr>
<h3>Further Reading</h3>
<ul>
<li><a href="http://www.amazon.com/gp/product/1449327680/ref=as_li_tl?ie=UTF8&camp=1789&creative=390957&creativeASIN=1449327680&linkCode=as2&tag=productjavasc-20">Maintainable JavaScript</a><img src="http://ir-na.amazon-adsystem.com/e/ir?t=productjavasc-20&amp;l=as2&amp;o=1&amp;a=1449327680" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;"> - This is a great little book for anyone writing Javascript applications in teams.  It has a great section on developing a Javascript build system with Ant</li>
</ul></div><div class="css-khxvw8 no-mobile"><div class="css-m9l7q0"><form action="https://buttondown.email/api/emails/embed-subscribe/benmccormick" method="post" target="popupwindow" class="embeddable-buttondown-form"><label for="bd-email" id="bd-label">Subscribe to the Newsletter</label><input type="hidden" value="1" name="embed"/><div class="bd-subscribe-row"><input type="email" name="email" id="bd-email" placeholder="Your Email"/><input type="submit" value="Subscribe" id="bd-submit"/></div></form></div><div class="css-1xksjga"></div></div></div><div><hr/><div class=""><h2 class="css-4w3jde">You Might Also Like These Articles</h2><ul class="css-33c833"><a class="css-5xytwl" href="/2012/11/08/shutdown-tiles-for-windows-8-start-screen"><div></div><div class="css-a0bmeo"><div><div class="css-1si8vwk">Shutdown Tiles for Windows 8 Start Screen</div><p class="css-15odo6z">A solve for shutting down Windows 8 easily</p></div></div><span class="css-gpdfjo no-mobile">Nov 8th 2012</span></a><a class="css-5xytwl" href="/2012/11/07/sync-multiple-google-calendars-in-windows-8"><div></div><div class="css-a0bmeo"><div><div class="css-1si8vwk">Sync Multiple Google Calendars in Windows 8</div><p class="css-15odo6z">A helpful tip for using Google Calendar in Windows 8</p></div></div><span class="css-gpdfjo no-mobile">Nov 7th 2012</span></a><a class="css-5xytwl" href="/2013/06/11/how-i-use-stack-overflow"><div></div><div class="css-a0bmeo"><div><div class="css-1si8vwk">How I Use Stack Overflow</div><p class="css-15odo6z">Getting the most out of Stack Overflow</p></div></div><span class="css-gpdfjo no-mobile">Jun 11th 2013</span></a></ul></div></div></article></div><div class="css-gpzr7f"><div class="css-1r4ayr"><div><h2 class="css-nil">Content</h2><div class="css-1s90cbl"><a class="css-1gs5qio" href="/archive/">Blog Archive</a><a class="css-1gs5qio" href="/reviews-archive/">Book Reviews</a><a class="css-1gs5qio" href="https://buttondown.email/benmccormick">Newsletter Archives</a><a class="css-1gs5qio" href="/speaking/">Speaking</a></div></div><div><h2 class="css-nil">Meta</h2><div class="css-1s90cbl"><a class="css-1gs5qio" href="/subscribe/">Subscribe To The Newsletter</a><a class="css-1gs5qio" href="/built-with/">Built With</a><a class="css-1gs5qio" href="http://twitter.com/ben336">Personal Twitter</a><a class="css-1gs5qio" href="http://twitter.com/benmccormickorg">Blog Twitter</a><a class="css-1gs5qio" href="/about/">About Me</a></div></div><div class="css-1nllbc3">Copyright © 2012-2019 · Ben McCormick</div></div></div></div></div><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-37323973-1', 'auto');
            ga('send', 'pageview');
        </script><script>
          (function(d) {
            var config = {
              kitId: 'msd6bqv',
              scriptTimeout: 300,
              async: true
            },
            h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/wf-loading/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
          })(document);
        </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"2013-03-23-creating-a-build-system-for-a-coffeescript-project-with-ant-16d","path":"/2013/03/23/creating-a-build-system-for-a-coffeescript-project-with-ant"};window.dataPath="186/path---2013-03-23-creating-a-build-system-for-a-coffeescript-project-with-ant-16-d-e1f-ywoeOqjcFDYmlIVcwMKAEzwfI4";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-ed37ad1c98e33716c81d.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-0666ac89ec9508ea4013.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js.59aadf62793e0bf7c444.css","/component---src-templates-blog-post-js-1273ab007af3aba82140.js"],"component---src-templates-category-page-js":["/component---src-templates-category-page-js-859f590ccf7b94ba7223.js"],"component---src-templates-topic-page-js":["/component---src-templates-topic-page-js-618ec3e6542dc18c179d.js"],"component---src-pages-archive-js":["/component---src-pages-archive-js-c91fd91cf679071774c5.js"],"component---src-pages-index-js":["/component---src-pages-index-js-ad4d724591face7fa73f.js"],"component---src-pages-links-archive-js":["/component---src-pages-links-archive-js-6648e4e436744aa916a6.js"],"component---src-pages-reviews-archive-js":["/component---src-pages-reviews-archive-js-95c2150d9634e26cfc24.js"]};/*]]>*/</script><script src="/webpack-runtime-5b5631854508068bdaa9.js" async=""></script><script src="/1-468b9b1270453aa7200a.js" async=""></script><script src="/0-ef538a5a40e3af9d5d50.js" async=""></script><script src="/component---src-templates-blog-post-js-1273ab007af3aba82140.js" async=""></script><script src="/app-ed37ad1c98e33716c81d.js" async=""></script></body></html>