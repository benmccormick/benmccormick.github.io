<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=yyxgnp97qG"/><link rel="icon" type="image/png" href="/favicon-32x32.png?v=yyxgnp97qG" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png?v=yyxgnp97qG" sizes="16x16"/><link rel="manifest" href="/manifest.json"/><link rel="mask-icon" href="/safari-pinned-tab.svg?v=yyxgnp97qG" color="#57a3e8"/><link rel="shortcut icon" href="/favicon.ico?v=yyxgnp97qG"/><meta name="theme-color" content="#ffffff"/><script type="text/javascript" src="//use.typekit.net/msd6bqv.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script><title data-react-helmet="true">Modern Dojo: Exploring declare | benmccormick.org</title><meta data-react-helmet="true" name="description" content="A dive into the _base/declare module"/><meta data-react-helmet="true" name="keywords" content=""/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:site" content="@benmccormickorg"/><meta data-react-helmet="true" name="twitter:creator" content="@ben336"/><meta data-react-helmet="true" name="twitter:title" content="Modern Dojo: Exploring declare"/><meta data-react-helmet="true" name="twitter:description" content="A dive into the _base/declare module"/><meta data-react-helmet="true" name="twitter:image" content="http://benmccormick.org/logo.png"/><script data-react-helmet="true" type="application/ld+json">{
                "@context": "http://schema.org"
                "@type": "BlogPosting",
                "headline": "Modern Dojo: Exploring declare",
                "genre": "Software Development",
                "keywords": "",
                "url": "http://benmccormick.org/2013/11/14/modern-dojo-exploring-dojo_basedeclare/",
                "image": "http://benmccormick.org/logo.png",
                "datePublished": "2013-11-14",
                "description": "A dive into the _base/declare module",
                "articleBody": "<p>This is part 2 of my ongoing exploration of <a href=\"http://dojotoolkit.org/\">Dojo</a>’s important modules and concepts.  Specifically this post will be examining dojo/_base/declare, Dojo’s object oriented programming helper module.</p>
<h2>What is dojo/_base/declare used for?</h2>
<p>dojo/_base/declare (henceforth “declare”) is the Dojo module for dom assisting with Object Oriented Programming.  It provides a function that allows for easy “classical style” inheritance, as well as mixins.  It is fairly flexible, and there seem to be several ways to use it.  I’m going to explore those here.</p>
<h2>How do you use declare?</h2>
<p>Dojo’s declare function takes up to 3 arguments.  The first argument, which is optional, gives a fully qualified namespaced class name <sup id=\"fnref:1\"><a href=\"#fn:1\" rel=\"footnote\">1</a></sup>.  The second argument is a string or an array specifying a class or set of classes that the new class will inherit from.  This argument can also be null.  The final argument is an object with the properties we want the new class to contain.  The full 3 argument syntax looks like the example below.</p>
<pre><code class=\"language-javascript\"><span class=\"hljs-comment\">//declare with a className argument</span>

<span class=\"hljs-comment\">//pull in the declare module</span>
<span class=\"hljs-built_in\">require</span>([<span class=\"hljs-string\">\"dojo/_base/declare\"</span>], <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">declare</span>) </span>{

  <span class=\"hljs-comment\">//we're going to create a class in the global myApp namespace</span>
  declare(<span class=\"hljs-string\">\"myApp.examples.Messenger\"</span>,<span class=\"hljs-literal\">null</span>, {
    <span class=\"hljs-attr\">message</span>: <span class=\"hljs-string\">\"hello world\"</span>,
    <span class=\"hljs-attr\">sendMessage</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{
        <span class=\"hljs-built_in\">console</span>.log(message);
    }
  });
  <span class=\"hljs-comment\">//since our class was created globally, we can access it wherever</span>
  <span class=\"hljs-comment\">//we want, by refering to the namespace property</span>
  <span class=\"hljs-keyword\">var</span> messenger = <span class=\"hljs-keyword\">new</span> myApp.examples.Messenger();
  messenger.sendMessage();
});
</code></pre>
<p>This syntax works fine, but to me it seems fairly contrary to the spirit of Modern Dojo.  Rather than keeping the class definition bound in a module, it is instead pushed out as a global, using namespacing techniques rather than AMD style modules for code organization.  It seems to be solely a product of supporting legacy implementations and Dojo’s declarative syntax.  As such I’m going to spend the rest of this piece focusing on the 2 argument syntax, where the above example would look like what we have below.</p>
<pre><code class=\"language-javascript\"><span class=\"hljs-comment\">//declare without the className argument</span>

<span class=\"hljs-built_in\">require</span>([<span class=\"hljs-string\">\"dojo/_base/declare\"</span>], <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">declare</span>) </span>{

  <span class=\"hljs-keyword\">var</span> Messenger = declare(<span class=\"hljs-literal\">null</span>, {
    <span class=\"hljs-attr\">message</span>: <span class=\"hljs-string\">\"hello world\"</span>,
    <span class=\"hljs-attr\">sendMessage</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{
        <span class=\"hljs-built_in\">console</span>.log(message);
    }
  });
  <span class=\"hljs-comment\">//since our class was created locally, we can access it here</span>
  <span class=\"hljs-keyword\">var</span> messenger = <span class=\"hljs-keyword\">new</span> Messenger();
  messenger.sendMessage();

  <span class=\"hljs-comment\">//If we need access our class in other places, we can return it</span>
  <span class=\"hljs-comment\">//from a module and then load it as a dependency where needed</span>
});
</code></pre>
<p>So what is this simple example actually doing?  declare takes the object that you pass and adds it to the prototype chain of your class.  It’s important to understand that properties on the prototype are shared between all objects based on that class.  This is perfect for functions, as they only need to be created once.  It also works well for primitive values, since if we rewrite them the values will be added to the object itself rather than the prototype.  Putting properties on the prototype can lead to unexpected behavior when dealing with arrays and more complex objects though.  So its important to understand how the prototype chain works.  For example, the code below produces unexpected output since the messages array is shared between all Messengers.</p>
<pre><code class=\"language-javascript\"><span class=\"hljs-built_in\">require</span>([<span class=\"hljs-string\">\"dojo/_base/declare\"</span>], <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">declare</span>) </span>{

  <span class=\"hljs-keyword\">var</span> Messenger = declare(<span class=\"hljs-literal\">null</span>, {
    <span class=\"hljs-attr\">messages</span>: [<span class=\"hljs-string\">\"hello\"</span>,<span class=\"hljs-string\">\"world\"</span>],
    <span class=\"hljs-attr\">sendMessages</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{
        <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-keyword\">this</span>.messages);
    }
  });
  <span class=\"hljs-keyword\">var</span> messenger = <span class=\"hljs-keyword\">new</span> Messenger();
  <span class=\"hljs-keyword\">var</span> messenger2 = <span class=\"hljs-keyword\">new</span> Messenger();

  <span class=\"hljs-comment\">//change the messages array on messenger</span>
  messenger.messages.push(<span class=\"hljs-string\">\"extra value\"</span>)
  <span class=\"hljs-comment\">//and the change has populated to all instances of Messages</span>
  messenger2.sendMessage();
  <span class=\"hljs-comment\">//logs [\"hello\", \"world\", \"extra value\"]</span>
});
</code></pre>
<p>Fortunately Dojo provides an easy way to get around this issue with the special constructor property.  If you define the constructor property of your object as a function, dojo treats that property as the constructor for your class and runs it when instantiating your class.  This allows you to have local properties, and only share properties that should be shared.</p>
<pre><code class=\"language-javascript\"><span class=\"hljs-comment\">//Constructor example</span>

<span class=\"hljs-built_in\">require</span>([<span class=\"hljs-string\">\"dojo/_base/declare\"</span>], <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">declare</span>) </span>{

  <span class=\"hljs-keyword\">var</span> Messenger = declare(<span class=\"hljs-literal\">null</span>, {
    <span class=\"hljs-attr\">constructor</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{
      <span class=\"hljs-keyword\">this</span>.messages = [<span class=\"hljs-string\">\"hello\"</span>,<span class=\"hljs-string\">\"world\"</span>]
    },
    <span class=\"hljs-attr\">sendMessages</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{
        <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-keyword\">this</span>.messages);
    }
  });

  <span class=\"hljs-keyword\">var</span> messenger = <span class=\"hljs-keyword\">new</span> Messenger();
  <span class=\"hljs-keyword\">var</span> messenger2 = <span class=\"hljs-keyword\">new</span> Messenger();
  <span class=\"hljs-comment\">//change the messages array on messenger</span>
  messenger.messages.push(<span class=\"hljs-string\">\"extra value\"</span>)
  messenger.sendMessage(); <span class=\"hljs-comment\">//logs [\"hello\",\"world\",\"extra value\"]</span>
  <span class=\"hljs-comment\">//and the change has not populated to other instances of Messages</span>
  messenger2.sendMessage(); <span class=\"hljs-comment\">//logs [\"hello\",\"world\"]</span>
});
</code></pre>
<p>Dojo also provides a special helper function to allow you to define arbitrary properties on a member of the class when an object is created.  You can use code like this to accept object arguments that you can map to properties.</p>
<pre><code class=\"language-javascript\"><span class=\"hljs-comment\">//safeMixin example</span>

<span class=\"hljs-keyword\">var</span> TestObject = declare(<span class=\"hljs-literal\">null</span>, {
  <span class=\"hljs-attr\">val</span>:<span class=\"hljs-string\">\"default\"</span>,
  <span class=\"hljs-attr\">constructor</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{
    <span class=\"hljs-comment\">//make the constructor arguments a mixin</span>
    declare.safeMixin(<span class=\"hljs-keyword\">this</span>,args);
  }
})

<span class=\"hljs-comment\">//then we can stick with the default value</span>
<span class=\"hljs-keyword\">var</span> test = <span class=\"hljs-keyword\">new</span> TestObject();
<span class=\"hljs-comment\">//or come up with our own</span>
<span class=\"hljs-keyword\">var</span> spicyTest = <span class=\"hljs-keyword\">new</span> TestObject({<span class=\"hljs-attr\">val</span>:<span class=\"hljs-string\">\"spicy\"</span>});

alert(spicyTest.val) <span class=\"hljs-comment\">//\"spicy\"</span>
</code></pre>
<h4>Inheritance</h4>
<p>declare also provides a flexible inheritance option.  In the examples above, we created a class without any inheritance by passing null as the superClass argument.  But we can also specify a class as a superclass.  For instance to create a new messenger that alerts your message instead of logging them, you could inherit the existing Messenger class like the example below.</p>
<pre><code class=\"language-javascript\"><span class=\"hljs-comment\">//Basic Inheritance</span>

<span class=\"hljs-keyword\">var</span> AlertMessenger = declare(Messenger, {
    <span class=\"hljs-attr\">sendMessage</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{
      alert(<span class=\"hljs-keyword\">this</span>.messages)
    }
  });
<span class=\"hljs-keyword\">var</span> alerter = <span class=\"hljs-keyword\">new</span> AlertMessenger();
alerter.sendMessage(); <span class=\"hljs-comment\">//alerts the message</span>
</code></pre>
<p>In this example, AlertMessenger inherits the constructor property from Messenger, but overrides the sendMessage function.  So we change the functionality in a classical OO way.</p>
<p>One nice feature of Dojo’s OO implementation is that it is easy to make calls up the prototype change even when we are overriding functions.  So for instance if we wanted our AlertMessenger class to send an alert while still logging the message in the console, we could use <code>this.inherited</code> to make it happen.</p>
<pre><code class=\"language-javascript\"><span class=\"hljs-comment\">//this.inherited Example</span>

<span class=\"hljs-keyword\">var</span> AlertMessenger = declare(Messenger, {
    <span class=\"hljs-attr\">sendMessage</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{
      alert(<span class=\"hljs-keyword\">this</span>.messages);
      <span class=\"hljs-comment\">//calls up the prototype chain to Messenger's sendMessage function</span>
      <span class=\"hljs-keyword\">this</span>.inherited(<span class=\"hljs-built_in\">arguments</span>);
    }
  });
<span class=\"hljs-keyword\">var</span> alerter = <span class=\"hljs-keyword\">new</span> AlertMessenger();
alerter.sendMessage(); <span class=\"hljs-comment\">//alerts and logs the message</span>
</code></pre>
<p>So we still have access to overriden functions if used judiciously. Also, each constructor will be executed along the prototype chain, so there is no need to use <code>this.inherited</code> in a constructor context.</p>
<h4>Mixins</h4>
<p>But we’re not limited to a single inheritance instance.  We can still do more.  We can also pass an array of classes to the className argument, allowing us to inherit from multiple types at once. The first argument is the base of the prototype chain, and its extended from there, with the additional class properties being mixed in.</p>
<pre><code class=\"language-javascript\"><span class=\"hljs-comment\">//Multi-Inheritance Example</span>

<span class=\"hljs-keyword\">var</span> Lion = declare( <span class=\"hljs-literal\">null</span>, {
  <span class=\"hljs-attr\">head</span>: <span class=\"hljs-string\">\"lion\"</span>,
  <span class=\"hljs-attr\">body</span>: <span class=\"hljs-string\">\"lion\"</span>,
  <span class=\"hljs-attr\">legs</span>: <span class=\"hljs-string\">\"lion\"</span>
});

<span class=\"hljs-keyword\">var</span> Bird = declare(<span class=\"hljs-literal\">null</span>, {
  <span class=\"hljs-attr\">head</span>: <span class=\"hljs-string\">\"bird\"</span>,
  <span class=\"hljs-attr\">wings</span>: <span class=\"hljs-string\">\"bird\"</span>
});

<span class=\"hljs-keyword\">var</span> Human = declare (<span class=\"hljs-literal\">null</span>, {
  <span class=\"hljs-attr\">head</span>: <span class=\"hljs-string\">\"human\"</span>
});

<span class=\"hljs-comment\">//Sphinx is declared with 3 mixins</span>
<span class=\"hljs-comment\">//lion is first, then bird, then human</span>
<span class=\"hljs-keyword\">var</span> Sphinx = declare([Lion,Bird,Human],{
  <span class=\"hljs-comment\">//head gets overriden by human last, wings body and legs are never overriden and stay with their first set values</span>

  aboutMe: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{
     alert(<span class=\"hljs-string\">\"I have the head of a \"</span>+ <span class=\"hljs-keyword\">this</span>.head +
           <span class=\"hljs-string\">\", the wings of a \"</span> + <span class=\"hljs-keyword\">this</span>.wings +
           <span class=\"hljs-string\">\", and the body of a \"</span> + <span class=\"hljs-keyword\">this</span>.body);
  }

  });

<span class=\"hljs-keyword\">var</span> sphinx = <span class=\"hljs-keyword\">new</span> Sphinx();

sphinx.aboutMe(); <span class=\"hljs-comment\">//I have the head of a human, the wings of a bird, and the body of a lion</span>
</code></pre>
<h2>When should I use dojo/_base/declare</h2>
<p>declare seems like a great choice for creating reusable objects, and allows for either a classical inheritance style or a more flexible mixin style.  Its a bit of overkill for simple or one off objects, but for defining the structure of a complex model, it seems like a great fit.</p>
<p>Personally I’m going to avoid the className syntax unless I find a use for it that I currently don’t see.  It seems to be a legacy option that is completely at odds with the rest of Dojo’s avoidance of global variables.  The 2 argument syntax on the other hand, seems like a great choice for creating maintainable and reusable classes.</p>
<p>declare should be especially useful for programmers who want to implement a classical inheritance structure in JS.  It makes the syntax quick and straightforward.  The only gotcha I see is the need to be aware of how the prototype chain works under the covers so that there’s no being burned by unexpected sharing of changes.</p>
<h3>More Resources</h3>
<ul>
<li><a href=\"http://dojotoolkit.org/documentation/tutorials/1.9/declare/\">Official Dojo tutorial on dojo/_base/declare</a></li>
<li><a href=\"http://dojotoolkit.org/reference-guide/1.9/dojo/_base/declare.html\">Dojo docs on dojo/_base/declare</a></li>
<li><a href=\"/blog/2013/01/12/javascript-explained-object-oriented-javascript/\">JS Explained: Object Oriented Javascript</a></li>
</ul>
<h3>Other Modern Dojo Posts</h3>
<ul>
<li><a href=\"/blog/2013/11/13/modern-dojo-dojo-query/\">Exploring dojo/query</a></li>
</ul>
<div class=\"footnotes\"><ol>
    <li class=\"footnote\" id=\"fn:1\">
        <p>
        I'm not a fan of the dojo convention of having optional arguments be first in some cases.  It seems very strange that arguments might \"shift\" and not line up as expected.  I can understand in this case not wanting to have a small string parameter after a potentially large object listing the class properties, but it still makes for a confusingly inconsistent API.
        <a href=\"#fnref:1\" title=\"return to article\"> ↩</a></p>
    </li>
</ol></div>
",
                  "author": {
                    "@type": "Person",
                    "name": "Ben McCormick"
                    "email": "mailto:ben@benmccormick.org",
                    "image": "/profile_pic.jpg",
                    "jobTitle": "Software Engineer",
                    "alumniOf": "Duke",
                    "birthPlace": "Pittsburgh, PA",
                    "gender": "male",
                    "url": "http://benmccormick.org",
              	    "sameAs" : [
                      "https://www.linkedin.com/in/benmccormick",
                      "http://twitter.com/ben336",
                    ]
                 }
              }</script><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font-size:112.5%;line-height:1.666em;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:georgia,serif;font-weight:normal;word-wrap:break-word;}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.5rem;line-height:2.499rem;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.27542rem;line-height:1.666rem;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.17608rem;line-height:1.666rem;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.666rem;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.92211rem;line-height:1.666rem;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.88547rem;line-height:1.666rem;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}ul{margin-left:1.666rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.666rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;font-size:0.85rem;line-height:1.666rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;font-size:1rem;line-height:1.666rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}blockquote{margin-left:1.666rem;margin-right:1.666rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.666rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.666rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.666rem;margin-bottom:calc(1.666rem / 2);margin-top:calc(1.666rem / 2);}li > ul{margin-left:1.666rem;margin-bottom:calc(1.666rem / 2);margin-top:calc(1.666rem / 2);}code{font-size:0.85rem;line-height:1.666rem;}kbd{font-size:0.85rem;line-height:1.666rem;}samp{font-size:0.85rem;line-height:1.666rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:tnum;padding-left:1.11067rem;padding-right:1.11067rem;padding-top:0.833rem;padding-bottom:calc(0.833rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><style>.header-link{color:hsla(0,0%,39%,.7)}.header-link:hover{color:#e2777a}#carbonads{height:100px;font-size:14px;width:300px;position:relative;background:#f0f0f0}.carbon-wrap{height:100px;display:-ms-flexbox;display:flex}.carbon-text{padding:5px 10px;max-height:80px;display:inline-block;overflow:hidden;line-height:1.3}.carbon-poweredby{color:hsla(0,0%,39%,.7);position:absolute;right:5px;bottom:0}@media all and (max-width:600px){#carbonads,.no-mobile{display:none}.subscribe-block{padding-right:0;padding:0 10px}.subscribe-block,.subscribe-block .mc-field-group{width:100%!important}.subscribe-block .mc-field-group input{width:100%!important;font-size:.8em}.up-next-block{width:100%!important;padding:0 10px}}@media all and (max-width:321px){html{font-size:100%!important}}.subscribe-container{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-wrap:wrap;flex-wrap:wrap}.subscribe-block{width:400px;padding-right:30px;overflow:hidden}.subscribe-block #mc_embed_signup form{margin-bottom:20px}.up-next-block{width:300px}.subscribe-button{color:#fff;background:#57a3e8;border-radius:4px;border:0;padding:5px 10px;margin:20px 0;cursor:pointer}.rss{padding-bottom:10px}.rss a{display:-ms-flexbox;display:flex}.rss-icon{display:block;width:17px;margin-right:.5em;height:50px}.rss-icon *{fill:#e2777a}.twitter-item{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;margin-bottom:15px}.twitter-item iframe{margin:0 0 0 10px}.markdown pre{display:block;background:#fdf6e3;color:#657b83;overflow-y:hidden;padding:.2rem .5rem}.markdown pre code{background:none;border:none;border-radius:3px;display:inline-block;overflow:inherit;padding:0;white-space:inherit;word-wrap:normal;font-size:.7rem;line-height:1rem}code{border-radius:3px;white-space:pre;white-space:pre-wrap;white-space:pre-line;white-space:-pre-wrap;white-space:-o-pre-wrap;white-space:-moz-pre-wrap;white-space:-hp-pre-wrap;word-wrap:break-word;border:1px solid #ccc;display:inline;font-family:Inconsolata,monospace,serif;max-width:100%;overflow:auto;padding:0 .1625rem}.hljs,code{background:#fdf6e3;color:#657b83}.hljs{display:block;overflow-x:auto;padding:.5em}.hljs-comment,.hljs-quote{color:#93a1a1}.hljs-addition,.hljs-keyword,.hljs-selector-tag{color:#859900}.hljs-doctag,.hljs-literal,.hljs-meta .hljs-meta-string,.hljs-number,.hljs-regexp,.hljs-string{color:#2aa198}.hljs-name,.hljs-section,.hljs-selector-class,.hljs-selector-id,.hljs-title{color:#268bd2}.hljs-attr,.hljs-attribute,.hljs-class .hljs-title,.hljs-template-variable,.hljs-type,.hljs-variable{color:#b58900}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-meta .hljs-keyword,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-subst,.hljs-symbol{color:#cb4b16}.hljs-built_in,.hljs-deletion{color:#dc322f}.hljs-formula{background:#eee8d5}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}html{font-size:120%}body,h1,h2,h3,h4,h5,h6,p{font-family:brandon-grotesque,Brandon Grotesque,Helvetica Neue,Helvetica,Arial,Lucida Sans,Geneva,Verdana,sans-serif;text-rendering:optimizeLegibility}a{color:#e2777a;text-decoration:none}blockquote{border-left:5px solid #57a3e8;font-style:italic;background:#eee;font-weight:400;font-size:.9rem;padding:10px 20px;margin:0 0 30px -25px}blockquote p{margin-bottom:.667em}h2,h3{color:#57a3e8}.explanation{padding:10px;background:#eee;border-radius:10px;margin:20px auto;font-size:.85em}.footnote p{display:inline-block;margin-bottom:0}.article-body .reading-img img{width:150px;float:right;margin:0 10px 20px}.article-body img{max-height:200px;display:block;margin:40px auto 20px}.article-body img.full-width{max-height:none}.article-body img.half-width{max-height:none;width:50%}.bordered-img{border:3px solid #57a3e8}.mc-field-group{width:400px;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-align:center;align-items:center;padding:8px 0}.mc-field-group input{border-radius:3px;max-width:350px;width:80vw;border:1px solid #ccc;margin-right:10px;height:30px}.mc-field-group label{font-size:.9em;font-weight:600}#mc-embedded-subscribe{color:#fff;background:#57a3e8;border-radius:4px;border:0;padding:0 10px;margin:10px 0;cursor:pointer;width:40vw}#mc-embedded-subscribe:hover{background:#3e8acf}.twitter-row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.twitter-row>div{padding-right:20px;min-width:300px}.category-icon-wrapper{color:rgba(87,163,232,.5)}.category-icon{display:inline-block;width:.75em;margin-right:.5em}.category-icon *{fill:#57a3e8;fill:rgba(87,163,232,.5)}.category-icon>i{height:30px}</style></head><body class="landing-page" style="background:#FCFCFC;padding:0 10px;"><div id="react-mount"><div style="max-width:39.984rem;margin-left:auto;margin-right:auto;padding:2.499rem 1.2495rem;" data-reactroot="" data-reactid="1" data-react-checksum="2081878723"><div style="display:flex;padding-bottom:0.5rem;margin-bottom:0.5rem;" data-reactid="2"><div style="flex-grow:3;display:flex;flex-direction:column;justify-content:space-around;" data-reactid="3"><h3 style="margin:0;padding-bottom:0;" data-reactid="4"><a style="box-shadow:none;text-decoration:none;color:inherit;" name="title" href="/" data-reactid="5">benmccormick.org</a></h3><div style="color:rgba(100,100,100, 0.7);" data-reactid="6"><a class="header-link" href="/subscribe/" data-reactid="7">Subscribe</a><span style="padding:0 0.33rem;" data-reactid="8">•</span><a class="header-link" href="/archive/" data-reactid="9">Archive</a><span style="padding:0 0.33rem;" data-reactid="10">•</span><a class="header-link" href="http://twitter.com/ben336" data-reactid="11">Twitter</a><span style="padding:0 0.33rem;" data-reactid="12">•</span><a class="header-link" href="/about/" data-reactid="13">About</a></div></div><div style="flex-shrink:2;" data-reactid="14"><span data-reactid="15"></span></div></div><div class="markdown" data-reactid="16"><!-- react-empty: 17 --><h5 style="display:block;color:rgba(100,100,100, 0.7);margin-bottom:0.4165rem;" data-reactid="18">November 14, 2013</h5><h1 style="margin-top:0;margin-bottom:1rem;" data-reactid="19">Modern Dojo: Exploring declare</h1><div class="article-body" data-reactid="20"><p>This is part 2 of my ongoing exploration of <a href="http://dojotoolkit.org/">Dojo</a>’s important modules and concepts.  Specifically this post will be examining dojo/_base/declare, Dojo’s object oriented programming helper module.</p>
<h2>What is dojo/_base/declare used for?</h2>
<p>dojo/_base/declare (henceforth “declare”) is the Dojo module for dom assisting with Object Oriented Programming.  It provides a function that allows for easy “classical style” inheritance, as well as mixins.  It is fairly flexible, and there seem to be several ways to use it.  I’m going to explore those here.</p>
<h2>How do you use declare?</h2>
<p>Dojo’s declare function takes up to 3 arguments.  The first argument, which is optional, gives a fully qualified namespaced class name <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>.  The second argument is a string or an array specifying a class or set of classes that the new class will inherit from.  This argument can also be null.  The final argument is an object with the properties we want the new class to contain.  The full 3 argument syntax looks like the example below.</p>
<pre><code class="language-javascript"><span class="hljs-comment">//declare with a className argument</span>

<span class="hljs-comment">//pull in the declare module</span>
<span class="hljs-built_in">require</span>([<span class="hljs-string">"dojo/_base/declare"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">declare</span>) </span>{

  <span class="hljs-comment">//we're going to create a class in the global myApp namespace</span>
  declare(<span class="hljs-string">"myApp.examples.Messenger"</span>,<span class="hljs-literal">null</span>, {
    <span class="hljs-attr">message</span>: <span class="hljs-string">"hello world"</span>,
    <span class="hljs-attr">sendMessage</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">console</span>.log(message);
    }
  });
  <span class="hljs-comment">//since our class was created globally, we can access it wherever</span>
  <span class="hljs-comment">//we want, by refering to the namespace property</span>
  <span class="hljs-keyword">var</span> messenger = <span class="hljs-keyword">new</span> myApp.examples.Messenger();
  messenger.sendMessage();
});
</code></pre>
<p>This syntax works fine, but to me it seems fairly contrary to the spirit of Modern Dojo.  Rather than keeping the class definition bound in a module, it is instead pushed out as a global, using namespacing techniques rather than AMD style modules for code organization.  It seems to be solely a product of supporting legacy implementations and Dojo’s declarative syntax.  As such I’m going to spend the rest of this piece focusing on the 2 argument syntax, where the above example would look like what we have below.</p>
<pre><code class="language-javascript"><span class="hljs-comment">//declare without the className argument</span>

<span class="hljs-built_in">require</span>([<span class="hljs-string">"dojo/_base/declare"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">declare</span>) </span>{

  <span class="hljs-keyword">var</span> Messenger = declare(<span class="hljs-literal">null</span>, {
    <span class="hljs-attr">message</span>: <span class="hljs-string">"hello world"</span>,
    <span class="hljs-attr">sendMessage</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">console</span>.log(message);
    }
  });
  <span class="hljs-comment">//since our class was created locally, we can access it here</span>
  <span class="hljs-keyword">var</span> messenger = <span class="hljs-keyword">new</span> Messenger();
  messenger.sendMessage();

  <span class="hljs-comment">//If we need access our class in other places, we can return it</span>
  <span class="hljs-comment">//from a module and then load it as a dependency where needed</span>
});
</code></pre>
<p>So what is this simple example actually doing?  declare takes the object that you pass and adds it to the prototype chain of your class.  It’s important to understand that properties on the prototype are shared between all objects based on that class.  This is perfect for functions, as they only need to be created once.  It also works well for primitive values, since if we rewrite them the values will be added to the object itself rather than the prototype.  Putting properties on the prototype can lead to unexpected behavior when dealing with arrays and more complex objects though.  So its important to understand how the prototype chain works.  For example, the code below produces unexpected output since the messages array is shared between all Messengers.</p>
<pre><code class="language-javascript"><span class="hljs-built_in">require</span>([<span class="hljs-string">"dojo/_base/declare"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">declare</span>) </span>{

  <span class="hljs-keyword">var</span> Messenger = declare(<span class="hljs-literal">null</span>, {
    <span class="hljs-attr">messages</span>: [<span class="hljs-string">"hello"</span>,<span class="hljs-string">"world"</span>],
    <span class="hljs-attr">sendMessages</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.messages);
    }
  });
  <span class="hljs-keyword">var</span> messenger = <span class="hljs-keyword">new</span> Messenger();
  <span class="hljs-keyword">var</span> messenger2 = <span class="hljs-keyword">new</span> Messenger();

  <span class="hljs-comment">//change the messages array on messenger</span>
  messenger.messages.push(<span class="hljs-string">"extra value"</span>)
  <span class="hljs-comment">//and the change has populated to all instances of Messages</span>
  messenger2.sendMessage();
  <span class="hljs-comment">//logs ["hello", "world", "extra value"]</span>
});
</code></pre>
<p>Fortunately Dojo provides an easy way to get around this issue with the special constructor property.  If you define the constructor property of your object as a function, dojo treats that property as the constructor for your class and runs it when instantiating your class.  This allows you to have local properties, and only share properties that should be shared.</p>
<pre><code class="language-javascript"><span class="hljs-comment">//Constructor example</span>

<span class="hljs-built_in">require</span>([<span class="hljs-string">"dojo/_base/declare"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">declare</span>) </span>{

  <span class="hljs-keyword">var</span> Messenger = declare(<span class="hljs-literal">null</span>, {
    <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>.messages = [<span class="hljs-string">"hello"</span>,<span class="hljs-string">"world"</span>]
    },
    <span class="hljs-attr">sendMessages</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.messages);
    }
  });

  <span class="hljs-keyword">var</span> messenger = <span class="hljs-keyword">new</span> Messenger();
  <span class="hljs-keyword">var</span> messenger2 = <span class="hljs-keyword">new</span> Messenger();
  <span class="hljs-comment">//change the messages array on messenger</span>
  messenger.messages.push(<span class="hljs-string">"extra value"</span>)
  messenger.sendMessage(); <span class="hljs-comment">//logs ["hello","world","extra value"]</span>
  <span class="hljs-comment">//and the change has not populated to other instances of Messages</span>
  messenger2.sendMessage(); <span class="hljs-comment">//logs ["hello","world"]</span>
});
</code></pre>
<p>Dojo also provides a special helper function to allow you to define arbitrary properties on a member of the class when an object is created.  You can use code like this to accept object arguments that you can map to properties.</p>
<pre><code class="language-javascript"><span class="hljs-comment">//safeMixin example</span>

<span class="hljs-keyword">var</span> TestObject = declare(<span class="hljs-literal">null</span>, {
  <span class="hljs-attr">val</span>:<span class="hljs-string">"default"</span>,
  <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">//make the constructor arguments a mixin</span>
    declare.safeMixin(<span class="hljs-keyword">this</span>,args);
  }
})

<span class="hljs-comment">//then we can stick with the default value</span>
<span class="hljs-keyword">var</span> test = <span class="hljs-keyword">new</span> TestObject();
<span class="hljs-comment">//or come up with our own</span>
<span class="hljs-keyword">var</span> spicyTest = <span class="hljs-keyword">new</span> TestObject({<span class="hljs-attr">val</span>:<span class="hljs-string">"spicy"</span>});

alert(spicyTest.val) <span class="hljs-comment">//"spicy"</span>
</code></pre>
<h4>Inheritance</h4>
<p>declare also provides a flexible inheritance option.  In the examples above, we created a class without any inheritance by passing null as the superClass argument.  But we can also specify a class as a superclass.  For instance to create a new messenger that alerts your message instead of logging them, you could inherit the existing Messenger class like the example below.</p>
<pre><code class="language-javascript"><span class="hljs-comment">//Basic Inheritance</span>

<span class="hljs-keyword">var</span> AlertMessenger = declare(Messenger, {
    <span class="hljs-attr">sendMessage</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      alert(<span class="hljs-keyword">this</span>.messages)
    }
  });
<span class="hljs-keyword">var</span> alerter = <span class="hljs-keyword">new</span> AlertMessenger();
alerter.sendMessage(); <span class="hljs-comment">//alerts the message</span>
</code></pre>
<p>In this example, AlertMessenger inherits the constructor property from Messenger, but overrides the sendMessage function.  So we change the functionality in a classical OO way.</p>
<p>One nice feature of Dojo’s OO implementation is that it is easy to make calls up the prototype change even when we are overriding functions.  So for instance if we wanted our AlertMessenger class to send an alert while still logging the message in the console, we could use <code>this.inherited</code> to make it happen.</p>
<pre><code class="language-javascript"><span class="hljs-comment">//this.inherited Example</span>

<span class="hljs-keyword">var</span> AlertMessenger = declare(Messenger, {
    <span class="hljs-attr">sendMessage</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      alert(<span class="hljs-keyword">this</span>.messages);
      <span class="hljs-comment">//calls up the prototype chain to Messenger's sendMessage function</span>
      <span class="hljs-keyword">this</span>.inherited(<span class="hljs-built_in">arguments</span>);
    }
  });
<span class="hljs-keyword">var</span> alerter = <span class="hljs-keyword">new</span> AlertMessenger();
alerter.sendMessage(); <span class="hljs-comment">//alerts and logs the message</span>
</code></pre>
<p>So we still have access to overriden functions if used judiciously. Also, each constructor will be executed along the prototype chain, so there is no need to use <code>this.inherited</code> in a constructor context.</p>
<h4>Mixins</h4>
<p>But we’re not limited to a single inheritance instance.  We can still do more.  We can also pass an array of classes to the className argument, allowing us to inherit from multiple types at once. The first argument is the base of the prototype chain, and its extended from there, with the additional class properties being mixed in.</p>
<pre><code class="language-javascript"><span class="hljs-comment">//Multi-Inheritance Example</span>

<span class="hljs-keyword">var</span> Lion = declare( <span class="hljs-literal">null</span>, {
  <span class="hljs-attr">head</span>: <span class="hljs-string">"lion"</span>,
  <span class="hljs-attr">body</span>: <span class="hljs-string">"lion"</span>,
  <span class="hljs-attr">legs</span>: <span class="hljs-string">"lion"</span>
});

<span class="hljs-keyword">var</span> Bird = declare(<span class="hljs-literal">null</span>, {
  <span class="hljs-attr">head</span>: <span class="hljs-string">"bird"</span>,
  <span class="hljs-attr">wings</span>: <span class="hljs-string">"bird"</span>
});

<span class="hljs-keyword">var</span> Human = declare (<span class="hljs-literal">null</span>, {
  <span class="hljs-attr">head</span>: <span class="hljs-string">"human"</span>
});

<span class="hljs-comment">//Sphinx is declared with 3 mixins</span>
<span class="hljs-comment">//lion is first, then bird, then human</span>
<span class="hljs-keyword">var</span> Sphinx = declare([Lion,Bird,Human],{
  <span class="hljs-comment">//head gets overriden by human last, wings body and legs are never overriden and stay with their first set values</span>

  aboutMe: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
     alert(<span class="hljs-string">"I have the head of a "</span>+ <span class="hljs-keyword">this</span>.head +
           <span class="hljs-string">", the wings of a "</span> + <span class="hljs-keyword">this</span>.wings +
           <span class="hljs-string">", and the body of a "</span> + <span class="hljs-keyword">this</span>.body);
  }

  });

<span class="hljs-keyword">var</span> sphinx = <span class="hljs-keyword">new</span> Sphinx();

sphinx.aboutMe(); <span class="hljs-comment">//I have the head of a human, the wings of a bird, and the body of a lion</span>
</code></pre>
<h2>When should I use dojo/_base/declare</h2>
<p>declare seems like a great choice for creating reusable objects, and allows for either a classical inheritance style or a more flexible mixin style.  Its a bit of overkill for simple or one off objects, but for defining the structure of a complex model, it seems like a great fit.</p>
<p>Personally I’m going to avoid the className syntax unless I find a use for it that I currently don’t see.  It seems to be a legacy option that is completely at odds with the rest of Dojo’s avoidance of global variables.  The 2 argument syntax on the other hand, seems like a great choice for creating maintainable and reusable classes.</p>
<p>declare should be especially useful for programmers who want to implement a classical inheritance structure in JS.  It makes the syntax quick and straightforward.  The only gotcha I see is the need to be aware of how the prototype chain works under the covers so that there’s no being burned by unexpected sharing of changes.</p>
<h3>More Resources</h3>
<ul>
<li><a href="http://dojotoolkit.org/documentation/tutorials/1.9/declare/">Official Dojo tutorial on dojo/_base/declare</a></li>
<li><a href="http://dojotoolkit.org/reference-guide/1.9/dojo/_base/declare.html">Dojo docs on dojo/_base/declare</a></li>
<li><a href="/blog/2013/01/12/javascript-explained-object-oriented-javascript/">JS Explained: Object Oriented Javascript</a></li>
</ul>
<h3>Other Modern Dojo Posts</h3>
<ul>
<li><a href="/blog/2013/11/13/modern-dojo-dojo-query/">Exploring dojo/query</a></li>
</ul>
<div class="footnotes"><ol>
    <li class="footnote" id="fn:1">
        <p>
        I'm not a fan of the dojo convention of having optional arguments be first in some cases.  It seems very strange that arguments might "shift" and not line up as expected.  I can understand in this case not wanting to have a small string parameter after a potentially large object listing the class properties, but it still makes for a confusingly inconsistent API.
        <a href="#fnref:1" title="return to article"> ↩</a></p>
    </li>
</ol></div>
</div><div data-reactid="21"><hr data-reactid="22"/><div class="subscribe-container" data-reactid="23"><div class="subscribe-block" data-reactid="24"><p data-reactid="25"><!-- react-text: 26 -->Thanks for taking the time to read this post!<!-- /react-text --><!-- react-text: 27 --> JavaScript development<!-- /react-text --><!-- react-text: 28 --> is one of the main topics of this blog, so if you enjoyed the post, please consider subscribing by using the feed, Twitter or my mailing list.<!-- /react-text --></p><div style="margin-bottom:4.165rem;" data-reactid="29"><div id="mc_embed_signup" data-reactid="30"><h6 style="margin:0;font-size:0.8165rem;line-height:1.666rem;letter-spacing:-0.25px;" data-reactid="31">EMAIL</h6><form action="//benmccormick.us8.list-manage.com/subscribe/post?u=115446b80fd9d930ba091cc27&amp;id=f5b9f5acf2" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="" data-reactid="32"><div id="mc_embed_signup_scroll" data-reactid="33"><div class="mc-field-group" style="padding-right:30px;" data-reactid="34"><input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Email Address" data-reactid="35"/><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button" data-reactid="36"/></div><div id="mce-responses" class="clear" data-reactid="37"><div class="response" id="mce-error-response" style="display:none;" data-reactid="38"></div><div class="response" id="mce-success-response" style="display:none;" data-reactid="39"></div></div><div style="position:absolute;left:-5000px;" aria-hidden="true" data-reactid="40"><input type="text" name="b_115446b80fd9d930ba091cc27_f5b9f5acf2" tabindex="-1" value="" data-reactid="41"/></div><div class="clear" data-reactid="42"></div></div></form></div><div class="rss" data-reactid="43"><h6 style="margin:0;font-size:0.8165rem;line-height:1.666rem;letter-spacing:-0.25px;" data-reactid="44">RSS</h6><a href="/rss/" data-reactid="45"><i class="rss-icon" data-reactid="46"><svg viewBox="0 0 10 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>rss</title><desc>Created with Sketch.</desc><defs></defs><g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="rss" fill="#000000"><path d="M2,13 L0,13 L0,11 C1.11,11 2,11.89 2,13 L2,13 Z M0,3 L0,4 C4.97,4 9,8.03 9,13 L10,13 C10,7.48 5.52,3 0,3 L0,3 Z M0,7 L0,8 C2.75,8 5,10.25 5,13 L6,13 C6,9.69 3.31,7 0,7 L0,7 Z" id="Shape"></path></g></g></svg></i><!-- react-text: 47 --> <!-- /react-text --><span data-reactid="48">RSS</span></a></div><div data-reactid="49"><h6 style="margin:0;font-size:0.8165rem;line-height:1.666rem;letter-spacing:-0.25px;" data-reactid="50">TWITTER</h6><div class="twitter-item" data-reactid="51"><span data-reactid="52">Site Feed: </span><a href="https://twitter.com/benmccormickorg" class="twitter-follow-button" data-show-count="false" data-reactid="53">Follow @benmccormickorg</a></div></div><div data-reactid="54"><div class="twitter-item" data-reactid="55"><span data-reactid="56">Personal Feed: </span><a href="https://twitter.com/ben336" class="twitter-follow-button" data-show-count="false" data-reactid="57">Follow @ben336</a></div></div></div></div><div class="up-next-block" data-reactid="58"><h6 style="margin:0;font-size:0.8165rem;line-height:1.666rem;letter-spacing:-0.25px;" data-reactid="59">You Might Also Like:</h6><div data-reactid="60"><h3 style="margin-top:0;margin-bottom:0.4165rem;" data-reactid="61"><a href="/2017/01/09/mobx-first-impressions/?readNext=true#title" data-reactid="62">MobX: First Impressions</a></h3><p data-reactid="63">First impression of managing data with MobX</p></div><div data-reactid="64"><hr data-reactid="65"/><h3 style="margin-top:0;margin-bottom:0.4165rem;" data-reactid="66"><a href="/2016/12/14/what-are-higher-order-components/?readNext=true#title" data-reactid="67">What are Higher Order Components?</a></h3><p data-reactid="68">An explanation of React&#x27;s higher order components</p></div><div data-reactid="69"><hr data-reactid="70"/><h3 style="margin-top:0;margin-bottom:0.4165rem;" data-reactid="71"><a href="/2016/06/26/quick-tip-take-advantage-of-lodash-collections-2/?readNext=true#title" data-reactid="72">Quick Tip: Take advantage of lodash collections</a></h3><p data-reactid="73">A quick look at the benefits of using lodash collection methods</p></div></div></div></div><hr style="margin-bottom:3.332rem;" data-reactid="74"/><div title="Modern Dojo: Exploring declare" data-reactid="75"><div id="disqus_thread" data-reactid="76"></div><noscript data-reactid="77"><span data-reactid="78"><!-- react-text: 79 -->Please enable JavaScript to view the<!-- /react-text --><a href="http://disqus.com/?ref_noscript" data-reactid="80">comments powered by Disqus.</a></span></noscript><a href="http://disqus.com" class="dsq-brlink" data-reactid="81"><!-- react-text: 82 -->Blog comments powered by <!-- /react-text --><span class="logo-disqus" data-reactid="83">Disqus</span><!-- react-text: 84 -->.<!-- /react-text --></a></div></div><span style="display:block;clear:both;" data-reactid="85"> </span></div></div><script src="/bundle.js?t=1487644408550"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-37323973-1', 'auto');
            ga('send', 'pageview');
        </script><script type="text/javascript">
              // adapted from: https://css-tricks.com/serviceworker-for-offline/
              // ServiceWorker is a progressive technology. Ignore unsupported browsers
              if ('serviceWorker' in navigator) {
              console.log('CLIENT: service worker registration in progress.');
              navigator.serviceWorker.register('/sw.js').then(function() {
                console.log('CLIENT: service worker registration complete.');
              }, function() {
                console.log('CLIENT: service worker registration failure.');
              });
              } else {
              console.log('CLIENT: service worker is not supported.');
              }
            </script></body></html>