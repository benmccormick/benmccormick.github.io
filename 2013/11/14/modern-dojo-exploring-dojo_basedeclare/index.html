<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=yyxgnp97qG"/><link rel="icon" type="image/png" href="/favicon-32x32.png?v=yyxgnp97qG" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png?v=yyxgnp97qG" sizes="16x16"/><link rel="manifest" href="/manifest.json"/><link rel="mask-icon" href="/safari-pinned-tab.svg?v=yyxgnp97qG" color="#57a3e8"/><link rel="alternate" title="JSON Feed" type="application/json" href="/feed.json"/><link rel="shortcut icon" href="/favicon.ico?v=yyxgnp97qG"/><meta name="theme-color" content="#ffffff"/><title data-react-helmet="true"></title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.6 'Garamond','Baskerville','Baskerville Old Face','Hoefler Text','Times New Roman',serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Garamond','Baskerville','Baskerville Old Face','Hoefler Text','Times New Roman',serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:-apple-system,'system-ui','BlinkMacSystemFont','Segoe UI','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.6rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:-apple-system,'system-ui','BlinkMacSystemFont','Segoe UI','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.32578rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:-apple-system,'system-ui','BlinkMacSystemFont','Segoe UI','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1.20684rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:-apple-system,'system-ui','BlinkMacSystemFont','Segoe UI','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:-apple-system,'system-ui','BlinkMacSystemFont','Segoe UI','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.91028rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;color:inherit;font-family:-apple-system,'system-ui','BlinkMacSystemFont','Segoe UI','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:bold;text-rendering:optimizeLegibility;font-size:0.86849rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}ul{margin-left:1.6rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.6rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;font-size:0.85rem;line-height:1.1;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.2rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;font-size:1rem;line-height:1.6rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}blockquote{margin-left:1.6rem;margin-right:1.6rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.2rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.2rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.2rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.6rem;margin-bottom:calc(1.2rem / 2);margin-top:calc(1.2rem / 2);}li > ul{margin-left:1.6rem;margin-bottom:calc(1.2rem / 2);margin-top:calc(1.2rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.2rem / 2);}code{font-size:0.85rem;line-height:1.6rem;}kbd{font-size:0.85rem;line-height:1.6rem;}samp{font-size:0.85rem;line-height:1.6rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.06667rem;padding-right:1.06667rem;padding-top:0.8rem;padding-bottom:calc(0.8rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;font-size:14px;}pre code{background:none;line-height:1.1;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:"";}h1,h2,h3,h4,h5,h6{line-height:1.1;}@media only screen and (max-width:480px){html{font-size:112.5%;}}</style><style type="text/css" data-href="/0.3145d1f9f21dcd679291.css">a{color:#e2777a;text-decoration:none;cursor:pointer}a:hover{text-decoration:underline}.footnote-backref,.footnote-ref{text-decoration:none;padding-left:3px}blockquote{border-left:5px solid #57a3e8;background:#eee;font-weight:400;font-size:.9rem;padding:1.5rem 2rem;margin:0 0 1rem}blockquote p{margin-bottom:.667em}h3{color:#57a3e8}h4{font-size:110%}.explanation{padding:10px;background:#eee;border-radius:10px;margin:20px auto;font-size:.85em}.footnotes{font-size:80%}.footnotes li>*{display:inline;margin-bottom:0}
#carbonads{height:300px;font-size:14px;width:150px;position:relative;border:3px solid #f0f0f0;padding:7px}.carbon-wrap{width:130px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.carbon-text{padding:5px 10px;max-height:120px;display:inline-block;overflow:hidden;line-height:1.3}.carbon-poweredby{color:hsla(0,0%,39%,.7);position:absolute;right:5px;bottom:0}.post-title-area{padding:1em 0}
.columns{display:grid;grid-template-columns:600px 1fr;grid-template-rows:1fr;grid-column-gap:50px}@media (max-width:700px){.columns{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.no-mobile{display:none}}@media (max-width:321px){html{font-size:100%!important}}

/*# sourceMappingURL=0.3145d1f9f21dcd679291.css.map*/</style><style type="text/css" data-href="/component---src-templates-blog-post-js.3ad4ad0634b12ff47adb.css">.markdown pre{display:block;background:#343d46;color:#d8dee9;padding:.8rem}.markdown pre code:after{content:unset}.token.comment,.token.quote{color:#a7adba}.token.addition,.token.attr,.token.selector-tag,.token.string{color:#99c794}.token.doctag,.token.meta .token.meta-string,.token.regexp{color:#89ddf3}.token.built_in,.token.function{color:#5fb3b3}.token.name,.token.section,.token.selector-class,.token.selector-id,.token.title{color:#69c}.token.attribute,.token.class .token.title,.token.template-variable,.token.type,.token.variable{color:#fac863}.token.bullet,.token.link,.token.meta,.token.meta .token.keyword,.token.selector-attr,.token.selector-pseudo,.token.subst,.token.symbol{color:#f9ae58}.token.boolean,.token.deletion,.token.literal,.token.number{color:#f07178}.token.keyword{color:#c594c5}.token.formula{background:#a7adba}.token.emphasis{font-style:italic}.token.strong{font-weight:700}
.gatsby-resp-image-wrapper{max-width:75%;display:block;margin:40px auto 20px}.bordered-img{border:3px solid #57a3e8}.img-group{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.img-group img{padding:0;height:auto}.inline-img{display:inline-block;float:right;padding:2rem}
.subscribe-page-group{width:400px;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-align:center;align-items:center;padding:8px 0}.subscribe-page-group input{border-radius:3px;max-width:350px;width:80vw;border:1px solid #ccc;margin-right:10px;height:30px}.mc-field-group label{font-size:.9em;font-weight:600}.subscribe-button-large{font-family:-apple-system,system-ui,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;color:#fff;background:#57a3e8;border-radius:4px;border:0;padding:0 10px;margin:10px 0;cursor:pointer;width:40vw}.subscribe-button-large:hover{background:#3e8acf}.twitter-row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.twitter-row>div{padding-right:20px;min-width:300px}
.twitter-tweet,twitterwidget{margin-left:auto;margin-right:auto}
.sidebar-group{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-align:center;align-items:center;padding:8px 0}.sidebar{padding-left:2rem}.subscribe-container{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;-ms-flex-wrap:wrap;flex-wrap:wrap}.subscribe-email{padding:0 .1rem;margin:0 .2rem 0 0;font-size:.7rem;height:1.5rem;width:6rem}.subscribe-button{color:#fff;background:#57a3e8;border-radius:4px;font-size:1rem;line-height:1rem;height:1.5rem;width:1.5rem;max-width:2rem;-ms-flex-positive:0;flex-grow:0;border:0;margin:0;cursor:pointer}.rss{padding-bottom:10px}.rss a{display:-ms-flexbox;display:flex}.rss-icon{display:block;width:17px;margin-right:.5em;height:50px}.rss-icon *{fill:#e2777a}.twitter-item{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;margin-bottom:15px}.twitter-item iframe{margin:0 0 0 10px}

/*# sourceMappingURL=component---src-templates-blog-post-js.3ad4ad0634b12ff47adb.css.map*/</style><style id="glamor-styles">.css-1a7irg3,[data-css-1a7irg3]{color:rgba(100,100,100, 0.7);font-size:16px;font-family:-apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";}.css-1a7irg3:hover,[data-css-1a7irg3]:hover{color:#E2777A;}.css-bhw7gr,[data-css-bhw7gr]{font-family:-apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";font-size:120%;margin:0 1px 0.8rem 1px;display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;justify-content:space-between;align-items:center;border:3px dashed #E2777A;padding:15px;color:initial;transition:background 0.5s ease, color 0.5s ease;-webkit-box-pack:justify;-webkit-justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-webkit-transition:background 0.5s ease, color 0.5s ease;-moz-transition:background 0.5s ease, color 0.5s ease;}.css-bhw7gr:hover,[data-css-bhw7gr]:hover{background:#E2777A;color:white;text-decoration:none;}.css-4u7z7f,[data-css-4u7z7f]{max-width:960px;margin:0 auto;padding:2.4rem 1.2rem;}.css-1rrcu7t,[data-css-1rrcu7t]{display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;padding-bottom:2rem;flex-direction:row;justify-content:space-between;flex-wrap:wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-webkit-box-lines:multiple;-webkit-flex-wrap:wrap;}.css-nj9d06,[data-css-nj9d06]{margin:0 20px 0 0;padding-bottom:0;}.css-nj9d06 a,[data-css-nj9d06] a{box-shadow:none;text-decoration:none;color:inherit;}.css-nj9d06 a:hover,[data-css-nj9d06] a:hover{text-decoration:none;}.css-1iige26,[data-css-1iige26]{color:rgba(100,100,100, 0.7);}.css-1821md7,[data-css-1821md7]{padding:0 0.5rem;}@media all and (max-width: 400px){.css-1821md7,[data-css-1821md7]{padding:0 0.25rem;}}.css-d0z96,[data-css-d0z96]{display:block;max-width:100%;}.css-1kurdub,[data-css-1kurdub]{display:block;font-family:Garamond, Baskerville, "Baskerville Old Face", "Hoefler Text", "Times New Roman", serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";font-size:16px;color:rgba(100,100,100, 0.8);margin-top:0.8rem;margin-bottom:0.8rem;}.css-n40tvx,[data-css-n40tvx]{max-width:100%;}.css-n40tvx li,[data-css-n40tvx] li{padding-left:10px;}.css-n40tvx .reading-img img,[data-css-n40tvx] .reading-img img{width:150px;float:right;margin:0px 10px 20px 10px;}.css-n40tvx img.full-width,[data-css-n40tvx] img.full-width{max-height:none;}.css-n40tvx img.half-width,[data-css-n40tvx] img.half-width{max-height:none;width:50%;}.css-y3ugfx,[data-css-y3ugfx]{padding-left:2rem;}.css-1aluta2,[data-css-1aluta2]{height:300px;width:150px;overflow:hidden;margin:0 0 1rem 0;}@media all and (max-width: 700px){.css-1aluta2,[data-css-1aluta2]{display:none;}}.css-m9l7q0,[data-css-m9l7q0]{overflow:hidden;margin:0;}.css-m9l7q0 #mc_embed_signup form,[data-css-m9l7q0] #mc_embed_signup form{margin-bottom:20px;}@media all and (max-width: 700px){.css-m9l7q0,[data-css-m9l7q0]{padding-right:0;width:100% !important;padding:0 10px;}.css-m9l7q0 .mc-field-group,[data-css-m9l7q0] .mc-field-group{width:100% !important;}.css-m9l7q0 .mc-field-group input,[data-css-m9l7q0] .mc-field-group input{width:100% !important;font-size:0.8em;height:2.4em;}}.css-h2hkv8,[data-css-h2hkv8]{margin:0;font-size:0.79057rem;line-height:1.6rem;letter-spacing:-0.25px;}.css-4w3jde,[data-css-4w3jde]{color:inherit;}.css-33c833,[data-css-33c833]{margin-left:0;padding-left:0;}.css-vjg5fh,[data-css-vjg5fh]{max-width:60vw;display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;align-items:centglamor.er;-webkit-box-align:centglamor.er;-webkit-align-items:centglamor.er;}@media all and (max-width: 700px){.css-vjg5fh,[data-css-vjg5fh]{max-width:100vw;}}.css-1m362nd,[data-css-1m362nd]{display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;align-items:center;-webkit-box-align:center;-webkit-align-items:center;}.css-1m362nd> *,[data-css-1m362nd]> *{margin-right:10px;}.css-1182rq7,[data-css-1182rq7]{font-family:Garamond, Baskerville, "Baskerville Old Face", "Hoefler Text", "Times New Roman", serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";font-size:18px;margin:0;}.css-17c7pi4,[data-css-17c7pi4]{white-space:nowrap;font-size:18px;}</style><script id="glamor-ids">
        // <![CDATA[
        window._glamor = ["1a7irg3","bhw7gr","4u7z7f","1rrcu7t","nj9d06","1iige26","1821md7","d0z96","1kurdub","n40tvx","y3ugfx","1aluta2","m9l7q0","h2hkv8","4w3jde","33c833","vjg5fh","1m362nd","1182rq7","17c7pi4"]
        // ]]>
        </script><title data-react-helmet="true">Modern Dojo: Exploring declare | benmccormick.org</title><meta data-react-helmet="true" name="description" content="Ben McCormick&#x27;s blog on JavaScript and Web Development"/><meta data-react-helmet="true" name="keywords"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:site" content="@benmccormickorg"/><meta data-react-helmet="true" name="twitter:creator" content="@ben336"/><meta data-react-helmet="true" name="twitter:title" content="Modern Dojo: Exploring declare"/><meta data-react-helmet="true" name="twitter:description" content=""/><meta data-react-helmet="true" name="twitter:image" content="http://benmccormick.org/logo.png"/><script data-react-helmet="true" type="application/ld+json">{
                  "@context": "http://schema.org"
                  "@type": "BlogPosting",
                  "headline": "Modern Dojo: Exploring declare",
                  "genre": "Software Development",
                  "keywords": "",
                  "url": "http://benmccormick.org//2013/11/14/modern-dojo-exploring-dojo_basedeclare",
                  "image": "http://benmccormick.org/logo.png",
                  "datePublished": "2013-11-14",
                  
                  "articleBody": "<p>This is part 2 of my ongoing exploration of <a href=\"http://dojotoolkit.org/\">Dojo</a>’s important modules and concepts.  Specifically this post will be examining dojo/_base/declare, Dojo’s object oriented programming helper module.</p>
<h2>What is dojo/_base/declare used for?</h2>
<p>dojo/_base/declare (henceforth “declare”) is the Dojo module for dom assisting with Object Oriented Programming.  It provides a function that allows for easy “classical style” inheritance, as well as mixins.  It is fairly flexible, and there seem to be several ways to use it.  I’m going to explore those here.</p>
<h2>How do you use declare?</h2>
<p>Dojo’s declare function takes up to 3 arguments.  The first argument, which is optional, gives a fully qualified namespaced class name <sup id=\"fnref:1\"><a href=\"#fn:1\" rel=\"footnote\">1</a></sup>.  The second argument is a string or an array specifying a class or set of classes that the new class will inherit from.  This argument can also be null.  The final argument is an object with the properties we want the new class to contain.  The full 3 argument syntax looks like the example below.</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\">
      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//declare with a className argument</span>

<span class=\"token comment\">//pull in the declare module</span>
<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"dojo/_base/declare\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>declare<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>

  <span class=\"token comment\">//we're going to create a class in the global myApp namespace</span>
  <span class=\"token function\">declare</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"myApp.examples.Messenger\"</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>
    message<span class=\"token punctuation\">:</span> <span class=\"token string\">\"hello world\"</span><span class=\"token punctuation\">,</span>
    sendMessage<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
    <span class=\"token punctuation\">}</span>
  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
  <span class=\"token comment\">//since our class was created globally, we can access it wherever</span>
  <span class=\"token comment\">//we want, by refering to the namespace property</span>
  <span class=\"token keyword\">var</span> messenger <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">myApp<span class=\"token punctuation\">.</span>examples<span class=\"token punctuation\">.</span>Messenger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
  messenger<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>
      </div>
<p>This syntax works fine, but to me it seems fairly contrary to the spirit of Modern Dojo.  Rather than keeping the class definition bound in a module, it is instead pushed out as a global, using namespacing techniques rather than AMD style modules for code organization.  It seems to be solely a product of supporting legacy implementations and Dojo’s declarative syntax.  As such I’m going to spend the rest of this piece focusing on the 2 argument syntax, where the above example would look like what we have below.</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\">
      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//declare without the className argument</span>

<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"dojo/_base/declare\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>declare<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>

  <span class=\"token keyword\">var</span> Messenger <span class=\"token operator\">=</span> <span class=\"token function\">declare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>
    message<span class=\"token punctuation\">:</span> <span class=\"token string\">\"hello world\"</span><span class=\"token punctuation\">,</span>
    sendMessage<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
    <span class=\"token punctuation\">}</span>
  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
  <span class=\"token comment\">//since our class was created locally, we can access it here</span>
  <span class=\"token keyword\">var</span> messenger <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Messenger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
  messenger<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

  <span class=\"token comment\">//If we need access our class in other places, we can return it</span>
  <span class=\"token comment\">//from a module and then load it as a dependency where needed</span>
<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>
      </div>
<p>So what is this simple example actually doing?  declare takes the object that you pass and adds it to the prototype chain of your class.  It’s important to understand that properties on the prototype are shared between all objects based on that class.  This is perfect for functions, as they only need to be created once.  It also works well for primitive values, since if we rewrite them the values will be added to the object itself rather than the prototype.  Putting properties on the prototype can lead to unexpected behavior when dealing with arrays and more complex objects though.  So its important to understand how the prototype chain works.  For example, the code below produces unexpected output since the messages array is shared between all Messengers.</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\">
      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"dojo/_base/declare\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>declare<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>

  <span class=\"token keyword\">var</span> Messenger <span class=\"token operator\">=</span> <span class=\"token function\">declare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>
    messages<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"world\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>
    sendMessages<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
    <span class=\"token punctuation\">}</span>
  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
  <span class=\"token keyword\">var</span> messenger <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Messenger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
  <span class=\"token keyword\">var</span> messenger2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Messenger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

  <span class=\"token comment\">//change the messages array on messenger</span>
  messenger<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"extra value\"</span><span class=\"token punctuation\">)</span>
  <span class=\"token comment\">//and the change has populated to all instances of Messages</span>
  messenger2<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
  <span class=\"token comment\">//logs [\"hello\", \"world\", \"extra value\"]</span>
<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>
      </div>
<p>Fortunately Dojo provides an easy way to get around this issue with the special constructor property.  If you define the constructor property of your object as a function, dojo treats that property as the constructor for your class and runs it when instantiating your class.  This allows you to have local properties, and only share properties that should be shared.</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\">
      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//Constructor example</span>

<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"dojo/_base/declare\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>declare<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>

  <span class=\"token keyword\">var</span> Messenger <span class=\"token operator\">=</span> <span class=\"token function\">declare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>
    constructor<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>messages <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"world\"</span><span class=\"token punctuation\">]</span>
    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>
    sendMessages<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
    <span class=\"token punctuation\">}</span>
  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

  <span class=\"token keyword\">var</span> messenger <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Messenger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
  <span class=\"token keyword\">var</span> messenger2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Messenger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
  <span class=\"token comment\">//change the messages array on messenger</span>
  messenger<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"extra value\"</span><span class=\"token punctuation\">)</span>
  messenger<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//logs [\"hello\",\"world\",\"extra value\"]</span>
  <span class=\"token comment\">//and the change has not populated to other instances of Messages</span>
  messenger2<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//logs [\"hello\",\"world\"]</span>
<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>
      </div>
<p>Dojo also provides a special helper function to allow you to define arbitrary properties on a member of the class when an object is created.  You can use code like this to accept object arguments that you can map to properties.</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\">
      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//safeMixin example</span>

<span class=\"token keyword\">var</span> TestObject <span class=\"token operator\">=</span> <span class=\"token function\">declare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>
  val<span class=\"token punctuation\">:</span><span class=\"token string\">\"default\"</span><span class=\"token punctuation\">,</span>
  constructor<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
    <span class=\"token comment\">//make the constructor arguments a mixin</span>
    declare<span class=\"token punctuation\">.</span><span class=\"token function\">safeMixin</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
  <span class=\"token punctuation\">}</span>
<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>

<span class=\"token comment\">//then we can stick with the default value</span>
<span class=\"token keyword\">var</span> test <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TestObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
<span class=\"token comment\">//or come up with our own</span>
<span class=\"token keyword\">var</span> spicyTest <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TestObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>val<span class=\"token punctuation\">:</span><span class=\"token string\">\"spicy\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>spicyTest<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span> <span class=\"token comment\">//\"spicy\"</span></code></pre>
      </div>
<h4>Inheritance</h4>
<p>declare also provides a flexible inheritance option.  In the examples above, we created a class without any inheritance by passing null as the superClass argument.  But we can also specify a class as a superclass.  For instance to create a new messenger that alerts your message instead of logging them, you could inherit the existing Messenger class like the example below.</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\">
      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//Basic Inheritance</span>

<span class=\"token keyword\">var</span> AlertMessenger <span class=\"token operator\">=</span> <span class=\"token function\">declare</span><span class=\"token punctuation\">(</span>Messenger<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>
    sendMessage<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">)</span>
    <span class=\"token punctuation\">}</span>
  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
<span class=\"token keyword\">var</span> alerter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AlertMessenger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
alerter<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//alerts the message</span></code></pre>
      </div>
<p>In this example, AlertMessenger inherits the constructor property from Messenger, but overrides the sendMessage function.  So we change the functionality in a classical OO way.</p>
<p>One nice feature of Dojo’s OO implementation is that it is easy to make calls up the prototype change even when we are overriding functions.  So for instance if we wanted our AlertMessenger class to send an alert while still logging the message in the console, we could use <code class=\"language-text\">this.inherited</code> to make it happen.</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\">
      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//this.inherited Example</span>

<span class=\"token keyword\">var</span> AlertMessenger <span class=\"token operator\">=</span> <span class=\"token function\">declare</span><span class=\"token punctuation\">(</span>Messenger<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>
    sendMessage<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
      <span class=\"token comment\">//calls up the prototype chain to Messenger's sendMessage function</span>
      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">inherited</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
    <span class=\"token punctuation\">}</span>
  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
<span class=\"token keyword\">var</span> alerter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AlertMessenger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
alerter<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//alerts and logs the message</span></code></pre>
      </div>
<p>So we still have access to overriden functions if used judiciously. Also, each constructor will be executed along the prototype chain, so there is no need to use <code class=\"language-text\">this.inherited</code> in a constructor context.</p>
<h4>Mixins</h4>
<p>But we’re not limited to a single inheritance instance.  We can still do more.  We can also pass an array of classes to the className argument, allowing us to inherit from multiple types at once. The first argument is the base of the prototype chain, and its extended from there, with the additional class properties being mixed in.</p>
<div class=\"gatsby-highlight\" data-language=\"javascript\">
      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//Multi-Inheritance Example</span>

<span class=\"token keyword\">var</span> Lion <span class=\"token operator\">=</span> <span class=\"token function\">declare</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>
  head<span class=\"token punctuation\">:</span> <span class=\"token string\">\"lion\"</span><span class=\"token punctuation\">,</span>
  body<span class=\"token punctuation\">:</span> <span class=\"token string\">\"lion\"</span><span class=\"token punctuation\">,</span>
  legs<span class=\"token punctuation\">:</span> <span class=\"token string\">\"lion\"</span>
<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

<span class=\"token keyword\">var</span> Bird <span class=\"token operator\">=</span> <span class=\"token function\">declare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>
  head<span class=\"token punctuation\">:</span> <span class=\"token string\">\"bird\"</span><span class=\"token punctuation\">,</span>
  wings<span class=\"token punctuation\">:</span> <span class=\"token string\">\"bird\"</span>
<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

<span class=\"token keyword\">var</span> Human <span class=\"token operator\">=</span> <span class=\"token function\">declare</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>
  head<span class=\"token punctuation\">:</span> <span class=\"token string\">\"human\"</span>
<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

<span class=\"token comment\">//Sphinx is declared with 3 mixins</span>
<span class=\"token comment\">//lion is first, then bird, then human</span>
<span class=\"token keyword\">var</span> Sphinx <span class=\"token operator\">=</span> <span class=\"token function\">declare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>Lion<span class=\"token punctuation\">,</span>Bird<span class=\"token punctuation\">,</span>Human<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">{</span>
  <span class=\"token comment\">//head gets overriden by human last, wings body and legs are never overriden and stay with their first set values</span>

  aboutMe<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>
     <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"I have the head of a \"</span><span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>head <span class=\"token operator\">+</span>
           <span class=\"token string\">\", the wings of a \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>wings <span class=\"token operator\">+</span>
           <span class=\"token string\">\", and the body of a \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>
  <span class=\"token punctuation\">}</span>

  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

<span class=\"token keyword\">var</span> sphinx <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Sphinx</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>

sphinx<span class=\"token punctuation\">.</span><span class=\"token function\">aboutMe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//I have the head of a human, the wings of a bird, and the body of a lion</span></code></pre>
      </div>
<h2>When should I use dojo/_base/declare</h2>
<p>declare seems like a great choice for creating reusable objects, and allows for either a classical inheritance style or a more flexible mixin style.  Its a bit of overkill for simple or one off objects, but for defining the structure of a complex model, it seems like a great fit.</p>
<p>Personally I’m going to avoid the className syntax unless I find a use for it that I currently don’t see.  It seems to be a legacy option that is completely at odds with the rest of Dojo’s avoidance of global variables.  The 2 argument syntax on the other hand, seems like a great choice for creating maintainable and reusable classes.</p>
<p>declare should be especially useful for programmers who want to implement a classical inheritance structure in JS.  It makes the syntax quick and straightforward.  The only gotcha I see is the need to be aware of how the prototype chain works under the covers so that there’s no being burned by unexpected sharing of changes.</p>
<h3>More Resources</h3>
<ul>
<li><a href=\"http://dojotoolkit.org/documentation/tutorials/1.9/declare/\">Official Dojo tutorial on dojo/_base/declare</a></li>
<li><a href=\"http://dojotoolkit.org/reference-guide/1.9/dojo/_base/declare.html\">Dojo docs on dojo/_base/declare</a></li>
<li><a href=\"/blog/2013/01/12/javascript-explained-object-oriented-javascript/\">JS Explained: Object Oriented Javascript</a></li>
</ul>
<h3>Other Modern Dojo Posts</h3>
<ul>
<li><a href=\"/blog/2013/11/13/modern-dojo-dojo-query/\">Exploring dojo/query</a></li>
</ul>
<div class=\"footnotes\"><ol>
    <li class=\"footnote\" id=\"fn:1\">
        <p>
        I'm not a fan of the dojo convention of having optional arguments be first in some cases.  It seems very strange that arguments might \"shift\" and not line up as expected.  I can understand in this case not wanting to have a small string parameter after a potentially large object listing the class properties, but it still makes for a confusingly inconsistent API.
        <a href=\"#fnref:1\" title=\"return to article\"> ↩</a></p>
    </li>
</ol></div>",
                    "author": {
                      "@type": "Person",
                      "name": "Ben McCormick"
                      "email": "mailto:ben@benmccormick.org",
                      "image": "/profile_pic.jpg",
                      "jobTitle": "Software Engineer",
                      "alumniOf": "Duke",
                      "birthPlace": "Pittsburgh, PA",
                      "gender": "male",
                      "url": "http://benmccormick.org",
                	    "sameAs" : [
                        "https://www.linkedin.com/in/benmccormick",
                        "http://twitter.com/ben336",
                      ]
                   }
                }</script><link as="script" rel="preload" href="/component---src-templates-blog-post-js-f1ff7d131df0a80437e4.js"/><link as="script" rel="preload" href="/0-7264a0380e6e07b8e031.js"/><link as="script" rel="preload" href="/1-4a4df9f682b1321a5732.js"/><link as="script" rel="preload" href="/app-a122d914cf5d49401320.js"/><link as="script" rel="preload" href="/webpack-runtime-72a1c7332fe98d86f1ac.js"/><link rel="preload" href="/static/d/path---2013-11-14-modern-dojo-exploring-dojo-basedeclare-111-1a7-2ll23w37GLwFQ1wi8dkWUSWpU8M.json" as="fetch" crossOrigin="use-credentials"/><link as="style" rel="preload" href="/component---src-templates-blog-post-js.3ad4ad0634b12ff47adb.css"/><link as="style" rel="preload" href="/0.3145d1f9f21dcd679291.css"/></head><body class="landing-page" style="background:#FCFCFC;padding:0 10px"><div id="___gatsby"><div class="css-4u7z7f" data-reactroot=""><div class="css-1rrcu7t"><h3 class="css-nj9d06"><a name="title" href="/">benmccormick.org</a></h3><div class="css-1iige26"><a class="css-1a7irg3" href="/archive/">Blog</a><span class="css-1821md7"></span><a class="css-1a7irg3" href="/subscribe/">Subscribe</a><span class="css-1821md7"></span><a class="css-1a7irg3" href="/speaking/">Speaking</a><span class="css-1821md7"></span><a class="css-1a7irg3" href="http://twitter.com/ben336">Twitter</a><span class="css-1821md7"></span><a class="css-1a7irg3" href="/about/">About</a></div></div><div class="markdown"><div class="post-title-area"><h1 class="css-d0z96">Modern Dojo: Exploring declare</h1><h5 class="css-1kurdub">Originally Posted <!-- -->November 14th 2013</h5></div><div class="columns"><div class="css-n40tvx"><p>This is part 2 of my ongoing exploration of <a href="http://dojotoolkit.org/">Dojo</a>’s important modules and concepts.  Specifically this post will be examining dojo/_base/declare, Dojo’s object oriented programming helper module.</p>
<h2>What is dojo/_base/declare used for?</h2>
<p>dojo/_base/declare (henceforth “declare”) is the Dojo module for dom assisting with Object Oriented Programming.  It provides a function that allows for easy “classical style” inheritance, as well as mixins.  It is fairly flexible, and there seem to be several ways to use it.  I’m going to explore those here.</p>
<h2>How do you use declare?</h2>
<p>Dojo’s declare function takes up to 3 arguments.  The first argument, which is optional, gives a fully qualified namespaced class name <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>.  The second argument is a string or an array specifying a class or set of classes that the new class will inherit from.  This argument can also be null.  The final argument is an object with the properties we want the new class to contain.  The full 3 argument syntax looks like the example below.</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">//declare with a className argument</span>

<span class="token comment">//pull in the declare module</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"dojo/_base/declare"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>declare<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">//we're going to create a class in the global myApp namespace</span>
  <span class="token function">declare</span><span class="token punctuation">(</span><span class="token string">"myApp.examples.Messenger"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    message<span class="token punctuation">:</span> <span class="token string">"hello world"</span><span class="token punctuation">,</span>
    sendMessage<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//since our class was created globally, we can access it wherever</span>
  <span class="token comment">//we want, by refering to the namespace property</span>
  <span class="token keyword">var</span> messenger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">myApp<span class="token punctuation">.</span>examples<span class="token punctuation">.</span>Messenger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  messenger<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>This syntax works fine, but to me it seems fairly contrary to the spirit of Modern Dojo.  Rather than keeping the class definition bound in a module, it is instead pushed out as a global, using namespacing techniques rather than AMD style modules for code organization.  It seems to be solely a product of supporting legacy implementations and Dojo’s declarative syntax.  As such I’m going to spend the rest of this piece focusing on the 2 argument syntax, where the above example would look like what we have below.</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">//declare without the className argument</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"dojo/_base/declare"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>declare<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">var</span> Messenger <span class="token operator">=</span> <span class="token function">declare</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    message<span class="token punctuation">:</span> <span class="token string">"hello world"</span><span class="token punctuation">,</span>
    sendMessage<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//since our class was created locally, we can access it here</span>
  <span class="token keyword">var</span> messenger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Messenger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  messenger<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//If we need access our class in other places, we can return it</span>
  <span class="token comment">//from a module and then load it as a dependency where needed</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>So what is this simple example actually doing?  declare takes the object that you pass and adds it to the prototype chain of your class.  It’s important to understand that properties on the prototype are shared between all objects based on that class.  This is perfect for functions, as they only need to be created once.  It also works well for primitive values, since if we rewrite them the values will be added to the object itself rather than the prototype.  Putting properties on the prototype can lead to unexpected behavior when dealing with arrays and more complex objects though.  So its important to understand how the prototype chain works.  For example, the code below produces unexpected output since the messages array is shared between all Messengers.</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"dojo/_base/declare"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>declare<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">var</span> Messenger <span class="token operator">=</span> <span class="token function">declare</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    messages<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"hello"</span><span class="token punctuation">,</span><span class="token string">"world"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    sendMessages<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>messages<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> messenger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Messenger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> messenger2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Messenger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//change the messages array on messenger</span>
  messenger<span class="token punctuation">.</span>messages<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"extra value"</span><span class="token punctuation">)</span>
  <span class="token comment">//and the change has populated to all instances of Messages</span>
  messenger2<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//logs ["hello", "world", "extra value"]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>Fortunately Dojo provides an easy way to get around this issue with the special constructor property.  If you define the constructor property of your object as a function, dojo treats that property as the constructor for your class and runs it when instantiating your class.  This allows you to have local properties, and only share properties that should be shared.</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">//Constructor example</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"dojo/_base/declare"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>declare<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">var</span> Messenger <span class="token operator">=</span> <span class="token function">declare</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    constructor<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>messages <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"hello"</span><span class="token punctuation">,</span><span class="token string">"world"</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    sendMessages<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>messages<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> messenger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Messenger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> messenger2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Messenger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//change the messages array on messenger</span>
  messenger<span class="token punctuation">.</span>messages<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"extra value"</span><span class="token punctuation">)</span>
  messenger<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//logs ["hello","world","extra value"]</span>
  <span class="token comment">//and the change has not populated to other instances of Messages</span>
  messenger2<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//logs ["hello","world"]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>Dojo also provides a special helper function to allow you to define arbitrary properties on a member of the class when an object is created.  You can use code like this to accept object arguments that you can map to properties.</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">//safeMixin example</span>

<span class="token keyword">var</span> TestObject <span class="token operator">=</span> <span class="token function">declare</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  val<span class="token punctuation">:</span><span class="token string">"default"</span><span class="token punctuation">,</span>
  constructor<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//make the constructor arguments a mixin</span>
    declare<span class="token punctuation">.</span><span class="token function">safeMixin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//then we can stick with the default value</span>
<span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TestObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//or come up with our own</span>
<span class="token keyword">var</span> spicyTest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TestObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>val<span class="token punctuation">:</span><span class="token string">"spicy"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>spicyTest<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token comment">//"spicy"</span></code></pre>
      </div>
<h4>Inheritance</h4>
<p>declare also provides a flexible inheritance option.  In the examples above, we created a class without any inheritance by passing null as the superClass argument.  But we can also specify a class as a superclass.  For instance to create a new messenger that alerts your message instead of logging them, you could inherit the existing Messenger class like the example below.</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">//Basic Inheritance</span>

<span class="token keyword">var</span> AlertMessenger <span class="token operator">=</span> <span class="token function">declare</span><span class="token punctuation">(</span>Messenger<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    sendMessage<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>messages<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> alerter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AlertMessenger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
alerter<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//alerts the message</span></code></pre>
      </div>
<p>In this example, AlertMessenger inherits the constructor property from Messenger, but overrides the sendMessage function.  So we change the functionality in a classical OO way.</p>
<p>One nice feature of Dojo’s OO implementation is that it is easy to make calls up the prototype change even when we are overriding functions.  So for instance if we wanted our AlertMessenger class to send an alert while still logging the message in the console, we could use <code class="language-text">this.inherited</code> to make it happen.</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">//this.inherited Example</span>

<span class="token keyword">var</span> AlertMessenger <span class="token operator">=</span> <span class="token function">declare</span><span class="token punctuation">(</span>Messenger<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    sendMessage<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>messages<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//calls up the prototype chain to Messenger's sendMessage function</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">inherited</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> alerter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AlertMessenger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
alerter<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//alerts and logs the message</span></code></pre>
      </div>
<p>So we still have access to overriden functions if used judiciously. Also, each constructor will be executed along the prototype chain, so there is no need to use <code class="language-text">this.inherited</code> in a constructor context.</p>
<h4>Mixins</h4>
<p>But we’re not limited to a single inheritance instance.  We can still do more.  We can also pass an array of classes to the className argument, allowing us to inherit from multiple types at once. The first argument is the base of the prototype chain, and its extended from there, with the additional class properties being mixed in.</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">//Multi-Inheritance Example</span>

<span class="token keyword">var</span> Lion <span class="token operator">=</span> <span class="token function">declare</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  head<span class="token punctuation">:</span> <span class="token string">"lion"</span><span class="token punctuation">,</span>
  body<span class="token punctuation">:</span> <span class="token string">"lion"</span><span class="token punctuation">,</span>
  legs<span class="token punctuation">:</span> <span class="token string">"lion"</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> Bird <span class="token operator">=</span> <span class="token function">declare</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  head<span class="token punctuation">:</span> <span class="token string">"bird"</span><span class="token punctuation">,</span>
  wings<span class="token punctuation">:</span> <span class="token string">"bird"</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> Human <span class="token operator">=</span> <span class="token function">declare</span> <span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  head<span class="token punctuation">:</span> <span class="token string">"human"</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Sphinx is declared with 3 mixins</span>
<span class="token comment">//lion is first, then bird, then human</span>
<span class="token keyword">var</span> Sphinx <span class="token operator">=</span> <span class="token function">declare</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Lion<span class="token punctuation">,</span>Bird<span class="token punctuation">,</span>Human<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token comment">//head gets overriden by human last, wings body and legs are never overriden and stay with their first set values</span>

  aboutMe<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"I have the head of a "</span><span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">+</span>
           <span class="token string">", the wings of a "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>wings <span class="token operator">+</span>
           <span class="token string">", and the body of a "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> sphinx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sphinx</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

sphinx<span class="token punctuation">.</span><span class="token function">aboutMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//I have the head of a human, the wings of a bird, and the body of a lion</span></code></pre>
      </div>
<h2>When should I use dojo/_base/declare</h2>
<p>declare seems like a great choice for creating reusable objects, and allows for either a classical inheritance style or a more flexible mixin style.  Its a bit of overkill for simple or one off objects, but for defining the structure of a complex model, it seems like a great fit.</p>
<p>Personally I’m going to avoid the className syntax unless I find a use for it that I currently don’t see.  It seems to be a legacy option that is completely at odds with the rest of Dojo’s avoidance of global variables.  The 2 argument syntax on the other hand, seems like a great choice for creating maintainable and reusable classes.</p>
<p>declare should be especially useful for programmers who want to implement a classical inheritance structure in JS.  It makes the syntax quick and straightforward.  The only gotcha I see is the need to be aware of how the prototype chain works under the covers so that there’s no being burned by unexpected sharing of changes.</p>
<h3>More Resources</h3>
<ul>
<li><a href="http://dojotoolkit.org/documentation/tutorials/1.9/declare/">Official Dojo tutorial on dojo/_base/declare</a></li>
<li><a href="http://dojotoolkit.org/reference-guide/1.9/dojo/_base/declare.html">Dojo docs on dojo/_base/declare</a></li>
<li><a href="/blog/2013/01/12/javascript-explained-object-oriented-javascript/">JS Explained: Object Oriented Javascript</a></li>
</ul>
<h3>Other Modern Dojo Posts</h3>
<ul>
<li><a href="/blog/2013/11/13/modern-dojo-dojo-query/">Exploring dojo/query</a></li>
</ul>
<div class="footnotes"><ol>
    <li class="footnote" id="fn:1">
        <p>
        I'm not a fan of the dojo convention of having optional arguments be first in some cases.  It seems very strange that arguments might "shift" and not line up as expected.  I can understand in this case not wanting to have a small string parameter after a potentially large object listing the class properties, but it still makes for a confusingly inconsistent API.
        <a href="#fnref:1" title="return to article"> ↩</a></p>
    </li>
</ol></div></div><div class="css-y3ugfx no-mobile"><div class="css-1aluta2"></div><div class="css-m9l7q0"><div id="mc_embed_signup"><h6 class="css-h2hkv8">Subscribe via email</h6><form action="//benmccormick.us8.list-manage.com/subscribe/post?u=115446b80fd9d930ba091cc27&amp;id=f5b9f5acf2" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group sidebar-group"><input type="email" name="EMAIL" class="subscribe-email required email" id="mce-EMAIL" placeholder="Email Address" value=""/><input type="submit" value="&gt;" name="subscribe" id="mc-embedded-subscribe" class="subscribe-button button"/></div><div id="mce-responses" class="clear"><div class="response" id="mce-error-response" style="display:none"></div><div class="response" id="mce-success-response" style="display:none"></div></div><div style="position:absolute;left:-5000px" aria-hidden="true"><input type="text" name="b_115446b80fd9d930ba091cc27_f5b9f5acf2" tabindex="-1" value=""/></div><div class="clear"></div></div></form></div></div></div></div><div><hr/><div class=""><h3 class="css-4w3jde">You Might Also Like These Articles</h3><ul class="css-33c833"><a class="css-bhw7gr" href="/2013/05/07/revertible-observables-in-knockout"><div class="css-vjg5fh"><div><div class="css-1m362nd">Revertible Observables in Knockout</div><p class="css-1182rq7">Building an observable with simple undo functionality</p></div></div><span class="css-17c7pi4 no-mobile">May 7th 2013</span></a><a class="css-bhw7gr" href="/2013/02/13/simple-publish-subscribe-with-jquery"><div class="css-vjg5fh"><div><div class="css-1m362nd">Simple Publish-Subscribe with jQuery</div><p class="css-1182rq7">Building a basic pub-sub wrapper around jQuery</p></div></div><span class="css-17c7pi4 no-mobile">Feb 13th 2013</span></a><a class="css-bhw7gr" href="/2014/11/08/all-about-angular-2-0"><div class="css-vjg5fh"><div><div class="css-1m362nd">Thoughts on Angular 2.0</div><p class="css-1182rq7">An early look at the next version of Angular</p></div></div><span class="css-17c7pi4 no-mobile">Nov 8th 2014</span></a></ul></div></div></div></div></div><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-37323973-1', 'auto');
            ga('send', 'pageview');
        </script><script>
          window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"2013-11-14-modern-dojo-exploring-dojo-basedeclare-111","path":"/2013/11/14/modern-dojo-exploring-dojo_basedeclare"};window.dataPath="path---2013-11-14-modern-dojo-exploring-dojo-basedeclare-111-1a7-2ll23w37GLwFQ1wi8dkWUSWpU8M";/*]]>*/</script><script src="/webpack-runtime-72a1c7332fe98d86f1ac.js" async=""></script><script src="/app-a122d914cf5d49401320.js" async=""></script><script src="/1-4a4df9f682b1321a5732.js" async=""></script><script src="/0-7264a0380e6e07b8e031.js" async=""></script><script src="/component---src-templates-blog-post-js-f1ff7d131df0a80437e4.js" async=""></script></body></html>