webpackJsonp([58965020835088],{890:function(n,s){n.exports={pathContext:{posts:[{node:{frontmatter:{readNext:null,topics:["Gatsby"],category:"meta",key:"new-look-2016",title:"A whole new site",description:"Introducing a new look for benmccormick.org",layout:"post",path:"/2016/12/02/whole-new-site/",date:"2016-12-02T16:00:00+00:00",dontfeature:null,isDraft:null},html:'<p>After 2.5 years of stability, this week I moved benmccormick.org to a new platform and overhauled the look and feel. Although most readers have seen the site remain relatively stable, this is actually the 5th major revision of the site since it was first created, so this seems like a good time for a quick trip down memory lane.</p>\n<p>I first started it as a Django app, wanting to challenge myself to build a blog.  That was so short-lived that the way-back machine never even registered it, and I don’t have any evidence that it ever existed (thankfully).  In December 2012, I moved the blog over to <a href="http://octopress.org/">Octopress</a> a static site generator based on Ruby.  I started out using a very nice stock template:</p>\n\n  <a class="gatsby-resp-image-link" href="/static/oldsite1-3e407b021bfafbf89ce80f1734dc02a7-e1722.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 570px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.70347003154574%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABYlAAAWJQFJUiTwAAABdElEQVQoz2WQ3WrCQBCF80IFxbZqMSZRmhgStXrX1ykUCi21VPpYXoi9U/yJ1kQLZvOvN6UnO1Ui/QjDZHbPnpkRbqTbUkWpKOrFZfnh8WkymQwGg+Fw+HlkNBpNp9PlcrlYLObz+Ww2G4/HuGZZliDVtTtdN3Q9X6q+vn8Evo9Ltm0HAVI/4MRxnCRJGIZUZIwhoiKINfW+0+6azdy1+NzrJ0m8Xq8dx7E5yBG/OGsO1bfbLd4SZM1sNDua2b2q1F56fY8xNAlz9AkB4mq1sjhLDuUoRlEkSKohq2at0SqUZYijIICd53k+55RQTlDnqbOiGpJq4ssX07Z/DoeQsf1+j5Fo1JgDn/ic1Fmu61WtpTTahaIIZ7xKHdKQGJ72hEiG4JuTisW6jk9WjRwXex7DwBiJpoV+s9lgQw4Hv3gUdVTSto9ik8Tohs5otyQgzSnShazznxjbxgG2wjK4rpvNiX/itz4O0WP2EvLdbueegyLEv6Yt+yV2ukA/AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;" alt="oldsite1" title="" src="/static/oldsite1-3e407b021bfafbf89ce80f1734dc02a7-d766e.png" srcset="/static/oldsite1-3e407b021bfafbf89ce80f1734dc02a7-a6b6e.png 143w,\n/static/oldsite1-3e407b021bfafbf89ce80f1734dc02a7-8e488.png 285w,\n/static/oldsite1-3e407b021bfafbf89ce80f1734dc02a7-d766e.png 570w,\n/static/oldsite1-3e407b021bfafbf89ce80f1734dc02a7-13239.png 855w,\n/static/oldsite1-3e407b021bfafbf89ce80f1734dc02a7-cab6d.png 1140w,\n/static/oldsite1-3e407b021bfafbf89ce80f1734dc02a7-71f14.png 1710w,\n/static/oldsite1-3e407b021bfafbf89ce80f1734dc02a7-e1722.png 2536w" sizes="(max-width: 570px) 100vw, 570px">\n    </span>\n  </span>\n  \n  </a>\n    \n<p>and then shortly switched to a version that I mostly did myself based off of the default octopress theme.  This was one of my first attempts to design anything from scratch, and was not particularly pretty:</p>\n\n  <a class="gatsby-resp-image-link" href="/static/oldsite2-eb6c891f1d94f0af42f4885cac57a5df-2c42d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 570px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 46.5742251223491%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzklEQVQoz42RyQ6DMAxE+f+PQ5ygzY2tJFAgCWtYO00lSFFpOwcrkefZlm2thuq6rqpKCNE0Tdu2eCdJkmrleY4YhqFSavNbJoxE13WtFiHEdV3HcWzb9n1/qzuO4wd4nudlWbZv3/cohBEQp2lC6mUwbTsMxzAMJn8YatSCB/wRRiv0obmIs/J250JWg1LPLifl3uAg8D3Pu1xJTFnCUkqplHL9qh3GPqMoYoxhNViP1CqKAkv6F8Y9OOdlWXItPACfTb7DuESWZeYlfuoB28MMHM4MfTYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;" alt="oldsite2" title="" src="/static/oldsite2-eb6c891f1d94f0af42f4885cac57a5df-d766e.png" srcset="/static/oldsite2-eb6c891f1d94f0af42f4885cac57a5df-a6b6e.png 143w,\n/static/oldsite2-eb6c891f1d94f0af42f4885cac57a5df-8e488.png 285w,\n/static/oldsite2-eb6c891f1d94f0af42f4885cac57a5df-d766e.png 570w,\n/static/oldsite2-eb6c891f1d94f0af42f4885cac57a5df-13239.png 855w,\n/static/oldsite2-eb6c891f1d94f0af42f4885cac57a5df-cab6d.png 1140w,\n/static/oldsite2-eb6c891f1d94f0af42f4885cac57a5df-71f14.png 1710w,\n/static/oldsite2-eb6c891f1d94f0af42f4885cac57a5df-2c42d.png 2452w" sizes="(max-width: 570px) 100vw, 570px">\n    </span>\n  </span>\n  \n  </a>\n    \n<p>I enjoyed Octopress, but spent a lot of time messing around with it (and struggling through the unfamiliar ruby ecosystem), and not a lot of time writing.  So in the spring of 2014 I decided I wanted to switch to a blogging platform where I could write, rather than messing with code.  So I moved my blog to <a href="https://ghost.org/">Ghost</a>, lightly modified a public theme, and began writing about Vim.  It was around this time (2 years and 40 articles in) that I began to attract more readers, and also began to focus more on higher quality technical articles:</p>\n\n  <a class="gatsby-resp-image-link" href="/static/oldsite3-61d53315ea3c4ee2617d02f32ce50bff-dcb72.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 570px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.5593087195601%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABYlAAAWJQFJUiTwAAABq0lEQVQoz22SO48BYRSGv+1F9IpNJBK/QUQiMYlGKSQKUUoUEp1eITQqCZH4BRqFTqkUlSAGwdp1Ges2Zhg7s++eb9kp9ilOTuY7t/ecYaIoDgaDXq83mUxqtVo+nz8ej2/EcDgUifF43O/3EQb/g3gnGLztdrtcLvf7fb1er1QqhmF8EXher9er1QoWYYiBoyjK9Xo1CDYajVAPnafTabVaLRaLPFnTNISiLkpIkiTL8uVyOZ/Pp9MJo93vd13XWbfb7XQ67XYbNpfLZbNZJOuE8cDsm2GtVqvZbGLgRqORTqdTqRQPvd1us9lsPp8vFounTrQ112KFQgHTlkqlcrkcj8djsZiqqjwZQrAqWOTIBD5C0V9yMBj0+XyhUCiRSPj9fkEQDocDHqBqQ3wSu90OG5UIOKjyk5zJZKLRaDgcTiaTgUDA4/FgPL4zlcButQe84bM5s9lsFovF5XJ5vV632x2JRHAbLgxXQTKWjCn+XxiSGWMvBByr1Yrj8bGxLfwqsNCMKgqBWrC/nV8Jp9OJ5na73eFw4Ox4wJAQbP6foBbrgH7cGZMj5huXzBWA59G75QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;" alt="oldsite3" title="" src="/static/oldsite3-61d53315ea3c4ee2617d02f32ce50bff-d766e.png" srcset="/static/oldsite3-61d53315ea3c4ee2617d02f32ce50bff-a6b6e.png 143w,\n/static/oldsite3-61d53315ea3c4ee2617d02f32ce50bff-8e488.png 285w,\n/static/oldsite3-61d53315ea3c4ee2617d02f32ce50bff-d766e.png 570w,\n/static/oldsite3-61d53315ea3c4ee2617d02f32ce50bff-13239.png 855w,\n/static/oldsite3-61d53315ea3c4ee2617d02f32ce50bff-cab6d.png 1140w,\n/static/oldsite3-61d53315ea3c4ee2617d02f32ce50bff-71f14.png 1710w,\n/static/oldsite3-61d53315ea3c4ee2617d02f32ce50bff-dcb72.png 2546w" sizes="(max-width: 570px) 100vw, 570px">\n    </span>\n  </span>\n  \n  </a>\n    \n<p>About a year after that I re-introduced some color to the blog after a prolonged absence. The black and white sidebar was traded for a colorful green, and a I began using a mix of blue and red for text emphasis. I also began to focus on making it more clear how to subscribe to the blog, and highlighted the more popular content:</p>\n\n  <a class="gatsby-resp-image-link" href="/static/oldsite4-3d778ab26a3f2e19e1b36fad35576d10-5ec97.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 570px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.062992125984245%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABYlAAAWJQFJUiTwAAABp0lEQVQoz22SyU7CUBSG+w4uBBMVNXGIoAwRLZMUWsZSQI0Rg7jQjS5cOex8AeNenxA30Pbe2+G2tnhaDCDxz03aNOfr+c9/LhMqcutCYUMorvHcYoYNS3WEses4hmGOZuT+J2a/2eCuu/leN315AfxeUyS6jhDq97++ZzT3o/ELs10tJ0/PEi0xLpXibSl20kSEUEqBVxRVlmWMsWH+cWHbtmVZHszf9Z4+XrP3j9zL54pQ3hUrWNNMwxgMBsOhPJRlVVVNEz4Ymi9w4TjO2AuTu+ncvT+nbh/Yh7dlXgg3qgDb9resIBURhAkm2lBREcKWL8fXLwy2N3hhKZMMsNFA5igiiVgjUASxYUzAPHSDIR3HndiepMAkTlu5bifEcyuFfDCXjkh16ExNqkJjNG6suSN3duYpvFkpQcI7tfJqMR/MpsawRalnFGMYGBMCPucCA3kwVB+en0HIsO2AB4vYT1v2Rbz57clu5uFAlgUGDnheYA+2amXPNqWQNbTVdR1yHv3VNLBoW4q2vBNrN+F6HV9dKgjBbhQFnsiyKJRCfrP3ZNL5ByEf9d3AflHPAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;" alt="oldsite4" title="" src="/static/oldsite4-3d778ab26a3f2e19e1b36fad35576d10-d766e.png" srcset="/static/oldsite4-3d778ab26a3f2e19e1b36fad35576d10-a6b6e.png 143w,\n/static/oldsite4-3d778ab26a3f2e19e1b36fad35576d10-8e488.png 285w,\n/static/oldsite4-3d778ab26a3f2e19e1b36fad35576d10-d766e.png 570w,\n/static/oldsite4-3d778ab26a3f2e19e1b36fad35576d10-13239.png 855w,\n/static/oldsite4-3d778ab26a3f2e19e1b36fad35576d10-cab6d.png 1140w,\n/static/oldsite4-3d778ab26a3f2e19e1b36fad35576d10-71f14.png 1710w,\n/static/oldsite4-3d778ab26a3f2e19e1b36fad35576d10-5ec97.png 2540w" sizes="(max-width: 570px) 100vw, 570px">\n    </span>\n  </span>\n  \n  </a>\n    \n<p>Ghost was a great blogging platform, but this fall I decided it was time to move off of it.  I was interested in trying some things that didn’t fit into the platform’s more structured approach, and wanted to move the blog to a place where it was no longer losing me money to run.  So I decided to take another look at the static site generator landscape. I looked through the top 12 or so options on <a href="https://www.staticgen.com/">StaticGen</a> and <a href="https://github.com/gatsbyjs/gatsby">Gatsby</a> quickly stood out.  It uses concepts I’m extremely comfortable with (built with React and Webpack!), produces fast server-rendered SPA style sites, and dictates almost nothing about how the site is built.</p>\n<p>The site is now built with Gatsby and hosted on Github pages.  I’ve ditched the noisy green sidebar in favor of a simpler text-focused experience and added a small ad at the top of the page to offset some of the costs associated with the blog.  I’m planning on iterating on the design (better organizing and exposing older content, making it simpler to subscribe to the blog, and making it easier for me to add rich content/code examples to posts without relying on 3rd party services), but for right now I’m excited to get back to focusing on writing.</p>\n\n  <a class="gatsby-resp-image-link" href="/static/current_site-c595f859eaea97eb4f04097307b2f2ce-37443.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 570px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 83.81502890173411%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB30lEQVQ4y31TSY4UMRDsHyFxRTwITohXIC7wCS5Ic0CaPyAeQLMeqG71NrV4qfKWXoqwq3umuns0qVTJdjkyMsL2IoTgyGuXU1lPPjyE93Ech2XVfvna3X4bfq6cJ6u1NYaI8H+RYpCadoLuJG25Y4piBKqAHaVx3L7/vHzx5vuzV9W7T91m3f7+w1YrPQwxxkVhIGc0ilqjjDFKqaEEFgDefbj58fLt8vnr9ccbqftmtz/s98METilxLpqmYYzVdcM5L9VyeDSQkqu5+rXWfzeuFT4GcjlObacE2L+q2my31Wq1PxxiSgGtI0tgCuU5sY5pQMEUy9/cdiQatUlaj8ZEpUhK6nvi3BuTS/js3MmGAFF931trCzhGMsYx7oR0QjjOJzDGXql7/pP9Xmt9BsZCphrA2R9ppxyGULTNwXD0EuzajkA7fbvOMYa2MfDYdE6OtoUQKHECK+3qGk0iCVk48+CKGYG2z8HGgjCTYCt44OoxY7gKMEspZ2BtiItMKOTRWO/DYzFpBn6m2VooBHk2mbHsPKa4LY+VQNsXzDCszSaB+cnAxcLFhGaUKHc7azYFKbLDhRM+5zNjuR3v3Nxw4C81ZzB2A9n3k7gnyGfgYgPK58RjuDqba8/uH8Z/MfnSZnLavn8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;" alt="current site" title="" src="/static/current_site-c595f859eaea97eb4f04097307b2f2ce-d766e.png" srcset="/static/current_site-c595f859eaea97eb4f04097307b2f2ce-a6b6e.png 143w,\n/static/current_site-c595f859eaea97eb4f04097307b2f2ce-8e488.png 285w,\n/static/current_site-c595f859eaea97eb4f04097307b2f2ce-d766e.png 570w,\n/static/current_site-c595f859eaea97eb4f04097307b2f2ce-13239.png 855w,\n/static/current_site-c595f859eaea97eb4f04097307b2f2ce-cab6d.png 1140w,\n/static/current_site-c595f859eaea97eb4f04097307b2f2ce-71f14.png 1710w,\n/static/current_site-c595f859eaea97eb4f04097307b2f2ce-37443.png 1730w" sizes="(max-width: 570px) 100vw, 570px">\n    </span>\n  </span>\n  \n  </a>\n    \n<p>Like all software, as this blog has evolved, I’m sure not all of the progress has been forward.  If you see any issues with the new site, feedback and bugfixes are welcome.  Feel free to hit me up on <a href="https://twitter.com/ben336">twitter</a>, comment on this post, or open an issue on the site’s <a href="https://github.com/benmccormick/benmccormickorg/issues">github repo</a>.  Thank you to everyone who has read and supported this site over the past several years.</p>\n<h3>More Resources</h3>\n<ul>\n<li>If you’re interested in <a href="https://github.com/gatsbyjs/gatsby">Gatsby</a> this post on <a href="https://blog.scottnonnenberg.com/practical-gatsby-js/">Practical Gatsby.js</a> by Scott Nonnenberg is excellent.  Its not a how-to, but more of a series of examples of how he deviated from the base Gatsby blog (and why).  I found it really helpful when brainstorming ideas for this site.</li>\n</ul>',fields:{slug:"/2016/12/02/whole-new-site/"}}},{node:{frontmatter:{readNext:"rss-atom-json-feeds,ten-things-js,friday-links-11-03-17",topics:["Gatsby"],category:"tools",key:"blog-deploy-ux",title:"Improving Gatsby Blog Deploy UX",description:"Travis CI and Inquirer.js make my Gatsby deploys easier",layout:"post",path:"/2017/11/07/blog-deploy-ux/",date:"2017/11/07",dontfeature:null,isDraft:null},html:'<p>About a year ago I switched back to using a static site generator for this blog.  Specifically, I chose <a href="https://www.gatsbyjs.org/">Gatsby</a> and it has been fantastic.  It’s incredibly easy to customize and make my own, and I can do fun things like adding metadata to my posts to enable features like the “read next” list at the bottom of each post, and the “most popular” posts feature that is actually generated from google analytics data.  The biggest downside of using a static site generator relative to a hosted service though is the annoyance of actually posting.  I could edit or write a post to my <a href="https://ghost.org/">Ghost</a> blog from anywhere, which was a real perk of using that platform.  Until recently I was only able to deploy this site from a single computer, because I needed an API key for Google Analytics to be available.  That has been mostly fine, since I usually work on posts for this site over the course of a few days.</p>\n<p>But last week I decided to start aiming for <a href="https://benmccormick.org/2017/11/03/friday-links/">weekly shorter linklog posts</a>, and that meant having a bit more flexibility with my deploys.  So this week I did 2 things: I set up a <a href="https://travis-ci.org/">Travis CI</a> job to auto-deploy my app when changes hit the master branch, and wrote an initial version of a CLI for managing the blog.  The first version just helps me write out a templated new post.  My setup is pretty tailored to this blog, but I thought it’d be helpful to share, and maybe inspire some folks looking to do the same thing for their static site.</p>\n<h3>Travis CI</h3>\n<p>Travis is a continuous integration environment that is free for open source.  I had used it very minimally for some open source projects, but never to deploy anything so I had to learn about the <code>deploy</code> option travis provides.  In the end my <code>.travis.yml</code> file was pretty simple and looked like this:</p>\n<div class="gatsby-highlight">\n      <pre class="language-yml"><code>language: node_js\nnode_js:\n- \'8\'\ndeploy:\n  skip_cleanup: true\n  provider: script\n  script: scripts/deploy.sh\n  on:\n    branch: master\nenv:\n  global:\n  - ANALYTICS_KEY=./analytics-api-key.json\n  - secure: r43TdsxdDrqYtmZiBmBSe+7u0UBdepMWAYmpTGzGJoAt9p0z+CxcR9ZIj4uMPvBtO3n1wcEvylWcmmY6smu57uXNPhQpyYJaw6HlnfKrz5GjRVX6Ti6oDm8Yyhha1IlcS73dJTpApFis30Kv7fsfDvpNcvVxpF1eDUlw2UAYCwI=\nbefore_install:\n- openssl aes-256-cbc -K $encrypted_dd5d287df7ed_key -iv $encrypted_dd5d287df7ed_iv\n  -in analytics-api-key.json.enc -out analytics-api-key.json -d</code></pre>\n      </div>\n<p>Breaking that down a bit:</p>\n<div class="gatsby-highlight">\n      <pre class="language-yml"><code>language: node_js\nnode_js:\n- \'8\'</code></pre>\n      </div>\n<p>I’m using node for this project and I want to deploy on node 8, so these lines just make sure I have that environment available.</p>\n<div class="gatsby-highlight">\n      <pre class="language-yml"><code>deploy:\n  skip_cleanup: true\n  provider: script\n  script: scripts/deploy.sh\n  on:\n    branch: master</code></pre>\n      </div>\n<p>I’ve bundled my deploy steps into a script, <code>deploy.sh</code>.  This config tells travis to run the script after my (currently non-existent) tests have completed, and not to remove any built files before starting the deploy.  It also makes it clear that this should only happen for changes to the master branch.</p>\n<div class="gatsby-highlight">\n      <pre class="language-yml"><code>env:\n  global:\n  - ANALYTICS_KEY=./analytics-api-key.json\n  - secure: r43TdsxdDrqYtmZiBmBSe+7u0UBdepMWAYmpTGzGJoAt9p0z+CxcR9ZIj4uMPvBtO3n1wcEvylWcmmY6smu57uXNPhQpyYJaw6HlnfKrz5GjRVX6Ti6oDm8Yyhha1IlcS73dJTpApFis30Kv7fsfDvpNcvVxpF1eDUlw2UAYCwI=\nbefore_install:\n- openssl aes-256-cbc -K $encrypted_dd5d287df7ed_key -iv $encrypted_dd5d287df7ed_iv\n  -in analytics-api-key.json.enc -out analytics-api-key.json -d</code></pre>\n      </div>\n<p>This section looks messy, but its all about the environment variables I need for deploying.  Specifically I’m pulling in a github key for deploys (thats the secure key), and then also pulling my google analytics key from a json file.  The JSON file is stored as an encrypted file in the directory with a key that only Travis can decrypt.  Then I use a public environment variable to tell my deploy script where to look up the file.  That allows me to set a different path locally and still have local deploys work even though I can’t decrypt the checked in JSON file.</p>\n<h3>CLI</h3>\n<p>I’ve started with an extremely basic CLI using <a href="https://github.com/SBoudrias/Inquirer.js">Inquirer.js</a>.  It asks me a series of questions and then generates a markdown doc with the appropriate YAML headings.  Inquirer.js, lodash, and ES6 template strings make this super easy.  It looks like this:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">const</span> inquirer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'inquirer\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'lodash/map\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> find <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'lodash/find\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token punctuation">{</span> mkFile <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'../src/utils/file_system\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> categories <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'../src/pages/categories.json\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>categories<span class="token punctuation">;</span>\n<span class="token keyword">const</span> moment <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'moment\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">let</span> dates <span class="token operator">=</span> <span class="token punctuation">{</span>\n  Today<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n  Tomorrow<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token string">\'Two Days From Now\'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>\n  <span class="token string">\'Three Days From Now\'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\ninquirer\n  <span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n    <span class="token punctuation">{</span>\n      type<span class="token punctuation">:</span> <span class="token string">\'list\'</span><span class="token punctuation">,</span>\n      name<span class="token punctuation">:</span> <span class="token string">\'type\'</span><span class="token punctuation">,</span>\n      message<span class="token punctuation">:</span> <span class="token string">\'What Type of Post is this\'</span><span class="token punctuation">,</span>\n      choices<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'Post\'</span><span class="token punctuation">,</span> <span class="token string">\'Page\'</span><span class="token punctuation">,</span> <span class="token string">\'Friday-Links\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n      filter<span class="token punctuation">:</span> val <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> val<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span>\n      type<span class="token punctuation">:</span> <span class="token string">\'input\'</span><span class="token punctuation">,</span>\n      name<span class="token punctuation">:</span> <span class="token string">\'title\'</span><span class="token punctuation">,</span>\n      message<span class="token punctuation">:</span> <span class="token string">\'What should the title be?\'</span><span class="token punctuation">,</span>\n      validate<span class="token punctuation">:</span> value <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">return</span> <span class="token string">"Title can\'t be empty"</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span>\n      type<span class="token punctuation">:</span> <span class="token string">\'input\'</span><span class="token punctuation">,</span>\n      name<span class="token punctuation">:</span> <span class="token string">\'description\'</span><span class="token punctuation">,</span>\n      message<span class="token punctuation">:</span> <span class="token string">\'What should the description say?\'</span><span class="token punctuation">,</span>\n      validate<span class="token punctuation">:</span> value <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">return</span> <span class="token string">"Description can\'t be empty"</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span>\n      type<span class="token punctuation">:</span> <span class="token string">\'input\'</span><span class="token punctuation">,</span>\n      name<span class="token punctuation">:</span> <span class="token string">\'key\'</span><span class="token punctuation">,</span>\n      message<span class="token punctuation">:</span> <span class="token string">\'What should the post key be?\'</span><span class="token punctuation">,</span>\n      validate<span class="token punctuation">:</span> value <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">return</span> <span class="token string">"Key can\'t be empty"</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span>\n      type<span class="token punctuation">:</span> <span class="token string">\'list\'</span><span class="token punctuation">,</span>\n      name<span class="token punctuation">:</span> <span class="token string">\'category\'</span><span class="token punctuation">,</span>\n      message<span class="token punctuation">:</span> <span class="token string">\'What Category of post is this\'</span><span class="token punctuation">,</span>\n      choices<span class="token punctuation">:</span> <span class="token function">map</span><span class="token punctuation">(</span>categories<span class="token punctuation">,</span> <span class="token string">\'title\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      filter<span class="token punctuation">:</span> title <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token function">find</span><span class="token punctuation">(</span>categories<span class="token punctuation">,</span> <span class="token punctuation">{</span> title <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>key<span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span>\n      type<span class="token punctuation">:</span> <span class="token string">\'input\'</span><span class="token punctuation">,</span>\n      name<span class="token punctuation">:</span> <span class="token string">\'tags\'</span><span class="token punctuation">,</span>\n      message<span class="token punctuation">:</span> <span class="token string">\'Write out any tags you want to use\'</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span>\n      type<span class="token punctuation">:</span> <span class="token string">\'list\'</span><span class="token punctuation">,</span>\n      name<span class="token punctuation">:</span> <span class="token string">\'date\'</span><span class="token punctuation">,</span>\n      message<span class="token punctuation">:</span> <span class="token string">\'When is this going to be posted\'</span><span class="token punctuation">,</span>\n      choices<span class="token punctuation">:</span> <span class="token function">map</span><span class="token punctuation">(</span>dates<span class="token punctuation">,</span> <span class="token punctuation">(</span>value<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token operator">=></span> key<span class="token punctuation">)</span><span class="token punctuation">,</span>\n      filter<span class="token punctuation">:</span> key <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> dates<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">)</span>\n  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>answers <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> postDate <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>answers<span class="token punctuation">.</span>date<span class="token punctuation">,</span> <span class="token string">\'days\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> year <span class="token operator">=</span> postDate<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'YYYY\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> formattedDate <span class="token operator">=</span> postDate<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">\'YYYY/MM/DD\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">mkFile</span><span class="token punctuation">(</span>\n      <span class="token template-string"><span class="token string">`/src/pages/posts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>year<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>answers<span class="token punctuation">.</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.md`</span></span><span class="token punctuation">,</span>\n      <span class="token template-string"><span class="token string">`---\ntitle: "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>answers<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"\ndate: "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>formattedDate<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"\nlayout: "post"\npath: "/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>formattedDate<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>answers<span class="token punctuation">.</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/"\ndescription: "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>answers<span class="token punctuation">.</span>description<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"\nkeywords: "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>answers<span class="token punctuation">.</span>tags<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"\ncategory: "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>answers<span class="token punctuation">.</span>category<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"\nkey: "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>answers<span class="token punctuation">.</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"\nreadNext: "ten-things-js,favorite-interview,jest-matchers-1"\n---\n\n    `</span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>Inquirer makes it really nice to gather up all the information, then I use a utility I’ve already written to dump it in a file.  I want to do a bunch more here in the future here, starting by giving this script the ability to read and parse my existing posts, which will let me enforce uniqueness on names and keys, as well as offer autocomplete on the readNext column, which I’ve left hardcoded for now, since its hard to type free form.  There’s more to come here, and you all may feel free to steal and remix anything you find useful for your own blogs here.</p>',
fields:{slug:"/2017/11/07/blog-deploy-ux/"}}},{node:{frontmatter:{readNext:null,topics:["Math","Jest","Gatsby"],category:"opinion",key:"weekly-links-12-23-17",title:"Weekly Links: December 23rd 2017",description:"Math in JS, Google vs Apple Maps, and cheating at Settlers",layout:"weekly-links",path:"/2017/12/23/weekly-links-12-23-17/",date:"2017/12/23",dontfeature:null,isDraft:null},html:'<h3>JavaScript And The Web</h3>\n<p><a href="http://raganwald.com/2017/12/14/73939133.html">73,939,133 / Truncatable Primes | Reg Braithwaite</a> - A nice writeup about how brute force can be useful in solving a <a href="https://projecteuler.net/">Project Euler</a> style math problem.</p>\n<h3>Programming Tools and Practices</h3>\n<p><a href="http://facebook.github.io/jest/blog/2017/12/18/jest-22.html">Jest 22: Refinements &#x26; Custom Runners | Jest Blog</a> - This looks like a solid refinement release for Jest.  One warning: If you’re running <code>jest -o</code> on precommit hooks as I described <a href="https://benmccormick.org/2017/02/26/running-jest-tests-before-each-git-commit/">here</a>, Jest 22 fails when run with 0 tests, so you need to specify the <code>--passWithNoTests</code> flag in order to let things go when you make a change that doesn’t affect any tests.</p>\n<p><a href="https://www.gatsbyjs.org/blog/2017-12-20-introducing-the-gatsby-ux-research-program/">Introducing The Gatsby UX Research Program | Gatsby Blog</a> - An unusual case of doing real UX research for an open source developer tool.  Very cool stuff.</p>\n<h3>Non-Tech</h3>\n<p><a href="https://www.justinobeirne.com/google-maps-moat">Google Maps’s Moat</a> - If you have any interest in product design, maps, or computer intelligence, this is the one article you need to read this week.  Beautifully put together.  It’s an in depth examination of the difference between Google and Apple maps, but it reads as a deeper exploration of how big data combined with computer learning and automation can have a huge impact on product design.</p>\n<p><a href="https://izbicki.me/blog/how-to-cheat-at-settlers-of-catan-by-loading-the-dice-and-prove-it-with-p-values.html">How to cheat at settlers by loading the dice | Mike Izbicki</a> - This is just a fun application of statistics to my favorite board game.</p>',fields:{slug:"/2017/12/23/weekly-links-12-23-17/"}}},{node:{frontmatter:{readNext:"new-look-2016,atom-tips,mariana",topics:["Gatsby"],category:"meta",key:"rss-atom-json-feeds",title:"Adding RSS, Atom, and JSON Feed to Gatsby",description:"How to support subscription feeds with Gastby",layout:"post",path:"/2017/06/03/rss-atom-json-gatsby/",date:"2017-06-04T01:55:00+00:00",dontfeature:null,isDraft:null},html:'<p>For the last few months, this blog has been written in <a href="https://github.com/gatsbyjs/gatsby">Gatsby</a>, a static site generator for JavaScript.  One of the first problems I had to solve when migrating the blog was how to maintain my RSS feed, since Gatsby doesn’t have any built in concept of an RSS feed.  This issue came up again this week as I decided to implement the new <a href="https://jsonfeed.org/">JSON Feed</a> spec and give folks an additional option for subscribing to this blog.  Fortunately this turns out to be a pretty easy problem to solve because of the excellent npm module <a href="https://github.com/jpmonette/feed">feed</a>.</p>\n<p><em>feed</em> is an npm module that takes a bunch of information about a blog and its posts, and normalizes them into various syndication feed format.  Here’s what setting up a feed option looks like for this blog:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'fs\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> Feed <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'feed\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> filter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'lodash/filter\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> sortBy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'lodash/sortBy\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> forEach <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'lodash/forEach\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token keyword">get</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'lodash/get\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> moment <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'moment\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> markdownIt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'markdown-it\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> frontmatter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'front-matter\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n\n<span class="token comment">//markdownIt is a markdown parser that takes my raw md files and</span>\n<span class="token comment">//translates them into HTML that we can use in the feed</span>\n<span class="token keyword">const</span> md <span class="token operator">=</span> <span class="token function">markdownIt</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  html<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n  linkify<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n  typographer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n\n<span class="token comment">// getPageContent is a function to help us grab the html content from a post path</span>\n<span class="token keyword">const</span> <span class="token function-variable function">getPageContent</span> <span class="token operator">=</span> page <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">let</span> file <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">\'/pages/\'</span> <span class="token operator">+</span> page<span class="token punctuation">.</span>requirePath<span class="token punctuation">,</span> <span class="token string">\'utf-8\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">let</span> body <span class="token operator">=</span> md<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token function">frontmatter</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// handle local links</span>\n  <span class="token keyword">return</span> body<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token operator">/</span>src<span class="token operator">=</span><span class="token string">"\\//g, \'src="</span>http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>benmccormick<span class="token punctuation">.</span>org<span class="token operator">/</span>\'<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// build feed is our main function to build a `Feed` object which we</span>\n<span class="token comment">// can then serialize into various formats</span>\n<span class="token keyword">const</span> <span class="token function-variable function">buildFeed</span> <span class="token operator">=</span> pages <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">let</span> feed <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Feed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    title<span class="token punctuation">:</span> <span class="token string">\'benmccormick.org\'</span><span class="token punctuation">,</span>\n    description<span class="token punctuation">:</span> <span class="token string">\'A blog by Ben McCormick\'</span><span class="token punctuation">,</span>\n    link<span class="token punctuation">:</span> <span class="token string">\'http://benmccormick.org\'</span><span class="token punctuation">,</span>\n    id<span class="token punctuation">:</span> <span class="token string">\'http://benmccormick.org\'</span><span class="token punctuation">,</span>\n    copyright<span class="token punctuation">:</span> <span class="token string">\'All rights reserved 2016, Ben McCormick\'</span><span class="token punctuation">,</span>\n    feedLinks<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n      atom<span class="token punctuation">:</span> <span class="token string">\'http://benmccormick.org/atom.xml\'</span><span class="token punctuation">,</span>\n      json<span class="token punctuation">:</span> <span class="token string">\'http://benmccormick.org/feed.json\'</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    author<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n      name<span class="token punctuation">:</span> <span class="token string">\'Ben McCormick\'</span><span class="token punctuation">,</span>\n      email<span class="token punctuation">:</span> <span class="token string">\'ben@benmccormick.org\'</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// ignore pages (non posts)</span>\n  pages <span class="token operator">=</span> <span class="token function">filter</span><span class="token punctuation">(</span>pages<span class="token punctuation">,</span> p <span class="token operator">=></span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">get</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token string">\'data.layout\'</span><span class="token punctuation">,</span> <span class="token string">\'page\'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">\'page\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// we only want the last 10 articles to show up in the feed</span>\n  pages <span class="token operator">=</span> <span class="token function">sortBy</span><span class="token punctuation">(</span>pages<span class="token punctuation">,</span> page <span class="token operator">=></span> <span class="token keyword">get</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> <span class="token string">\'data.date\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  pages <span class="token operator">=</span> pages<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  pages <span class="token operator">=</span> pages<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token function">forEach</span><span class="token punctuation">(</span>pages<span class="token punctuation">,</span> page <span class="token operator">=></span> feed<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    title<span class="token punctuation">:</span> page<span class="token punctuation">.</span>data<span class="token punctuation">.</span>title<span class="token punctuation">,</span>\n    id<span class="token punctuation">:</span> <span class="token string">\'https://benmccormick.org\'</span> <span class="token operator">+</span> page<span class="token punctuation">.</span>path<span class="token punctuation">,</span>\n    link<span class="token punctuation">:</span> <span class="token string">\'https://benmccormick.org\'</span> <span class="token operator">+</span> page<span class="token punctuation">.</span>path<span class="token punctuation">,</span>\n    date<span class="token punctuation">:</span> <span class="token function">moment</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>data<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    content<span class="token punctuation">:</span> <span class="token function">getPageContent</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    author<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        name<span class="token punctuation">:</span> <span class="token string">\'Ben McCormick\'</span><span class="token punctuation">,</span>\n        email<span class="token punctuation">:</span> <span class="token string">\'ben@benmccormick.org\'</span><span class="token punctuation">,</span>\n        link<span class="token punctuation">:</span> <span class="token string">\'https://benmccormick.org\'</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">]</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  feed<span class="token punctuation">.</span><span class="token function">addContributor</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    name<span class="token punctuation">:</span> <span class="token string">\'Ben McCormick\'</span><span class="token punctuation">,</span>\n    email<span class="token punctuation">:</span> <span class="token string">\'ben@benmccormick.org\'</span><span class="token punctuation">,</span>\n    link<span class="token punctuation">:</span> <span class="token string">\'https://benmccormick.org\'</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> feed<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>Now we have a <code>buildFeed</code> method that takes a list of pages and generates a feed object.  Then we can use the feed object we’ve created to actually build write some files.  We’ll trigger that in the <code>postBuild</code> callback of <code>gatsby-node</code>.  Here was my first version to support RSS and Atom:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token comment">//mkDir and mkFile are just light wrappers around node\'s file system APIs</span>\n<span class="token keyword">let</span> <span class="token function-variable function">createRSSFolder</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">mkDir</span><span class="token punctuation">(</span><span class="token string">\'/public/rss/\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> <span class="token function-variable function">generateAtomFeed</span> <span class="token operator">=</span> <span class="token punctuation">(</span>feed<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">mkFile</span><span class="token punctuation">(</span><span class="token string">\'/public/atom.xml\'</span><span class="token punctuation">,</span> feed<span class="token punctuation">.</span><span class="token function">atom1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> <span class="token function-variable function">generateRSS</span> <span class="token operator">=</span> <span class="token punctuation">(</span>feed<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">mkFile</span><span class="token punctuation">(</span><span class="token string">\'/public/rss/index.xml\'</span><span class="token punctuation">,</span> feed<span class="token punctuation">.</span><span class="token function">rss2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nexports<span class="token punctuation">.</span><span class="token function-variable function">postBuild</span> <span class="token operator">=</span> pages <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">let</span> feed <span class="token operator">=</span> <span class="token function">buildFeed</span><span class="token punctuation">(</span>pages<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">createRSSFolder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">generateAtomFeed</span><span class="token punctuation">(</span>feed<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">generateRSS</span><span class="token punctuation">(</span>feed<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>Prior to this week, <code>feed</code> didn’t support JSON Feed, so I had stopped here.  But because JSON Feed is super simple to implement (its just JSON!), I decided to try to add it to <code>feed</code> this week.  It turned out it was as simple as adding a single function that looks like this:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token function">json1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   <span class="token keyword">const</span> <span class="token punctuation">{</span> options<span class="token punctuation">,</span> items <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n   <span class="token keyword">let</span> feed <span class="token operator">=</span> <span class="token punctuation">{</span>\n     version<span class="token punctuation">:</span> <span class="token string">\'https://jsonfeed.org/version/1\'</span><span class="token punctuation">,</span>\n     title<span class="token punctuation">:</span> options<span class="token punctuation">.</span>title<span class="token punctuation">,</span>\n   <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n   <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>link<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     feed<span class="token punctuation">.</span>home_page_url <span class="token operator">=</span> options<span class="token punctuation">.</span>link<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>feedLinks <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>feedLinks<span class="token punctuation">.</span>json<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     feed<span class="token punctuation">.</span>feed_url <span class="token operator">=</span> options<span class="token punctuation">.</span>feedLinks<span class="token punctuation">.</span>json<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>description<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     feed<span class="token punctuation">.</span>description <span class="token operator">=</span> options<span class="token punctuation">.</span>description<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n\n   <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>image<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     feed<span class="token punctuation">.</span>icon <span class="token operator">=</span> options<span class="token punctuation">.</span>image<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>author<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     feed<span class="token punctuation">.</span>author <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n     <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>author<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n         feed<span class="token punctuation">.</span>author<span class="token punctuation">.</span>name <span class="token operator">=</span> options<span class="token punctuation">.</span>author<span class="token punctuation">.</span>name<span class="token punctuation">;</span>\n     <span class="token punctuation">}</span>\n     <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>author<span class="token punctuation">.</span>link<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n         feed<span class="token punctuation">.</span>author<span class="token punctuation">.</span>url <span class="token operator">=</span> options<span class="token punctuation">.</span>author<span class="token punctuation">.</span>link<span class="token punctuation">;</span>\n     <span class="token punctuation">}</span>\n   <span class="token punctuation">}</span>\n   feed<span class="token punctuation">.</span>items <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=></span> <span class="token punctuation">{</span>\n     <span class="token keyword">let</span> feedItem <span class="token operator">=</span> <span class="token punctuation">{</span>\n       id<span class="token punctuation">:</span> item<span class="token punctuation">.</span>id<span class="token punctuation">,</span>\n       <span class="token comment">// json_feed distinguishes between html and text content</span>\n       <span class="token comment">// but since we only take a single type, we\'ll assume HTML</span>\n       html_content<span class="token punctuation">:</span> item<span class="token punctuation">.</span>content<span class="token punctuation">,</span>\n     <span class="token punctuation">}</span>\n     <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>link<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n       feedItem<span class="token punctuation">.</span>url <span class="token operator">=</span> item<span class="token punctuation">.</span>link<span class="token punctuation">;</span>\n     <span class="token punctuation">}</span>\n     <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>title<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n       feedItem<span class="token punctuation">.</span>title <span class="token operator">=</span> item<span class="token punctuation">.</span>title<span class="token punctuation">;</span>\n     <span class="token punctuation">}</span>\n     <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>description<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n       feedItem<span class="token punctuation">.</span>summary <span class="token operator">=</span> item<span class="token punctuation">.</span>description<span class="token punctuation">;</span>\n     <span class="token punctuation">}</span>\n\n     <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>image<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n       feedItem<span class="token punctuation">.</span>image <span class="token operator">=</span> item<span class="token punctuation">.</span>image\n     <span class="token punctuation">}</span>\n\n     <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>date<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n       feedItem<span class="token punctuation">.</span>date_modified <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ISODateString</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>\n     <span class="token punctuation">}</span>\n     <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>published<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n       feedItem<span class="token punctuation">.</span>date_published <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ISODateString</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>published<span class="token punctuation">)</span><span class="token punctuation">;</span>\n     <span class="token punctuation">}</span>\n\n     <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>author<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n       <span class="token keyword">let</span> author <span class="token operator">=</span> item<span class="token punctuation">.</span>author<span class="token punctuation">;</span>\n       <span class="token keyword">if</span> <span class="token punctuation">(</span>author <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n         <span class="token comment">// json feed only supports 1 author per post</span>\n         author <span class="token operator">=</span> author<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n       <span class="token punctuation">}</span>\n       feedItem<span class="token punctuation">.</span>author <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n       <span class="token keyword">if</span> <span class="token punctuation">(</span>author<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n           feedItem<span class="token punctuation">.</span>author<span class="token punctuation">.</span>name <span class="token operator">=</span> author<span class="token punctuation">.</span>name<span class="token punctuation">;</span>\n       <span class="token punctuation">}</span>\n       <span class="token keyword">if</span> <span class="token punctuation">(</span>author<span class="token punctuation">.</span>link<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n           feedItem<span class="token punctuation">.</span>author<span class="token punctuation">.</span>url <span class="token operator">=</span> author<span class="token punctuation">.</span>link<span class="token punctuation">;</span>\n       <span class="token punctuation">}</span>\n     <span class="token punctuation">}</span>\n     <span class="token keyword">return</span> feedItem<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n   <span class="token keyword">return</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>feed<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n <span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p> My <a href="https://github.com/jpmonette/feed/pull/56/files">pull request</a> was accepted, so feed v1.1.0 now supports JSON feed and my final code to add <a href="http://benmccormick.org/rss/">rss</a>, <a href="http://benmccormick.org/atom.xml">atom</a>, and <a href="http://benmccormick.org/feed.json">json</a> feed to this site looks like this:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'fs\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> Feed <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'feed\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> filter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'lodash/filter\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> sortBy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'lodash/sortBy\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> forEach <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'lodash/forEach\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token keyword">get</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'lodash/get\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> moment <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'moment\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> markdownIt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'markdown-it\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> frontmatter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'front-matter\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token punctuation">{</span>mkDir<span class="token punctuation">,</span> mkFile<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'./utils/file_system\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n\n<span class="token keyword">const</span> md <span class="token operator">=</span> <span class="token function">markdownIt</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n html<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n linkify<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n typographer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">extractMarkdownContent</span> <span class="token operator">=</span> file <span class="token operator">=></span> <span class="token punctuation">{</span>\n <span class="token keyword">let</span> body <span class="token operator">=</span> md<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token function">frontmatter</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>\n <span class="token comment">// handle local links</span>\n <span class="token keyword">return</span> body<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token operator">/</span>src<span class="token operator">=</span><span class="token string">"\\//g, \'src="</span>http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>benmccormick<span class="token punctuation">.</span>org<span class="token operator">/</span>\'<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">getPageContent</span> <span class="token operator">=</span> page <span class="token operator">=></span> <span class="token punctuation">{</span>\n <span class="token keyword">let</span> file <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">\'/pages/\'</span> <span class="token operator">+</span> page<span class="token punctuation">.</span>requirePath<span class="token punctuation">,</span> <span class="token string">\'utf-8\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n <span class="token keyword">return</span> <span class="token function">extractMarkdownContent</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">buildFeed</span> <span class="token operator">=</span> pages <span class="token operator">=></span> <span class="token punctuation">{</span>\n <span class="token keyword">let</span> feed <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Feed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n   title<span class="token punctuation">:</span> <span class="token string">\'benmccormick.org\'</span><span class="token punctuation">,</span>\n   description<span class="token punctuation">:</span> <span class="token string">\'A blog by Ben McCormick\'</span><span class="token punctuation">,</span>\n   link<span class="token punctuation">:</span> <span class="token string">\'http://benmccormick.org\'</span><span class="token punctuation">,</span>\n   id<span class="token punctuation">:</span> <span class="token string">\'http://benmccormick.org\'</span><span class="token punctuation">,</span>\n   copyright<span class="token punctuation">:</span> <span class="token string">\'All rights reserved 2016, Ben McCormick\'</span><span class="token punctuation">,</span>\n   feedLinks<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n     atom<span class="token punctuation">:</span> <span class="token string">\'http://benmccormick.org/atom.xml\'</span><span class="token punctuation">,</span>\n     json<span class="token punctuation">:</span> <span class="token string">\'http://benmccormick.org/feed.json\'</span><span class="token punctuation">,</span>\n   <span class="token punctuation">}</span><span class="token punctuation">,</span>\n   author<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n     name<span class="token punctuation">:</span> <span class="token string">\'Ben McCormick\'</span><span class="token punctuation">,</span>\n     email<span class="token punctuation">:</span> <span class="token string">\'ben@benmccormick.org\'</span>\n   <span class="token punctuation">}</span>\n <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n <span class="token comment">// ignore pages (non posts)</span>\n pages <span class="token operator">=</span> <span class="token function">filter</span><span class="token punctuation">(</span>pages<span class="token punctuation">,</span> p <span class="token operator">=></span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">get</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token string">\'data.layout\'</span><span class="token punctuation">,</span> <span class="token string">\'page\'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">\'page\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n <span class="token comment">// we only want the last 10 articles to show up in the feed</span>\n pages <span class="token operator">=</span> <span class="token function">sortBy</span><span class="token punctuation">(</span>pages<span class="token punctuation">,</span> page <span class="token operator">=></span> <span class="token keyword">get</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> <span class="token string">\'data.date\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n pages <span class="token operator">=</span> pages<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n pages <span class="token operator">=</span> pages<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n <span class="token function">forEach</span><span class="token punctuation">(</span>pages<span class="token punctuation">,</span> page <span class="token operator">=></span> feed<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n   title<span class="token punctuation">:</span> page<span class="token punctuation">.</span>data<span class="token punctuation">.</span>title<span class="token punctuation">,</span>\n   id<span class="token punctuation">:</span> <span class="token string">\'https://benmccormick.org\'</span> <span class="token operator">+</span> page<span class="token punctuation">.</span>path<span class="token punctuation">,</span>\n   link<span class="token punctuation">:</span> <span class="token string">\'https://benmccormick.org\'</span> <span class="token operator">+</span> page<span class="token punctuation">.</span>path<span class="token punctuation">,</span>\n   date<span class="token punctuation">:</span> <span class="token function">moment</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>data<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n   content<span class="token punctuation">:</span> <span class="token function">getPageContent</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">,</span>\n   author<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n     <span class="token punctuation">{</span>\n       name<span class="token punctuation">:</span> <span class="token string">\'Ben McCormick\'</span><span class="token punctuation">,</span>\n       email<span class="token punctuation">:</span> <span class="token string">\'ben@benmccormick.org\'</span><span class="token punctuation">,</span>\n       link<span class="token punctuation">:</span> <span class="token string">\'https://benmccormick.org\'</span>\n     <span class="token punctuation">}</span>\n   <span class="token punctuation">]</span>\n <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n feed<span class="token punctuation">.</span><span class="token function">addContributor</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n   name<span class="token punctuation">:</span> <span class="token string">\'Ben McCormick\'</span><span class="token punctuation">,</span>\n   email<span class="token punctuation">:</span> <span class="token string">\'ben@benmccormick.org\'</span><span class="token punctuation">,</span>\n   link<span class="token punctuation">:</span> <span class="token string">\'https://benmccormick.org\'</span>\n <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n <span class="token keyword">return</span> feed<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">let</span> <span class="token function-variable function">createRSSFolder</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">mkDir</span><span class="token punctuation">(</span><span class="token string">\'/public/rss/\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> <span class="token function-variable function">generateAtomFeed</span> <span class="token operator">=</span> <span class="token punctuation">(</span>feed<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">mkFile</span><span class="token punctuation">(</span><span class="token string">\'/public/atom.xml\'</span><span class="token punctuation">,</span> feed<span class="token punctuation">.</span><span class="token function">atom1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> <span class="token function-variable function">generateRSS</span> <span class="token operator">=</span> <span class="token punctuation">(</span>feed<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">mkFile</span><span class="token punctuation">(</span><span class="token string">\'/public/rss/index.xml\'</span><span class="token punctuation">,</span> feed<span class="token punctuation">.</span><span class="token function">rss2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> <span class="token function-variable function">generateJSONFeed</span> <span class="token operator">=</span> <span class="token punctuation">(</span>feed<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">mkFile</span><span class="token punctuation">(</span><span class="token string">\'/public/feed.json\'</span><span class="token punctuation">,</span> feed<span class="token punctuation">.</span><span class="token function">json1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nexports<span class="token punctuation">.</span><span class="token function-variable function">postBuild</span> <span class="token operator">=</span> pages <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">let</span> feed <span class="token operator">=</span> <span class="token function">buildFeed</span><span class="token punctuation">(</span>pages<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">createRSSFolder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">generateAtomFeed</span><span class="token punctuation">(</span>feed<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">generateRSS</span><span class="token punctuation">(</span>feed<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">generateJSONFeed</span><span class="token punctuation">(</span>feed<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<h3>More Resources</h3>\n<ul>\n<li>You can see the whole spec for <a href="https://jsonfeed.org/">JSON Feed</a> on their <a href="https://jsonfeed.org/">site</a>.  It really is remarkably simple.  They also have a list of implementations and example sites.</li>\n</ul>',
fields:{slug:"/2017/06/03/rss-atom-json-gatsby/"}}}],topic:"Gatsby"}}}});
//# sourceMappingURL=path---topics-gatsby-3ef439824e8e2605f046.js.map