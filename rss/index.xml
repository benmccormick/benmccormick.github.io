<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>benmccormick.org</title>
        <link>http://benmccormick.org</link>
        <description>A blog by Ben McCormick</description>
        <lastBuildDate>Fri, 01 Dec 2017 15:35:12 GMT</lastBuildDate>
        <docs>http://blogs.law.harvard.edu/tech/rss</docs>
        <generator>Feed for Node.js</generator>
        <image>
            <title>benmccormick.org</title>
            <url>https://benmccormick.org/logo.png</url>
            <link>http://benmccormick.org</link>
        </image>
        <copyright>All rights reserved 2016, Ben McCormick</copyright>
        <atom:link href="http://benmccormick.org/atom.xml" rel="self" type="application/rss+xml"/>
        <item>
            <title><![CDATA[Weekly Links: December 1st 2017]]></title>
            <link>https://benmccormick.org/2017/12/01/weekly-links-12-01-17/</link>
            <guid>https://benmccormick.org/2017/12/01/weekly-links-12-01-17/</guid>
            <pubDate>Fri, 01 Dec 2017 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<h3>JavaScript And The Web</h3>
<p><a href="http://2ality.com/2017/04/flatmap.html">Functional pattern: flatMap | 2ality</a> - This post isn’t new, but <code>flatmap</code> and <code>flatten</code> hit stage 3 in the TC39 process for adding new features to JavaScript this week<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>.  So this is a great time to read up on them.</p>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Stage 3 for Array.prototype.flatMap and Array.prototype.flatten! Thank you so much <a href="https://twitter.com/jspedant?ref_src=twsrc%5Etfw">@jspedant</a> for driving this!<a href="https://t.co/9kLCKJcZEv">https://t.co/9kLCKJcZEv</a></p>&mdash; Brian Terlson (@bterlson) <a href="https://twitter.com/bterlson/status/935582351999901696?ref_src=twsrc%5Etfw">November 28, 2017</a></blockquote>
<p><a href="http://bholley.net/blog/2017/stylo.html">Boiling the Ocean, Incrementally - How Stylo Brought Rust and Servo to Firefox | Bobby Holley </a> - This is a great review of the technical achievement that Firefox 57 represents, and also gives some insight into where Mozilla is going from here. I’ve switched back to Firefox over the past 2 weeks and am pretty happy with it so far.</p>
<h3>Programming Tools and Practices</h3>
<p><a href="https://aws.amazon.com/blogs/aws/introducing-amazon-appsync/">Introducing AWS AppSync | AWS News Blog</a> - AWS announced a bunch of new services this week, but I wanted to highlight AppSync, an Amazon GraphQL service.  <a href="http://graphql.org/">GraphQL</a> seems to be gaining more and more momentum, and if you don’t know anything about it I’d suggest checking it out.  I’ve gotten to play with it since rewriting my blog to <a href="https://www.gatsbyjs.org/">Gatsby</a> 1.0, and it is a nice way to work with data.</p>
<h3>Non-Tech</h3>
<p><a href="https://www.seattletimes.com/business/amazon/this-city-hall-brought-to-you-by-amazon/">This City Hall, brought to you by Amazon | The Seattle Times</a> - I’m amazed by the incentives cities have been willing to offer Amazon to locate a headquarters in their city.  I think the outrage in this column is a bit over the top, but it is a startling insight into the power large tech companies have over the cities where they’re located.</p>
<p><a href="http://amzn.to/2i78Knm">Doomsday Clock - #1</a> - If you have any interest in comic books DC’s <a href="http://amzn.to/2i78Knm">Watchmen</a> sequel has begun.  It’s a story that crosses over with the mainstream DC Universe, and appears to be a rebuttal of the cynical vantage point of the original work.  This is the first of 12 issues over the next year and it was a strong (but slow start).  If you’re interested in Watchmen but don’t read a lot of comics, this is the continuation of a story that began with <a href="http://amzn.to/2jD0Y5c">a big DC special</a> and continued in a special <a href="http://amzn.to/2i5zSDn">Batman/Flash crossover</a></p>
<div class="footnotes">
<hr>
<ol>
<li id="fn-1">
<p>See <a href="https://benmccormick.org/2017/07/10/how-to-follow-the-javascript-roadmap/">this post</a> for more info about staying informed about features that are being added to JavaScript.</p>
<a href="#fnref-1" class="footnote-backref">↩</a>
</li>
</ol>
</div>]]></content:encoded>
            <author>ben@benmccormick.org (Ben McCormick)</author>
        </item>
        <item>
            <title><![CDATA[Implementing The Sieve Of Eratosthenes in JavaScript]]></title>
            <link>https://benmccormick.org/2017/11/28/sieveoferatosthenes/</link>
            <guid>https://benmccormick.org/2017/11/28/sieveoferatosthenes/</guid>
            <pubDate>Tue, 28 Nov 2017 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<p>As a way of keeping my math skills sharp, I’ve recently started to work through the <a href="https://projecteuler.net/">Project Euler</a> set of computational math problems.  They ask you not to post your work publicly, so I won’t be posting about any of my specific solutions, but I did think it would be fun to share about a helper method I’ve been using.</p>
<p>For several of the Project Euler problems I’ve worked on, I needed to be able to generate a list of prime numbers.  To do that, I borrowed a Python implementation of the Sieve Of Erathosthenes from <a href="https://stackoverflow.com/a/568618/1424361">this StackOverflow answer</a>.  Since I haven’t had much reason to use generators in JavaScript yet, I thought it would be fun to translate that algorithm to JavaScript and share that here.</p>
<h3>Sieve of Eratosthenes</h3>
<p>The Sieve of Erathosthenes is a very old<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup> simple algorithm for identifying prime numbers.  In its normal implementation it is a useful way of finding small primes up to a certain number.  Beginning at 2, the algorithm iterates upward.  For the current number, if the number has not been marked, we identify it as a prime, and then mark all multiples of that number up to our target number.  So to find all primes up to 12, we would</p>
<ul>
<li>start at 2, note <strong>2</strong> as prime, and mark 4, 6, 8, 10 and 12 as non-prime</li>
<li>move to 3, note <strong>3</strong> as prime, and mark 6, 9, 12 as non-prime</li>
<li>move to 4, see that it is marked, and skip it</li>
<li>move to 5, note <strong>5</strong> as prime and mark 10 as non-prime</li>
<li>move to 6, see that it is marked and skip it</li>
<li>move to 7 , note <strong>7</strong> as prime</li>
<li>see that 8-10 are marked and skip them</li>
<li>move to 11, note <strong>11</strong> as prime</li>
<li>move to 12, see that it is marked and skip it</li>
</ul>
<p>You can see it graphically with this visualization from <a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">Wikipedia</a>:</p>
<p><img src="/6420e3488e509dce176a1e957ea07ff5.gif" alt="sieve animation, shows the numbers being marked visually"></p>
<h3>Python Implementation</h3>
<p>The Python implementation that I used makes some modifications to the classic version of the algorithm that lets it generate an indefinite number of primes while being memory efficient</p>
<div class="gatsby-highlight">
      <pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">gen_primes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">""" Generate an infinite sequence of prime numbers."""</span>
    marked_not_prime <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    value_to_check <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> value_to_check <span class="token operator">not</span> <span class="token keyword">in</span> marked_not_prime<span class="token punctuation">:</span>
            <span class="token keyword">yield</span> value_to_check
            marked_not_prime<span class="token punctuation">[</span>value_to_check <span class="token operator">*</span> value_to_check<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>value_to_check<span class="token punctuation">]</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> prime <span class="token keyword">in</span> marked_not_prime<span class="token punctuation">[</span>value_to_check<span class="token punctuation">]</span><span class="token punctuation">:</span>
                marked_not_prime<span class="token punctuation">.</span>setdefault<span class="token punctuation">(</span>prime <span class="token operator">+</span> value_to_check<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>prime<span class="token punctuation">)</span>
            <span class="token keyword">del</span> marked_not_prime<span class="token punctuation">[</span>value_to_check<span class="token punctuation">]</span>
        value_to_check <span class="token operator">+=</span> <span class="token number">1</span>
</code></pre>
      </div>
<p>This version of the algorithm keeps a running set of the relevant matches, and keeps only the ones it needs.  We can translate it more or less directly to JavaScript like this:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generatePrimes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> markedNotPrime <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> valueToCheck <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>valueToCheck <span class="token keyword">in</span> markedNotPrime<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">yield</span> valueToCheck
            markedNotPrime<span class="token punctuation">[</span>valueToCheck<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>valueToCheck<span class="token punctuation">]</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> primes <span class="token operator">=</span>markedNotPrime<span class="token punctuation">[</span>valueToCheck<span class="token punctuation">]</span><span class="token punctuation">;</span>
            primes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>prime<span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> nextMultipleOfPrime <span class="token operator">=</span> prime <span class="token operator">+</span> valueToCheck<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>nextMultipleOfPrime <span class="token keyword">in</span> markedNotPrime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    markedNotPrime<span class="token punctuation">[</span>nextMultipleOfPrime<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>prime<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    markedNotPrime<span class="token punctuation">[</span>nextMultipleOfPrime<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>prime<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">delete</span> markedNotPrime<span class="token punctuation">[</span>valueToCheck<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        valueToCheck <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Let’s break down what this is doing.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generatePrimes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">//...</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p><code>generatePrimes</code> is a JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator">generator</a>.  Generators “generate” a series of values in a “just in time” fashion; they only calculate the next value when it is needed, making them an efficient solution for working with large or infinite series.  You specify a generator function by adding the <code>*</code> to the function declaration.  Generators then use the <code>yield</code> keyword rather than <code>return</code> to return their values, and can <code>yield</code> multiple times. After a generator yields, it pauses execution until it is asked for another value.  For our <code>generatePrimes</code> function, we are operating inside an infinite loop and will yield continuously without stopping<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">const</span> markedNotPrime <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> valueToCheck <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//...</span>
    valueToCheck <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>We’re using a plain object to keep track of our marked numbers, and using <code>valueToCheck</code> to keep track of where we are in iterating through numbers. As noted, we will iterate it forever if the generator continues to be called.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>valueToCheck <span class="token keyword">in</span> markedNotPrime<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> valueToCheck
    markedNotPrime<span class="token punctuation">[</span>valueToCheck<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>valueToCheck<span class="token punctuation">]</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">//...</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>As in the original algorithm, if we get to a number that isn’t marked, we know that it is a prime.  So we <code>yield</code> it, which pauses execution.  If the generator is queried again, when we resume execution we mark the prime squared as not-prime, and we do that by assigning it an array with the current prime value in it.  Using arrays for markers will make more sense in a moment. For now its worth noting that we only need to mark prime-squared as non-prime since every multiple below that is the current prime multiplied by a number less than it, which means it will already be covered, as we will see below.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>valueToCheck <span class="token keyword">in</span> markedNotPrime<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">//...</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> primes <span class="token operator">=</span> markedNotPrime<span class="token punctuation">[</span>valueToCheck<span class="token punctuation">]</span><span class="token punctuation">;</span>
    primes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>prime <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> nextMultipleOfPrime <span class="token operator">=</span> prime <span class="token operator">+</span> valueToCheck<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nextMultipleOfPrime <span class="token keyword">in</span> markedNotPrime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            markedNotPrime<span class="token punctuation">[</span>nextMultipleOfPrime<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>prime<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            markedNotPrime<span class="token punctuation">[</span>nextMultipleOfPrime<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>prime<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">delete</span> markedNotPrime<span class="token punctuation">[</span>valueToCheck<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Here’s the clever part of this implementation.  When we hit a number that is marked as not-prime, instead of just skipping it and moving on, we use some logic to keep our list of marked values small and memory efficient. This is also what allows us to get an infinite list of primes instead of settling for those under a particular value.  What we want to do is keep a list of all the primes that are factors of each marked number.  Then when we hit a number that is marked, we mark the next multiple for each prime (<code>valueToCheck + prime</code>), and remove the current value from the object.  That keeps checks fairly cheap by eliminating the number of marked numbers, and allows us to only add values to the marked list as we need them.</p>
<p>We can then use this code to get the 1,000,001st prime like this:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">let</span> gen <span class="token operator">=</span> <span class="token function">generatePrimes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> <span class="token number">1000000</span><span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
</code></pre>
      </div>
<p>That executed on my laptop in ~20seconds, approximately the same as the python implementation in python2, a little slower than running it under python3.  I was curious whether using a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a> for our marked prime list would speed things up:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generatePrimes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> markedNotPrimeMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> valueToCheck <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>markedNotPrimeMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>valueToCheck<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">yield</span> valueToCheck
            markedNotPrimeMap<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>valueToCheck<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>valueToCheck<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> primes <span class="token operator">=</span>markedNotPrimeMap<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>valueToCheck<span class="token punctuation">)</span>
            primes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>prime<span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> nextMultipleOfPrime <span class="token operator">=</span> prime <span class="token operator">+</span> valueToCheck<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>markedNotPrimeMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>nextMultipleOfPrime<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    markedNotPrimeMap<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>nextMultipleOfPrime<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>prime<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    markedNotPrimeMap<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>nextMultipleOfPrime<span class="token punctuation">,</span> <span class="token punctuation">[</span>prime<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            markedNotPrimeMap<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span>valueToCheck<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        valueToCheck <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>This version of the code runs about 25% faster, in 15 seconds on my machine. Not bad.</p>
<h3>More Resources</h3>
<ul>
<li>You can dig in more on the Sieve of Erosthenes on <a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">Wikipedia</a></li>
<li>Check out <a href="https://projecteuler.net/">Project Euler</a> for some fun computational math problems.</li>
</ul>
<div class="footnotes">
<hr>
<ol>
<li id="fn-1">
<p>There are references as old as ~100 AD</p>
<a href="#fnref-1" class="footnote-backref">↩</a>
</li>
<li id="fn-2">
<p>At least until we hit system boundaries for memory/number size/etc.</p>
<a href="#fnref-2" class="footnote-backref">↩</a>
</li>
</ol>
</div>]]></content:encoded>
            <author>ben@benmccormick.org (Ben McCormick)</author>
        </item>
        <item>
            <title><![CDATA[Weekly Links: Thanksgiving 2017 edition]]></title>
            <link>https://benmccormick.org/2017/11/26/weekly-links-11-26-17/</link>
            <guid>https://benmccormick.org/2017/11/26/weekly-links-11-26-17/</guid>
            <pubDate>Sun, 26 Nov 2017 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<p>In honor of Thanksgiving this week, instead of a list of writing from around the web, this week I’ll be linking to some of my favorite lesser known software tools, apps and gear.  These are things that let me get things done, and I’m thankful for that.</p>
<h3>JavaScript Libraries</h3>
<p><a href="https://www.gatsbyjs.org/">Gatsby</a> - I’ve written and spoken about Gatsby before, but it keeps getting better as a tool for building React-based web sites and applications.  This blog is written using it.</p>
<p><a href="https://date-fns.org/">date-fns</a> - date-fns is a nice modular lightweight alternative to <a href="https://momentjs.com/">moment.js</a> for date management in JavaScript.  Because JavaScript’s built in dates are weird and hard to work with, and not everybody needs all of the goodness moment provides.</p>
<p><a href="https://mobx.js.org/">MobX</a> - It’s been overshadowed by Redux, but MobX is a fantastic state management library for JavaScript libraries.  Since its an object oriented model that can be used in a variety of ways, it is easier to pull in incrementally</p>
<p><a href="https://glamorous.rocks/">glamorous</a> - My favorite CSS-in-JS library for React, it lets you write styles in a few different ways, which allows you to manage things in a very React-y way, without ever getting stuck with things you can’t do.</p>
<h3>Apps</h3>
<p><a href="https://flexibits.com/fantastical">Fantastical</a> - The best app I’ve ever used for OSX and iPhone</p>
<p><a href="https://mailplaneapp.com/">Mailplane</a> - If you like GMail’s web app (obviously not to everyone’s taste) Mailplane is a great way to use it as a native app on OSX.  I like it because it allows me to use both of my Gmail accounts side by side with their own notification settings and no risk of being lost in a sea of browser tabs.</p>
<h3>Gear</h3>
<p><a href="http://www.rickshawbags.com/commuter-laptop-bag">Rickshaw Bagworks Commuter Bag</a> - I’ve had the 2.0 version of this bag for the past 4 years, and it has been an amazingly versatile and durable tool for transporting my laptops, notebooks and more.  Highly recommended.</p>
<p><a href="https://store.google.com/product/chromecast_2015">Chromecast</a> - I have a Chromecast and a Chromecast audio, and they’re an amazing cheap way to turn TVs and speakers into “Smart devices” that you can control from your phone without having to pay for “smart devices” that probably won’t be kept up to date the way you’d want.</p>
<p><a href="http://amzn.to/2zpBZcm">Backbeat Fit</a> - I’ve now ended up buying 4 pairs of these headphones for myself and others.  They’re fantastic versatile headphones that work great for exercise headphones but are good enough quality to use for other purposes.  I personally have trouble with ear-buds (they don’t stay in my ears), so the over-ear style of the fit is perfect for me.</p>]]></content:encoded>
            <author>ben@benmccormick.org (Ben McCormick)</author>
        </item>
        <item>
            <title><![CDATA[Weekly Links: November 17th 2017]]></title>
            <link>https://benmccormick.org/2017/11/17/weekly-links-11-17-17/</link>
            <guid>https://benmccormick.org/2017/11/17/weekly-links-11-17-17/</guid>
            <pubDate>Fri, 17 Nov 2017 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<h3>JavaScript And The Web</h3>
<p><a href="http://2ality.com/2017/11/currying-in-js.html">Currying In JS | 2ality</a> - A nice round up of the different approaches for using currying (a functional programming concept) in JavaScript.  My favorite line: <em>“One of JavaScript’s best traits is how many different styles of programming it can accommodate.”</em> This is one of my favorite things about the language as well.</p>
<p><a href="https://medium.com/@dhruvrajvanshi/thoughts-on-redux-and-its-similarities-with-oop-6d200f34656">Thoughts on Redux and its similarities with OOP | Dhruv Rajvanshi</a> - I always find it useful to understand when core concepts are shared across very different looking tools and paradigms</p>
<h3>Programming Tools and Practices</h3>
<p><a href="https://hacks.mozilla.org/2017/11/entering-the-quantum-era-how-firefox-got-fast-again-and-where-its-going-to-get-faster/">Entering the Quantum Era—How Firefox got fast again and where it’s going to get faster | Lin Clark</a> - I’ve been using Firefox 57 as my primary browser this week and so far it is very very nice.  Other than a single Chrome-specific extension that I’m missing, and a few minor devtool annoyances, everything has worked great.  And it is blazing fast.</p>
<p><a href="https://code.visualstudio.com/blogs/2017/11/15/live-share">Introducing Visual Studio Live Share | Microsoft</a> and
<a href="https://blog.atom.io/2017/11/15/code-together-in-real-time-with-teletype-for-atom.html">Code together in real time with Teletype for Atom | Github</a>  - In what appears to be a crazy coincidence, both Atom and Visual Studio/Visual Studio Code announced new tools for collaborating with other developers on code, using a google docs-like experience.  Atom’s solution is available in beta today, and is a free WebRTC based peer-to-peer solution for editing code together, with the primary user sharing their active tab with anybody who has the uniqueID for your session.  It also includes open-sourcing a library that would let other editors implement its document protocol. Microsoft’s solution is more ambitious, supporting both Visual Studio and Visual Studio code, and allowing users access to a whole shared workspace.  It is just an announcement for now though, and it’s not clear if it is a peer to peer or centralized solution, nor whether it will have a cost associated with it.  Regardless, both solutions look amazingly cool.</p>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">As one of the three engineers that built Teletype, I share your curiosity! 🙈</p>&mdash; Jason Rudolph (@jasonrudolph) <a href="https://twitter.com/jasonrudolph/status/930856578915344384?ref_src=twsrc%5Etfw">November 15, 2017</a></blockquote>
<p><a href="http://amzn.to/2AVaAjx">Managing Humans | Michael Lopp (AKA Rands)</a> - This book was a great roundup of some of the best writings from one of my favorite blogs <a href="http://randsinrepose.com/">Rands in Repose</a>.  Michael Lopp has been a manager and executive at Netscape, Apple, Palantir, Pinterest and now Slack.  He’s seen a lot.  While the book is aimed first at managers, it’s helpful for anyone who is interested in understanding how engineering teams work, and how to lead or work in one better.</p>
<h3>Non-Tech</h3>
<p><a href="https://www.nytimes.com/2017/11/09/sports/aaron-hernandez-brain-cte.html?_r=0">On the Table, the Brain Appeared Normal | The New York Times</a> - Powerful reading about the dangers of football, a sport that I still love watching.  <a href="https://www.si.com/nfl/2017/09/21/aaron-hernandez-brain-cte-video-photos">More context here if you’re confused after reading the NYT story</a>.</p>
<p><a href="https://www.nytimes.com/2017/11/12/us/nsa-shadow-brokers.html?_r=0">Security Breach and Spilled Secrets Have Shaken the N.S.A. to Its Core | The New York Times</a> - Interesting to see such mainstream questioning of the NSA’s habit of hording zero-day exploits.  Don’t read this one if you want to maintain any naive good feelings about US cybersecurity.</p>]]></content:encoded>
            <author>ben@benmccormick.org (Ben McCormick)</author>
        </item>
        <item>
            <title><![CDATA[A Quick Browser Compatibility Checkup]]></title>
            <link>https://benmccormick.org/2017/11/15/browser-compatibility-checkup/</link>
            <guid>https://benmccormick.org/2017/11/15/browser-compatibility-checkup/</guid>
            <pubDate>Wed, 15 Nov 2017 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<p>I’ve written a few times about the state of browser compatibility and the web platform over the years.  Over 4 years ago I <a href="https://benmccormick.org/2013/06/11/evergreen-browsers">linked to a post celebrating the rise of evergreen browsers</a>. Then 2 years ago I was one of several people stressing about <a href="https://benmccormick.org/2015/06/10/is-safari-being-left-behind/">whether Safari was going to hold the web back</a>.  It’s something I’ve followed closely because supporting many different subtly incompatible execution environments is one of the most unique and frustrating challenges of front-end development.  </p>
<p>The last few years have been really good for web compatibility with Microsoft dumping Internet Explorer in favor of the evergreen Edge, and <a href="https://babeljs.io/">Babel</a> allowing JavaScript developers to write modern JS spec-compliant code and then have it transpiled back into something that runs in a wide variety of environments.  But fairly recently things have started to get even better.</p>
<p>For the web application I have spent my workdays building over the past 4 years, we target the <a href="http://browserl.ist/?q=last+2+Chrome+versions%252C+last+2+Safari+versions%252C+last+2+Firefox+versions%252C+last+2+Edge+versions">last 2 versions of the major desktop browsers</a> (Chrome, Firefox, Safari, Edge).  At the time of writing that means we target</p>
<ul>
<li>Chrome 61 + 62</li>
<li>Edge 15 + 16</li>
<li>Firefox 55 + 56</li>
<li>Safari 10.1 + 11</li>
</ul>
<p>I get that for some of you this is a very lax browser support standard, and you’re still supporting IE9 or old Android versions.  For others you don’t care about browser compatibility at all and are just hacking demos on the newest Chrome.  But “last 2 versions” is a real world standard that I know plenty of teams target.  And it certainly is a reasonable target for new devs learning about JavaScript and the web.  So let’s look at what is natively supported in all targeted browsers if you use this standard today. Spoiler Alert: life is pretty good.</p>
<h3>Available Now</h3>
<h4>All of ES6 and ES2016, and almost all of ES2017</h4>
<p>If you’re distrustful of Babel and have been holding off on learning the new features that have transformed JavaScript over the past few years until they were “browser supported”, now is your time.  Other than shared memory and atomics (more on that below), every single feature from the recent updates to the ECMAScript spec is available in the last 2 versions of all 4 major browsers.</p>
<p>That includes core ES6 stuff like classes, destructuring, and arrow functions.  But also features that were just standardized this summer like <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function">async functions</a>.</p>
<h4>Modern CSS</h4>
<p>Modern CSS specifications like <a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/">Flexbox</a>, <a href="https://css-tricks.com/snippets/css/complete-guide-grid/">CSS Grid</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_variables">CSS Variables</a>, and <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@supports">CSS Feature Queries</a> are all fully supported in these browsers, making creating layouts especially much easier than it had been in the past.</p>
<h4>Promises and Fetch</h4>
<p>Promises have been mostly supported for a while, but they didn’t have native support in IE11, so some folks may still be polyfilling them.  With a last 2 versions standard, you not only don’t need to polyfill Promises, but also can drop any polyfills for the promise based fetch api as well (and use them with async-await natively!).</p>
<h3>Coming Soon</h3>
<p>So there is a ton of stuff that is available today for people targeting the last 2 versions of browsers.  But there is also a bunch of stuff that is almost there:</p>
<h4>Web Assembly and low level primitives</h4>
<p><a href="https://blog.mozilla.org/blog/2017/11/13/webassembly-in-browsers/">WebAssembly is now shipping in the latest version of every major browser</a>.  WebAssembly is a target bytecode for the web that can interop with JavaScript.  Essentially somebody can write C, C++ or Rust code and then compile it to WebAssembly, which runs natively in the browser, potentially much more performantly than equivalent JavaScript code.  The latest version of all browsers also support <a href="http://2ality.com/2017/01/shared-array-buffer.html">SharedArrayBuffer and Atomics</a>, low level APIs for exploring better parallelism support in JavaScript.  In short, it will soon be possible to create much more performant experiences in web browsers than is currently possible.</p>
<h4>WebRTC</h4>
<p>The latest versions of all browsers also support WebRTC, an API for peer to peer communication through browsers.  This potentially opens the door for all types of browser-based text/video chat and collaboration applications.</p>
<h4>Service Workers</h4>
<p><a href="https://jakearchibald.github.io/isserviceworkerready/">Service workers are getting close</a>.  They’re available in every browser but Safari now, and Safari is working on them.  If we get another big <code>x.1</code> release of Safari like last year, they could be available for early adopters across the board within the next 6 months.  </p>
<h3>The web is moving forward together</h3>
<p>It’s fun to see this level of unified activity across the web platform over the past 2 years.  In my 7+ years of front-end development, I’ve never seen a more compatible web than the one we can develop against today.</p>]]></content:encoded>
            <author>ben@benmccormick.org (Ben McCormick)</author>
        </item>
        <item>
            <title><![CDATA[Weekly Links: November 10th 2017]]></title>
            <link>https://benmccormick.org/2017/11/10/friday-links/</link>
            <guid>https://benmccormick.org/2017/11/10/friday-links/</guid>
            <pubDate>Fri, 10 Nov 2017 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<p>I started this new thing last week, <em>Friday Links</em>.  There’s a <a href="https://goo.gl/forms/MwEtFrDwFWzXSRv13">feedback form</a> if you’re a regular reader and want to tell me what you think of it.  Otherwise, enjoy the links!</p>
<h3>JavaScript And The Web</h3>
<p> <a href="https://medium.com/javascript-inside/slaying-a-ui-antipattern-in-react-64a3b98242c">Slaying a UI Antipattern in React – JavaScript Inside</a> - This is an interesting case study of how to work through an architectural problem using React.  I love seeing posts like this that take real world scenarios (I deal with this case of having data that might be in one of several loading states all the time), and identify re-usable patterns for solving them.</p>
<p> <a href="https://jakearchibald.com/2017/netflix-and-react/">Netflix functions without client-side React, and it’s a good thing - JakeArchibald.com</a> - A nice look at what Netflix’s experience removing client-side react from their landing page means and doesn’t mean.  I’m going to be really curious to see how the JS community gets better at enabling fast initial experiences while still having full rich interactivity when the users need it.</p>
<h3>Programming Tools and Practices</h3>
<p><a href="https://prettier.io/">Prettier</a> - Prettier put out a new release this week and now supports Markdown as well as JavaScript, TypeScript, CSS, and GraphQL.  It has been my favorite new tool of 2017, solving a problem I didn’t know I had: the mental overhead of constantly reformatting my own code.  </p>
<p><a href="http://amzn.to/2zvm12Z">The Pragmatic Programmer - Andy Hunt &#x26; Dave Thomas</a> - Not a new book at all, but I like to recommend it at every opportunity.  It’s my favorite resource on the practice of Software Engineering and well worth checking out if you’ve never read it.</p>
<h3>Non-Tech</h3>
<p><a href="https://www.economist.com/news/briefing/21730870-economy-based-attention-easily-gamed-once-considered-boon-democracy-social-media">Once considered a boon to democracy, social media have started to look like its nemesis - The Economist</a> - This is a wide-ranging take on the downsides of social media with a focus on it’s deleterious effects on our political systems.  If you’re on social media and/or you care about the future of politics in your place of living, it is worth a read.  </p>]]></content:encoded>
            <author>ben@benmccormick.org (Ben McCormick)</author>
        </item>
        <item>
            <title><![CDATA[Improving Gatsby Blog Deploy UX]]></title>
            <link>https://benmccormick.org/2017/11/07/blog-deploy-ux/</link>
            <guid>https://benmccormick.org/2017/11/07/blog-deploy-ux/</guid>
            <pubDate>Tue, 07 Nov 2017 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<p>About a year ago I switched back to using a static site generator for this blog.  Specifically, I chose <a href="https://www.gatsbyjs.org/">Gatsby</a> and it has been fantastic.  It’s incredibly easy to customize and make my own, and I can do fun things like adding metadata to my posts to enable features like the “read next” list at the bottom of each post, and the “most popular” posts feature that is actually generated from google analytics data.  The biggest downside of using a static site generator relative to a hosted service though is the annoyance of actually posting.  I could edit or write a post to my <a href="https://ghost.org/">Ghost</a> blog from anywhere, which was a real perk of using that platform.  Until recently I was only able to deploy this site from a single computer, because I needed an API key for Google Analytics to be available.  That has been mostly fine, since I usually work on posts for this site over the course of a few days.</p>
<p>But last week I decided to start aiming for <a href="https://benmccormick.org/2017/11/03/friday-links/">weekly shorter linklog posts</a>, and that meant having a bit more flexibility with my deploys.  So this week I did 2 things: I set up a <a href="https://travis-ci.org/">Travis CI</a> job to auto-deploy my app when changes hit the master branch, and wrote an initial version of a CLI for managing the blog.  The first version just helps me write out a templated new post.  My setup is pretty tailored to this blog, but I thought it’d be helpful to share, and maybe inspire some folks looking to do the same thing for their static site.</p>
<h3>Travis CI</h3>
<p>Travis is a continuous integration environment that is free for open source.  I had used it very minimally for some open source projects, but never to deploy anything so I had to learn about the <code>deploy</code> option travis provides.  In the end my <code>.travis.yml</code> file was pretty simple and looked like this:</p>
<div class="gatsby-highlight">
      <pre class="language-yml"><code>language: node_js
node_js:
- '8'
deploy:
  skip_cleanup: true
  provider: script
  script: scripts/deploy.sh
  on:
    branch: master
env:
  global:
  - ANALYTICS_KEY=./analytics-api-key.json
  - secure: r43TdsxdDrqYtmZiBmBSe+7u0UBdepMWAYmpTGzGJoAt9p0z+CxcR9ZIj4uMPvBtO3n1wcEvylWcmmY6smu57uXNPhQpyYJaw6HlnfKrz5GjRVX6Ti6oDm8Yyhha1IlcS73dJTpApFis30Kv7fsfDvpNcvVxpF1eDUlw2UAYCwI=
before_install:
- openssl aes-256-cbc -K $encrypted_dd5d287df7ed_key -iv $encrypted_dd5d287df7ed_iv
  -in analytics-api-key.json.enc -out analytics-api-key.json -d</code></pre>
      </div>
<p>Breaking that down a bit:</p>
<div class="gatsby-highlight">
      <pre class="language-yml"><code>language: node_js
node_js:
- '8'</code></pre>
      </div>
<p>I’m using node for this project and I want to deploy on node 8, so these lines just make sure I have that environment available.</p>
<div class="gatsby-highlight">
      <pre class="language-yml"><code>deploy:
  skip_cleanup: true
  provider: script
  script: scripts/deploy.sh
  on:
    branch: master</code></pre>
      </div>
<p>I’ve bundled my deploy steps into a script, <code>deploy.sh</code>.  This config tells travis to run the script after my (currently non-existent) tests have completed, and not to remove any built files before starting the deploy.  It also makes it clear that this should only happen for changes to the master branch.</p>
<div class="gatsby-highlight">
      <pre class="language-yml"><code>env:
  global:
  - ANALYTICS_KEY=./analytics-api-key.json
  - secure: r43TdsxdDrqYtmZiBmBSe+7u0UBdepMWAYmpTGzGJoAt9p0z+CxcR9ZIj4uMPvBtO3n1wcEvylWcmmY6smu57uXNPhQpyYJaw6HlnfKrz5GjRVX6Ti6oDm8Yyhha1IlcS73dJTpApFis30Kv7fsfDvpNcvVxpF1eDUlw2UAYCwI=
before_install:
- openssl aes-256-cbc -K $encrypted_dd5d287df7ed_key -iv $encrypted_dd5d287df7ed_iv
  -in analytics-api-key.json.enc -out analytics-api-key.json -d</code></pre>
      </div>
<p>This section looks messy, but its all about the environment variables I need for deploying.  Specifically I’m pulling in a github key for deploys (thats the secure key), and then also pulling my google analytics key from a json file.  The JSON file is stored as an encrypted file in the directory with a key that only Travis can decrypt.  Then I use a public environment variable to tell my deploy script where to look up the file.  That allows me to set a different path locally and still have local deploys work even though I can’t decrypt the checked in JSON file.</p>
<h3>CLI</h3>
<p>I’ve started with an extremely basic CLI using <a href="https://github.com/SBoudrias/Inquirer.js">Inquirer.js</a>.  It asks me a series of questions and then generates a markdown doc with the appropriate YAML headings.  Inquirer.js, lodash, and ES6 template strings make this super easy.  It looks like this:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">const</span> inquirer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'inquirer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash/map'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> find <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash/find'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> mkFile <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../src/utils/file_system'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> categories <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../src/pages/categories.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>categories<span class="token punctuation">;</span>
<span class="token keyword">const</span> moment <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'moment'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> dates <span class="token operator">=</span> <span class="token punctuation">{</span>
  Today<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  Tomorrow<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token string">'Two Days From Now'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token string">'Three Days From Now'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

inquirer
  <span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'list'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'type'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token string">'What Type of Post is this'</span><span class="token punctuation">,</span>
      choices<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'Post'</span><span class="token punctuation">,</span> <span class="token string">'Page'</span><span class="token punctuation">,</span> <span class="token string">'Friday-Links'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      filter<span class="token punctuation">:</span> val <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> val<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'title'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token string">'What should the title be?'</span><span class="token punctuation">,</span>
      validate<span class="token punctuation">:</span> value <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">"Title can't be empty"</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'description'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token string">'What should the description say?'</span><span class="token punctuation">,</span>
      validate<span class="token punctuation">:</span> value <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">"Description can't be empty"</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'key'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token string">'What should the post key be?'</span><span class="token punctuation">,</span>
      validate<span class="token punctuation">:</span> value <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">"Key can't be empty"</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'list'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'category'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token string">'What Category of post is this'</span><span class="token punctuation">,</span>
      choices<span class="token punctuation">:</span> <span class="token function">map</span><span class="token punctuation">(</span>categories<span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      filter<span class="token punctuation">:</span> title <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">find</span><span class="token punctuation">(</span>categories<span class="token punctuation">,</span> <span class="token punctuation">{</span> title <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>key<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'tags'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token string">'Write out any tags you want to use'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'list'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'date'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token string">'When is this going to be posted'</span><span class="token punctuation">,</span>
      choices<span class="token punctuation">:</span> <span class="token function">map</span><span class="token punctuation">(</span>dates<span class="token punctuation">,</span> <span class="token punctuation">(</span>value<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> key<span class="token punctuation">)</span><span class="token punctuation">,</span>
      filter<span class="token punctuation">:</span> key <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> dates<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>answers <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> postDate <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>answers<span class="token punctuation">.</span>date<span class="token punctuation">,</span> <span class="token string">'days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> year <span class="token operator">=</span> postDate<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> formattedDate <span class="token operator">=</span> postDate<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY/MM/DD'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">mkFile</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token string">`/src/pages/posts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>year<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>answers<span class="token punctuation">.</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.md`</span></span><span class="token punctuation">,</span>
      <span class="token template-string"><span class="token string">`---
title: "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>answers<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"
date: "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>formattedDate<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"
layout: "post"
path: "/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>formattedDate<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>answers<span class="token punctuation">.</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/"
description: "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>answers<span class="token punctuation">.</span>description<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"
keywords: "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>answers<span class="token punctuation">.</span>tags<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"
category: "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>answers<span class="token punctuation">.</span>category<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"
key: "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>answers<span class="token punctuation">.</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"
readNext: "ten-things-js,favorite-interview,jest-matchers-1"
---

    `</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>Inquirer makes it really nice to gather up all the information, then I use a utility I’ve already written to dump it in a file.  I want to do a bunch more here in the future here, starting by giving this script the ability to read and parse my existing posts, which will let me enforce uniqueness on names and keys, as well as offer autocomplete on the readNext column, which I’ve left hardcoded for now, since its hard to type free form.  There’s more to come here, and you all may feel free to steal and remix anything you find useful for your own blogs here.</p>]]></content:encoded>
            <author>ben@benmccormick.org (Ben McCormick)</author>
        </item>
        <item>
            <title><![CDATA[Weekly Links: November 3rd 2017]]></title>
            <link>https://benmccormick.org/2017/11/03/friday-links/</link>
            <guid>https://benmccormick.org/2017/11/03/friday-links/</guid>
            <pubDate>Fri, 03 Nov 2017 04:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<p>Today marks the start of a new thing I’m trying with this blog: <em>Friday Links</em> (<strong>Edit: Since renamed to Weekly Links</strong>).  Every Friday I’m going to be gathering some of the best links and content I’ve found that week and sharing it here.  It will be primarily but not completely programming focused, with minimal commentary. Some weeks it may be 2-3 links, some weeks it may be 10, but I’m going to give it a run at making this a true weekly feature.  </p>
<p>If you’re a regular reader (or not) and you have feelings about this, feel free to fill out this <a href="https://goo.gl/forms/MwEtFrDwFWzXSRv13">survey</a> and let me know what you think.  I’m still working through how this should work, though eventually it will almost definitely get integrated into the site as a different type of post than my main articles.  </p>
<p>Without further ado, here are this week’s Friday links:</p>
<h3>JavaScript And The Web</h3>
<p><a href="https://blog.kentcdodds.com/effective-snapshot-testing-e0d1a2c28eca">Effective Snapshot Testing – Kent Dodds</a> - This is a great set of practical tips for using snapshot testing well with Jest.  I’m guilty of sometimes making really large snapshots, and as he says here, I’ve found those tests to be useless because the diffs cause eyes to glaze over.</p>
<p><a href="https://mobiforge.com/news-comment/safari-service-workers-and-other-pwa-good-news-stories">Safari service workers and other PWA good news stories - mobiForge</a> - I’ve never been a big fan of the PWA terminology.  It smells very “marketing-y” to me, in the sense of the word that engineers use as an insult.  Exactly what people mean by a Progressive Web App seems hard to pin down and contextual.  Is it about the technologies used?  The user experience? Is it just that it is installable on phones? Is there a clear checklist that you can check against to see if something is a PWA?  In any case, I am a fan of many of the trends and technology that are getting pushed under the PWA banner, so this article, which discusses how the underlying technologies are being adapted in different places, is indeed good news from my point of view.</p>
<h3>Programming Tools</h3>
<p><a href="https://stackoverflow.blog/2017/10/31/disliked-programming-languages/">What are the Most Disliked Programming Languages? - Stack Overflow Blog</a> -  To be honest, I don’t totally buy the premise of this post.  I don’t think people always list their most disliked languages as the languages they don’t want to work with on Stack Overflow, I think they also list the languages or technologies that people might expect them to work with, but they don’t want to.   Like PHP or CoffeeScript for a web developer, or SQLServer for a DBA. Thats acknowledged but not fully grappled with in the article.  That said, it’s still an interesting dataset, no matter how you label the languages that are being excluded.  </p>
<p><a href="https://pragprog.com/book/modvim/modern-vim">Modern Vim - Drew Neil</a> - Drew Neil’s first book,<a href="http://amzn.to/2h7tQp3">Practical Vim</a>, was my introduction to useful text editing.  I’ve moved off of Vim for my day to day editing over the last few years, but I still plan on buying this book when it goes paperback, because I know I’ll learn at least a few useful tips, and it’s totally possible I’ll be back to Vim as my day to day editor again someday soon.  If you’re a Vim user I definitely recommend checking this out.</p>
<p><a href="https://wynnnetherland.com/journal/extending-the-command-line/">Extending the command line - Wynn Netherland</a> - This is a nice roundup of the various ways you can customize your command line commands to aid in recall, reliability and efficiency.</p>
<h3>Non-Tech</h3>
<p><a href="https://www.nytimes.com/2017/10/30/opinion/when-politics-becomes-your-idol.html?_r=0">When Politics Becomes Your Idol - The New York Times</a> - I thought this was an extremely insightful take on the current state of my country’s relationship with politics.  How many of us are looking to politics for solutions to problems and seeing it demand more and more for fewer and fewer results?  </p>
<p><a href="http://amzn.to/2ipypHO">The Tech-wise Family - Andy Crouch</a> - This is a book that is to some extent written for Christians and to some extent written for parents<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>, but I think that it has a lot to offer anyone who has a sneaking suspicion that the tech in their life, while helping with many things, is also distracting them from things that are more valuable.  This book was the most challenging thing I’ve read this year, and I highly recommend it.</p>
<div class="footnotes">
<hr>
<ol>
<li id="fn-1">
<p>I am a Christian, I am not yet a parent.</p>
<a href="#fnref-1" class="footnote-backref">↩</a>
</li>
</ol>
</div>]]></content:encoded>
            <author>ben@benmccormick.org (Ben McCormick)</author>
        </item>
        <item>
            <title><![CDATA[How To Give A Perfectly Adequate Conference Talk]]></title>
            <link>https://benmccormick.org/2017/10/29/adequate-talks/</link>
            <guid>https://benmccormick.org/2017/10/29/adequate-talks/</guid>
            <pubDate>Mon, 30 Oct 2017 02:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<p>Tech talks at conferences or meetups generally end up being experienced in one of 4 ways by audience members.</p>
<ol>
<li>It’s a disaster, and that leads to <strong>rage</strong>.</li>
</ol>
<blockquote>
<p>This person is not just wasting my time, I don’t even understand what he’s trying to tell me.  Is this a talk about Vue or just him telling his life story?</p>
</blockquote>
<ol start="2">
<li>The talk is executed just fine, but it misses the mark in some way for the audience, leading to <strong>boredom</strong>.</li>
</ol>
<blockquote>
<p>The first 5 minutes seemed ok, but it didn’t catch my attention, and now I’ve been on Facebook for 20 minutes and woah are we already wrapping up?  I don’t really know how Vue relates to my work.  </p>
</blockquote>
<ol start="3">
<li>The talk is perfectly adequate, and the audience leaves with some new and useful <strong>knowledge</strong>.</li>
</ol>
<blockquote>
<p>That was really interesting, I’ll have to check out Vue soon, it sounds like it would really help me write more maintainable web apps.</p>
</blockquote>
<ol start="4">
<li>The talk is incredible and memorable.  It leads to <strong>inspiration</strong>.</li>
</ol>
<blockquote>
<p>Wow I’m looking at web development in a whole new way now.  This really changes how I think about my job!</p>
</blockquote>
<p>I have no idea how to give a talk that inspires people.  But after speaking a decent amount over the last few years, I’ve figured out what helps me give talks that can inform most people, and avoid having people leave bored or enraged.  I want to share what I know, because the truth is that giving a talk at a conference or meetup can be fun and rewarding, and I would love it if you too got the chance to enjoy that.  So here are my tips:</p>
<h2>The Pitch</h2>
<h4>1. Show up!</h4>
<p>The only way to give a talk that will interest and inform other people is to actually attempt it.  If you live in a place that has meetups, those are often the easiest place to start.  They’re usually run by 1 or 2 people who are going to be grateful to find new folks who are willing to speak. Depending on format, you may be able to give a 5 or 15 minute talk along with other speakers at a meetup to ease into things.  If there’s no meetup, you can also apply to conferences.  Almost all conferences have open “Call for Papers” periods where they invite applications, and many of them try to save some spots for new speakers.  Conference speaking is more of a crapshoot though, since they often have many applications for few spots, and your best bet is to apply widely, and possibly suggest several different talk ideas.  This year I applied to speak at 6 conferences, and actually spoke at 2, and that was by far my best ratio since I started applying to speak a few years ago.  </p>
<h4>2. Pick a topic that you’re interested in</h4>
<p>Giving a talk can be a fun experience, but it can also be frustrating for both you and the audience.  The best way to suck all of the joy out it is to give a talk about something that you don’t care about.  If you’re uninterested in the topic, the work to prepare is either going to be a painful grind, or you won’t do it.  In which case sitting through your talk may well be a painful grind for your audience.  </p>
<p>Note that I don’t say to pick a topic you’re passionate about.  Not every talk is going to be the pinnacle of your speaking career, and sometimes there may be nothing out there that is currently changing your life.  You can really help people by sharing the useful, interesting information you have, and this doesn’t need to be more than that.</p>
<h4>3. Pick an audience for whom that topic is relevant</h4>
<p>So you have a talk topic, and that’s great, but does your topic make sense for the people you’re speaking to?  Sometimes when you start speaking you may pick a topic before you’re sure where you’re going to give the talk, other times you may have a place you want to speak, and you need to pick a topic for it.  Either way, make sure that you end up with a topic and an audience that match.  If you’re talking to a group of beginner web programmers, a deep dive into the Rust memory model might not be the best choice.  If you’re speaking to veteran python programmers, a talk about the basics of object oriented programming might miss its mark.  </p>
<p>Sometimes you may not know your audience exactly.  This is especially true for speaking at large multi-track conferences, where there may be developers (and/or non-developers) from a variety of backgrounds.  In this case, you’ll still want to pick the audience you want to target (some subset of the group you know may be there), and then make sure to do a good job of following point #6 below.</p>
<h4>4. Pick a “main takeaway” for your audience</h4>
<p>It’s not enough to just have a topic and audience that generally match.  You’re also going to want to know what you want the audience to get out of it.  Talking about “debugging” to a JavaScript audience could be a good talk, but do you want them to learn</p>
<ul>
<li>how to use Chrome devtools to find performance bugs?</li>
<li>a repeatable step by step workflow for figuring out any bug?</li>
<li>a story about how you solved a specific bug?</li>
</ul>
<p>Unlike the “topic”, the takeaway should be pretty specific.  Given the audience that you’re targeting, what piece(s) of new information do you want them to receive as they walk away from your talk?</p>
<h4>5. Pick a talk format</h4>
<p>There are a few main formats that most tech talks fall into:</p>
<ul>
<li>Present a problem, describe several possible solutions (possibly recommending one)</li>
<li>Present a tool, explain what problems it solves and give examples of using it</li>
<li>Present an idea or way of looking at things, and show how it applies in different situations</li>
<li>Tell your story. Explain how a certain technology, idea, or problem in the tech community has affected your life.</li>
</ul>
<p>All of these formats can work, for a first talk I’d recommend one of the first 2, keeping things concrete and making it easier to get to that “main takeaway”.  </p>
<h4>6. Write a description that tells your audience what to expect</h4>
<p>The final step of putting together a pitch is writing a description that accurately lets attendees know what to expect.  A great title and description do a few things.  </p>
<ul>
<li>You actually have something to submit to a meetup organizer or a conferences call for papers.</li>
<li>A good description helps ground you as you prepare the content of the talk.  You can look at your slides and see if you’re actually focusing on the things you wanted to communicate<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>.  </li>
<li>A well written title and description will help attract your target audience to your talk.  If you’re giving a talk for beginners or advanced users, or users of a particular technology, make sure that’s clear in the description.  People go out of their way to go to talks where they know they’re the target audience, and nothing kills the mood of a talk than a situation where the talk isn’t relevant to most of the audience.  </li>
</ul>
<p>Note that in general, a good description matters more than the exact title of the talk, but if you’re at a multi-track conference, make sure to give a descriptive title, as conferences will often only include the talk name in their schedules, without a top-level description.  Naming your talk about the creative uses of Golang “Go-ing Crazy” is fine for a Go meetup, but if people are going to be choosing what session to attend based on your talks name, something more descriptive would be nice, even if it has a little less personality.</p>
<h2>The Preparation</h2>
<h4>7. Have slides</h4>
<p>I’ve seen some amazing live-coding talks.  I’ve given one myself at a meetup.  There is definitely a place for them, as well as for minimally visual talks with 2-3 slides.  But if you’re aiming for informative, structuring your talk around a good slide deck is your best bet.  </p>
<p>Slides shouldn’t have too much information: they’re the backbone of your talk, and aren’t meant to stand alone<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>.  Instead, they provide structure both for you and the audience as you move through your presentation.</p>
<h4>8. Have a talk track</h4>
<p>Slides are good, but they’re just the start.  You need a talk track that is more than just “reading off my slides”.  To feel really well prepared for a talk, I usually write out a complete script for the talk that I intend to follow, and then edit that after several practice run throughs.  For the actual talk I usually boil most of that script down to bullet points to keep me focused.  There will be some experimentation needed there to figure out what works best for you.</p>
<h4>9. Make sure your A/V setup works!</h4>
<p>I was reminded just last week about the importance of testing that you can give your talk in the venue you’re speaking at with the equipment you have as early as possible.  I was forced to give a talk last week on my manager’s laptop after mine failed to connect to the venue’s projector.  It ended up being a dumb problem on my side that I could have solved if I’d verified my setup earlier and had more time to figure things out.  So that’s my a/v setup parable.  The things to remember here:</p>
<ul>
<li>Show up early and test your setup if at all possible (event organizers are usually happy to help with this and may insist on this)</li>
<li>Bring your own adapters.  In the US, at least be ready to connect to HDMI and VGA.  I can’t speak to what might be common internationally, but at the very least it’s good to be paranoid</li>
<li>Make sure to bring a power cable.  Your slides going black in the middle of your talk is not a good look.</li>
</ul>
<h2>The Delivery</h2>
<h4>10. Have notes</h4>
<p>So now it is time to actually give your talk.  Make sure to bring notes.  Most presentation software programs like Powerpoint and Keynote have nice built in presenter note features for this (make sure to practice setting it up so that you see the notes and the audience just sees the slide). You also can just use paper notes in a notebook. Notes are important to keep you on track in case you freeze, and may be something you just want to read for portions of the talk.  </p>
<p>Here again you have several choices for how to handle notes:</p>
<ul>
<li>You can read your talk from a script. This lowers your ability to connect with your audience, but it is low risk, and you’ll guarantee that you’ll hit the content you intend to.  As a native english speaker, I probably underrate this a bit too.  If you’re presenting in a second language and reading can help you confidently deliver the material, it may be worth doing so.  </li>
<li>You can work off of bullet point notes, which were ideally pulled out of a full script that you wrote originally.  So you’re talking naturally, with some notes to give you structure and help pull you back in if you’re fumbling around.  </li>
<li>You can memorize your talk verbatim.  This is hard and high risk (if you forget something it can become an awkward stumble as you try to get back to your script), but has a chance at being a very compelling experience</li>
</ul>
<p>I have found that bullet point notes work well for me, but if you’re great at memorizing things, or would be more comfortable reading and are ok with sacrificing some connection to the audience, all 3 can work.  </p>
<h4>11. Give context and set expectations (again)</h4>
<p>At the start of your talk, you want to answer 3 questions:</p>
<ol>
<li>Who are you?</li>
<li>Who is this for?</li>
<li>What are you going to be talking about?</li>
</ol>
<p>You may think you answered these questions with your description, but there will definitely be people at your talk who didn’t read your description, and others who misread it.  Giving context at the beginning of your talk helps people prepare to hear the things that matter in your talk.  If this is a conference, it lets people decide whether they want to stay for your talk or not.  Don’t be discouraged if some people walk out of your talk after your explanation.  That’s a sign that you’ve done a good job clarifying the scope of your talk, and honoring their time. Having those folks leave now will be a much better experience than having them staring at Facebook and distracting others through out your talk, and it is now more likely that the people in front of you are the audience you wanted to address.</p>
<h4>12. Be Confident and Grateful</h4>
<p>When you know your topic and you’ve prepared well, the actual speaking part will usually end up being the easiest part.  So be confident.  Not because you’re already a great speaker, or because of some feeling of baseless optimism, but because you’ve done the work to be ready and you have the structure around you to succeed.  Also make sure to be grateful.  A bunch of people showed up to hear you speak.  Appreciate them, give them your best and hopefully try to answer their questions.  Speaking is a great opportunity, and I hope you get the chance to try it.</p>
<h3>More Resources</h3>
<ul>
<li>Rands has a <a href="http://randsinrepose.com/archives/out-loud/">great post</a> on preparing for a presentation.  Lots of great little details in there.</li>
<li><a href="https://www.papercall.io/events">Papercall.io</a> is a great way to find conferences that are looking for speakers</li>
<li>If you’re not already connected with local meetup/interest groups, take a look at <a href="https://www.meetup.com/">Meetup.com</a> and see if there are any in your area.</li>
</ul>
<div class="footnotes">
<hr>
<ol>
<li id="fn-1">
<p>It’s ok to change your description later if things change as you prep the talk.</p>
<a href="#fnref-1" class="footnote-backref">↩</a>
</li>
<li id="fn-2">
<p>People will often ask for the slides of my talk after I give them.  I usually link them, since people ask, but the slides on their own really aren’t a substitute for the talk (and if they are informative to that level, the talk will probably suffer as the audience tries to take in too much information).</p>
<a href="#fnref-2" class="footnote-backref">↩</a>
</li>
</ol>
</div>]]></content:encoded>
            <author>ben@benmccormick.org (Ben McCormick)</author>
        </item>
        <item>
            <title><![CDATA[Taking Advantage of Jest Matchers (Part 2)]]></title>
            <link>https://benmccormick.org/2017/09/04/jest-matchers-2/</link>
            <guid>https://benmccormick.org/2017/09/04/jest-matchers-2/</guid>
            <pubDate>Tue, 05 Sep 2017 03:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<p><em>This post continues my look at Jest matchers from <a href="https://benmccormick.org/2017/08/15/jest-matchers-1/">Part 1</a>.</em></p>
<p>In part 1 I covered the first 4 types of Jest matchers.  In this post I’m going to cover <em>contains</em> matchers, <em>async</em> matchers, <em>snapshot</em> matchers, <em>function</em> matchers and <em>meta</em> matchers, as well as looking at a few extra tips and tricks for using matchers.</p>
<h3>Contains Matchers</h3>
<p>Contains matchers are exactly what they sound like.  They’re matchers that check to see if an array contains an item or if a string contains a substring.  </p>
<h4>toContain and toContainEqual</h4>
<p><code>toContain</code> and <code>toContainEqual</code> both check to see if a value is contained inside of an array or string.  When used against a string, they are both equivalent and check to see if a passed string is a substring of the expression being tested.  This means they serve as a more limited version of <code>toMatch</code> that will only take a substring and not a regex.  When used against an array or array-like object, <code>toContain</code> looks for matches using strict equality while <code>toContainEqual</code> looks for matches using recursive equality<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>.  In practice that looks like</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token comment" spellcheck="true">// toContain does exact matches</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// true</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">'b'</span><span class="token punctuation">,</span> length<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// true</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">'ab'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// true</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token regex">/a/</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// true</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token string">'bc'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>b<span class="token punctuation">:</span> <span class="token string">'cd'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token string">'bc'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// true</span>

<span class="token comment" spellcheck="true">// toContainEqual does recursive matches</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContainEqual</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// true</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token string">'bc'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>b<span class="token punctuation">:</span> <span class="token string">'cd'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContainEqual</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token string">'bc'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// true</span>
</code></pre>
      </div>
<h3>Async Matchers</h3>
<p>Async matchers handle testing functions that have an asynchronous component.  We’ll look at <code>resolves</code> and <code>rejects</code> for testing Promises.  But first, it is worth noting that any matcher can be used for asynchronous testing if necessary.  You just have to use the callback option that is passed to each test function, like so:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Delayed Test'</span><span class="token punctuation">,</span> done <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> delayedEval <span class="token operator">=</span> condition <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token function">delayedEval</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
      </div>
<p>Jest detects whether the <code>done</code> callback has been defined for the function, and if it is waits for 5 seconds to see if <code>done</code> is called before failing, and evaluates any
asynchronous expects that occur before then.  This behavior is inherited from Jasmine, and works ok, but can be a bit difficult to work with.  Jest makes this easier in 2 ways.  First with a set of special matchers for working with promises, and second with a set of meta matchers that can make async tests more reliable.  We’ll get to the meta matchers in a second, but first we’ll look at the promise matchers.</p>
<h4>.resolves, .rejects</h4>
<p><code>resolves</code> and <code>rejects</code> are chaining matchers like <code>not</code> that let you write async tests with Promises.  Using <code>resolves</code> to rewrite the previous example looks like this:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Delayed Test with promises'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> testPromise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> rej<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">res</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>testPromise<span class="token punctuation">)</span><span class="token punctuation">.</span>resolves<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
      </div>
<p>This waits for the promise to resolve, and then compares the resolved output with <code>toBe</code>.  If a rejection is expected, you can replace <code>resolves</code> with <code>rejects</code> for a similar test. This ends up being much clearer in my opinion than the callback-based async tests, since the assertion is much more direct, and you don’t have to worry about cases where <code>done</code> might not be called where it should be.</p>
<h3>Meta Matchers</h3>
<p>Meta matchers pair well with the <code>done</code> async matchers above, if you have to use them.  They just let you test that all of your assertions have actually run. The first one, <code>expect.assertions</code> tests that a specific number of assertions have been run at that point in the test.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'records have a name and an ID'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> record <span class="token operator">=</span> <span class="token function">getRecord</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    expect<span class="token punctuation">.</span><span class="token function">assertions</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// true</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">'fullName'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    expect<span class="token punctuation">.</span><span class="token function">assertions</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
      </div>
<p>This can be useful for async tests to make sure things have run correctly before calling <code>done()</code>, for tests with conditional logic to make sure that the logic played out as expected, and for normal tests as an extra paranoid quality check to make sure that tests aren’t accidentally deleted.</p>
<p><code>expect.hasAssertions</code> is just a simpler version of this test that checks that you’ve asserted something in the test.  It’s useful for the same things as <code>expect.assertions</code> but will be a little less reliable and also a bit less fragile when tests change.</p>
<p>Note that neither <code>expect.assertions</code> nor <code>expect.hasAssertions</code> count as assertions themselves and don’t contribute to the assertion count.</p>
<h3>Snapshot Matchers</h3>
<p>Snapshot testing is one of Jest’s signature features.  It’s been described in depth in many other places, including <a href="https://benmccormick.org/2016/09/19/testing-with-jest-snapshots-first-impressions/">on this blog</a>.  If you’re unfamiliar with snapshot testing, I recommend checking out one of those deeper posts.  But at a high level, snapshots are an assertion that data has remained the same since the last time a test was run.  Jest has serializers for a bunch of built in data types and React components. But it’s possible to define serializers for different data types to determine how that data should be represented in a snapshot.  </p>
<p>The core snapshot function, <code>toMatchSnapshot()</code> is fairly simple to explain. When run the first time, <code>toMatchSnapshot</code> takes the string representation of the data passed to it (generated by whatever serializer is used for that data type) and writes it to a snapshot file.  After the snapshot has been written once, future runs of <code>toMatchSnapshot</code> behave differently.  If Jest is run normally, <code>toMatchSnapshot</code> compares the serialized data to the value in the snapshot file, and fails the test if they are different.  If Jest is run with the <code>-u</code> option, it will instead update the snapshot file with the current serialized value.  This behavior lets us write tests that don’t have a pre-defined “correct value”, instead we can use our test cases to see what has changed, and choose to accept it or not.</p>
<h4>toThrowErrorMatchingSnapshot</h4>
<p>In addition to <code>toMatchSnapshot</code>, Jest offers a second snapshot matcher, <code>toThrowErrorMatchingSnapshot</code>, which catches errors and verifies that they match a snapshot, similar to the <code>toThrow</code> matcher I described in part 1.</p>
<h3>Function Matchers</h3>
<p>One of Jest’s nicer features is its function mocking system.  A full discussion of function mocking is outside the scope of this post, but suffice it to say that you can create “tracked” functions in Jest.  The following matchers work with those tracked functions to verify behavior, using an example of a function that takes another function and calls it with the given arguments.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">const</span> executeFn <span class="token operator">=</span> <span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
</code></pre>
      </div>
<h4>toHaveBeenCalled, toHaveBeenCalledTimes</h4>
<p>The most basic matcher when dealing with functions is <code>toHaveBeenCalled</code>.  It works more or less how it sounds, and determines whether a function has executed during the test.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'does executeFn run the function passed to it?'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> fn <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">executeFn</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
      </div>
<p>Jest also has a related matcher, <code>toHaveBeenCalledTimes</code> which lets you specify how many times a function has been called.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'does executeFn run the function passed to it only once?'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> fn <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">executeFn</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
      </div>
<h4>toHaveBeenCalledWith, toHaveBeenLastCalledWith</h4>
<p>Sometimes you don’t just want to know if a function was called, but want to make sure that it was called with the right arguments.  Jest has you covered.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'does executeFn run the function with the passed arguments'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> fn <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">executeFn</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledWith</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
      </div>
<p><code>toHaveBeenCalledWith</code> lets you check that the function was called with the right arguments.  You have to be careful though, if the function was called multiple times, you’re only verifying that it was called with those arguments at some point.  If you want to get more specific, you can use <code>toHaveBeenLastCalledWith</code>.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'does executeFn run the function with the passed arguments'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> fn <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">executeFn</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">executeFn</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledWith</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// true</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toHaveBeenLastCalledWith</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
      </div>
<h3>Bonus Content</h3>
<p>That’s all for matcher methods, but there are a few other helpful things to know about matchers that I didn’t get to work into any of the matcher categories.  So here you go:</p>
<h3>Extension Methods</h3>
<p>Jest’s expect object has 2 methods for extending what it can do: <code>expect.addSnapshotSerializer</code> and <code>expect.extend</code>.  <code>expect.addSnapshotSerializer</code> lets you add a new snapshot serializer as a one off for a specific test file. A serializer is simply an object that defines <code>test</code> and <code>print</code> methods.  You can learn more <a href="http://facebook.github.io/jest/docs/en/configuration.html#snapshotserializers-array-string">in the docs</a>.</p>
<p><code>expect.extend</code> allows you to define custom matchers!  It takes an object with methods that define the new matchers to add.  Each method should be a function that takes the expected value as a first argument, and then expected arguments to the matcher as the rest of the arguments.  For instance, here is a matcher to see whether a string is a palindrome.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code>expect<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">toBeAPalindrome</span><span class="token punctuation">(</span>received<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> received <span class="token operator">!==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">'expected ${received} to be a string, but it was a ${typeof received}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> reversed <span class="token operator">=</span> received<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> pass <span class="token operator">=</span> received <span class="token operator">===</span> reversed<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pass<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        message<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
          <span class="token template-string"><span class="token string">`expected </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>received<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> not to be a palindrome`</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        pass<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        message<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token template-string"><span class="token string">`expected </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>received<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> to be a palindrome but it was </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>reversed<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> when reversed`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        pass<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Anna is a palindrome'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'anna'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeAPalindrome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// true</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'ann'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBeAPalindrome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<h3>Matcher Wildcards</h3>
<p>Several of the matchers I’ve described in these posts are focused on equality of a particular part of a structure. These include the template matchers, contains matchers, and the <code>toEqual</code> matcher.  In these cases you’re trying to say that some part of an object is equal to something else.  But sometimes you want to be a bit open-minded about part of that.  Maybe you want to ensure that an object has an <code>email</code> property that is a string with the character <code>@</code> in it , or that it has a name property defined, but that could be anything as long as its defined.  Jest has wildcards that help you do this.</p>
<ul>
<li><code>expect.any(&#x3C;constructor>)</code> lets you match any object of a specific type</li>
<li><code>expect.anything()</code> matches anything except null and undefined</li>
<li><code>expect.stringMatching(regexp)</code> matches any string that matches the regex you pass it</li>
<li><code>expect.stringContaining(string)</code> matches strings against a substring</li>
<li><code>expect.arrayContaining(array)</code> matches arrays that have a specific set of values in them</li>
<li><code>expect.objectContaining(object)</code> matches objects that have a specific set of key/value pairs</li>
</ul>
<p>Using wildcards looks like this:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'wildcard example'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>

  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">anything</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// true</span>

  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>foo<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'baz'</span><span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    foo<span class="token punctuation">:</span> expect<span class="token punctuation">.</span><span class="token function">arrayContaining</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<h3>expect outside of Jest</h3>
<p>As I was finishing up this post, Jest 21 was released, along with the exciting news that <code>jest-matchers</code> has been renamed to <code>expect</code> and is now available as a standalone module that can be used in other test frameworks, including in the browser.  So if the matchers in these blog posts have looked appealing to you, but you have an existing test framework that you’re tied to, feel free to check it out <a href="https://www.npmjs.com/package/expect">on npm</a>.</p>
<h2>More Resources</h2>
<ul>
<li>The latest info on all of these matcher APIs is always going to be in their very readable <a href="http://facebook.github.io/jest/docs/en/expect.html">docs</a>.  Check them out for more examples and good links to a deeper dive on some of the other topics that these posts have touched on, like snapshot testing and mock functions.</li>
</ul>
<div class="footnotes">
<hr>
<ol>
<li id="fn-1">
<p>Similar to toBe and toEqual from part 1, strict equality here means it’s the same reference and is equivalent to <code>x === y</code>, while recursive equality means the object’s are structured the same and any object with the same structure and values will be considered equal.</p>
<a href="#fnref-1" class="footnote-backref">↩</a>
</li>
</ol>
</div>]]></content:encoded>
            <author>ben@benmccormick.org (Ben McCormick)</author>
        </item>
    </channel>
</rss>