{
    "version": "https://jsonfeed.org/version/1",
    "title": "benmccormick.org",
    "home_page_url": "http://benmccormick.org",
    "feed_url": "http://benmccormick.org/feed.json",
    "description": "A blog by Ben McCormick",
    "icon": "https://benmccormick.org/logo.png",
    "author": {
        "name": "Ben McCormick"
    },
    "items": [
        {
            "id": "https://benmccormick.org/2018/07/04/evil-javascript/",
            "html_content": "<p>JavaScript developers sometimes complain that their language is unjustly maligned for having too many confusing features.  Plenty of other people are out there explaining why this is misguided, but for this post I want to lean in.  Rather than falling into the <em>traps</em> that JavaScript exposes you to, what if we embrace our language‚Äôs reputation instead, and see what code we can write if we don‚Äôt care about the feelings of others?</p>\n<p>The ‚ÄúEvil JavaScript‚Äù you‚Äôll see today takes advantage of an array of language features. Many of these techniques still work in other languages, so please don‚Äôt worry that I‚Äôm limiting your pursuit of the dark side. But JavaScript certainly has a flair for evil that is hard to match.  If you write code that other people have to work with, the opportunities to annoy, confuse, aggravate and bamboozle are limitless.  The following is a small selection of choice techniques.</p>\n<h4>Modify objects in your getters</h4>\n<p>JavaScript objects can define <code class=\"language-text\">getters</code>, functions that let you access the result of a function as a property.  Used normally, that looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> greeter <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Bob'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">get</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token string\">`Hello </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>greeter<span class=\"token punctuation\">.</span>hello<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Hello Bob</span>\ngreeter<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'World'</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>greeter<span class=\"token punctuation\">.</span>hello<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Hello World</span></code></pre>\n      </div>\n<p>Used evilly though, we can come up with fun self-destructing objects!</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n   foo<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n   bar<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n   baz<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n   <span class=\"token keyword\">get</span> <span class=\"token function\">evil</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> keys <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>keys<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token keyword\">delete</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>keys<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> <span class=\"token string\">'Nothing to see here'</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>Here, every time we read <code class=\"language-text\">obj.evil</code>, we delete one of the other properties on the object, with no indication to the code accessing <code class=\"language-text\">obj.evil</code> that anything extraordinary is happening.  But this is just the start of how we can introduce unexpected side effects.</p>\n<h4>Nobody expects a Proxy!</h4>\n<p>Getters are cool and all, but they‚Äôve been around for years, and many developers know about them.  We now have an even more powerful variation on the same theme with Proxies.  Proxies are an ES6 feature that let you put a wrapper class around an object that lets you control what happens when a user accesses or updates any property.  So we can, for instance define an object that will, one third of the time return a value from a random key whenever a user tries to access a key.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>a<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> handler <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">get</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> prop<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0.33</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">[</span>prop<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> keys <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> keys<span class=\"token punctuation\">[</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>keys<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> evilObj <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> handler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// this is example output that I received running the code</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evilObj<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evilObj<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evilObj<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evilObj<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evilObj<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>evilObj<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3</span></code></pre>\n      </div>\n<p>Our sneakiness is undermined a bit by devtools, where evilObj will be identified as a Proxy, but we can still lead other developers on a merry chase before we‚Äôre caught.</p>\n<h4>Contagious functions</h4>\n<p>So far we‚Äôve talked about how objects can modify themselves, but we can also create innocuous looking functions that infect the objects that are passed to them with strange behavior.  For instance lets say we had a simple <code class=\"language-text\">get</code> function to do safe property lookups on an object that may not exist:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> <span class=\"token function-variable function\">get</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> property<span class=\"token punctuation\">,</span> <span class=\"token keyword\">default</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">default</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n   <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">[</span>property<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>It would be easy to make that function contagious by subtly changing the object it was passed.  For instance we could make it so the retrieved property no longer showed up when the user enumerates the keys.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> <span class=\"token function-variable function\">get</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> property<span class=\"token punctuation\">,</span> defaultValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>obj <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>property <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> defaultValue<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n   <span class=\"token keyword\">let</span> value <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">[</span>property<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">delete</span> obj<span class=\"token punctuation\">[</span>property<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n   Object<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> property<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      value<span class=\"token punctuation\">,</span>\n      enumerable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n   <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">[</span>property<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>a<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">:</span><span class=\"token number\">2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['a', 'b']</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['b']</span></code></pre>\n      </div>\n<p>This is super subtle, since enumeration is neither rare nor particularly common.  Since the actual bug wouldn‚Äôt be tied to the infected object at all, it could persist in a code base for a long time.</p>\n<h4>Messing with Prototypes</h4>\n<p>Sometimes the old ways are best.  One of the most criticized features of the JavaScript language is the ability to modify built-in prototypes.  This was used in the early days of JavaScript to enhance built in objects like arrays.  For instance we can add a <code class=\"language-text\">contains</code> function for arrays like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">Array<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">contains</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>It turns out that doing this in real libraries can <a href=\"http://2ality.com/2016/02/array-prototype-includes.html#frequently-asked-questions\">ruin the language for everyone else</a>.  So providing additional useful prototype methods is a good long con for malicious developers with patience.  But for the impatient sociopaths reading along, we also have some short term fun we can unleash.  The fun thing about prototype manipulation is that it affects all code running in an environment, even if that code is running in modules or closures.  So if we introduce the following code as a 3rd party script (maybe an ad or analytics script?), we can introduce subtle bugs throughout a site.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">Array<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">map</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">let</span> arr2 <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>acc<span class=\"token punctuation\">,</span> val<span class=\"token punctuation\">,</span> idx<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0.95</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         idx <span class=\"token operator\">=</span> idx <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> acc<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">===</span> idx <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>idx <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> idx\n      acc<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> acc<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">return</span> arr2<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>We‚Äôve rewritten <code class=\"language-text\">Array.prototype.map</code> to work just like normal <code class=\"language-text\">map</code> with the exception that we will randomly switch the order of 2 values 1/20th of the time.  An example result:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span><span class=\"token number\">9</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">11</span><span class=\"token punctuation\">,</span><span class=\"token number\">12</span><span class=\"token punctuation\">,</span><span class=\"token number\">13</span><span class=\"token punctuation\">,</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span><span class=\"token number\">15</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">square</span> <span class=\"token operator\">=</span> x <span class=\"token operator\">=></span> x <span class=\"token operator\">*</span> x<span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>square<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1,4,9,16,25,36,49,64,100,81,121,144,169,196,225</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>square<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1,4,9,16,25,36,49,64,81,100,121,144,169,196,225]</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>square<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1,4,9,16,25,36,49,64,81,100,121,144,169,196,225]</span></code></pre>\n      </div>\n<p>We ran map 3 times, and the first was subtly different than the next 2 runs.  It‚Äôs subtle enough that it won‚Äôt always cause anything to happen, and the crazy thing about this hack is that there‚Äôs no real way to know it‚Äôs happening without actually reading the source code that caused it.  Our function doesn‚Äôt show up weirdly in devtools, and it doesn‚Äôt error under strict mode or anything else.  This is how developers go mad.</p>\n<h4>Naming things is hard</h4>\n<p>As one of the 2 hard problems in Computer Science, you don‚Äôt have to be evil to come up with bad names<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>.  But it certainly doesn‚Äôt hurt.  We‚Äôll pass over the chump change of misleading names and outdated comments.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// initialize a date</span>\n<span class=\"token keyword\">let</span> arrayOfNumbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> userid<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Darth Vader'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>No let‚Äôs get to the good stuff.  Did you know that much of unicode can be used to name variables in JavaScript?  If you‚Äôre into fun and games of course, this means that emoji are in play:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> üí© <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> postid<span class=\"token punctuation\">:</span> <span class=\"token number\">123</span><span class=\"token punctuation\">,</span> postName<span class=\"token punctuation\">:</span> <span class=\"token string\">'Evil JavaScript'</span><span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>But we want evil JavaScript, so let‚Äôs go straight to lookalike characters.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> oÔΩÇj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Error!</span></code></pre>\n      </div>\n<p>The <code class=\"language-text\">ÔΩÇ</code> in <code class=\"language-text\">oÔΩÇj</code> may look normal, but it is actually a <em>fullwidth latin small letter b</em> instead of a <em>latin small letter b</em>, and that distinction means that anyone typing in the variable directly is probably going to be very confused.</p>\n<h3>Don‚Äôt be evil</h3>\n<p>Despite appearances, it is the official position of this blog that evil JavaScript should not be encouraged and may in fact be harmful.  That said, it‚Äôs always good to know the ways things can go wrong. Each of these patterns exist out in the wild somewhere.  Hopefully in less malicious forms than I‚Äôve shown here.  But lack of intent doesn‚Äôt make them easier to debug, and knowing just how bad things can get is a good start to seeing these bugs coming.  You never know what bug is sitting out there waiting to strike. Just because you‚Äôre paranoid doesn‚Äôt mean that they‚Äôre not out to get you.</p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p>This may be hard to believe for old time Linux folks of course. They‚Äôve had years to associate the worst naming offender in the industry (Microsoft) with the deepest forms of evil.</p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">‚Ü©</a>\n</li>\n</ol>\n</div>",
            "url": "https://benmccormick.org/2018/07/04/evil-javascript/",
            "title": "Evil JavaScript",
            "date_modified": "2018-07-04T00:00:00Z",
            "author": {
                "name": "Ben McCormick",
                "url": "http://benmccormick.org"
            }
        },
        {
            "id": "https://benmccormick.org/2018/07/02/book-review-atomic-design/",
            "html_content": "<p>The Unix philosophy for designing software, ‚ÄúMake each program do one thing well‚Äù, is a piece of wisdom that goes beyond just programming.  For instance, it also applies to non-fiction writing.  When learning, I find that I gravitate towards small focused resources, rather than monolithic books or websites that aim to teach everything about a specific topic.</p>\n<p><a href=\"http://atomicdesign.bradfrost.com/\">Atomic Design</a> by Brad Frost is a book that does one thing really well: it explains what a design system is, and how you can implement one in your organization.  It doesn‚Äôt try to be a book about CSS, design styles or any of the other myriad topics that touch against design systems.  That focus serves it well, and I found it to be well worth my time.</p>\n<p><a href=\"http://bradfrost.com/blog/link/design-systems/\">Design Systems</a>  are an organized toolkit for creating digital products.  They‚Äôre a set of elements, widgets, patterns, and layouts (atoms, molecules, organisms and templates in the language of the book) that can be combined to build complex sites and applications.  The idea is pretty simple.  But there are some real challenges in implementing one.</p>\n<ol>\n<li><em>What content belongs in a design system?  Where do we draw the boundary as to what belongs and what doesn‚Äôt?</em></li>\n<li><em>How do you build a tool for your design system so that patterns are easily findable, usable, and understandable?</em></li>\n<li><em>How do you keep a design system relevant over time as the product(s) change?</em></li>\n<li><em>How do you convince budget-conscious organizations that maintaining a design system is a good use of time and money?</em></li>\n</ol>\n<p>After a brief introduction to the ideas behind design systems and pattern libraries, these are the challenges that Atomic design tackles.  It discusses a hierarchy for patterns, and methods for pulling them out of existing applications, then moves on to talking about tools for implementing a pattern library, and techniques for navigating organizational politics when starting and maintaining a design system.</p>\n<p>So this book <strong>will be helpful</strong> for you if you are</p>\n<ol>\n<li>Struggling to deal with inconsistencies in your interfaces, or constantly doing custom UI work for each new feature</li>\n<li>Considering implementing a design system/pattern library for your organization</li>\n<li>Hoping to learn more about design systems because somebody else in your organization is pushing for one</li>\n<li>Having trouble maintaining an existing pattern library</li>\n</ol>\n<p>It <strong>won‚Äôt be helpful</strong> for you if you are</p>\n<ol>\n<li>Looking for tips on how to make your interface beautiful</li>\n<li>Seeking hands on information about specific design, CSS or JavaScript techniques</li>\n</ol>\n<p>I enjoyed Atomic Design a lot, and hope that I‚Äôll get to use what I‚Äôve learned in the near future.  As far as I can tell, Atomic design is only available on <a href=\"http://atomicdesign.bradfrost.com/\">Brad Frost‚Äôs site</a>.  You can read the book online there, or buy the paperback version.  If you fall into one of the 4 categories I listed above, I‚Äôd highly recommend checking it out.</p>",
            "url": "https://benmccormick.org/2018/07/02/book-review-atomic-design/",
            "title": "Book Review: Atomic Design",
            "date_modified": "2018-07-02T00:00:00Z",
            "author": {
                "name": "Ben McCormick",
                "url": "http://benmccormick.org"
            }
        },
        {
            "id": "https://benmccormick.org/2018/06/30/weekly-links-06-30-18/",
            "html_content": "<h3>JavaScript &#x26; The Web</h3>\n<p><a href=\"https://www.merrickchristensen.com/articles/headless-user-interface-components/\">Headless User Interface | Merrick Christensen</a></p>\n<p>UI mixins are one of the hardest problems to solve.  Sharing ‚Äúbehavior‚Äù across multiple UI components is difficult to do right.  Merrick has documented an emerging pattern for doing this with React.</p>\n<p><a href=\"https://medium.com/airbnb-engineering/react-native-at-airbnb-f95aa460be1c\">React Native at Airbnb | Airbnb Engineering</a></p>\n<p>This has gotten plenty of attention around the internet, but Airbnb is moving away from React Native after years of heavy use and contributions to the community.  Worth reading as an explanation of the pluses and minuses of React Native, probably not worth reading too much into the move beyond that.</p>\n<p><a href=\"https://remysharp.com/2018/06/26/an-adventure-in-sparse-arrays\">An Adventure in Sparse Arrays | Remy Sharp</a></p>\n<p>For anyone who read my <a href=\"https://benmccormick.org/2018/06/19/code-golf-sparse-arrays/\">‚Äúsparse array code golf‚Äù post</a> the other day, this is a better holistic look at sparse arrays in JavaScript.  I learned several new things here.</p>\n<h3>Programming Practices</h3>\n<p><a href=\"https://medium.com/@ricomariani/understanding-performance-regions-e4b6e09a94da\">Understanding Performance Regions | Rico Mariani</a></p>\n<p>This is a nice high level post about a different way to think about performance monitoring and improvement.</p>\n<h3>Fun</h3>\n<p><a href=\"https://www.youtube.com/watch?v=QjvzCTqkBDQ&#x26;feature=youtu.be\">Paul McCartney Carpool Karaoke</a></p>\n<p>An incredibly fun video.  Paul McCartney showing James Corden around Liverpool.</p>\n<p><a href=\"https://www.bloomberg.com/news/features/2018-06-21/how-nintendo-s-switch-helped-the-japanese-gaming-giant-win-again\">The Legend of Nintendo | Bloomberg</a></p>\n<p>A great writeup on Nintendo‚Äôs last few years and where they stand now.</p>",
            "url": "https://benmccormick.org/2018/06/30/weekly-links-06-30-18/",
            "title": "Weekly Links: June 30th",
            "date_modified": "2018-06-30T00:00:00Z",
            "author": {
                "name": "Ben McCormick",
                "url": "http://benmccormick.org"
            }
        },
        {
            "id": "https://benmccormick.org/2018/06/26/javascript-stale-practices/",
            "html_content": "<p>Best practices don‚Äôt last forever. This is especially true when a field is changing fast, and JavaScript development has changed a lot over the past 10 years.  The old best practices go stale, and new ones take their place.  Here are 5 JavaScript best practices that have gone stale recently.</p>\n<h4>Using the strict mode pragma to opt in to a sane JavaScript subset</h4>\n<p>When <a href=\"https://benmccormick.org/2015/09/14/es5-es6-es2016-es-next-whats-going-on-with-javascript-versioning\">ECMAScript 5</a> was released, it introduced a special <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode\">strict mode</a> that tweaks the behavior of some obscure features of the language.  Now, when a function or script file starts with the string <code class=\"language-text\">&#39;use strict&#39;</code>, code in that scope works differently than the same code without the <code class=\"language-text\">&#39;use strict&#39;</code> string.  Expressions that look like a mistake are flagged as an error instead of being ignored, code is restricted in ways that make it easier to optimize performance, and terms that may be used in future JavaScript versions are reserved as keywords and you can‚Äôt use them as names for variables.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> objWithDuplicates <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Fine normally, an error in strict mode</span>\n<span class=\"token keyword\">with</span><span class=\"token punctuation\">(</span>objWithDuplicates<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// with expressions are syntax errors in strict mode</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> <span class=\"token keyword\">private</span> <span class=\"token operator\">=</span> <span class=\"token string\">'top secret'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// this is a ReferenceError in strict mode</span></code></pre>\n      </div>\n<p>Strict mode was a nice small improvement in JavaScript, and a good way to move past some of the mistakes of the past like <code class=\"language-text\">with</code> expressions.  But even though it was a good idea to use, and I was adding the silly <code class=\"language-text\">&#39;use strict&#39;</code> string to the start of all my functions for a few years, this is no longer necessary for many people.</p>\n<p>The <code class=\"language-text\">use strict</code> string was necessary because the language designers wanted to maintain backwards compatibility, and they needed a way for developers to signal that they were writing new code that they were comfortable holding to a higher standard.  ECMAScript 2015 (<a href=\"https://benmccormick.org/2015/09/14/es5-es6-es2016-es-next-whats-going-on-with-javascript-versioning\">ES6</a>) provided a better way of doing that.  <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export\">JavaScript Modules</a> are a new type of script, and browsers can be confident that scripts loaded that way have been edited in a ES2015+ world.  Because of that confidence, JavaScript modules are strict mode by default.  So if you are using <code class=\"language-text\">import</code> and <code class=\"language-text\">export</code> in your code, you can stop adding <code class=\"language-text\">&#39;use strict&#39;</code> everywhere and just rely on the browser to do the right thing.  If you‚Äôre compiling through <a href=\"https://babeljs.io/\">Babel</a> or other tools you‚Äôll still be ok, as they add the strict mode pragma for you when they compile your classes down to ES5 code.</p>\n<h4>Using anonymous functions when dealing with async code in loops</h4>\n<p>For many years, JavaScript‚Äôs many async use cases combined with the way <code class=\"language-text\">var</code> works to create a classic programmer trap.  Here‚Äôs some jQuery code to put a listener on a series of buttons and alert a different number for each one of them.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> buttons<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i <span class=\"token operator\">++</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>buttons<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>The idea is that if we have a list of 10 buttons, after we run this code clicking the first one will alert <code class=\"language-text\">1</code>, the next one <code class=\"language-text\">2</code>, and so on.  The problem is‚Ä¶ it doesn‚Äôt work.  If there is a list of 10 buttons, all of them will alert <code class=\"language-text\">10</code> when clicked.  But why?   The problem is that <code class=\"language-text\">var</code> doesn‚Äôt create a new variable for each run of the loop.  The technical term here is that <code class=\"language-text\">var</code> isn‚Äôt <em>block-scoped</em>.  It isn‚Äôt limited by a set of curly braces, when <code class=\"language-text\">var</code> is called, it creates a variable that is accessible anywhere inside the function that contains it, or it creates a property on the global object if there is no containing function.  So when we run our loop, we aren‚Äôt creating 10 separate <code class=\"language-text\">i</code> values, we‚Äôre creating 1 <code class=\"language-text\">i</code> value and updating it 9 times.  Since the click handlers don‚Äôt run until the user has clicked the button, <code class=\"language-text\">i</code> has been updated all the way to 9, and every button references it and alerts <code class=\"language-text\">10</code>.</p>\n<p>For years, the recommended way of working around issues like this was to create an inner function.  Because JavaScript variables are function scoped, we can create a new function, pass it the current i value, and execute the function immediately.  When the click handler executes, it will have a reference to the arguments from the inner function, and will receive the correct variable value.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> buttons<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i <span class=\"token operator\">++</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>innerI<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>buttons<span class=\"token punctuation\">[</span>innerI<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>innerI <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>This example works, but it‚Äôs obviously a bit convoluted, and would not look straightforward to a new JavaScript programmer who came across it.  It gives off some unmistakable ‚Äúmagic function‚Äù vibe.  Fortunately we can do better nowadays.</p>\n<p>ECMAScript 2015 introduced the block scoped variable types <code class=\"language-text\">let</code> and <code class=\"language-text\">const</code>.  Now we can create loop iterators that stay scoped to the loop portion that they were assigned in.  This allows us to re-simplify our code, but have it actually work.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> buttons<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i <span class=\"token operator\">++</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>buttons<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<h4>Using closures for all of our private variables</h4>\n<p>JavaScript has never had a first class method for creating objects with private state.  Any normal object you create will have all its properties available for reading and editing by any code that has access to it.  But there has always been a workaround.  We can once again take advantage of JavaScript‚Äôs function scope.  This time we can write a function that creates an object.  The methods of that object will have access to any other variables inside that function.  This is called a closure.  A closure is a function that returns another function that maintains access to the outer function state.  In this case the returned function will be a method on an object.  Here‚Äôs an example with a user, where the id is only readable and the name can only be updated with explicit get and set commands, which won‚Äôt accept a falsy value:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">createUser</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> id <span class=\"token operator\">=</span> <span class=\"token function\">uuid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">getID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>_name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> name <span class=\"token operator\">=</span> _name <span class=\"token operator\">||</span> <span class=\"token string\">'Unknown'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>This object factory pattern is still useful today, but sometimes we want something a bit more object oriented.  Fortunately there are now more ways of doing these things. ES2015 introduced the <code class=\"language-text\">Symbol</code> keyword.  Symbols are unique values that can only be accessed by code that has a reference to the symbol.  So we can use a symbol as a more advanced version of our factory code above, creating a class that accesses it‚Äôs private state via a symbol.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> <span class=\"token constant\">ID</span> <span class=\"token operator\">=</span> <span class=\"token function\">Symbol</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token constant\">NAME</span> <span class=\"token operator\">=</span> <span class=\"token function\">Symbol</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span><span class=\"token constant\">ID</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">uuid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span><span class=\"token constant\">NAME</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">get</span> <span class=\"token function\">id</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span><span class=\"token constant\">ID</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">get</span> <span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span><span class=\"token constant\">NAME</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">set</span> <span class=\"token function\">name</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span><span class=\"token constant\">NAME</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> name <span class=\"token operator\">||</span> <span class=\"token string\">'Unkown'</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>This allows us to keep all of our private state local to the object rather than in a separate closure, and our objects with private state can be created with class constructor syntax when that is preferred or required.</p>\n<p>I want to note that this new best practice will likely become stale itself soon.  TC39 is considering a proposal to add explicit private state to classes.  It is currently in <a href=\"https://ponyfoo.com/articles/tc39-ecmascript-proposals-future-of-javascript#stage-3\">stage 3</a> with TC39 and is likely to become a part of the language.  In the proposal, private state would look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n    #id <span class=\"token operator\">=</span> <span class=\"token function\">uuid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    #name <span class=\"token operator\">=</span> <span class=\"token string\">'Unknown'</span>\n\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span>#name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">get</span> <span class=\"token function\">id</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#id<span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">get</span> <span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#name<span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">set</span> <span class=\"token function\">name</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#name <span class=\"token operator\">=</span> name <span class=\"token operator\">||</span> <span class=\"token string\">'Unkown'</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<h4>Reading <code class=\"language-text\">arguments</code> to create variadic functions</h4>\n<p>Variadic functions are functions that may contain  different numbers of arguments when called.  For instance, a sum function that takes multiple arguments and adds them all together.  Prior to ES6, this was accomplished by using the special <code class=\"language-text\">arguments</code> variable.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> len <span class=\"token operator\">=</span> arguments<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>len <span class=\"token operator\">&lt;</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token string\">'Sum requires at least 2 arguments'</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// convert arguments to a \"real array\"</span>\n    <span class=\"token keyword\">let</span> args <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>slice<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> args<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// sum(1,2) === 3</span>\n<span class=\"token comment\">// sum(1, 10, 20) === 31</span></code></pre>\n      </div>\n<p>Using arguments is a bit messy.  First, it‚Äôs a magic variable like <code class=\"language-text\">this</code> that is automatically available in the scope of any function.  This isn‚Äôt obvious to people who don‚Äôt know about it.  Second, it‚Äôs not a ‚Äúreal array‚Äù, it‚Äôs an ‚Äúarray-like object‚Äù, and thus it doesn‚Äôt have useful methods like <code class=\"language-text\">map</code>, <code class=\"language-text\">filter</code>, <code class=\"language-text\">reduce</code> available on its prototype.  You always have to deal with the whole object, even if you have some named arguments and some unnamed ones.   But ES6 provided a better solution with rest parameters.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>nums<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nums<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token string\">'Sum requires at least 2 arguments'</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> nums<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>Rest parameters allow us to capture a varying-length group of arguments and read them as a real array with a meaningful name we choose. Because it captures a varying-length list of arguments, rest parameters must be the final parameter defined for a function, but they don‚Äôt have to be the first.  You can define a few static parameters and leave a rest parameter to capture the remainder.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> <span class=\"token function-variable function\">createBlogPost</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> date<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>tags<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token function\">uuid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">,</span>\n    metadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        date<span class=\"token punctuation\">,</span>\n        tags<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>Rest parameters can do everything arguments do<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>, but they do it in a less magic way, without the confusion of managing a fake array.  At this point arguments should be considered an anti-pattern.</p>\n<h4>Using slice to convert something to an array</h4>\n<p>The previous snippet contained an extra outdated practice.  Did you notice this line?</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> args <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>slice<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>That was previously the best way to handle fake arrays like <code class=\"language-text\">arguments</code>, NodeLists, or just <code class=\"language-text\">{3: 1, length: 4}</code>. <code class=\"language-text\">slice</code> makes a copy of an array, optionally adding or deleting elements.  Here we‚Äôre only passing <code class=\"language-text\">arguments</code> as the <code class=\"language-text\">this</code> value of the function, so it works the same as <code class=\"language-text\">arr.slice()</code>.  When called without arguments, <code class=\"language-text\">slice</code> is essentially a clone function.  But this code looks pretty bizarre if you haven‚Äôt seen it before.  It also slides into the ‚Äúwait did I mean slice or splice?‚Äù vortex of array method confusion. So it isn‚Äôt a particularly readable solution.</p>\n<p>ES6 introduced the <code class=\"language-text\">Array.from</code> method to improve this situation.  <code class=\"language-text\">Array.from</code> takes an array-like object and creates a real array copy of it.  So it can be a clone method for existing arrays, or a conversion method for fakes like <code class=\"language-text\">arguments</code>.  <code class=\"language-text\">Array.from(arguments)</code> certainly reads a lot cleaner than the slice method.  It should be noted that they aren‚Äôt completely equivalent.  <code class=\"language-text\">slice</code> will leave missing indices as holes, while <code class=\"language-text\">Array.from</code> will add those indices and set them to undefined.  So you can see the following difference</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> fakeArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> length<span class=\"token punctuation\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// convert object to a real array</span>\n<span class=\"token keyword\">let</span> slicedArray <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>slice<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>fakeArray<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> frommedArray <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token keyword\">from</span><span class=\"token punctuation\">(</span>fakeArray<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// filter Out 5s</span>\n<span class=\"token keyword\">let</span> slicedArrayNoFives <span class=\"token operator\">=</span> slicedArray<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">=></span> x <span class=\"token operator\">!==</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> frommedArrayNoFives <span class=\"token operator\">=</span> frommedArray<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">=></span> x <span class=\"token operator\">!==</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>slicedArrayNoFives<span class=\"token punctuation\">)</span> <span class=\"token comment\">// [3]</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>frommedArrayNoFives<span class=\"token punctuation\">)</span> <span class=\"token comment\">// [undefined, 3, undefined]</span></code></pre>\n      </div>\n<p>You can see my <a href=\"https://benmccormick.org/2018/06/19/code-golf-sparse-arrays/\">last post</a> for more on holes in arrays.</p>\n<h3>Moving Forward</h3>\n<p>The fun of this industry is that everything is always changing.  The frustration of this industry is that everything is always changing.  I‚Äôm sure ES2020 or whatever they call it by then will give us plenty of new ‚Äúbest practices‚Äù.  In the meantime, no need to throw away all your code right away.  But if you‚Äôre setting an example for others, it would be a great time to update some visible examples of stale practices to point to the newer, more friendly solutions.  Even if you don‚Äôt have your own blog posts or documentation to change, you can update public documentation.  Did you know that anyone can update the MDN JavaScript documentation?  I was able to add information about module strict mode to the <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode\">MDN article</a> while working on this post.  And you can upvote modern answers to popular old questions on StackOverflow.</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/960870/1424361\">Using <code class=\"language-text\">Array.from</code> to convert <code class=\"language-text\">arguments</code></a></li>\n<li><a href=\"https://stackoverflow.com/a/16661498/1424361\">let instead of closures in loops</a> <sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup></li>\n</ul>\n<p>Or just do some refactoring of high traffic code in your own code bases, so that older code isn‚Äôt copy and pasted, and you have good examples of the better way to do things.</p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p>Ok technically arguments has an <code class=\"language-text\">arguments.callee</code> property that gives you a reference to the calling function, but you can recreate this by giving your function a name, and using <code class=\"language-text\">arguments.callee</code> is an error in strict mode.</p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">‚Ü©</a>\n</li>\n<li id=\"fn-2\">\n<p>Yeah‚Ä¶ that one is my answer.  I promise I‚Äôm not just trolling for upvotes :)</p>\n<a href=\"#fnref-2\" class=\"footnote-backref\">‚Ü©</a>\n</li>\n</ol>\n</div>",
            "url": "https://benmccormick.org/2018/06/26/javascript-stale-practices/",
            "title": "JavaScript ‚ÄúStale Practices‚Äù",
            "date_modified": "2018-06-26T00:00:00Z",
            "author": {
                "name": "Ben McCormick",
                "url": "http://benmccormick.org"
            }
        },
        {
            "id": "https://benmccormick.org/2018/06/23/weekly-links-06-23-18/",
            "html_content": "<h3>JavaScript &#x26; The Web</h3>\n<p><a href=\"https://www.gatsbyjs.org/blog/2018-06-16-announcing-gatsby-v2-beta-launch/\">Announcing Gatsby v2 beta launch! | GatsbyJS</a></p>\n<p>Gatsby continues to be one of the most exciting things happening in web development.  If you‚Äôre unfamiliar, Gatsby is a tool for building performant content-focused sites with React and GraphQL.  This blog has been built on it for the last 18 months or so.  Updating to V2 is pretty straightforward, I‚Äôve been running it on here for the past week with no problems.  And V2 offers some nice improvements in terms of hot loading speed, library updates (it‚Äôs React 16, Babel 7 and Webpack 4 friendly) and API improvements.  It‚Äôs also obvious that since they <a href=\"https://benmccormick.org/2018/05/27/weekly-links-05-27-18/\">announced that Gatsby contributors were forming a company</a> the docs and marketing materials have been quickly moving from ‚Äúindy open source‚Äù level to ‚Äúreal company‚Äù level, which is cool to see.</p>\n<h3>Programming Practices</h3>\n<p><a href=\"http://laputan.org/mud/\">Big Ball of Mud |  Brian Foote and Joseph Yoder </a></p>\n<p>This is an older piece (1999), but a cool reflection on ‚ÄúBig Balls of Mud‚Äù: computer systems that have been designed haphazardly and are now difficult to change.  Besides giving these systems a great name, Foote and Yoder are thoughtful about why these systems come to be, and how and when that may be appropriate.</p>\n<p><a href=\"https://amasad.me/intuition\">Overcoming Intuition in Programming</a></p>\n<p>Some interesting reflections here on how we use frameworks to reduce the cognitively challenging parts of programming.  I can definitely recall feeling less useful outside of my comfort zone when I‚Äôve spent too much time working with ‚Äúintuitive‚Äù code.</p>\n<h3>Books</h3>\n<p><a href=\"https://leanpub.com/javascriptallongesix/read\">JavaScript Allong√© | Reg Braithwaite</a></p>\n<p>I realized the other day that I had never written a review of one of my favorite JavaScript books on this site.  This won‚Äôt count as a full review, but suffice it to say that if you‚Äôre interested in functional programming, want to get a deeper understanding of JavaScript, or really like JavaScript <strong>and</strong> coffee, this is the book for you.</p>\n<p><a href=\"https://amzn.to/2MiGMSV\">On Writing Well | William Zinsser</a></p>\n<p>Over the past year, I‚Äôve been going through a challenge to read 30 books in a year.  I am well aware of my limitations as a writer, so one of the books I added to the list was ‚ÄúOn Writing Well‚Äù, recommended from multiple sources as the best resource for non-fiction writing.</p>\n<p>Reading a 42 year old book<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup> about writing is a nice view into what has changed over the last half century and what hasn‚Äôt.  The basic principles the book lays out are as applicable as ever, however its specific examples often feel a bit dated.  It lacks any direct instruction about the type of writing that now happens in emails, slack and social media<sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup>, but it pointed me back to a time where our public writing was created with more care and resulted in more eloquence than you usually find in today‚Äôs frenzied discourse.  Parts of the book felt dated to me, but there was plenty of practical advice to glean, and even more sections I found inspiring.  I finished up wanting my writing to be better and had some practical ideas about how to make that happen.  And I learned a little bit about painting birds and the salt caravans of the Sahara along the way.  What more can you ask for?</p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p>It was last updated in 2006, so it‚Äôs not completely that old.</p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">‚Ü©</a>\n</li>\n<li id=\"fn-2\">\n<p>There is a great opportunity sitting out there for somebody to write the definitive book on modern business writing skills.</p>\n<a href=\"#fnref-2\" class=\"footnote-backref\">‚Ü©</a>\n</li>\n</ol>\n</div>",
            "url": "https://benmccormick.org/2018/06/23/weekly-links-06-23-18/",
            "title": "Weekly Links: June 23rd",
            "date_modified": "2018-06-23T00:00:00Z",
            "author": {
                "name": "Ben McCormick",
                "url": "http://benmccormick.org"
            }
        },
        {
            "id": "https://benmccormick.org/2018/06/19/code-golf-sparse-arrays/",
            "html_content": "<p>Today on Twitter, <a href=\"http://2ality.com/index.html\">Axel Rauschmayer</a> posted a fun little coding challenge:</p>\n<blockquote class=\"twitter-tweet\" data-lang=\"en\"><p lang=\"en\" dir=\"ltr\">Code golf: check if an Array has holes. I‚Äôll reply with two ideas of mine in a few minutes.</p>&mdash; Axel Rauschmayer (@rauschma) <a href=\"https://twitter.com/rauschma/status/1009053456123027463?ref_src=twsrc%5Etfw\">June 19, 2018</a></blockquote>\n<p>For context, <em>code golf</em> is a type of challenge where participants attempt to find the shortest possible way to express a program.  Arrays that have holes, or sparse arrays, refer to arrays that don‚Äôt have values at every index between their maximum and minimum values.  You can define a sparse array like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n<span class=\"token comment\">// arr.length is 100</span></code></pre>\n      </div>\n<p>or like this</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// arr.length is 3</span></code></pre>\n      </div>\n<p>This is different from <code class=\"language-text\">let arr = [1, undefined, 2]</code>, because the index keys are not defined.  If this is difficult to understand, you can picture arrays as simple objects, with access to the <code class=\"language-text\">Array.Prototype</code> methods and a special <code class=\"language-text\">length</code> property that is aware of numeric keys.  The important thing is not whether a value is defined for a specific index, but whether a key was ever explicitly set.  Axel‚Äôs suggested solutions take advantage of that distinction:</p>\n<blockquote class=\"twitter-tweet\" data-conversation=\"none\" data-lang=\"en\"><p lang=\"en\" dir=\"ltr\">// Does someArray have holes?<br><br>someArray.findIndex((x,i,arr) =&gt; x === undefined &amp;&amp; !(i in arr)) &gt;= 0<br>Object.keys(someArray).length &lt; someArray.length<br>someArray.filter(_ =&gt; true).length &lt; someArray.length</p>&mdash; Axel Rauschmayer (@rauschma) <a href=\"https://twitter.com/rauschma/status/1009056501095428096?ref_src=twsrc%5Etfw\">June 19, 2018</a></blockquote>\n<p>I‚Äôm going to standardize these into a function syntax for the purpose of comparison.  I‚Äôm only going to consider one liners, so we‚Äôll define a simple arrow function <code class=\"language-text\">isSparse</code>, and compare the length of the function bodies.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Solution 1</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">isSparse</span> <span class=\"token operator\">=</span> someArray <span class=\"token operator\">=></span> someArray<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">,</span>arr<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> x <span class=\"token operator\">===</span> undefined <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span>\n<span class=\"token comment\">// Solution 1 condensed (49 characters)</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">isSparse</span> <span class=\"token operator\">=</span> a <span class=\"token operator\">=></span> a<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span><span class=\"token operator\">=></span>x<span class=\"token operator\">===</span>undefined<span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">>=</span><span class=\"token number\">0</span>\n<span class=\"token comment\">// Solution 2</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">isSparse</span> <span class=\"token operator\">=</span> someArray <span class=\"token operator\">=></span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>someArray<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> someArray<span class=\"token punctuation\">.</span>length\n<span class=\"token comment\">// Solution 2 condensed (30 characters)</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">isSparse</span> <span class=\"token operator\">=</span> a <span class=\"token operator\">=></span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length<span class=\"token operator\">&lt;</span>a<span class=\"token punctuation\">.</span>length\n<span class=\"token comment\">// Solution 3</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">isSparse</span> <span class=\"token operator\">=</span> someArray <span class=\"token operator\">=></span> someArray<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>_ <span class=\"token operator\">=></span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> someArray<span class=\"token punctuation\">.</span>length\n<span class=\"token comment\">// Solution 3 condensed (33 characters)</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">isSparse</span> <span class=\"token operator\">=</span> a <span class=\"token operator\">=></span> a<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>_<span class=\"token operator\">=></span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length<span class=\"token operator\">&lt;</span>a<span class=\"token punctuation\">.</span>length</code></pre>\n      </div>\n<p>Axel‚Äôs solutions all rely on the fact that sparse items don‚Äôt have keys, and that Object.keys and Array.prototype methods therefore don‚Äôt iterate over them.  That‚Äôs a good insight and a good foundation for getting even more concise.  We can use a few tricks to do that.</p>\n<p>Let‚Äôs start with his second solution, which was the shortest and clearest in practice and modify it a bit</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// We're comparing the length of the list of keys to the array length</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">isSparse</span> <span class=\"token operator\">=</span> a <span class=\"token operator\">=></span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length<span class=\"token operator\">&lt;</span>a<span class=\"token punctuation\">.</span>length\n<span class=\"token comment\">//But we can use reduce to do this instead (28 characters)</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">isSparse</span> <span class=\"token operator\">=</span> a <span class=\"token operator\">=></span> a<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">=></span>x<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>a<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token operator\">==</span><span class=\"token number\">0</span></code></pre>\n      </div>\n<p>So our first step is to use <code class=\"language-text\">reduce</code> to save 2 characters.  If you haven‚Äôt seen <code class=\"language-text\">reduce</code> before, I recommend checking out <a href=\"https://css-tricks.com/understanding-the-almighty-reducer/\">this great explainer</a> by Sarah Drasner that I linked to in my <a href=\"https://benmccormick.org/2018/06/15/weekly-links-06-15-18/\">Weekly Links post</a> last week.  Essentially though, reduce is a generic method for iterating through an array to produce a new value.  It takes a function and an initial value, and uses the items of the array to iteratively transform the initial value.  In this case, I‚Äôm just decrementing the value for each defined item in the array, starting at length and seeing if it equals 0.  Which ends up being shorter than taking the length of the keys array.  But we can still do better!</p>\n<p>Our next step will take advantage of a property of numbers in JavaScript.  When converting numbers to booleans, <code class=\"language-text\">0</code> is considered <em>falsy</em>, while every other number is considered <em>truthy</em>.  Since we want our function to produce a boolean, we can take advantage of this property, and write our function like this.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Boolean version (27 characters)</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">isSparse</span> <span class=\"token operator\">=</span> a <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span>a<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">=></span>x<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>a<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p>That seems like a bit of a local maximum.  But getting to this point made me realize that we weren‚Äôt actually saving anything by using the boolean version over a comparison, since we can increment instead and end up at the same length.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Counting up to length (27 characters)</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">isSparse</span> <span class=\"token operator\">=</span> a <span class=\"token operator\">=></span> a<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">=></span>x<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&lt;</span>a<span class=\"token punctuation\">.</span>length</code></pre>\n      </div>\n<p><del>Doing it this way though, we can actually save 2 more characters, because if reduce doesn‚Äôt have an initial value, it just uses the unmodified first element in an array as its initial value, and goes from there:</del></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Final (broken) Version (25 characters)</span>\n<span class=\"token comment\">// UPDATE: This doesn't work</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">isSparse</span> <span class=\"token operator\">=</span> a <span class=\"token operator\">=></span> a<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">=></span>x<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&lt;</span>a<span class=\"token punctuation\">.</span>length</code></pre>\n      </div>\n<p><strong>Update: This last solution only works in situations where the array starts with <code class=\"language-text\">1</code>.  So 27 is the best generic solution I can find at this point.  Thanks to <a href=\"https://twitter.com/rauschma/status/1009149034622275585\">Axel</a> for correcting me. Code golf is hard üòî.</strong></p>\n<p>So there you have it.  27 characters to identify sparse arrays.  I‚Äôd love to hear from you if you can do better.  Hit me up on <a href=\"https://twitter.com/ben336\">Twitter</a> or by <a href=\"ben@benmccormick.org\">email</a>.</p>",
            "url": "https://benmccormick.org/2018/06/19/code-golf-sparse-arrays/",
            "title": "Code Golf: Sparse Arrays",
            "date_modified": "2018-06-19T06:00:00Z",
            "author": {
                "name": "Ben McCormick",
                "url": "http://benmccormick.org"
            }
        },
        {
            "id": "https://benmccormick.org/2018/06/18/codemod-survival/",
            "html_content": "<p>Do you like making repetitive syntax updates across many files?  Enjoy the thrill of painstakingly combing through 1000 line diffs that all look the same to see if you made any typos?  Relish that feeling of doubt in the back of your head as you wonder whether you actually caught all instances of the syntax you needed to update when you switched to the next major version of a library?  If so, you should probably stop reading now, because you won‚Äôt like codemods at all.  For the rest of us, codemods are a tool for assisting in large refactoring; they save you time and reduce typos.</p>\n<p>Codemods originated at Facebook, first with a tool named <a href=\"https://github.com/facebook/codemod\">codemod</a> that served as a helper for regex or python based refactoring, allowing you to make iterative changes with pretty diffs, then with <a href=\"https://github.com/facebook/jscodeshift\">jscodeshift</a> a tool for doing more advanced JavaScript refactors that work directly against a data model representation of the code, rather than relying on regex or direct programmatic changes to text.  jscodeshift is extremely powerful, but I found it intimidating to approach.  Once I took the plunge though, it wasn‚Äôt that hard to start writing codemods.  So here are a few quick tips for anyone else who might be interested.</p>\n<h4>1. Start with a goal in mind</h4>\n<p>It‚Äôs always helpful to dive into a new technology by trying to solve a concrete problem.  That‚Äôs especially useful for codemods, because the ideas behind them can seem abstract and poorly documented until you begin focusing on a specific issue.  In my case I was originally motivated to look at codemods when updating an application from using MobX version 3 to MobX version 5.  In MobX3, when you write code without using decorators, a typical model class will look something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> extendObservable<span class=\"token punctuation\">,</span> computed<span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'mobx'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Example</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">extendObservable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n            foo<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            bar<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            currentData<span class=\"token punctuation\">:</span> <span class=\"token function\">computed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> foo <span class=\"token operator\">||</span> bar<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            otherData<span class=\"token punctuation\">:</span> <span class=\"token function\">computed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> foo <span class=\"token operator\">&amp;&amp;</span> bar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            setFoo<span class=\"token punctuation\">:</span> <span class=\"token function\">action</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Set Foo'</span><span class=\"token punctuation\">,</span> val <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>foo <span class=\"token operator\">=</span> val<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            setBar<span class=\"token punctuation\">:</span> <span class=\"token function\">action</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Set Bar'</span><span class=\"token punctuation\">,</span> val <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>bar <span class=\"token operator\">=</span> val<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">unrelatedMethod</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> key<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>I was updating an app with dozens of these model classes.  Unfortunately, in Mobx5, the syntax for these classes has changed, and it now needs to be rewritten like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> extendObservable<span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'mobx'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Example</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">extendObservable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n            foo<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            bar<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">get</span> <span class=\"token function\">currentData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> foo <span class=\"token operator\">||</span> bar<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">get</span> <span class=\"token function\">otherData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> foo <span class=\"token operator\">&amp;&amp;</span> bar<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            setFoo<span class=\"token punctuation\">:</span> val <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>foo <span class=\"token operator\">=</span> val<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            setBar<span class=\"token punctuation\">:</span> val <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>bar <span class=\"token operator\">=</span> val<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n            setFoo<span class=\"token punctuation\">:</span> <span class=\"token function\">action</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Set Foo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            setBar<span class=\"token punctuation\">:</span> <span class=\"token function\">action</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Set Bar'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">unrelatedMethod</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> key<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>Computeds must be shifted to gets, action functions have to be pulled out of their wrapper function calls, but the wrapper and action names have to be moved down to a new second object.  This is really finicky to do by hand or with a text editor macro, because it‚Äôs a lot more complicated than just find and replace.  I‚Äôd usually be converting from arrow functions that might or might not have blocks and return statements currently, and I‚Äôd have to move the actions down to the new object correctly even though some of the models had 10+ action functions.   Facing several hours worth of finicky manual or script assisted refactoring work was enough to convince me it was time to learn about codemods.</p>\n<h4>2. Create a small example and learn about its AST</h4>\n<p>My first productive step towards creating a Mobx3to5 codemod for my codebase was creating the example code above.  I iterated on it a bit as I found new things I cared about; I didn‚Äôt realize at first that computeds needed to be changed as well as actions, and I eventually realized I needed to handle 2 types of arrow function syntax. But the initial version I wrote got me going.  Having a stripped down example of the code I cared about without the baggage of my real codebase was valuable, and being able to update it to include all the cases I cared about during testing was even better.</p>\n<p>Once I created the example, I was able to understand better what I was trying to do by examining its AST.  An AST (Abstract Syntax Tree) is a representation of a JavaScript file‚Äôs source code as a tree data structure.  For instance here‚Äôs a portion of the AST for a basic Hello World program:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\">\n      <pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Program\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"sourceType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"module\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"body\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ExpressionStatement\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"expression\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CallExpression\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"callee\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MemberExpression\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"object\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Identifier\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"console\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"_babelType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Identifier\"</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"property\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Identifier\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"log\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"_babelType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Identifier\"</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"computed\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"_babelType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MemberExpression\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"arguments\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Literal\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hello World\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"rawValue\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hello World\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"raw\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"'Hello World'\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"_babelType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Literal\"</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"_babelType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CallExpression\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"_babelType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ExpressionStatement\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>This is a simplified example that looks only at the semantic structure of the syntax.  The full version also contains information about the indenting and exact text of the code, and comes out to about 600 lines when represented as formatted JSON.   All of this from <code class=\"language-text\">console.log(&#39;Hello World&#39;);</code>.  Fortunately there‚Äôs a nice tool for exploring ASTs.</p>\n<p><a href=\"http://astexplorer.net/\">AST Explorer</a> is a site that lets you enter some JavaScript code, and then visualize the AST that represents the code.  When I put my example code above, in, I was able to see that the computed expressions in my original code showed as a <code class=\"language-text\">CallExpression</code> with an <code class=\"language-text\">ArrowFunctionExpression</code> as an argument.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/computed-ast-566c7da27d68ddf6d09c7859481c3a91-d5dfd.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 570px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 52.06143896523848%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABj0lEQVQoz32Sy47TMBRA8/8LVkjzFbBgx0gsGXXJBhhVQ1HiOG/bafNumh5uMpkhI0EtXdm6j+P78ipb47KaIBwwbqKqoWpg6CdUoPn6sONx/4Tv+0RRhFKKOI4JgoBIh6hQobXGWkue53h931KdDL+e9kRhyNClXKeK+XT9gHUOI85FUSwyBxljyBKBaZ+fSqOShNJZnPh6bRNJ6A/S6Bvq93dC/4HSHmiamrqqlp9nx7dSYouEQCsOiSUpZt1x8fXaVupjosgNaWIo8yN9PdK0Z2bbC3C+X8WdcMWBTH9AxV8wxT0ntxPbnGHbLuWdh4G+6xiGnulyWXSzbZvh8l6BR7enjN+h4ztO5j2N+yj2Eq+ua+lhJX1xtN3I9vwfeMQZnyL5RJzek+WfpU27tYcSNF0mye7MZZq4Xq+L/Av4Cl1vX4UEUSZly9CMfCKD8cbxbVa3gH8zlMmbXCBm0T1P+Lm/3nkFbkE3gesdRDFa1mVeo5dVWkoeN8BtlreAxhr2QYwSaJKmi+Syo7PtD7qx9vy8Vq9QAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"AST explorer screenshot showing the CallExpression syntax\"\n        title=\"\"\n        src=\"/static/computed-ast-566c7da27d68ddf6d09c7859481c3a91-d766e.png\"\n        srcset=\"/static/computed-ast-566c7da27d68ddf6d09c7859481c3a91-a6b6e.png 143w,\n/static/computed-ast-566c7da27d68ddf6d09c7859481c3a91-8e488.png 285w,\n/static/computed-ast-566c7da27d68ddf6d09c7859481c3a91-d766e.png 570w,\n/static/computed-ast-566c7da27d68ddf6d09c7859481c3a91-13239.png 855w,\n/static/computed-ast-566c7da27d68ddf6d09c7859481c3a91-cab6d.png 1140w,\n/static/computed-ast-566c7da27d68ddf6d09c7859481c3a91-d5dfd.png 1237w\"\n        sizes=\"(max-width: 570px) 100vw, 570px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>When I put the result code I wanted in, I could see that I would need to switch the property that contained the callexpression to have a type <code class=\"language-text\">get</code> and would need to replace the call expression with a function expression.</p>\n<h4>3. Start with a small edit</h4>\n<p>As a starting point, I decided I wanted to write a script that could find MobX classes and just add the second object argument to extendObservable, with a dummy property.  So this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">extendObservable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    foo<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    bar<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    currentData<span class=\"token punctuation\">:</span> <span class=\"token function\">computed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> foo <span class=\"token operator\">||</span> bar<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    otherData<span class=\"token punctuation\">:</span> <span class=\"token function\">computed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> foo <span class=\"token operator\">&amp;&amp;</span> bar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    setFoo<span class=\"token punctuation\">:</span> <span class=\"token function\">action</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Set Foo'</span><span class=\"token punctuation\">,</span> val <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>foo <span class=\"token operator\">=</span> val<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    setBar<span class=\"token punctuation\">:</span> <span class=\"token function\">action</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Set Bar'</span><span class=\"token punctuation\">,</span> val <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>bar <span class=\"token operator\">=</span> val<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>would become this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">extendObservable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    foo<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    bar<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    currentData<span class=\"token punctuation\">:</span> <span class=\"token function\">computed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> foo <span class=\"token operator\">||</span> bar<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    otherData<span class=\"token punctuation\">:</span> <span class=\"token function\">computed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> foo <span class=\"token operator\">&amp;&amp;</span> bar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    setFoo<span class=\"token punctuation\">:</span> <span class=\"token function\">action</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Set Foo'</span><span class=\"token punctuation\">,</span> val <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>foo <span class=\"token operator\">=</span> val<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    setBar<span class=\"token punctuation\">:</span> <span class=\"token function\">action</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Set Bar'</span><span class=\"token punctuation\">,</span> val <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>bar <span class=\"token operator\">=</span> val<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> foo<span class=\"token punctuation\">:</span> <span class=\"token string\">'bar'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>To do this, I took an existing script that I found in <a href=\"https://github.com/jhgg/js-transforms\">this repo of small codemod examples</a> and modified it to lookup <code class=\"language-text\">extendObservable</code> calls and add a second argument.  I filtered it to only include calls with 2 arguments, in case I ran the code a second time<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">,</span> api<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> j <span class=\"token operator\">=</span> api<span class=\"token punctuation\">.</span>jscodeshift<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token function\">j</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// We're looking for a CallExpression for extend observable</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">.</span>CallExpression<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n            callee<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n                name<span class=\"token punctuation\">:</span> <span class=\"token string\">'extendObservable'</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// Verify that it's only using 2 arguments so far, and that the second one is an Object Expression</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">=></span> p<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>arguments<span class=\"token punctuation\">.</span>length <span class=\"token operator\">==</span> <span class=\"token number\">2</span> <span class=\"token operator\">&amp;&amp;</span> p<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>arguments<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>type <span class=\"token operator\">==</span> <span class=\"token string\">\"ObjectExpression\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// Now we want to</span>\n            <span class=\"token comment\">// 1. Add a 3rd argument object</span>\n            <span class=\"token keyword\">let</span> args <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>arguments<span class=\"token punctuation\">;</span>\n            args<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">.</span><span class=\"token function\">objectExpression</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">.</span><span class=\"token function\">property</span><span class=\"token punctuation\">(</span><span class=\"token string\">'init'</span><span class=\"token punctuation\">,</span>j<span class=\"token punctuation\">.</span><span class=\"token function\">identifier</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">.</span><span class=\"token function\">literal</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">// TODO: 2. Move action declarations to that argument</span>\n            <span class=\"token comment\">// TODO: 3. Convert action statements to plain functions</span>\n            <span class=\"token comment\">// TODO: 4. Convert computeds to get statements</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">toSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>This is a working script to achieve my simple goal.  To break it down:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">j</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">.</span>CallExpression<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n            callee<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n                name<span class=\"token punctuation\">:</span> <span class=\"token string\">'extendObservable'</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p>jscodeshift provides a jQuery style api for traversing a tree.  Here we‚Äôre looking for <code class=\"language-text\">CallExpression</code>s that have the name <code class=\"language-text\">extendObservable</code>.  We now have a collection of these expressions, and we can filter it down to only the expressions that have 2 arguments.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">=></span> p<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>arguments<span class=\"token punctuation\">.</span>length <span class=\"token operator\">==</span> <span class=\"token number\">2</span> <span class=\"token operator\">&amp;&amp;</span> p<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>arguments<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>type <span class=\"token operator\">==</span> <span class=\"token string\">\"ObjectExpression\"</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p>Next we want to go through each callExpression and transform it.  In this case by finding it‚Äôs arguments list and pushing a new one, using the jsCodeshift API to simply generate the AST objects neededed to represent <code class=\"language-text\">{foo: bar}</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// Now we want to</span>\n            <span class=\"token comment\">// 1. Add a 3rd argument object</span>\n            <span class=\"token keyword\">let</span> args <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>arguments<span class=\"token punctuation\">;</span>\n            args<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">.</span><span class=\"token function\">objectExpression</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">.</span><span class=\"token function\">property</span><span class=\"token punctuation\">(</span><span class=\"token string\">'init'</span><span class=\"token punctuation\">,</span>j<span class=\"token punctuation\">.</span><span class=\"token function\">identifier</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">.</span><span class=\"token function\">literal</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">// TODO: 2. Move action declarations to that argument</span>\n            <span class=\"token comment\">// TODO: 3. Convert action statements to plain functions</span>\n            <span class=\"token comment\">// TODO: 4. Convert computeds to get statements</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p>Finally, we call <code class=\"language-text\">.toSource()</code> to write the tranformed AST back to the file.</p>\n<h4>4. Test your edit</h4>\n<p>Because this type of coding lends itself to experimentation, it‚Äôs important to develop a good feedback loop while working on your codemod.  If you have a simple example you‚Äôre off to a good start.  The next step is to find a good way to run your script and see the output.  Simply running your test is a bit frustrating, because jscodeshift is destructive.  It overwrites your file in place, and doesn‚Äôt save a copy.  You can get around this though by adding <code class=\"language-text\">--dry --print</code> flags to your command line call</p>\n<p><code class=\"language-text\">jscodeshift -t my-codemod.js example.js</code></p>\n<p>will run the transform defined in <code class=\"language-text\">my-codemod.js</code> against <code class=\"language-text\">example.js</code> and modify it in place.</p>\n<p><code class=\"language-text\">jscodeshift --dry --print -t my-codemod.js example.js</code></p>\n<p>will print the transformed file to the console and not update example.js.</p>\n<p>For simple codemods and small example files, this is a nice way to iterate quickly.  For more extensive codemods with multiple test cases, I‚Äôm excited to try out jscodeshift‚Äôs Jest support<sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup>.  It has helper methods for working with transforms, and a workflow of Jest watch checking the output of several inputs against several expected outputs would be lovely.</p>\n<h4>5. Iterate</h4>\n<p>After I got that first edit working, it was simply a matter of working through my list.  I needed to remove the experimental <code class=\"language-text\">foo:bar</code> and then</p>\n<ol>\n<li>Move action declarations to the new argument object</li>\n<li>Convert action declarations to plain functions in the existing object</li>\n<li>Convert computeds to get statements</li>\n</ol>\n<p>I was able to take those one at a time, and my final script looked something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">,</span> api<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> j <span class=\"token operator\">=</span> api<span class=\"token punctuation\">.</span>jscodeshift<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">buildDecoratorPropertiesFromCurrentObject</span> <span class=\"token operator\">=</span> currentObj <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token keyword\">let</span> decoratorProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        currentObj<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>prop <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prop<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'CallExpression'</span> <span class=\"token operator\">&amp;&amp;</span> prop<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>callee<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'computed'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                prop<span class=\"token punctuation\">.</span>kind <span class=\"token operator\">=</span> <span class=\"token string\">'get'</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">let</span> fnBody <span class=\"token operator\">=</span> prop<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>arguments<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fnBody<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'ArrowFunctionExpression'</span> <span class=\"token operator\">&amp;&amp;</span> fnBody<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>type <span class=\"token operator\">!==</span> <span class=\"token string\">'BlockStatement'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    prop<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> j<span class=\"token punctuation\">.</span><span class=\"token function\">functionExpression</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> fnBody<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">,</span>\n                        j<span class=\"token punctuation\">.</span><span class=\"token function\">blockStatement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">.</span><span class=\"token function\">returnStatement</span><span class=\"token punctuation\">(</span>fnBody<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                    prop<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> j<span class=\"token punctuation\">.</span><span class=\"token function\">functionExpression</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> fnBody<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">,</span> fnBody<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">let</span> dataProps <span class=\"token operator\">=</span> currentObj<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>prop <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>prop<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'CallExpression'</span> <span class=\"token operator\">&amp;&amp;</span> prop<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>callee<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'computed'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        dataProps<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>prop <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prop<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'CallExpression'</span> <span class=\"token operator\">&amp;&amp;</span> prop<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>callee<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'action'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">// copy action to the decorator area first...</span>\n                <span class=\"token keyword\">let</span> args <span class=\"token operator\">=</span> prop<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>arguments<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">let</span> dupProp <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> prop<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                dupProp<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> dupProp<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                dupProp<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>arguments <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> args<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n                decoratorProps<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>dupProp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                <span class=\"token comment\">// then flatten things out</span>\n                prop<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> args<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>dataProps<span class=\"token punctuation\">,</span> decoratorProps<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">j</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// We're looking for a CallExpression for extend observable</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">.</span>CallExpression<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n            callee<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n                name<span class=\"token punctuation\">:</span> <span class=\"token string\">'extendObservable'</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// Verify that it's only using 2 arguments so far, and that the second one is an Object Expression</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">=></span> p<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>arguments<span class=\"token punctuation\">.</span>length <span class=\"token operator\">==</span> <span class=\"token number\">2</span> <span class=\"token operator\">&amp;&amp;</span> p<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>arguments<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>type <span class=\"token operator\">==</span> <span class=\"token string\">\"ObjectExpression\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// Now we want to</span>\n            <span class=\"token comment\">// 1. Add a 3rd argument</span>\n            <span class=\"token comment\">// 2. Move action declarations to that argument</span>\n            <span class=\"token comment\">// 3. Convert action statements to plain functions</span>\n            <span class=\"token comment\">// 4. Convert computeds to get statements, or just move them down to the second object?</span>\n            <span class=\"token keyword\">let</span> args <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>arguments<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span>dataProps<span class=\"token punctuation\">,</span> decoratorProps<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">buildDecoratorPropertiesFromCurrentObject</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            args<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>properties <span class=\"token operator\">=</span> dataProps<span class=\"token punctuation\">;</span>\n            args<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">.</span><span class=\"token function\">objectExpression</span><span class=\"token punctuation\">(</span>decoratorProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">toSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>That looks rather crazy, but the <code class=\"language-text\">buildDecoratorPropertiesFromCurrentObject</code> is mostly straightforward data manipulation, looking for some patterns in the data, and replacing them with a different pattern.  Everything else is just the same base code from our initial example.</p>\n<h4>6. Use version control and code reviews!</h4>\n<p>Actually running a finished transform against a codebase is crazy easy.  Just give it a base folder, and <code class=\"language-text\">jscodeshift</code> will run your script against all JavaScript files in the directory.  This is definitely a ‚ÄúWith great power comes great responsibility‚Äù tool though.  Before running jscodeshift across a large code base, make sure you are using version control and that you‚Äôve checked in any other changes.  Because the script will update many files at once, you want to be able to isolate the change and review it carefully afterwards, to make sure that you see what is different, and that those changes look right.  In my case, I got to be <em>done</em> with my script twice, because the first time I thought it was ready to execute across all of the app files, things still went wrong.  It was easy to fix though, since I was able to just checkout my changes and try again.</p>\n<h3>Resources</h3>\n<p>If you have a change that you want to make to your codebase, but have been holding off because you think it would take forever, I definitely encourage you to check codemods out.  They‚Äôre not as scary as you think!  Here are some more resources to get started:</p>\n<ul>\n<li><a href=\"https://github.com/facebook/jscodeshift\">facebook/jscodeshift</a></li>\n<li><a href=\"http://astexplorer.net/\">AST Explorer</a></li>\n<li><a href=\"https://medium.com/@andrew_levine/writing-your-very-first-codemod-with-jscodeshift-7a24c4ede31b\">Writing Your First codemod with jscodeshift</a></li>\n<li><a href=\"https://medium.com/@cpojer/effective-javascript-codemods-5a6686bb46fb\">Effective JavaScript Codemods</a></li>\n</ul>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p>This is one of many assumptions I made that won‚Äôt be true for MobX classes generally.  I was writing a script to convert my app to MobX5 compatible syntax, not write a general case update tool.  In the end there were a few examples that violated my assumptions in the codebase, and I had to update 2 files by hand.</p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">‚Ü©</a>\n</li>\n<li id=\"fn-2\">\n<p>jscodeshift was created by Christoph Pojer who is also one of the primary maintainers of Jest.</p>\n<a href=\"#fnref-2\" class=\"footnote-backref\">‚Ü©</a>\n</li>\n</ol>\n</div>",
            "url": "https://benmccormick.org/2018/06/18/codemod-survival/",
            "title": "A Codemod Survival Guide",
            "date_modified": "2018-06-18T00:00:00Z",
            "author": {
                "name": "Ben McCormick",
                "url": "http://benmccormick.org"
            }
        },
        {
            "id": "https://benmccormick.org/2018/06/15/weekly-links-06-15-18/",
            "html_content": "<h3>JavaScript &#x26; The Web</h3>\n<p><a href=\"https://www.graphqlstack.com\">GraphQL Stack</a></p>\n<p>This is a nice overview of the technologies involved with GraphQL, for anyone who has heard of the technology but isn‚Äôt quite sure how it all fits together.</p>\n<p><a href=\"https://css-tricks.com/understanding-the-almighty-reducer/\">Understanding The Almighty Reducer | Sarah Drasner</a></p>\n<p>Moving from a loop mindset to making proper use of forEach/map/filter/reduce was one of the biggest shifts I made when moving from Java development to JavaScript.  Reduce especially can be hard to learn initially, and it never becomes simple.  This is a great introduction for those who are unfamiliar or haven‚Äôt gotten comfortable with writing reducers yet.</p>\n<h3>Software + Business</h3>\n<p><a href=\"https://seths.blog/2018/06/on-paying-for-software/\">On paying for software | Seth Godin</a></p>\n<p>This mirrors my opinions on paying for software pretty well.  There‚Äôs a place in the world for free apps, and I definitely have passed on apps because of price before.  But the apps I‚Äôve used that have had real value to me have almost always been paid, usually these days as an ongoing subscription.  The exceptions, like Twitter, tend to come with frustrating downsides that are difficult to disentangle from the free-to-play model.</p>\n<h3>Tech World</h3>\n<p><a href=\"https://www.theatlantic.com/science/archive/2018/06/its-possible-to-reverse-climate-change-suggests-major-new-study/562289/\">Climate Change Can Be Reversed by Turning Air Into Gasoline | The Atlantic</a></p>\n<p>This seems really promising.</p>\n<p><a href=\"https://weblog.rogueamoeba.com/2018/06/14/on-the-sad-state-of-macintosh-hardware/\">On The Sad State of Macintosh Hardware | Rogue Amoeba</a></p>\n<p>I‚Äôm lucky enough to have access to 2 2015 era Macbook Pros (1 for home, 1 for work) and they‚Äôre amazing machines.  I‚Äôm hoping that they both have long lifespans. But I‚Äôm increasingly not sure what my next laptop will be whenever I next have a choice.  It seems like the laptops since then have lost some things I appreciate about my current laptops (Magsafe charger, HDMI port) and made the keyboard significantly worse, with minimum benefits.  I hope that Apple can right this ship.</p>",
            "url": "https://benmccormick.org/2018/06/15/weekly-links-06-15-18/",
            "title": "Weekly Links: June 15th",
            "date_modified": "2018-06-15T00:00:00Z",
            "author": {
                "name": "Ben McCormick",
                "url": "http://benmccormick.org"
            }
        },
        {
            "id": "https://benmccormick.org/2018/06/10/weekly-links-06-10-18/",
            "html_content": "<h3>JavaScript &#x26; The Web</h3>\n<p><a href=\"https://daverupert.com/2018/06/the-react-is-just-javascript-myth/\">The React is ‚Äújust‚Äù JavaScript Myth | Dave Rupert</a></p>\n<p>I‚Äôve been thinking a lot about the reasons that JavaScript development is perceived as intimidating and over-complicated the past few weeks.  Might have a full post on that soon, but for now, there‚Äôs a good point here.</p>\n<p>React is relatively simple at it‚Äôs core, but it‚Äôs difficult to find examples of using it in the wild, that don‚Äôt require you to learn Webpack/Babel/npm at minimum, and many ‚Äústarting points‚Äù will also toss in Redux/React Router/Jest/etc as well.</p>\n<p><a href=\"https://medium.com/@mweststrate/mobx-5-the-saga-continues-4852bce05572\">MobX 5: the saga continues‚Ä¶ | Michael Weststrate</a></p>\n<p>MobX is the first major library I‚Äôve seen to take advantage of proxies to give normal looking JavaScript objects/arrays magic powers<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>.  This sort of ‚Äújust make it work in the prettiest way possible‚Äù API is the type of thing that tends to produce really cool results as long as it works correctly 100% of the time, but becomes a huge pain as soon as it‚Äôs flaky.  I‚Äôve never had any problems with MobX after using it for 2 years, so I‚Äôm hopeful seeing them as an early adapter here.  Will be interested to see if they start getting used more widely going forward.  If so, I hope that browser start thinking about how they can expose these types of patterns well in developer tools.  How do you drop into a side effect caused by a proxy in a debugger?  It‚Äôs an interesting problem</p>\n<p><a href=\"http://2ality.com/2014/12/es6-proxies.html\">Meta programming with ECMAScript 6 proxies | 2ality</a></p>\n<p>In case I lost anybody with my discussion of the last link, here‚Äôs an old but good walkthrough of what Proxies are and how you can use them to create some pretty magical APIs.</p>\n<h3>Microsoft Buying Github</h3>\n<p><a href=\"https://changelog.com/spotlight/14\">üî• Our reactions to Microsoft buying GitHub |Adam Stacoviak &#x26; Jerod Santo</a></p>\n<p>A <a href=\"https://changelog.com/\">Changelog</a> podcast that summarizes the reaction of the 2 primary Changelog hosts to the annoucement as well as collecting reactions from around the internet.</p>\n<p><a href=\"https://github.com/martenbjork/github-xp\">github-xp | M√•rten Bj√∂rk</a></p>\n<p>This is just fun.  A Chrome extension to render Github in the style of Windows XP.</p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p>Even if they chose to announce that in the silliest way possible</p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">‚Ü©</a>\n</li>\n</ol>\n</div>",
            "url": "https://benmccormick.org/2018/06/10/weekly-links-06-10-18/",
            "title": "Weekly Links: June 10th",
            "date_modified": "2018-06-10T00:00:00Z",
            "author": {
                "name": "Ben McCormick",
                "url": "http://benmccormick.org"
            }
        },
        {
            "id": "https://benmccormick.org/2018/06/05/es6-the-bad-parts/",
            "html_content": "<p>This month is the 3 year anniversary of the ECMAScript2015 spec, <a href=\"https://benmccormick.org/2015/09/14/es5-es6-es2016-es-next-whats-going-on-with-javascript-versioning\">better known as ES6</a>.  It was a spec update that brought a ton of features to the JavaScript language, and the start of a new era of improving the language.  It was also the last ‚Äúbig bang‚Äù release of JavaScript, as TC39 has now moved to a pattern of annual small releases rather than making large multi-year language releases.</p>\n<p>There has been a boatload of justified hype around ES6 over the last 4 years.  I‚Äôve been writing all of my code using the modern spec during that time<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>. So this is a good time to step back and evaluate the features that were added.  Specifically there are some features that I used for a while that I‚Äôve stopped using, because they made my code worse.</p>\n<p>In his book <a href=\"https://amzn.to/2LJBY9z\">JavaScript: The Good Parts</a> Douglas Crockford dedicated a chapter to the <em>Bad Parts</em> of JavaScript.  <em>The Bad Parts</em> are the features of JavaScript that he felt shouldn‚Äôt be used.  Fortunately there is nothing as bad in ES6 as some of the old JavaScript stinkers like coercive equality, eval or the <code class=\"language-text\">with</code> statement.  ES6 was a well-designed release. But there are some features and patterns that I avoid. A JavaScript feature makes my <em>Bad Parts</em> list because:</p>\n<ol>\n<li><strong>It‚Äôs a trap.</strong>  The feature looks like it does one thing, but has unexpected behavior in some cases that can easily lead to bugs</li>\n<li><strong>It increases the scope of the language for little benefit.</strong> The feature provides some small advantage, but requires the readers of my code to know about obscure features.  This is doubly true for <em>API features</em> where using the feature means that other code that interacts with my code must know about the feature.</li>\n</ol>\n<p>In that spirit, here are my <em>Bad Parts</em> of ES6.</p>\n<h4>const</h4>\n<p>In older versions of JavaScript, we declared variables with the var keyword<sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup>.  This was mostly fine, but <code class=\"language-text\">var</code> has peculiarities.  It creates variables that are added to the global object, or scoped to a function, but don‚Äôt respect other block boundaries.  It is also possible to reference a <code class=\"language-text\">var</code> declared variable before it is declared. These oddities occasionally come back to bite developers.  In response ES6 introduced 2 new keywords for declaring variables: <code class=\"language-text\">let</code> and <code class=\"language-text\">const</code>.  These solve the primary quirks of <code class=\"language-text\">var</code>; they are block-scoped, so a variable declared inside of a loop is not referencable outside of that loop, and trying to access the variable before it is declared in code results in a reference error. This was a big step forward.  It was also confusing, because we were given 2 solutions.</p>\n<p>A <code class=\"language-text\">const</code> variable cannot be re-assigned after it has been declared. This is the only difference between <code class=\"language-text\">const</code> and <code class=\"language-text\">let</code>. This seems useful, and it can be.  The problem is the name. What it guarantees doesn‚Äôt match what most people expect from a <em>constant</em>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token constant\">CONSTANT</span> <span class=\"token operator\">=</span> <span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// this will cause \"TypeError: invalid assignment to const `CONSTANT`\"</span>\n<span class=\"token constant\">CONSTANT</span> <span class=\"token operator\">=</span> <span class=\"token number\">345</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">CONSTANT_ARR</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token constant\">CONSTANT_ARR</span><span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// this will print [1] without an error</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">CONSTANT_ARR</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p><code class=\"language-text\">const</code> prevents reassignment, but it doesn‚Äôt make objects immutable.  This is a fairly weak guarantee for most value types.  Because this feature invites confusion, and <code class=\"language-text\">const</code> is otherwise redundant with <code class=\"language-text\">let</code>, I choose to always use <code class=\"language-text\">let</code>.</p>\n<h4>Template Literal Tags</h4>\n<p><code class=\"language-text\">const</code> is an example of the spec creating too many solutions to too few problems. Template literals are the inverse.  The template literal syntax was TC39‚Äôs way of tackling string interpolation and multi-line strings.  Then they decided to give it a string macro feature as well.</p>\n<p>If you‚Äôve never seen a template literal tag, they‚Äôre a little like <a href=\"https://github.com/tc39/proposal-decorators\">decorators</a> for strings.  Here‚Äôs an example from <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals\">MDN</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> person <span class=\"token operator\">=</span> <span class=\"token string\">'Mike'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> age <span class=\"token operator\">=</span> <span class=\"token number\">28</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">myTag</span><span class=\"token punctuation\">(</span>strings<span class=\"token punctuation\">,</span> personExp<span class=\"token punctuation\">,</span> ageExp<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">var</span> str0 <span class=\"token operator\">=</span> strings<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"that \"</span>\n  <span class=\"token keyword\">var</span> str1 <span class=\"token operator\">=</span> strings<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \" is a \"</span>\n\n  <span class=\"token comment\">// There is technically a string after</span>\n  <span class=\"token comment\">// the final expression (in our example),</span>\n  <span class=\"token comment\">// but it is empty (\"\"), so disregard.</span>\n  <span class=\"token comment\">// var str2 = strings[2];</span>\n\n  <span class=\"token keyword\">var</span> ageStr<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ageExp <span class=\"token operator\">></span> <span class=\"token number\">99</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    ageStr <span class=\"token operator\">=</span> <span class=\"token string\">'centenarian'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    ageStr <span class=\"token operator\">=</span> <span class=\"token string\">'youngster'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> str0 <span class=\"token operator\">+</span> personExp <span class=\"token operator\">+</span> str1 <span class=\"token operator\">+</span> ageStr<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> output <span class=\"token operator\">=</span> myTag<span class=\"token template-string\"><span class=\"token string\">`that </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span> person <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> is a </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span> age <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>output<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// that Mike is a youngster</span></code></pre>\n      </div>\n<p>This isn‚Äôt totally useless. <a href=\"https://codeburst.io/javascript-es6-tagged-template-literals-a45c26e54761\">Here‚Äôs a roundup of some use cases</a>.  HTML sanitization is a useful trait.  And this is the currently the cleanest way to do things when you‚Äôre having to perform the same operation on all inputs to an arbitrary string template.  But that‚Äôs a relatively rare scenario, and you can also accomplish the same use cases with a (more verbose) function API rather than using tagged literals.  And for most things, the function API won‚Äôt even be worse.  This feature is not adding new capabilities, but is adding new concepts that future readers of my code have to be familiar with.  So I plan on staying clear as much as possible.</p>\n<h4>Overly crazy destructuring expressions</h4>\n<p>Some features are fine when used simply, but can spiral out of controls.  For instance, I am happy to write ternary statements like</p>\n<p><code class=\"language-text\">let conferenceCost = isStudent ? 50 : 200</code></p>\n<p>but they become tough to follow if you start nesting them:</p>\n<p><code class=\"language-text\">let conferenceCost = isStudent ? hasDiscountCode ? 25 : 50 : hasDiscountCode ? 100 : 200</code>;</p>\n<p>This is how I feel about destructuring.  Destructuring lets you pull variables out of objects or arrays</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span>a<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>a<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 2, 4</span></code></pre>\n      </div>\n<p>and also lets you rename variables, get nested values, and set defaults.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span>a<span class=\"token punctuation\">:</span> val1<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>a<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>b<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>a<span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>c<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span>c<span class=\"token operator\">=</span><span class=\"token number\">6</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>a<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span>d<span class=\"token operator\">=</span><span class=\"token number\">6</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>a<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>val1<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 2, 4, 5, 6</span></code></pre>\n      </div>\n<p>All of which is great, until you start combining those features.  For instance, this expression declares 4 variables, userName, eventType, eventDate, and eventId pulled out of different spots in the object structure of <code class=\"language-text\">eventRecord</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> eventRecord <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  user<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Ben M\"</span><span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">:</span> <span class=\"token string\">\"ben@m.com\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  event<span class=\"token punctuation\">:</span> <span class=\"token string\">\"logged in\"</span><span class=\"token punctuation\">,</span>\n  metadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> date<span class=\"token punctuation\">:</span> <span class=\"token string\">\"10-10-2017\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"123\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span>\n  user<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> userName <span class=\"token operator\">=</span> <span class=\"token string\">\"Unknown\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  event<span class=\"token punctuation\">:</span> eventType <span class=\"token operator\">=</span> <span class=\"token string\">\"Unknown Event\"</span><span class=\"token punctuation\">,</span>\n  metadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>date<span class=\"token punctuation\">:</span> eventDate<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  id<span class=\"token punctuation\">:</span> eventId\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>It‚Äôs pretty much impossible to follow.  Code like this is much easier to read with the destructuring split into parts or eliminated.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> eventRecord <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  user<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Ben M\"</span><span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">:</span> <span class=\"token string\">\"ben@m.com\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  event<span class=\"token punctuation\">:</span> <span class=\"token string\">\"logged in\"</span><span class=\"token punctuation\">,</span>\n  metadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> date<span class=\"token punctuation\">:</span> <span class=\"token string\">\"10-10-2017\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"123\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> userName <span class=\"token operator\">=</span> eventRecord<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>userName <span class=\"token operator\">||</span> <span class=\"token string\">'Unknown'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> eventDate <span class=\"token operator\">=</span> eventRecord<span class=\"token punctuation\">.</span>metadata<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span>event<span class=\"token punctuation\">:</span>eventType<span class=\"token operator\">=</span><span class=\"token string\">'UnknownEvent'</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">:</span>eventId<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> eventRecord<span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>I don‚Äôt have a clear line for when destructuring has gone too far, but anytime I can‚Äôt look at it and instantly know what variables are being declared, I know it‚Äôs time to break things down for readability.</p>\n<h4>Default Exports</h4>\n<p>One nice thing about ES6 was the way it standardized things that had been accomplished using competing libraries.  Classes, Promises and modules all benefited from being folded into the spec after the community had time to absorb lessons learned from competitive user-land implementations.  ES6 modules are a great replacement for the AMD/CommonJS format wars, and provide a nice clean syntax for imports.</p>\n<p>ES6 modules provide 2 main ways of exporting values: <em>named exports</em>, and <em>default exports</em>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> mainValue <span class=\"token operator\">=</span> 'This is the <span class=\"token keyword\">default</span> <span class=\"token keyword\">export</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> mainValue\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> secondaryValue <span class=\"token operator\">=</span> 'This is a secondary value<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> secondaryValue2 <span class=\"token operator\">=</span> 'This is another secondary value<span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>A module can define multiple named exports, but only a single default export.  When importing default exports, the importing file can give the default export any name as there isn‚Äôt any lookup on name.  Named exports are imported by using the name of the variable in the exporting file, though renaming is possible.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// default import</span>\n<span class=\"token keyword\">import</span> renamedMainValue <span class=\"token keyword\">from</span> <span class=\"token string\">'./the-above-example'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// named import</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>secondaryValue<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./the-above-example'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// named import with a rename</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>secondaryValue <span class=\"token keyword\">as</span> otherValue<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./the-above-example'</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>Default exports <a href=\"https://esdiscuss.org/topic/moduleimport#content-0\">were the preferred syntax of the folks designing ES6</a> and they intentionally gave it the cleanest syntax.  But in practice I‚Äôve found named exports to be better.</p>\n<ol>\n<li>Named exports match the names of the imported variable by default, making searching easier for those not using intelligent tooling.</li>\n<li>Named exports can be matched to variables in other values prior to an import statement being written, allowing niceties like <a href=\"https://code.visualstudio.com/updates/v1_18#_auto-import-for-javascript-and-typescript\">auto-import</a> for those using intelligent tooling.</li>\n<li>It‚Äôs possible to use named imports consistently for everything, but that‚Äôs only possible with default imports if you never want to export multiple values from a file.<sup id=\"fnref-3\"><a href=\"#fn-3\" class=\"footnote-ref\">3</a></sup> Using only named modules keep things simpler.</li>\n</ol>\n<p>Naming things is good.  It promotes consistency in discussion and code.  I use named exports because I like clarity.</p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p>Thanks <a href=\"https://babeljs.io/learn-es2015/\">Babel</a>!</p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">‚Ü©</a>\n</li>\n<li id=\"fn-2\">\n<p>Or global scope, or a property on an object, or a function declaration</p>\n<a href=\"#fnref-2\" class=\"footnote-backref\">‚Ü©</a>\n</li>\n<li id=\"fn-3\">\n<p>Exporting objects with multiple values as properties seems like a workaround here, but that loses the tree-shaking value that ES6 Modules provide for bundlers like webpack.</p>\n<a href=\"#fnref-3\" class=\"footnote-backref\">‚Ü©</a>\n</li>\n</ol>\n</div>",
            "url": "https://benmccormick.org/2018/06/05/es6-the-bad-parts/",
            "title": "ES6: The Bad Parts",
            "date_modified": "2018-06-05T00:00:00Z",
            "author": {
                "name": "Ben McCormick",
                "url": "http://benmccormick.org"
            }
        }
    ]
}