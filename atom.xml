<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>http://benmccormick.org</id>
    <title>benmccormick.org</title>
    <updated>2017-07-10T12:19:18Z</updated>
    <generator>Feed for Node.js</generator>
    <author>
        <name>Ben McCormick</name>
        <email>ben@benmccormick.org</email>
    </author>
    <link rel="alternate" href="http://benmccormick.org"/>
    <link rel="self" href="http://benmccormick.org/atom.xml"/>
    <subtitle>A blog by Ben McCormick</subtitle>
    <logo>https://benmccormick.org/logo.png</logo>
    <icon>https://benmccormick.org/favicon.ico</icon>
    <rights>All rights reserved 2016, Ben McCormick</rights>
    <contributor>
        <name>Ben McCormick</name>
        <email>ben@benmccormick.org</email>
        <uri>http://benmccormick.org</uri>
    </contributor>
    <entry>
        <title type="html"><![CDATA[How to follow the JavaScript roadmap]]></title>
        <id>https://benmccormick.org/2017/07/10/how-to-follow-the-javascript-roadmap/</id>
        <link href="https://benmccormick.org/2017/07/10/how-to-follow-the-javascript-roadmap/">
        </link>
        <updated>2017-07-10T12:00:00Z</updated>
        <content type="html"><![CDATA[<p>It can be difficult to keep up with all the things going on in web development, especially since the JavaScript language itself has been changing over the last several years.  After several years of relative stability<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>, the ECMAScript spec (<a href="https://benmccormick.org/2015/09/14/es5-es6-es2016-es-next-whats-going-on-with-javascript-versioning/">ECMAScript is the specification for the JavaScript language</a>) has changed quite a bit over the last 3 years, with more changes on the way.  In this post I wanted to highlight a few of the resources I can recommend for keeping up with the language changes.</p>
<h3>Learning ES6/ES2015</h3>
<p>If you haven’t paid attention to any features that aren’t ready in all browsers yet, or you’re getting back to JavaScript development after being away for a while, you probably could use a resource to catchup on the ES6 JavaScript release from 2015.  ES6 is now <a href="https://kangax.github.io/compat-table/es6/">almost completely</a> implemented in the latest versions of all major browsers, so if you’ve been ignoring it due to compatibility concerns, now is the time to learn.  Fortunately there are a lot of great resources for learning about ES6.  My favorite quick reference is the <a href="https://babeljs.io/learn-es2015/">Learn ES2015 page</a> from <a href="https://babeljs.io/">Babel</a>.  It’s a short, example filled page with explanations of all the major features of the language update. If you want something meatier, there have been several resources created by JS experts.  <a href="http://amzn.to/2tVcwaW">Understanding ECMAScript 6</a> by <a href="https://www.nczonline.net/about/">Nicholas Zakas</a> and <a href="http://exploringjs.com/es6.html">Exploring ES6</a> by <a href="http://2ality.com/">Axel Rauschmayer</a> are books that go through the new features in detail.  If you prefer video tutorials, <a href="http://wesbos.com/">Wes Bos</a> has a <a href="https://es6.io/">whole video course on ES6</a>.</p>
<h3>Keeping up with new features</h3>
<p>Things haven’t been changing as fast since the ES6 release.  The first 2 “annual releases” of the ECMAScript spec contained only a <a href="http://2ality.com/2016/01/ecmascript-2016.html">combined</a> <a href="http://2ality.com/2016/02/ecmascript-2017.html">8 features</a>. but there are still a lot of new features working their way through the ECMAScript pipeline.  If you want to get a quick overview of the features being considered for future releases, the best place to look is the <a href="https://github.com/tc39/proposals">TC39 proposals repo on Github</a>.  TC39 is the organization that guides the future of the ECMAScript spec.  Proposals go through a 4 stage process, where stage 1 can best be understood as “ideas”, and stage 4 is “confirmed for the next ECMAScript release”.  <a href="https://ponyfoo.com/contributors/ponyfoo">Nicolás Bevacqua</a> put up a <a href="https://ponyfoo.com/articles/tc39-ecmascript-proposals-future-of-javascript">good post</a> last week describing this process in depth, as well as giving a brief description of the more advanced proposals in the queue. If you’re interested in keeping up with new proposals but want somebody to walk you through them, I recommend subscribing to Axel Rauschmayer’s <a href="http://2ality.com/">2ality</a> blog.  In addition to writing the ES6 book mentioned above, he regularly writes blog posts highlighting new proposals with detailed explanations of the feature implementation and motivation.</p>
<h3>Testing new features</h3>
<p>Almost all of the higher stage proposals on the TC39 list have been implemented by <a href="https://babeljs.io/">Babel</a> and you can try them out in the Babel <a href="https://babeljs.io/repl/#?babili=false&#x26;evaluate=true&#x26;lineWrap=false&#x26;presets=es2015%252Creact%252Cstage-2&#x26;targets=&#x26;browsers=&#x26;builtIns=false&#x26;debug=false&#x26;code_lz=Q">REPL</a> or by setting up a small project that loads in Babel.  </p>
<h3>Keeping up with the conversation</h3>
<p>If you’re a twitter user, probably the easiest way to keep up with language evolution is to follow the people who are shaping and teaching the new language features.  Some twitter follow recommendations:</p>
<ul>
<li><a href="https://twitter.com/wycats">Yehuda Katz</a> - TC39 member, Ember core developer</li>
<li><a href="https://twitter.com/rauschma">Axel Rauschmayer</a> - JS blogger and trainer</li>
<li><a href="https://twitter.com/wesbos">Wes Bos</a> - JS blogger and trainer</li>
<li><a href="https://twitter.com/sebmarkbage">Sebastian Markbåge</a> - TC39 member, React core developer</li>
<li><a href="https://twitter.com/left_pad">Henry Zhu</a> - Babel maintainer</li>
</ul>
<div class="footnotes">
<hr>
<ol>
<li id="fn-1">
<p>From the release of the ECMAScript 5 spec to the ES6/ECMAScript2015 spec, the language wasn’t exactly stable in practice because browser implementations didn’t always move quickly, and there were still many incompatibilities.  But standard language syntax stayed stable for quite a while, which allowed the browser ecosystem to iron out some of those kinks prior to the adoption of ES6.</p>
<a href="#fnref-1" class="footnote-backref">↩</a>
</li>
</ol>
</div>]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Adding RSS, Atom, and JSON Feed to Gatsby]]></title>
        <id>https://benmccormick.org/2017/06/03/rss-atom-json-gatsby/</id>
        <link href="https://benmccormick.org/2017/06/03/rss-atom-json-gatsby/">
        </link>
        <updated>2017-06-04T01:55:00Z</updated>
        <content type="html"><![CDATA[<p>For the last few months, this blog has been written in <a href="https://github.com/gatsbyjs/gatsby">Gatsby</a>, a static site generator for JavaScript.  One of the first problems I had to solve when migrating the blog was how to maintain my RSS feed, since Gatsby doesn’t have any built in concept of an RSS feed.  This issue came up again this week as I decided to implement the new <a href="https://jsonfeed.org/">JSON Feed</a> spec and give folks an additional option for subscribing to this blog.  Fortunately this turns out to be a pretty easy problem to solve because of the excellent npm module <a href="https://github.com/jpmonette/feed">feed</a>.</p>
<p><em>feed</em> is an npm module that takes a bunch of information about a blog and its posts, and normalizes them into various syndication feed format.  Here’s what setting up a feed option looks like for this blog:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Feed <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'feed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> filter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash/filter'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sortBy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash/sortBy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> forEach <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash/forEach'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">get</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash/get'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> moment <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'moment'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> markdownIt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'markdown-it'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> frontmatter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'front-matter'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment" spellcheck="true">//markdownIt is a markdown parser that takes my raw md files and</span>
<span class="token comment" spellcheck="true">//translates them into HTML that we can use in the feed</span>
<span class="token keyword">const</span> md <span class="token operator">=</span> <span class="token function">markdownIt</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  html<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  linkify<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  typographer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment" spellcheck="true">// getPageContent is a function to help us grab the html content from a post path</span>
<span class="token keyword">const</span> getPageContent <span class="token operator">=</span> page <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> file <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/pages/'</span> <span class="token operator">+</span> page<span class="token punctuation">.</span>requirePath<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> body <span class="token operator">=</span> md<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token function">frontmatter</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// handle local links</span>
  <span class="token keyword">return</span> body<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token operator">/</span>src<span class="token operator">=</span><span class="token string">"\//g, 'src="</span>http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>benmccormick<span class="token punctuation">.</span>org<span class="token operator">/</span>'<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// build feed is our main function to build a `Feed` object which we</span>
<span class="token comment" spellcheck="true">// can then serialize into various formats</span>
<span class="token keyword">const</span> buildFeed <span class="token operator">=</span> pages <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> feed <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Feed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'benmccormick.org'</span><span class="token punctuation">,</span>
    description<span class="token punctuation">:</span> <span class="token string">'A blog by Ben McCormick'</span><span class="token punctuation">,</span>
    link<span class="token punctuation">:</span> <span class="token string">'http://benmccormick.org'</span><span class="token punctuation">,</span>
    id<span class="token punctuation">:</span> <span class="token string">'http://benmccormick.org'</span><span class="token punctuation">,</span>
    copyright<span class="token punctuation">:</span> <span class="token string">'All rights reserved 2016, Ben McCormick'</span><span class="token punctuation">,</span>
    feedLinks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      atom<span class="token punctuation">:</span> <span class="token string">'http://benmccormick.org/atom.xml'</span><span class="token punctuation">,</span>
      json<span class="token punctuation">:</span> <span class="token string">'http://benmccormick.org/feed.json'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'Ben McCormick'</span><span class="token punctuation">,</span>
      email<span class="token punctuation">:</span> <span class="token string">'ben@benmccormick.org'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// ignore pages (non posts) </span>
  pages <span class="token operator">=</span> <span class="token function">filter</span><span class="token punctuation">(</span>pages<span class="token punctuation">,</span> p <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">get</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token string">'data.layout'</span><span class="token punctuation">,</span> <span class="token string">'page'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'page'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// we only want the last 10 articles to show up in the feed</span>
  pages <span class="token operator">=</span> <span class="token function">sortBy</span><span class="token punctuation">(</span>pages<span class="token punctuation">,</span> page <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">get</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> <span class="token string">'data.date'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  pages <span class="token operator">=</span> pages<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  pages <span class="token operator">=</span> pages<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">forEach</span><span class="token punctuation">(</span>pages<span class="token punctuation">,</span> page <span class="token operator">=</span><span class="token operator">></span> feed<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> page<span class="token punctuation">.</span>data<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
    id<span class="token punctuation">:</span> <span class="token string">'https://benmccormick.org'</span> <span class="token operator">+</span> page<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
    link<span class="token punctuation">:</span> <span class="token string">'https://benmccormick.org'</span> <span class="token operator">+</span> page<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
    date<span class="token punctuation">:</span> <span class="token function">moment</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>data<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    content<span class="token punctuation">:</span> <span class="token function">getPageContent</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">'Ben McCormick'</span><span class="token punctuation">,</span>
        email<span class="token punctuation">:</span> <span class="token string">'ben@benmccormick.org'</span><span class="token punctuation">,</span>
        link<span class="token punctuation">:</span> <span class="token string">'https://benmccormick.org'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  feed<span class="token punctuation">.</span><span class="token function">addContributor</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'Ben McCormick'</span><span class="token punctuation">,</span>
    email<span class="token punctuation">:</span> <span class="token string">'ben@benmccormick.org'</span><span class="token punctuation">,</span>
    link<span class="token punctuation">:</span> <span class="token string">'https://benmccormick.org'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> feed<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>Now we have a <code>buildFeed</code> method that takes a list of pages and generates a feed object.  Then we can use the feed object we’ve created to actually build write some files.  We’ll trigger that in the <code>postBuild</code> callback of <code>gatsby-node</code>.  Here was my first version to support RSS and Atom:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token comment" spellcheck="true">//mkDir and mkFile are just light wrappers around node's file system APIs</span>
<span class="token keyword">let</span> createRSSFolder <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">mkDir</span><span class="token punctuation">(</span><span class="token string">'/public/rss/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> generateAtomFeed <span class="token operator">=</span> <span class="token punctuation">(</span>feed<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">mkFile</span><span class="token punctuation">(</span><span class="token string">'/public/atom.xml'</span><span class="token punctuation">,</span> feed<span class="token punctuation">.</span><span class="token function">atom1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> generateRSS <span class="token operator">=</span> <span class="token punctuation">(</span>feed<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">mkFile</span><span class="token punctuation">(</span><span class="token string">'/public/rss/index.xml'</span><span class="token punctuation">,</span> feed<span class="token punctuation">.</span><span class="token function">rss2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span>postBuild <span class="token operator">=</span> pages <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> feed <span class="token operator">=</span> <span class="token function">buildFeed</span><span class="token punctuation">(</span>pages<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">createRSSFolder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">generateAtomFeed</span><span class="token punctuation">(</span>feed<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">generateRSS</span><span class="token punctuation">(</span>feed<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>Prior to this week, <code>feed</code> didn’t support JSON Feed, so I had stopped here.  But because JSON Feed is super simple to implement (its just JSON!), I decided to try to add it to <code>feed</code> this week.  It turned out it was as simple as adding a single function that looks like this:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">json1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">const</span> <span class="token punctuation">{</span> options<span class="token punctuation">,</span> items <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
   <span class="token keyword">let</span> feed <span class="token operator">=</span> <span class="token punctuation">{</span>
     version<span class="token punctuation">:</span> <span class="token string">'https://jsonfeed.org/version/1'</span><span class="token punctuation">,</span>
     title<span class="token punctuation">:</span> options<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
   <span class="token punctuation">}</span><span class="token punctuation">;</span>

   <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>link<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     feed<span class="token punctuation">.</span>home_page_url <span class="token operator">=</span> options<span class="token punctuation">.</span>link<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>feedLinks <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>feedLinks<span class="token punctuation">.</span>json<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     feed<span class="token punctuation">.</span>feed_url <span class="token operator">=</span> options<span class="token punctuation">.</span>feedLinks<span class="token punctuation">.</span>json<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>description<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     feed<span class="token punctuation">.</span>description <span class="token operator">=</span> options<span class="token punctuation">.</span>description<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>


   <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>image<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     feed<span class="token punctuation">.</span>icon <span class="token operator">=</span> options<span class="token punctuation">.</span>image<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>author<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     feed<span class="token punctuation">.</span>author <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>author<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         feed<span class="token punctuation">.</span>author<span class="token punctuation">.</span>name <span class="token operator">=</span> options<span class="token punctuation">.</span>author<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>author<span class="token punctuation">.</span>link<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         feed<span class="token punctuation">.</span>author<span class="token punctuation">.</span>url <span class="token operator">=</span> options<span class="token punctuation">.</span>author<span class="token punctuation">.</span>link<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   feed<span class="token punctuation">.</span>items <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
     <span class="token keyword">let</span> feedItem <span class="token operator">=</span> <span class="token punctuation">{</span>
       id<span class="token punctuation">:</span> item<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
       <span class="token comment" spellcheck="true">// json_feed distinguishes between html and text content</span>
       <span class="token comment" spellcheck="true">// but since we only take a single type, we'll assume HTML</span>
       html_content<span class="token punctuation">:</span> item<span class="token punctuation">.</span>content<span class="token punctuation">,</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>link<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       feedItem<span class="token punctuation">.</span>url <span class="token operator">=</span> item<span class="token punctuation">.</span>link<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>title<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       feedItem<span class="token punctuation">.</span>title <span class="token operator">=</span> item<span class="token punctuation">.</span>title<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>description<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       feedItem<span class="token punctuation">.</span>summary <span class="token operator">=</span> item<span class="token punctuation">.</span>description<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

     <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>image<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       feedItem<span class="token punctuation">.</span>image <span class="token operator">=</span> item<span class="token punctuation">.</span>image
     <span class="token punctuation">}</span>

     <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       feedItem<span class="token punctuation">.</span>date_modified <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ISODateString</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>published<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       feedItem<span class="token punctuation">.</span>date_published <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ISODateString</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>published<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

     <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>author<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">let</span> author <span class="token operator">=</span> item<span class="token punctuation">.</span>author<span class="token punctuation">;</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>author <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment" spellcheck="true">// json feed only supports 1 author per post</span>
         author <span class="token operator">=</span> author<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
       feedItem<span class="token punctuation">.</span>author <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>author<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           feedItem<span class="token punctuation">.</span>author<span class="token punctuation">.</span>name <span class="token operator">=</span> author<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>author<span class="token punctuation">.</span>link<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           feedItem<span class="token punctuation">.</span>author<span class="token punctuation">.</span>url <span class="token operator">=</span> author<span class="token punctuation">.</span>link<span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">return</span> feedItem<span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">return</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>feed<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre>
      </div>
<p> My <a href="https://github.com/jpmonette/feed/pull/56/files">pull request</a> was accepted, so feed v1.1.0 now supports JSON feed and my final code to add <a href="http://benmccormick.org/rss/">rss</a>, <a href="http://benmccormick.org/atom.xml">atom</a>, and <a href="http://benmccormick.org/feed.json">json</a> feed to this site looks like this:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Feed <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'feed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> filter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash/filter'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sortBy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash/sortBy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> forEach <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash/forEach'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">get</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash/get'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> moment <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'moment'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> markdownIt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'markdown-it'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> frontmatter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'front-matter'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>mkDir<span class="token punctuation">,</span> mkFile<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./utils/file_system'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">const</span> md <span class="token operator">=</span> <span class="token function">markdownIt</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 html<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
 linkify<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
 typographer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> extractMarkdownContent <span class="token operator">=</span> file <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
 <span class="token keyword">let</span> body <span class="token operator">=</span> md<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token function">frontmatter</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment" spellcheck="true">// handle local links</span>
 <span class="token keyword">return</span> body<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token operator">/</span>src<span class="token operator">=</span><span class="token string">"\//g, 'src="</span>http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>benmccormick<span class="token punctuation">.</span>org<span class="token operator">/</span>'<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> getPageContent <span class="token operator">=</span> page <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
 <span class="token keyword">let</span> file <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/pages/'</span> <span class="token operator">+</span> page<span class="token punctuation">.</span>requirePath<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">return</span> <span class="token function">extractMarkdownContent</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> buildFeed <span class="token operator">=</span> pages <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
 <span class="token keyword">let</span> feed <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Feed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   title<span class="token punctuation">:</span> <span class="token string">'benmccormick.org'</span><span class="token punctuation">,</span>
   description<span class="token punctuation">:</span> <span class="token string">'A blog by Ben McCormick'</span><span class="token punctuation">,</span>
   link<span class="token punctuation">:</span> <span class="token string">'http://benmccormick.org'</span><span class="token punctuation">,</span>
   id<span class="token punctuation">:</span> <span class="token string">'http://benmccormick.org'</span><span class="token punctuation">,</span>
   copyright<span class="token punctuation">:</span> <span class="token string">'All rights reserved 2016, Ben McCormick'</span><span class="token punctuation">,</span>
   feedLinks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
     atom<span class="token punctuation">:</span> <span class="token string">'http://benmccormick.org/atom.xml'</span><span class="token punctuation">,</span>
     json<span class="token punctuation">:</span> <span class="token string">'http://benmccormick.org/feed.json'</span><span class="token punctuation">,</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   author<span class="token punctuation">:</span> <span class="token punctuation">{</span>
     name<span class="token punctuation">:</span> <span class="token string">'Ben McCormick'</span><span class="token punctuation">,</span>
     email<span class="token punctuation">:</span> <span class="token string">'ben@benmccormick.org'</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment" spellcheck="true">// ignore pages (non posts)</span>
 pages <span class="token operator">=</span> <span class="token function">filter</span><span class="token punctuation">(</span>pages<span class="token punctuation">,</span> p <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">get</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token string">'data.layout'</span><span class="token punctuation">,</span> <span class="token string">'page'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'page'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment" spellcheck="true">// we only want the last 10 articles to show up in the feed</span>
 pages <span class="token operator">=</span> <span class="token function">sortBy</span><span class="token punctuation">(</span>pages<span class="token punctuation">,</span> page <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">get</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> <span class="token string">'data.date'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 pages <span class="token operator">=</span> pages<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 pages <span class="token operator">=</span> pages<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token function">forEach</span><span class="token punctuation">(</span>pages<span class="token punctuation">,</span> page <span class="token operator">=</span><span class="token operator">></span> feed<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   title<span class="token punctuation">:</span> page<span class="token punctuation">.</span>data<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
   id<span class="token punctuation">:</span> <span class="token string">'https://benmccormick.org'</span> <span class="token operator">+</span> page<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
   link<span class="token punctuation">:</span> <span class="token string">'https://benmccormick.org'</span> <span class="token operator">+</span> page<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
   date<span class="token punctuation">:</span> <span class="token function">moment</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>data<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   content<span class="token punctuation">:</span> <span class="token function">getPageContent</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">,</span>
   author<span class="token punctuation">:</span> <span class="token punctuation">[</span>
     <span class="token punctuation">{</span>
       name<span class="token punctuation">:</span> <span class="token string">'Ben McCormick'</span><span class="token punctuation">,</span>
       email<span class="token punctuation">:</span> <span class="token string">'ben@benmccormick.org'</span><span class="token punctuation">,</span>
       link<span class="token punctuation">:</span> <span class="token string">'https://benmccormick.org'</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 feed<span class="token punctuation">.</span><span class="token function">addContributor</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   name<span class="token punctuation">:</span> <span class="token string">'Ben McCormick'</span><span class="token punctuation">,</span>
   email<span class="token punctuation">:</span> <span class="token string">'ben@benmccormick.org'</span><span class="token punctuation">,</span>
   link<span class="token punctuation">:</span> <span class="token string">'https://benmccormick.org'</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">return</span> feed<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> createRSSFolder <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">mkDir</span><span class="token punctuation">(</span><span class="token string">'/public/rss/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> generateAtomFeed <span class="token operator">=</span> <span class="token punctuation">(</span>feed<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">mkFile</span><span class="token punctuation">(</span><span class="token string">'/public/atom.xml'</span><span class="token punctuation">,</span> feed<span class="token punctuation">.</span><span class="token function">atom1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> generateRSS <span class="token operator">=</span> <span class="token punctuation">(</span>feed<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">mkFile</span><span class="token punctuation">(</span><span class="token string">'/public/rss/index.xml'</span><span class="token punctuation">,</span> feed<span class="token punctuation">.</span><span class="token function">rss2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> generateJSONFeed <span class="token operator">=</span> <span class="token punctuation">(</span>feed<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">mkFile</span><span class="token punctuation">(</span><span class="token string">'/public/feed.json'</span><span class="token punctuation">,</span> feed<span class="token punctuation">.</span><span class="token function">json1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span>postBuild <span class="token operator">=</span> pages <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> feed <span class="token operator">=</span> <span class="token function">buildFeed</span><span class="token punctuation">(</span>pages<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">createRSSFolder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">generateAtomFeed</span><span class="token punctuation">(</span>feed<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">generateRSS</span><span class="token punctuation">(</span>feed<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">generateJSONFeed</span><span class="token punctuation">(</span>feed<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<h3>More Resources</h3>
<ul>
<li>You can see the whole spec for <a href="https://jsonfeed.org/">JSON Feed</a> on their <a href="https://jsonfeed.org/">site</a>.  It really is remarkably simple.  They also have a list of implementations and example sites.</li>
</ul>]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Atom Productivity Tips]]></title>
        <id>https://benmccormick.org/2017/05/29/atom-tips/</id>
        <link href="https://benmccormick.org/2017/05/29/atom-tips/">
        </link>
        <updated>2017-05-30T03:20:00Z</updated>
        <content type="html"><![CDATA[<p><a href="https://atom.io">Atom</a> is a modern hackable text editor.  I’ve been using it as my primary editor for a year and a half, and have picked up some tips along the way that I thought were worth sharing.  These tips assume that you have at least a passing familiarity with Atom: they’re the things that I’ve picked up over time that have made me more productive.</p>
<h4>1. There is more to the Fuzzy Finder than meets the eye</h4>
<p>Fuzzy finders have been a key feature on modern editors since TextMate first popularized the ⌘T command<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup> for searching through project files.  ⌘T (or ⌘P) still works great in Atom, but what you may not know is that Atom provides 2 other versions of the command. ⌘B searches only among currently open files.  ⇧⌘B searches only among files that are “dirty” according to git<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>.  Both of those options are built in.  You can also find other uses for the fuzzy-finder if you start exploring plugins, including <a href="https://atom.io/packages/atom-fuzzy-grep">atom-fuzzy-grep</a>, a plugin that lets you use the fuzzy-finder interface to search file contents using grep, <a href="https://benmccormick.org/2016/04/30/ack-tips/">ack</a>, ag, or ripgrep.</p>
<h4>2. Atom is a great Vim replacement</h4>
<p>If you’ve been following this blog for a while, you know I’ve written a lot about <a href="https://benmccormick.org/learning-vim-in-2014/">Vim</a>.  I still love the <a href="https://benmccormick.org/2014/07/16/learning-vim-in-2014-vim-as-art/">philosophy of Vim</a>, and think that the text editing <a href="https://benmccormick.org/2014/07/02/learning-vim-in-2014-vim-as-language/">language</a> it implements is the best way to edit code quickly.  But Atom’s <a href="https://atom.io/packages/vim-mode-plus">vim-mode-plus</a> is the best vi implementation I’ve seen outside of Vim, and unlike other editors, you don’t need to get frustrated with a halfway approach to Vi-keybindings, since you can make pretty much everything work in a vim-like way.  That’s because:</p>
<h4>3. Atom’s keybindings are powerful and flexible</h4>
<p>Any command exposed by the core editor or a plugin in Atom can be bound to a keyboard shortcut.  None of the default commands are hard-coded, and the editor provides powerful contexts for controlling what keys have lead to what action when.  That means if I want to use <code>ctrl-j/k/l/h</code> to control my navigation between split panes, but also use <code>ctrl-j/k</code> to move up and down in the autocomplete widget, I can just add these lines to my <code>keymap.cson</code> file</p>
<div class="gatsby-highlight">
      <pre class="language-coffeescript"><code><span class="token string">'atom-text-editor, body'</span><span class="token punctuation">:</span>
  <span class="token string">'ctrl-k'</span><span class="token punctuation">:</span> <span class="token string">'window:focus-pane-above'</span>
  <span class="token string">'ctrl-j'</span><span class="token punctuation">:</span> <span class="token string">'window:focus-pane-below'</span>
  <span class="token string">'ctrl-h'</span><span class="token punctuation">:</span> <span class="token string">'window:focus-pane-on-left'</span>
  <span class="token string">'ctrl-l'</span><span class="token punctuation">:</span> <span class="token string">'window:focus-pane-on-right'</span>

<span class="token string">'body atom-text-editor.autocomplete-active'</span><span class="token punctuation">:</span>
  <span class="token string">'ctrl-k'</span><span class="token punctuation">:</span> <span class="token string">'autocomplete-plus:move-up'</span>
  <span class="token string">'ctrl-j'</span><span class="token punctuation">:</span> <span class="token string">'autocomplete-plus:move-down'</span>
</code></pre>
      </div>
<p>Different commands are triggered in different context.  You can also take advantage of this with vim-mode to have “normal mode only” keyboard shortcuts like this:</p>
<div class="gatsby-highlight">
      <pre class="language-coffeescript"><code><span class="token string">'atom-text-editor.vim-mode-plus.normal-mode'</span><span class="token punctuation">:</span>
  <span class="token string">'] b'</span><span class="token punctuation">:</span> <span class="token string">'pane:show-next-item'</span>
  <span class="token string">'[ b'</span><span class="token punctuation">:</span> <span class="token string">'pane:show-previous-item'</span>
</code></pre>
      </div>
<p>That implements a behavior I’d missed from Vim’s <a href="https://github.com/tpope/vim-unimpaired">unimpaired plugin</a> of moving between open files with <code>[b</code> and <code>]b</code>.</p>
<h4>4. Make sure to sync your settings</h4>
<p>One area where Atom is less ideal than Vim is setting portability.  It doesn’t have a single file where all configuration is stored, or a nice settings folder that can be synced.  Instead settings are intermingled with other data in a <code>~/.atom</code> folder, a fact that is obscured by the editor’s UI, which attempts to put a nice UI in front of all of these setting files and steer you away from editing them directly or caring about where they’re stored.  Which works great until you need to move your config to a new machine or sync between 2 machines.  </p>
<p>Fortunately, there’s a great plugin <a href="https://github.com/atom-community/sync-settings">sync-settings</a> that makes this simple.  It does require setting up a gist to serve as your repo, but after that the process is painless and allows you to continue on unaware of the implementation details behind settings.</p>
<h4>5. Check Timecop and clean up plugins that you’re not using</h4>
<p>Atom is built on web technologies.  This is both the best and worst thing about Atom.  It leads to its greatest strengths: hackability, a focus on UX early on since they didn’t have to build a whole UI engine from scratch, and quick iteration.  But it also has very real tradeoffs, the biggest of which are battery life and startup performance<sup id="fnref-3"><a href="#fn-3" class="footnote-ref">3</a></sup>.  There’s not much to be done about the battery life drain; Atom is based on Chromium, and Chromium is a battery hog.  It is simply a tradeoff to understand when choosing an editor.  But startup performance is often greatly influenced by the packages that you choose to use.  Fortunately Atom includes a simple tool for tracking this called Timecop.</p>
<p>You can find Timecop in the command palette (⇧⌘P by default).  When you run it, Timecop displays a report of all of your packages and themes and how they contribute to startup time.  It will look something like this:</p>
<p>
          <a
            class="gatsby-resp-image-link"
            href="/static/e54c55880eb9aea6f4fa92ea3c8409a0-20e0c.png"
            style="display: block"
            target="_blank"
            rel="noopener"
          >
            <span
              class="gatsby-resp-image-wrapper"
              style="position: relative; z-index: -1; display: block; "
            >
              <span
                class="gatsby-resp-image-background-image"
                style="padding-bottom: 65.93673965936739%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAAB6ElEQVQ4y6VTTW/UMBDNH4LuJk42n3Zs5zv7lexuUUXVAkKUC0i9c+QGt0qVkPivj7GpVtpuekAcnmKPn59n3kwcP1FgscQszBFkGlmu4EccTBTwhITHW+TtgGp9CZZq4ip4kcQrL7b33FBgvuDHtRPmLVR/QKLXCEQ7CZ83iGSPYnkJXg8v8lhWw2G8Am9GZET0suoMbPsZ3qcHLOhh0e6IOxB3C180Z9yL7Rc4Pq8hKUMjupDdGSm6/obk62+EdCb7vYURnXp8Nt7DcdMCSbVBXK4nSW79Ft7Nd5iHU+IlxAso20nB5UcSTDRivURcrBCqHvOkOIG/fA//cA8vLRE98cz6Oc/gdfEGTkCGaypZLw/ws8bCNMrGCIu8s2bbkslDQV4bDksr2yjV7W3cxDyKOW7WI25vkPQf7NemL1bHmAETPVi+Pcai5hq+3MBXI+LuHeHWnrF8BWee0OvlHotiRKoH1LyAa7IsDwhor8oRNXXUTSl7unD0lko0MxoWe7sPaG6F4lQykU2XzUg0WuLnXW1HRJEFxq+7usPDdo1ZpE6bRYKMGmV8NftYllitSzgX9Ic875bxS3Q7u76tejzuhknBWaxPYqYxk4Jm2CP9t7ydrPCjKv9P0GRYbq5syVeU4a9/yPAPd7fLbnIF+IgAAAAASUVORK5CYII='); background-size: cover; display: block;"
              >
                <img
                  class="gatsby-resp-image-image"
                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
                  alt="screenshot of timecop"
                  title=""
                  src="/static/e54c55880eb9aea6f4fa92ea3c8409a0-96365.png"
                  srcset="/static/e54c55880eb9aea6f4fa92ea3c8409a0-c0cbb.png 143w,
/static/e54c55880eb9aea6f4fa92ea3c8409a0-0e313.png 285w,
/static/e54c55880eb9aea6f4fa92ea3c8409a0-96365.png 570w,
/static/e54c55880eb9aea6f4fa92ea3c8409a0-20e0c.png 822w"
                  sizes="(max-width: 570px) 100vw, 570px"
                />
              </span>
            </span>
          </a>
          </p>
<p>I wouldn’t recommend obsessing too much over timecop.  For most packages the benefit you receive is going to significantly outweigh any startup burden.  But if your editor starts to feel sluggish, this is a great first step to figuring out if there’s anything you can drop to make an impact.</p>
<h4>6. The UI is just HTML and CSS, and that means you can edit it</h4>
<p>Everything you see in an Atom UI is an HTML element, with classes that you can use to select and style them. This fact is mostly relevant when creating themes, but you can also use it to make one-off UI adjustments.  For instance, when I edit Markdown files, the <a href="https://github.com/sindresorhus/atom-editorconfig">editorconfig</a> plugin I have installed warns me about a possible conflict with another atom package. The warning shows up as a small colored mouse icon in the status bar.</p>
<p>
          <a
            class="gatsby-resp-image-link"
            href="/static/39200e898c084d11c48d6b6d7da6471e-d9e43.png"
            style="display: block"
            target="_blank"
            rel="noopener"
          >
            <span
              class="gatsby-resp-image-wrapper"
              style="position: relative; z-index: -1; display: block; "
            >
              <span
                class="gatsby-resp-image-background-image"
                style="padding-bottom: 44.88567990373045%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABf0lEQVQoz62S2VKDQBBF+RPLJTEhkTUQIBCIBIYtIWYzlsbl/z/i2j2Ulj754sOp2z0909N3QNGnCewoR5zVEIXAMhfISauqwFJQTBRlR0lkoquzJlmBRb1H2hwQ5q1E0dxYNqwPr6h2LxCbJyzXj2hPH6j2Z0lzfEPDdYpXx3cU22eURN4+yfW8Pcnz3EcZOxHMIMVcbOiGtSSim5JyC29RwYwyGP793wSdKl+W/wtFm3aWs90Z6eaMWb6R00asxQNihqZl+L147auWVLtuD9VYZcORFcDwaMq4gBUKTEm9pIA7zymmnDQg67zGeXBfwU9K+ItSxrO0Ia2R1gdY9HTKQHNguCH6Ywu9kYXL27tv+gP9O74aaLI+tF2otkcNKzg0ERNmLTnZYhJmUG5UQza7GvIBE5wzFz0VrZngsjeS8U+uhzpmyzW5EDD9lOKVbDoJ+StbPm61CYa6S1Pov/A0D7rpyAb9sQ12w/vu7Bm5mkM1PGj0l6iuT1MTpo9Pngw0OpULBzcAAAAASUVORK5CYII='); background-size: cover; display: block;"
              >
                <img
                  class="gatsby-resp-image-image"
                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
                  alt="screenshot of editorconfig mouse icon in the status bar"
                  title=""
                  src="/static/39200e898c084d11c48d6b6d7da6471e-96365.png"
                  srcset="/static/39200e898c084d11c48d6b6d7da6471e-c0cbb.png 143w,
/static/39200e898c084d11c48d6b6d7da6471e-0e313.png 285w,
/static/39200e898c084d11c48d6b6d7da6471e-96365.png 570w,
/static/39200e898c084d11c48d6b6d7da6471e-d9e43.png 831w"
                  sizes="(max-width: 570px) 100vw, 570px"
                />
              </span>
            </span>
          </a>
          </p>
<p>I find this warning distracting.  I know what its there for and have decided I don’t care about it, but I can’t dismiss it normally.  So instead I can take advantage of Atom’s flexibility to just get rid of it. All I need to do is open up devtools (⇧⌘I) and find the class.</p>
<p>
          <a
            class="gatsby-resp-image-link"
            href="/static/bada6a2b6969a5a867626981a6af7347-b3b1d.png"
            style="display: block"
            target="_blank"
            rel="noopener"
          >
            <span
              class="gatsby-resp-image-wrapper"
              style="position: relative; z-index: -1; display: block; "
            >
              <span
                class="gatsby-resp-image-background-image"
                style="padding-bottom: 61.800947867298575%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACjklEQVQoz3VRaU/bUBD0P6nU0hIg5MDkJIlzmNwJEAg5gADqof7SqqRI5QMSBSpQocrhxDlt54Tp+qWN1A9YGs3bfW9nZ9ecxeED7w7CbPfi7coajOte2P0xhJJZ+OO7EFP78Ea24QlvMd4Q04xdoeQ89w96HWd1CjDbZmIzQQ8cgThimUNEd4pIZkvYTOcQ26U4c0C5A0S2ChApF6dcILHHmgqxDNxiCpxLCMET2MSaKwCr0w+zQ2CC0eQWIokUQzyVQjKdRjhBiEYhhiPwixEEiX1iDL7Iztw1ZyUBu3cT74w8c7jCb8Dmo8fUWR9biO4wh5HtAnOiQ4+Df535yZnOemwTIuCMvBtOIYxli4MJLq6uw7jmwpLFzuI3S+b/sLBsxaJpHQazjU1l0ScSYnAHk+A3xJlDmycEg8n2d496AY/XBhMJmBi/WljGgsEMCzUxWXgYzTxWnT4aMUXrSRCnIeg/xRcFt1c4xv7BKbLFE2RyR8TH2CXezhaRyuSQzuQZ8qWP2MsfIUfvCkfvUTz5hMPTz8jTOX/8AfulE7ovgeu2ZVTuK5AqMlpSE416A1KNzoS21EJbbqPfV9Dr9aAoCsbj8Ryj0QiyLEOSJKqtodvtgptMJqhf19C8qUG6e8TdbQPVqoKOrEFpaxhrY7z0PT09sSbD4RCqqrIGnH4xUAfoViqo/O7i8aFPLhVMx1M8Pz/P8ZKgXK1CJoedTgeapoEr3yr4et3H2UUdX75LKF/18I3i8pWM8+suyj96uPyl4fJBw8W9ivOfKs5uFAa9rlmvo91ooEFQFHXmUHfQq7XQk/uQG4TmgPaiodVUqesEmjrESO3R+LTDAY2mjhim0yn6LaojsXa7w8b/AyMldRuDE1ZuAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
              >
                <img
                  class="gatsby-resp-image-image"
                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
                  alt="screenshot of editorconfig mouse icon in the status bar with devtools open"
                  title=""
                  src="/static/bada6a2b6969a5a867626981a6af7347-96365.png"
                  srcset="/static/bada6a2b6969a5a867626981a6af7347-c0cbb.png 143w,
/static/bada6a2b6969a5a867626981a6af7347-0e313.png 285w,
/static/bada6a2b6969a5a867626981a6af7347-96365.png 570w,
/static/bada6a2b6969a5a867626981a6af7347-58e89.png 855w,
/static/bada6a2b6969a5a867626981a6af7347-b3b1d.png 1055w"
                  sizes="(max-width: 570px) 100vw, 570px"
                />
              </span>
            </span>
          </a>
          </p>
<p>Then we can edit our styles.less file.  Atom will open it for you if you click the <em>your stylesheet</em> link at the top of the Settings>Themes page.  My edit to remove the mouse icon looks like this:</p>
<div class="gatsby-highlight">
      <pre class="language-less"><code><span class="token selector">.aec-icon-mouse</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<h3>More Resources</h3>
<ul>
<li>The <a href="https://atom.io/docs">atom documentation</a> is really great, and worth diving into if you want to go deeper into Atom</li>
<li>If you’re interested in learning more about keyboard driven text editing, check out <a href="https://benmccormick.org/learning-vim-in-2014/">my series on Vim</a>.</li>
</ul>
<div class="footnotes">
<hr>
<ol>
<li id="fn-1">
<p>I’m using MacOS default keyboard shortcuts for this post.  Windows and Linux shortcuts are usually similar with <code>ctrl</code> often swapped for <code>⌘</code>.</p>
<a href="#fnref-1" class="footnote-backref">↩</a>
</li>
<li id="fn-2">
<p>Dirty files are files that have been edited and not yet added to the index or committed.</p>
<a href="#fnref-2" class="footnote-backref">↩</a>
</li>
<li id="fn-3">
<p>I’ve definitely seen post-startup perf issues at points as well, but I suspect that those are implementation problems that will continue to improve as the editor matures and the underlying Chromium platform continues to push on performance.  This may be naive.</p>
<a href="#fnref-3" class="footnote-backref">↩</a>
</li>
</ol>
</div>]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mariana Syntax Theme For Atom]]></title>
        <id>https://benmccormick.org/2017/05/28/mariana-syntax-atom/</id>
        <link href="https://benmccormick.org/2017/05/28/mariana-syntax-atom/">
        </link>
        <updated>2017-05-28T04:05:00Z</updated>
        <content type="html"><![CDATA[<p>Sometimes the best thing to do is steal somebody else’s good idea. I’ve been using <a href="https://atom.io">Atom</a> as my primary text editor for a year and a half now, but I still occasionally play with other editors and keep up with their updates.  There are a crazy number of good cross platform editors these days, and they all have a bunch of good ideas that get shared and remixed across each other. This week Sublime Text came out with a new release <a href="https://www.sublimetext.com/3dev">Dev Build 3132</a> that included 3 new color schemes.  One of them was Mariana, which I believe is a variation on the also great <a href="http://labs.voronianski.com/oceanic-next-color-scheme/">Oceanic Next</a>, with possibly some influences from my previous favorite dark theme <a href="https://github.com/chriskempson/tomorrow-theme">Tommorrow Night Eighties</a> <sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>.  It stood out to me right away.</p>
<div>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">The Mariana syntax theme that shipped in the new Sublime Text is really nice <a href="https://t.co/xbmjBTNoWY">pic.twitter.com/xbmjBTNoWY</a></p>&mdash; Ben McCormick (@ben336) <a href="https://twitter.com/ben336/status/868160533345841152">May 26, 2017</a></blockquote>
</div>
<p>Since I’m no longer using Sublime Text, I decided to port the theme to Atom.  I built on the work of the great <a href="https://github.com/atom-material/atom-material-syntax">atom-material-syntax</a> package to build out a new theme.  It turns out to be surprisingly easy to build a color scheme in Atom.  Fork an existing theme, change some colors and the details in package.json, delete a bunch of git tags <sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>, and then run <code>apm deploy minor</code>, and you’re in business.  </p>
<p>You can now download <a href="https://atom.io/themes/mariana-syntax">mariana-syntax</a> in Atom.  This was a quick port.  I’ll be working to optimize it for the languages I use (JS, Python, CSS/Less, HTML and Markdown) over the next few weeks.  I would love to see pull requests for other languages or for anything that I’ve missed so far.  I look forward to this just getting better and better. <strong>Update:</strong> Version 0.2.0 has shipped with optimized syntax for JavaScript, Python, CSS, JSON and Markdown.</p>
<p>
          <a
            class="gatsby-resp-image-link"
            href="/static/a13c07ac2f3fde691852ce1738103fe8-72ae1.png"
            style="display: block"
            target="_blank"
            rel="noopener"
          >
            <span
              class="gatsby-resp-image-wrapper"
              style="position: relative; z-index: -1; display: block; "
            >
              <span
                class="gatsby-resp-image-background-image"
                style="padding-bottom: 83.00970873786407%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACBklEQVQ4y51U2ZLaMBD0/6SSBV/4vpBlyxdezJJskkr+/ys6LeOlKGA3JA+NxnjU6pke2dh2L5DDEap/gZc32AQ57DDHykvwxYlg+hk+2+EM08/x5Cb4ZPqwguL0zgqx2qTLuxiGFUsEaYW9VGgPv9A+f0dd90jVgER1CFUPN1dEDZt5ZlTOsJb1Ojb0j59IjGWFtNmjOryi2h+RtTvEsoMnFHzZwC8buIWCFqBhLus1DM3uJCQreghZQ9QKidghLQcUskLRHpA1E9XVdwluCGfJDFwSeGWHDcvSz/oQh8odEul4VrXkfkhoLUmbvIW/Hdi7PULRM+7YigoR14DPj5CdCONTok9lWyqMudnJ1KzMDgVcrZTxmvHZhEcIdXmlaFGxf0X5jKBokPcTknpEIul6N8Gj2r+RGmfXIgnBDY0YiBFZ0aLsjzRlmiH7r3SdzlcjrKWn901hKbocm0kZVUWcuSAS8Ag3ruGyFRu2wEuaufyQ5pmsar3su8aZUJ/q8oQ1CZ54C1bB9grLf36BNdd1eAlxjueSnaymCiqgkk1+Wt/G5BEjbnro0sXtcECh7/XuG+T4SiN287joAzTsD/p215RsN0JoMqI7/oba/0Az/UTGudSz+ab6YYVOTAU0wroo73L2/mGw5WxGkdNlIuEHQN/dVE03fXwPl3nGybH7I2D+B/4A+oRN2m6cG54AAAAASUVORK5CYII='); background-size: cover; display: block;"
              >
                <img
                  class="gatsby-resp-image-image"
                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
                  alt="screenshot of mariana-syntax"
                  title=""
                  src="/static/a13c07ac2f3fde691852ce1738103fe8-96365.png"
                  srcset="/static/a13c07ac2f3fde691852ce1738103fe8-c0cbb.png 143w,
/static/a13c07ac2f3fde691852ce1738103fe8-0e313.png 285w,
/static/a13c07ac2f3fde691852ce1738103fe8-96365.png 570w,
/static/a13c07ac2f3fde691852ce1738103fe8-72ae1.png 824w"
                  sizes="(max-width: 570px) 100vw, 570px"
                />
              </span>
            </span>
          </a>
          </p>
<div class="footnotes">
<hr>
<ol>
<li id="fn-1">
<p>To be clear, I’m not sure how great of an influence this was.  The scheme definitely bears a strong resemblance to both of those color schemes, and the release notes credit both authors as inspiration for the 3 new syntax-themes without naming specific schemes.</p>
<a href="#fnref-1" class="footnote-backref">↩</a>
</li>
<li id="fn-2">
<p>This Stack Overflow article was helpful <a href="https://stackoverflow.com/a/15755041/1424361">https://stackoverflow.com/a/15755041/1424361</a></p>
<a href="#fnref-2" class="footnote-backref">↩</a>
</li>
</ol>
</div>]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Building Normal Distribution Charts using Highcharts]]></title>
        <id>https://benmccormick.org/2017/05/11/building-normal-curves-highcharts/</id>
        <link href="https://benmccormick.org/2017/05/11/building-normal-curves-highcharts/">
        </link>
        <updated>2017-05-12T02:30:00Z</updated>
        <content type="html"><![CDATA[<p>This week I got to have a little fun remembering some High School math, and using one of my favorite libraries: <a href="https://www.highcharts.com/">Highcharts</a>.  Highcharts is a commercial JavaScript data-viz library, and it makes most standard charts and graphs a breeze to implement.  I was using it to plot a normal distribution in order to display a 95% confidence interval.  It’s a pretty straightforward problem, but its a nice example of a practical use of Highcharts, and comes with a little stats math that many of us may have learned and forgotten.</p>
<h3>The Problem</h3>
<p>The goal was to display a <a href="https://en.wikipedia.org/wiki/Normal_distribution">normal distribution</a> to represent a 95% confidence interval, given the upper and lower bounds of the confidence interval.  A normal distribution is the classic bell curve, where the area under any section of the graph represents the probability that the true value of the measure being tracked is within that range.  These curves are usually represented something like this:</p>
<p>
          <a
            class="gatsby-resp-image-link"
            href="/static/3c13198254a7cdabc416bd2aa060cb7b-a288d.png"
            style="display: block"
            target="_blank"
            rel="noopener"
          >
            <span
              class="gatsby-resp-image-wrapper"
              style="position: relative; z-index: -1; display: block; "
            >
              <span
                class="gatsby-resp-image-background-image"
                style="padding-bottom: 66.73346693386773%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABLUlEQVQoz2P4jxs8e/Vmzr5TP37+xKWAAZfEv3//ohbsMF50sm3TIZI17z572XjhCaBm05l7n7x4SZrmpMW7gDohqGfbURI033v81HDWfrhm+2lbf/36Razmjq1H4TohaPOJC0Rp/vLli/X07caLTqiWTdKom6M3aStQc/SCHURpnr0XaptO12q9yVshmo3mHTl2+ToBzc/fvLWZtRvNzRAUOm/779+/cWr+8OFD3fKtWHVC0OLNO38ipRmG9+/f379///r168ePH7906dKcbfsTlu6FI6BXkbk7j5w4e/bsqVOnbt++DdSFYvP379/fv3v3/PlzYPKC+uL5c2TZp0+fvH//AYuz//79c/na9Tt3bq1eueLz1+8QwaPHjsFS69/b9+4Bpa5cvQbXAgBPO6AxF9FI/QAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
              >
                <img
                  class="gatsby-resp-image-image"
                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
                  alt="Normal Distribution image"
                  title=""
                  src="/static/3c13198254a7cdabc416bd2aa060cb7b-a288d.png"
                  srcset="/static/3c13198254a7cdabc416bd2aa060cb7b-c0cbb.png 143w,
/static/3c13198254a7cdabc416bd2aa060cb7b-0e313.png 285w,
/static/3c13198254a7cdabc416bd2aa060cb7b-a288d.png 499w"
                  sizes="(max-width: 570px) 100vw, 570px"
                />
              </span>
            </span>
          </a>
          </p>
<p>The x axis of the curve represents the range of values, while the y axis is a function of x that shows the relative probability for different areas.  Data sets that are normally distributed conform to the above bell curve and the <a href="https://en.wikipedia.org/wiki/68%E2%80%9395%E2%80%9399.7_rule">68-95-99.7 rule</a>. There’s a 68% chance that the true value is within 1 standard deviation of the middle of the curve (the mean), a 95% chance that the true value is within 2 standard deviations, and a 99.7% chance that the true value is within 3 standard deviations.</p>
<h3>Step 1: Generating a Dataset</h3>
<p>Highcharts operates by plotting a set of data points, not by handling equations directly.  So our first step is computing a set of data points to plot.  We can find the equation for calculating a normal distribution’s probability density on <a href="https://en.wikipedia.org/wiki/Normal_distribution">Wikipedia</a>.</p>
<p>
          <a
            class="gatsby-resp-image-link"
            href="/static/6a389461177782c04eacef4eb7226e50-d27a6.png"
            style="display: block"
            target="_blank"
            rel="noopener"
          >
            <span
              class="gatsby-resp-image-wrapper"
              style="position: relative; z-index: -1; display: block; "
            >
              <span
                class="gatsby-resp-image-background-image"
                style="padding-bottom: 38.82352941176471%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABC0lEQVQoz51S7Y6DIBDk/R/wcr3TWj40elYpoKiIzi3cz0uappsMS3B3nGVgSinwxuKzeuAqDb5uD1RKQ0qB/O3GwTlHVVW4ErTWeBYsxojjBCItIeyI8cRBe+895SMTtG2LVJdr6ewpYVqUkrlR6xHWGoJFURTo+x7rusI5h1eDhRAywbIsuTlhmibUdY15nrOipOxlwnEc/ik4TyLZA94JNowjGaAw+52wEjaYiVQTPKlOPzM0gTEmK3a0TxOlOzZug5tDrrGUUy9bQ4QQkpy15PKASmp8lBoXcv0+aDQ0Ohciu911XXY+Id1v6ml+pr+zdkLbW7Bl24lQEJnFNzcoKZf0fNq7f2vkX2ARazNB9qmOAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
              >
                <img
                  class="gatsby-resp-image-image"
                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
                  alt="Normal Distribution equation"
                  title=""
                  src="/static/6a389461177782c04eacef4eb7226e50-d27a6.png"
                  srcset="/static/6a389461177782c04eacef4eb7226e50-c0cbb.png 143w,
/static/6a389461177782c04eacef4eb7226e50-0e313.png 285w,
/static/6a389461177782c04eacef4eb7226e50-d27a6.png 510w"
                  sizes="(max-width: 570px) 100vw, 570px"
                />
              </span>
            </span>
          </a>
          </p>
<p>Yep, we get to play with an equation that has both π and e in it.  I hope this feels sufficiently like a high school math class now.  But we can actually choose to drop the left side of the equation.  It is the <a href="https://en.wikipedia.org/wiki/Normalizing_constant">normalization constant</a> for the equation: it ensures that the total area under the curve equals 1, but doesn’t change the shape of the curve.  Since we’re simply displaying the shape of the graph and care primarily about showing the range along the x axis, we can ignore it and instead use this function:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">const</span> normalY <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> mean<span class="token punctuation">,</span> stdDev<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> Math<span class="token punctuation">.</span><span class="token function">exp</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">-</span> mean<span class="token punctuation">)</span> <span class="token operator">/</span> stdDev<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>That’s a good start, but right now we only have an upper and lower bound value for a 95% confidence interval.  So before we can apply the equation, we need to find a mean, a standard deviation, and a set of x values to run the formula against.  The mean and standard deviation are fairly straightforward, and we can use lodash to generate a set of points.  For the sake of this example, we’ll plan on generating 100 points ranging from +/- 5 standard deviations from the mean, which should allow us to see all meaningful parts of the distribution, and still have a bit of padding.  </p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">const</span> getMean <span class="token operator">=</span> <span class="token punctuation">(</span>lowerBound<span class="token punctuation">,</span> upperBound<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>upperBound <span class="token operator">+</span> lowerBound<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// distance between mean and each bound of a 95% confidence interval</span>
<span class="token comment" spellcheck="true">// is 2 stdDeviation, so distance between the bounds is 4</span>
<span class="token keyword">const</span> getStdDeviation <span class="token operator">=</span> <span class="token punctuation">(</span>lowerBound<span class="token punctuation">,</span> upperBound<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>upperBound <span class="token operator">-</span> lowerBound<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">;</span>


<span class="token keyword">const</span> generatePoints <span class="token operator">=</span> <span class="token punctuation">(</span>lowerBound<span class="token punctuation">,</span> upperBound<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> stdDev <span class="token operator">=</span> <span class="token function">getStdDeviation</span><span class="token punctuation">(</span>lowerBound<span class="token punctuation">,</span> upperBound<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> min <span class="token operator">=</span> lowerBound <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> stdDev<span class="token punctuation">;</span>
  <span class="token keyword">let</span> max <span class="token operator">=</span> upperBound <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> stdDev<span class="token punctuation">;</span>
  <span class="token keyword">let</span> unit <span class="token operator">=</span> max <span class="token operator">-</span> min <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> _<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span>min<span class="token punctuation">,</span> max<span class="token punctuation">,</span> unit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Now that we have the x axis locations for the points, we can generate a whole data series.  </p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">let</span> mean <span class="token operator">=</span> <span class="token function">getMean</span><span class="token punctuation">(</span>lowerBound<span class="token punctuation">,</span> upperBound<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> stdDev <span class="token operator">=</span> <span class="token function">getStdDeviation</span><span class="token punctuation">(</span>lowerBound<span class="token punctuation">,</span> upperBound<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> points <span class="token operator">=</span> <span class="token function">generatePoints</span><span class="token punctuation">(</span>lowerBound<span class="token punctuation">,</span> upperBound<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">let</span> seriesData <span class="token operator">=</span> points<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>x <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token function">normalY</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> mean<span class="token punctuation">,</span> stdDev<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<h3>Step 2: Creating the Chart</h3>
<p>Now we have what we need to generate a chart!  Given the data, It’s easy to make a simple normal distribution curve with highcharts.  All we need to do is create a <code>&#x3C;div id="container"></code> element and then run this JavaScript:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code>Highcharts<span class="token punctuation">.</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    chart<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">'area'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    series<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        data<span class="token punctuation">:</span> seriesData<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>Which produces the following graph:</p>
<div>
          <div
            class="gatsby-resp-iframe-wrapper"
            style="padding-bottom: NaN%; position: relative; height: 0; overflow: hidden;"
          >
            <iframe src="//jsfiddle.net/ben336/8bgm1m18/embedded/result,js/" allowfullscreen="allowfullscreen" frameborder="0" style="
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
          "></iframe>
          </div>
          </div>
<p>Thats a good start, but contains a lot of “stuff” that Highcharts provides by default that we don’t necessarily want for our normal distribution illustration.  Let’s cut the title, legend, y-axis, and tooltips/mouse action.  To do that we need a bit more configuration:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code>Highcharts<span class="token punctuation">.</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    chart<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">'area'</span><span class="token punctuation">,</span>
        height<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    title<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        text<span class="token punctuation">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    yAxis<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      labels<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        enabled<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>   
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      gridLineWidth<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      title<span class="token punctuation">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    tooltip<span class="token punctuation">:</span> <span class="token punctuation">{</span>
       enabled<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    legend<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      enabled<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    series<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        data<span class="token punctuation">:</span> seriesData<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    plotOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      area<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        enableMouseTracking<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<div>
          <div
            class="gatsby-resp-iframe-wrapper"
            style="padding-bottom: NaN%; position: relative; height: 0; overflow: hidden;"
          >
            <iframe src="//jsfiddle.net/ben336/w7165m2u/embedded/result,js/" allowfullscreen="allowfullscreen" frameborder="0" style="
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
          "></iframe>
          </div>
          </div>
<p>This is pretty great, but we still want to show our confidence interval like the wikipedia image at the top.  Ideally we’d only be filling in the areas within the 95% curve.  Thats pretty easy to do with Highcharts.  We can use <em>zones</em>, Highcharts way of applying different styles to different sections of the chart.  We want our zones to apply to the x axis, and we’ll define 3 zones: 0 to the lower bound, lower bound to the upper bound, and everything else.  In Highcharts that looks like this:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token punctuation">{</span>
  plotOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    area<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      zones<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//fillColor gets the inside of the graph, color would change the lines</span>
        fillColor<span class="token punctuation">:</span> <span class="token string">'white'</span><span class="token punctuation">,</span>
        <span class="token comment" spellcheck="true">// everything below this value has this style applied to it</span>
        value<span class="token punctuation">:</span> lowerBound<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
        value<span class="token punctuation">:</span> upperBound<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
        fillColor<span class="token punctuation">:</span> <span class="token string">'white'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>We also want to show a 95% label on the graph like the image at the start.  There are multiple ways to do that in Highcharts, but for this simple case we’ll just abuse the title attribute and move it down into the middle of the chart:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        text<span class="token punctuation">:</span> <span class="token string">'95%'</span><span class="token punctuation">,</span>
        y<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<div>
          <div
            class="gatsby-resp-iframe-wrapper"
            style="padding-bottom: NaN%; position: relative; height: 0; overflow: hidden;"
          >
            <iframe src="//jsfiddle.net/ben336/81kb997x/embedded/result,js/" allowfullscreen="allowfullscreen" frameborder="0" style="
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
          "></iframe>
          </div>
          </div>
<p>And with that we’ve taken our original inputs and produced a dynamic illustration of a confidence interval that matches the image we started with.  </p>
<h3>More Resources</h3>
<ul>
<li>
<p>Highcharts has great <a href="http://api.highcharts.com/highcharts/">documentation</a> and you can see more <a href="https://www.highcharts.com/demo">demos</a> on their site, both for Highcharts and their stock and map chart variants.  Note that Highcharts is not free for commercial use.  I’ve found that it is well worth the money though for any team that is going to be doing many data visualizations, especially if its using relatively standard forms of data visualizations on variable data.  </p>
</li>
<li>
<p>If you need more freeform visualizations, <a href="https://d3js.org/">d3</a> is a great place to look.  Here’s an example of D3 being used to draw a similar chart: <a href="http://bl.ocks.org/phil-pedruco/88cb8a51cdce45f13c7e">http://bl.ocks.org/phil-pedruco/88cb8a51cdce45f13c7e</a>  It’s more involved than the Highcharts example, but allows for more flexibility as a result.  And unlike Highcharts, its free to use for anything.  </p>
</li>
</ul>]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Grading Applications on Config Portability]]></title>
        <id>https://benmccormick.org/2017/04/14/grading-applications-on-config-portability/</id>
        <link href="https://benmccormick.org/2017/04/14/grading-applications-on-config-portability/">
        </link>
        <updated>2017-04-14T21:30:00Z</updated>
        <content type="html"><![CDATA[<p>This week I got a new laptop, and for the first time in a while I have separate work and personal computers.  One thing that this has made clear to me is that it is still non-trivial to keep settings and configurations easily up to date between 2 different PCs.</p>
<p>In my experience there are several levels of “portability” for applications, which are easy to think of as letter grades.</p>
<h4>A - <em>Seamless</em></h4>
<p>These applications have built in mechanisms for syncing configs and or data between 2 different environments.  When something is updated on one machine, it is either immediately updated on the other, or easy to pull, without having to remember to update anything or doing any previous setup.</p>
<h4>B - <em>Easy</em></h4>
<p>B grade applications are similar to seamless applications, but may have a few more potholes.  Possibly there is some involved setup required to get syncing working initially, or some small chunks of the application configuration don’t sync.</p>
<h4>C - <em>Workable</em></h4>
<p>At this point we’ve moved out of the range of easy syncing solutions.  Here it may be possible to import and export settings from a file, without any automatic syncing.  Or there may be a straightforward way to automate the setup, but no declarative representation of the config state.</p>
<h4>D - <em>Hard</em></h4>
<p>For some applications there is no clear way to sync or import state, but it is probably still possible through scripting if you’re willing to commit to it.</p>
<h4>F - <em>Impossible</em></h4>
<p>Some applications have proprietary settings that can’t be exported or scripted. There is no meaningful way to share settings for these programs.</p>
<h2>A mixed bag</h2>
<p>Setting up my new laptop this week, I found that the software I use a lot was all over the map on this scale.  Here are the grades:</p>
<h4>Atom - <em>B</em></h4>

          <a
            class="gatsby-resp-image-link"
            href="/static/093b823a2bee7ef140badd020e6e572c-61cc8.jpg"
            style="display: block"
            target="_blank"
            rel="noopener"
          >
            <span
              class="gatsby-resp-image-wrapper"
              style="position: relative; z-index: -1; display: block; "
            >
              <span
                class="gatsby-resp-image-background-image"
                style="padding-bottom: 38.46153846153846%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAdkRQf/EABYQAAMAAAAAAAAAAAAAAAAAAAAQIf/aAAgBAQABBQIq/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAGRAAAQUAAAAAAAAAAAAAAAAAAAEQEUGB/9oACAEBAAE/IVmjDf/aAAwDAQACAAMAAAAQ99//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAACAgMAAAAAAAAAAAAAAAARIQABEDFR/9oACAEBAAE/EGUgLM06x//Z'); background-size: cover; display: block;"
              >
                <img
                  class="gatsby-resp-image-image"
                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
                  alt="Atom Logo"
                  title=""
                  src="/static/093b823a2bee7ef140badd020e6e572c-76033.jpg"
                  srcset="/static/093b823a2bee7ef140badd020e6e572c-86b1b.jpg 143w,
/static/093b823a2bee7ef140badd020e6e572c-4eee3.jpg 285w,
/static/093b823a2bee7ef140badd020e6e572c-76033.jpg 570w,
/static/093b823a2bee7ef140badd020e6e572c-61cc8.jpg 650w"
                  sizes="(max-width: 570px) 100vw, 570px"
                />
              </span>
            </span>
          </a>
          
<p><a href="https://atom.io/">Atom</a> doesn’t have native syncing persay (though most configs are in a ~/.atom folder that can possibly be synced with git).  But it has a very nice <a href="https://github.com/atom-community/sync-settings">sync-settings</a> plugin that uses gists to sync settings across multiple machines.  It loses points due to a little bit of upfront pain (when setting up a new machine you need to either create a new gist or find your old one, and you need to generate github auth keys for each instance), but gains them back with a very nice set of options to selectively restore or choose when to backup, and painless support for all of Atom’s 3rd party plugiuns</p>
<h4>Sublime Text - <em>B+</em></h4>
<p>
          <a
            class="gatsby-resp-image-link"
            href="/static/379627f9a03d1e9aa502e010930f90a7-8c82b.png"
            style="display: block"
            target="_blank"
            rel="noopener"
          >
            <span
              class="gatsby-resp-image-wrapper"
              style="position: relative; z-index: -1; display: block; "
            >
              <span
                class="gatsby-resp-image-background-image"
                style="padding-bottom: 100%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAABzklEQVQ4y7XUPUgbYRzH8aeBIkjFQToIikMQQR1aRMFF7iV3SS45Y+pLXXQQglKLqBTsVkolVWJSS821Q2mHdrVL92d1EQQXHesoiKiIKFF//iM+Po82SaXBg89wzz3/L3fHcYzdx+G67gzhZUpeB6PRKCco0/p1MBKJcIK7GozbSI8+Qcx11HUZdByHE5Qy3GvAG2/B2rsa5LwHwBeG/pit7vl3MDHQhe8TTdh8X43zz+wyourrtgoHw+EwJxB+TDZiK/WoYET1zLWgzMlgKBTiBIJ4pEJ2PlTg90w9Xg+1Q50hMhgMBjmBUCh46jEsv2pAPGJC3auQQdu2OYFQ6g5Psj6svHmMVKIVQWWGyKBlWZxASCeasfq2pmQ4r8fRoczJYCAQ4AS39Tgavr7wYz/jw5n3dzAW1tT9xYMj8U58e+nHxmwVjhYZDhYYducY9lLs8lzEiwZN0+QEwsmSD+c0JJxlGXKfGI4/MhxmGLZmH+LXZC3sgAFlTgYNw+AEQi5L7y7/DV7JR7fTFViersPU86ewTB3q/isyqOs6JxBE8M98JX5ONGCstw2Gcr0IGdQ0jRMI2VE/hrs7oK7dQfHgf7oRTOYXyuTdy9//ArsSf5hQYhcEAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
              >
                <img
                  class="gatsby-resp-image-image"
                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
                  alt="Sublime Logo"
                  title=""
                  src="/static/379627f9a03d1e9aa502e010930f90a7-96365.png"
                  srcset="/static/379627f9a03d1e9aa502e010930f90a7-c0cbb.png 143w,
/static/379627f9a03d1e9aa502e010930f90a7-0e313.png 285w,
/static/379627f9a03d1e9aa502e010930f90a7-96365.png 570w,
/static/379627f9a03d1e9aa502e010930f90a7-58e89.png 855w,
/static/379627f9a03d1e9aa502e010930f90a7-8c82b.png 1024w"
                  sizes="(max-width: 570px) 100vw, 570px"
                />
              </span>
            </span>
          </a>
          </p>
<p><a href="https://www.sublimetext.com/3">Sublime Text</a> saves all of its configurations as JSON, so its pretty easy to move them over.  It loses a few points though for making you figure out how to sync them, and a few more points for sticking user configs by default in the <code>~/Library/Application Support/</code> directory, where it is a bit more difficult to sync using things like git and dotfiles.  </p>
<h4>Command Line programs - <em>A-</em></h4>
<div class="img-group">
  <image alt="Vim logo" src="vim.png">
  <image alt="fish logo" src="fish.png">
</div>
<div class="img-group">
  <image alt="git logo" src="git.png">
</div>
<p>Command line programs like Vim, Ack, bash/zsh/fish, and git all nail the idea of declarative configuration files that are stored in a common place.  They fall short of a pure A since they don’t provide a sync solution themselves (that would be very non-unixy), but since it is easy to set up <a href="https://dotfiles.github.io/">dotfile repos</a> to sync and backup these settings, they qualify for a strong A-.</p>
<h4>iTerm2 - <em>C</em></h4>
<p>
          <a
            class="gatsby-resp-image-link"
            href="/static/6ad77f78686b0db16d3e262640e631b8-012e9.png"
            style="display: block"
            target="_blank"
            rel="noopener"
          >
            <span
              class="gatsby-resp-image-wrapper"
              style="position: relative; z-index: -1; display: block; "
            >
              <span
                class="gatsby-resp-image-background-image"
                style="padding-bottom: 100%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAACjklEQVQ4y83US08aURjG8enSO8gwzCAgl2FuZ2CgWiv1smi6sDUxRFp2Jg0LRE3TxKirLirp1nZhWkyrrWy666Jbd/0AfoF+mafnPZYBEbtyUZJ/JifD+c07JwRJ+u8/9Xpdvby8/H0XXVxcHEpzc3PJnZ0d/Kvt7e1rbW1t+TUaDdHm5iY2NjY+S1NTUynXdeEWXLAHDCzP8xickgNn3oGdt2HbNizLgmmaIsMwRNls1k/XdaRSqS9SLBZL5Qo5sOcMyg8N9hpHVmyoRyoiRxHYjznodNF+OGtcA08JTHsPPSg/o7De2WBrfLqyA+WTgvDHMOynNhzGp3WcG2hnUiqTyWB6evqMwExhtgDrtQ35lwrzlQVWYQKknGcOGGM+2Pv6hCSTSYKQSCTAj++MzlAXYMOG3soidpoAe9EDrnLQ7YL0aoQQEI/HwQcScQeapn0lMFucLYK9dBH9Hoe34sFddaF90KC91+A8cWBaJp3PDYCKRqMijiESiXy7AotF0JTePO++h/xMHu4jF/qMjkQmcStAqaoq4hhkWT6X+E1DgAWOeZ44r3Q67SODANpMKYriFw6HMTk5SaBmEEYQnU0/0juBEulupvhEkEMyQqGQKBAInEv8CwZNdNtr9E4gALkL8IkQDFJB0cTExLk0NjZm9AL9SAfqRa6gIE3kxzFwqy2Njo6ag85j8DRBHyKAGh8fF3EM3GpLQ0NDpv/Uvk39G2nT342iEWpkRDQ8PAxutaVcLmeenJyg1WqJjo+PcXBwgP39fdHu7q5Y7+3tXVt37lOde7VarS3xH2ugWq2+WV9fb1YqlWa5XG4uLy83l5aWRAsLC/6aXw8XFxcP6Tqgt6VSaaXzP3vvjpL+AJoEBnJEvTthAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
              >
                <img
                  class="gatsby-resp-image-image"
                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
                  alt="iterm2 Logo"
                  title=""
                  src="/static/6ad77f78686b0db16d3e262640e631b8-012e9.png"
                  srcset="/static/6ad77f78686b0db16d3e262640e631b8-c0cbb.png 143w,
/static/6ad77f78686b0db16d3e262640e631b8-0e313.png 285w,
/static/6ad77f78686b0db16d3e262640e631b8-012e9.png 512w"
                  sizes="(max-width: 570px) 100vw, 570px"
                />
              </span>
            </span>
          </a>
          </p>
<p><a href="https://www.iterm2.com/">iterm2</a> is probably the most popular terminal replacement on the mac.  It has tons of settings that you normally edit through a GUI menu.  It does allow you to export those settings, and import them on another machine.  So you need to have access to the original file to generate a snapshot at any given time and need a way to transfer the file(s), but otherwise this is still pretty workable.</p>
<h4>Hyper - <em>A-</em></h4>
<p><a href="https://hyper.is/">Hyper</a> is a newer <a href="https://electron.atom.io/">Electron</a>-based terminal application for OSX.  Like Sublime Text, it defaults to offering a GUI interface into text based configuration files.  Unlike Sublime Text, it stores that file and its plugin files in the users home directory where they can easily be included in a dotfile repo.</p>
<h4>MacOS - <em>D-</em></h4>
<p>
          <a
            class="gatsby-resp-image-link"
            href="/static/8af8f768ce91ce5a30f67cff603de68e-74348.jpg"
            style="display: block"
            target="_blank"
            rel="noopener"
          >
            <span
              class="gatsby-resp-image-wrapper"
              style="position: relative; z-index: -1; display: block; "
            >
              <span
                class="gatsby-resp-image-background-image"
                style="padding-bottom: 56.25%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEFAgT/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAHbms07yWOf/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAECERL/2gAIAQEAAQUC5MRkk0x0xNn/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwFX/8QAFhABAQEAAAAAAAAAAAAAAAAAMQAQ/9oACAEBAAY/AsZnP//EABoQAAICAwAAAAAAAAAAAAAAAAARAVExQXH/2gAIAQEAAT8hWdlwwWwpwIZk/9oADAMBAAIAAwAAABCzL//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQMBAT8QbukP/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EFUUf//EABoQAQADAQEBAAAAAAAAAAAAAAEAESExkUH/2gAIAQEAAT8QeEQ4oz7cUWeGWUwLqUZbdQRr2n//2Q=='); background-size: cover; display: block;"
              >
                <img
                  class="gatsby-resp-image-image"
                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
                  alt="macOS sierra Logo"
                  title=""
                  src="/static/8af8f768ce91ce5a30f67cff603de68e-76033.jpg"
                  srcset="/static/8af8f768ce91ce5a30f67cff603de68e-86b1b.jpg 143w,
/static/8af8f768ce91ce5a30f67cff603de68e-4eee3.jpg 285w,
/static/8af8f768ce91ce5a30f67cff603de68e-76033.jpg 570w,
/static/8af8f768ce91ce5a30f67cff603de68e-74348.jpg 800w"
                  sizes="(max-width: 570px) 100vw, 570px"
                />
              </span>
            </span>
          </a>
          </p>
<p>Unlike most of the applications I run on it, MacOS is extremely unfriendly to syncing configurations.  There are a few settings I want the same on all my laptops.  Touchpad scrolling should be in the “unnatural”<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup> direction, keys should repeat when held, and caps log should be disabled/mapped to control.  There is a set of apps that I would always want to have installed.  There is no declarative way to configure this, or sync it across computers.  Apple’s preferred strategy seems to be having folks use time machine backups, which is great for setting up a new computer for the same purpose as an old one when it is being replaced, but unhelpful when 2 laptops are being used by the same person for different purposes.  It is possible to script the setup of a new laptop with scripts like <a href="https://github.com/mathiasbynens/dotfiles/blob/master/.macos">this one</a> but its very involved and when you update a setting the “normal MacOS way”, its not always clear how you would add that setting to a script.  Plus a “from scratch” script won’t help keep 2 machines aligned as their configs diverge over time.</p>
<h4>Cloud Services - <em>A</em></h4>
<p>Unsurprisingly, the one class of software that really nails this experience is cloud software.  For services like Dropbox, Bear, Evernote, Slack, email &#x26; calendar clients, etc, most if not all settings and data is stored on servers somewhere else, so getting a new machine up to date and staying in sync over time is just a matter of entering a password.  There are reasons to dislike cloud services, but when moving to a new machine, they’re a thing of beauty.</p>
<h2>Takeaways</h2>
<p>If you are going to be using 2 computers for different purposes as a developer, take the time to setup a good dotfiles repo that contains the configs for the command line programs and editors you use.  These days if you do that, pretty much everything else but the operating system will come right along.</p>
<div class="footnotes">
<hr>
<ol>
<li id="fn-1">
<p>Honestly the wording around that feature is pretty insulting.</p>
<a href="#fnref-1" class="footnote-backref">↩</a>
</li>
</ol>
</div>]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[The Mystery of Docker and the Disk-Eating Cow]]></title>
        <id>https://benmccormick.org/2017/03/28/the-mystery-of-docker-and-the-disk-eating-cow/</id>
        <link href="https://benmccormick.org/2017/03/28/the-mystery-of-docker-and-the-disk-eating-cow/">
        </link>
        <updated>2017-03-28T14:40:00Z</updated>
        <content type="html"><![CDATA[<p>Yesterday morning I was innocently minding my own business, downloading some files, when I noticed that nearly all the disk space on my 256GB work laptop had been consumed.  This seemed rather unlikely to me, given that I’d only had the laptop for about a year and I didn’t store anything other than code and work documents on it.  Text files just don’t take up that much space most of the time.  So I decided to make a purchase I’d considered for a while, bought <a href="https://daisydiskapp.com/">Daisy Disk</a>, and began investigating.</p>
<p>The first thing I noticed was a huge amount of the disk space (about half) was taken up by the <code>~/Library/Containers</code> folder. That folder contained my email history and also data on my <a href="https://www.docker.com/">Docker</a> containers. Docker functions as a lightweight VM, and essentially holds copies of virtualized operating systems and file systems inside each docker container and image, so it made sense to me that it could be taking up a lot of space, though >120GB still seemed wrong for my paltry 4 containers.  So my first step was to delete all of the containers and images on my laptop.  That cleared about 20GB of space but still left my drive looking like this:</p>
<p><img src="/posts/images/docker-cow/daisy.png" alt="daisy disk showing 100+GB of docker"></p>
<p>At this point, I was annoyed.  103.5 GB was taken up by some folder called Docker.qcow2 and Daisy Disk wouldn’t show me what was inside.  So I drilled in on the file system and immediately found out that Docker.qcow2 was not a directory like I’d assumed due to size, but a single 100+GB file.  At that point I decided to poll my teammates to see if I was the only one dealing with this:</p>
<p><img src="/posts/images/docker-cow/slack.png" alt="daisy disk showing 100+GB of docker"></p>
<p>So between the 5 of us, we each had “cow files” taking up between 23 and 103GB of disk space. Some Googling revealed a <a href="https://github.com/docker/for-mac/issues/371">github thread</a> that showed this is a so far unsolved issue with Docker For Mac.  Summary: qcow2 files are a format for saving disk images.  Docker For Mac’s implementation works well for writing and updating images, but doesn’t automatically free up disk space when a container or image is deleted. So as you use and delete containers over time this file gradually grows.  I have a habit of deleting and recreating containers when I’m trying to debug something, which explains why I had a much larger file than others.  There isn’t currently a true fix for this issue, but you can delete the file.  You’ll lose all your containers and images, but when you recreate them the file will be small again.  There also is supposed to be some automatic limiting of the file.  The current cap is 64GB, but there is work on making it configurable.  Unfortunately the current cap is not respected if you had previously used docker-machine to control docker on your machine, which is how my file exceeded the cap.  I’m also unclear on what happens when the file hits the cap.  I get the impression that things stop working and you need to delete everything anyway (you just avoid running out of disk space on the host machine).</p>
<p>Fortunately it was no problem for me to delete everything, and so I was able to clear things out, at which point my disk looked a lot happier:</p>
<p><img src="/posts/images/docker-cow/daisy2.png" alt="daisy disk showing 100+GB of docker"></p>
<h3>Lessons Learned</h3>
<p>I had 3 takeaways from this interesting adventure.</p>
<ol>
<li>If you’re using Docker For Mac, keep an eye on your disk space.  If you’re able to occasionally delete and recreate your containers without data loss, consider occasionally doing that and deleting the cow file.  If you can’t do that, be careful how many containers you add and delete, and make sure you manage your disk space well.</li>
<li><a href="https://daisydiskapp.com/">Daisy Disk</a> is awesome and highly recommended.  It’s an example of a rare breed: the beautiful system utility. The visualizations it shows are both pretty and useful; it made diagnosing this issue a breeze.  </li>
<li>One more thing I learned from my coworkers slack yesterday: <code>ls</code> takes an <code>-h</code> argument that shows file sizes in KBs/MBs/GBs instead of all in bytes.  This is super helpful when examining large files.  Compare the 2 lists of files from my Downloads folder in the image below. The normal form is very nice for comparing 2 files side by side and seeing which one is bigger, but the second form is much more helpful when you want to get an idea of exactly how big something is, or communicate it to others.  Most of us don’t think about file sizes in terms of bytes anymore.</li>
</ol>
<p><img src="/posts/images/docker-cow/downloads.png" alt="daisy disk showing 100+GB of docker"></p>]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Running Jest Tests Before Each Git Commit]]></title>
        <id>https://benmccormick.org/2017/02/26/running-jest-tests-before-each-git-commit/</id>
        <link href="https://benmccormick.org/2017/02/26/running-jest-tests-before-each-git-commit/">
        </link>
        <updated>2017-02-26T23:00:00Z</updated>
        <content type="html"><![CDATA[<p>My main work project makes heavy use of <a href="https://facebook.github.io/jest/">Jest</a> to test our JavaScript code.  For a while now I’ve wanted to set up a way to run tests every time I run a commit.  I knew that git provides <a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks">hooks</a> that allow scripting actions to occur before or after any commit or push, and in fact we were already using a <code>pre-commit</code> hook script to lint our code with <a href="http://eslint.org/">ESLint</a>.  But it was non-obvious how to make that work well with Jest testing.  I eventually figured out a setup that worked, and the found a better way to do both the Jest and ESLint testing.  Since it took me a while to work through, I thought I’d share it here and save the rest of you some time.</p>
<h3>What didn’t work</h3>
<p>A naive approach to this problem would be to set up a pre-commit hook that simply ran <code>jest</code> to run all tests. The problem is that running our full test suite currently takes between 10 and 20 seconds to run all tests and that time is increasing as we grow our test suite.  Adding that overhead to every commit would cost my team a lot of time, and would be especially inefficient since the repo contains plenty non-JavaScript code that doesn’t require tests to be run when updated.</p>
<p>For our ESLint hook, we queried git to get a list of staged files, and then ran eslint against each one of them individually, displaying a pass/fail message.  That looked something like this:</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code>STAGED_FILES<span class="token operator">=</span><span class="token punctuation">$(</span>git <span class="token function">diff</span> --cached --name-only --diff-filter<span class="token operator">=</span>ACM <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"js$"</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$STAGED_FILES</span>"</span> <span class="token operator">=</span> <span class="token string">""</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token keyword">exit</span> 0
<span class="token keyword">fi</span>

PASS<span class="token operator">=</span>true

<span class="token keyword">for</span> FILE <span class="token keyword">in</span> <span class="token variable">$STAGED_FILES</span>
<span class="token keyword">do</span>
    eslint --quiet <span class="token string">"<span class="token variable">$FILE</span>"</span>

    <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$?</span>"</span> <span class="token operator">==</span> 0 <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token keyword">echo</span> <span class="token string">"\t\033[32mESLint Passed: <span class="token variable">$FILE</span>\033[0m"</span>
    <span class="token keyword">else</span>
        <span class="token keyword">echo</span> <span class="token string">"\t\033[41mESLint Failed: <span class="token variable">$FILE</span>\033[0m"</span>
        PASS<span class="token operator">=</span>false
    <span class="token keyword">fi</span>
<span class="token keyword">done</span>
</code></pre>
      </div>
<p>This works great for ESLint, but doesn’t work out of the box for Jest, because I don’t want Jest to run the files that changed, I want them to run any tests that changed AND any tests that might have been broken because of that.</p>
<p>Jest has a wonderful command line flag <code>jest --onlyChanged</code>/<code>jest -o</code> that runs only the tests related to files that have been changed according to git.  It is extremely helpful since it is smart enough to read the dependency structure for the project and run all tests that might be changed from updating a source file. It also has a <code>--lastCommit</code> option that does the same thing for files that were in the previous commit.  Unfortunately, these options aren’t helpful at the point of committing, since <code>onlyChanged</code> does not look at files that have been staged for commit, and we haven’t actually made a commit yet for <code>lastCommit</code> to read.</p>
<h3>What Did Work</h3>
<p>Fortunately Jest has a lower level command that uses the same logic as <code>onlyChanged</code> and <code>lastCommit</code>.  <code>--findRelatedTests</code> is a flag that tells Jest to run any tests related to the files passed to it instead of trying to run those files as tests as it would normally do.</p>
<img src="/posts/images/jest-related-tests.png" alt="an example of findRelatedTests running against the redux repo">
<p>This is a perfect fit for a pre-commit hook.  I was able to integrate it into my existing script like this:</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code>jest --bail --findRelatedTests <span class="token variable">$STAGED_FILES</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$?</span>"</span> <span class="token operator">==</span> 0 <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token keyword">echo</span> <span class="token string">"\t\033[32mJest Tests Passed\033[0m"</span>
<span class="token keyword">else</span>
    <span class="token keyword">echo</span> <span class="token string">"\t\033[41mJest Tests Failed\033[0m"</span>
    PASS<span class="token operator">=</span>false
<span class="token keyword">fi</span>
</code></pre>
      </div>
<p><code>$STAGED_FILES</code> is re-used from the eslint portion of the script, and is just a space delimited list of files that are being committed.  The <code>--bail</code> option simply stops running tests as soon as one has failed.  Including that is optional, you won’t see all the tests that have failed, but the failure will happen faster and you’ll be able to decide how to proceed, including possibly running the full test script on your own.   </p>
<p>Those lines (along with some sanity checks for the existence of Jest and error handling when PASS is set to false) are enough to get a workable commit hook going, but they’re not ideal.  pre-commit hooks aren’t persisted by git, so each user has to install the hook script individually, and any updates aren’t shared automatically.  Plus I’m inefficiently passing all staged files to eslint and Jest regardless of whether they’re JavaScript that those tools are actually meant to work on.  My ESLint code was also written before ESLint developed robust <code>--fix</code> capabilities, and doesn’t try to fix the errors it is capable of fixing.  Finally, while this is just poor coding and not an inherent limitation of my other method, I’m using globally installed versions of Jest and ESLint instead of scoping them to my project.</p>
<h3>Making it better</h3>
<p>Fortunately I’d discovered a better solution the other day while working on something else.  There is an npm package for making this process easier, <a href="https://github.com/okonet/lint-staged">lint-staged</a>.  Lint staged abstracts away the boilerplate of getting the staged files, and makes it easy to run local node executables against specific sets of files.  I was able to replace my whole pre-commit script and address all of the problems mentioned above with only a few lines in my package.json:</p>
<div class="gatsby-highlight">
      <pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"lint-staged"</span><span class="token operator">:</span> <span class="token string">"lint-staged"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"lint-staged"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"*.js"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">"eslint --fix"</span><span class="token punctuation">,</span>
      <span class="token string">"git add"</span><span class="token punctuation">,</span>
      <span class="token string">"jest --bail --findRelatedTests"</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"eslint"</span><span class="token operator">:</span> <span class="token string">"3.16.1"</span><span class="token punctuation">,</span>
    <span class="token property">"jest"</span><span class="token operator">:</span> <span class="token string">"19.0.1"</span><span class="token punctuation">,</span>
    <span class="token property">"lint-staged"</span><span class="token operator">:</span> <span class="token string">"3.3.1"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p><code>lint-staged</code> now handles making sure that I’m only running checks against JavaScript files, lets eslint autofix and stage any files that it can fix, and uses the local versions of jest and eslint.  It also adds a nice pretty interface for the results:</p>
<img src="/posts/images/lint-staged-errors.png" alt="pretty lint-staged output">
<p><code>lint-staged</code> docs recommend using an npm based hooks manager like <a href="https://github.com/observing/pre-commit">pre-commit</a> for running the scripts, but due to some quirks in my setup (node_modules is symlinked, and I sometimes want to run these commands inside a docker container), I found it easier to maintain a custom pre-commit script and just replace the previous logic with <code>npm run lint-staged</code>.  Either way, all of the actual logic is now checked into the repository and shared between all users.  The only manual step is adding the call to a pre-commit hook or (if you’re using a helper lib) running npm install.</p>
<h3>More Resources</h3>
<ul>
<li>This maybe merits a future post on its own, but if you’re interested in automating away your code style maintenance look at combining <a href="https://github.com/prettier/prettier">prettier</a> (and possibly  <a href="https://github.com/not-an-aardvark/eslint-plugin-prettier">eslint-plugin-prettier</a>) with the pre-commit hooks from above.  Prettier will guarantee that your code follows a consistent style, and because it handles maximum line lengths, is much more robust than ESLint on its own.  Using its ESLint plugin within my editor and on pre-commit hooks has pretty much eliminated me manually fixing code style problems.</li>
</ul>]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Giving Context to Best Practices]]></title>
        <id>https://benmccormick.org/2017/02/18/context-to-best-practices/</id>
        <link href="https://benmccormick.org/2017/02/18/context-to-best-practices/">
        </link>
        <updated>2017-02-18T23:30:00Z</updated>
        <content type="html"><![CDATA[<p>I’ve noticed a frustrating trend in online discussions about web development where developers take their personal experience with a tool or practice and promote it as a universal truth.  Some of this is the nature of being human: we all see the world through our own lens.  But the best technical observations exist within a specific context.</p>
<p>Compare</p>
<blockquote>
<p>Everybody should be writing code using static types, the extra syntax is worth it because of all the bugs it prevents.</p>
</blockquote>
<p>to</p>
<blockquote>
<p>If you’re working in a large code base with many developers, static typing is extremely useful, because the overhead from writing extra code and compiler errors is more than made up for by reducing bugs and clearly expressing intent when developers edit code they didn’t write.</p>
</blockquote>
<p>The first quote presents a tradeoff and declares a universal preference for one direction in the tradeoff.  The second quote adds more details about the context in which the practice has been beneficial, and explains what about those circumstances (developers editing code they didn’t write) affects the tradeoff decision.  </p>
<p>These type of distinctions are often lost in online discussions about development best practices. I have no interest in naming and shaming, but specifically I’ve seen this in discussions around JavaScript performance, testing, frameworks vs other frameworks vs VanillaJS, responsive design, progressive enhancement, and build pipelines.  For this post, I’m going to try to lay out a list  of some of the context that I’ve found helpful to take into account when giving or interpreting best practice advice.</p>
<h3>Context to keep in mind when discussing and interpreting best practices</h3>
<h4>Beginner vs Veteran</h4>
<p>I’ll start with a distinction that folks seem better about making. Sometimes recommendations that make sense for beginners don’t work as well for more experienced developers and vice versa.  For instance it might make sense to advise a more experienced developer to use and heavily configure a build system like <a href="https://webpack.github.io/">Webpack</a> for a new project. But beginners already have a lot to learn with each new project and might benefit from a simpler system; either a simple project without a build step, or a “batteries included” system like <a href="https://github.com/facebookincubator/create-react-app">Create React App</a> or <a href="https://ember-cli.com/">Ember CLI</a>.  Making these distinctions is important for helping developers who may feel overwhelmed by all the concepts they need to learn when getting started with web development.</p>
<h4>Big Team vs Small team vs Individual</h4>
<p>Another dynamic that matters when expressing best practices is the size of a team working on a project.  If a project is being developed by a large team, or several teams, or is meant to be used as a library by many people, techniques like automated documentation, static type checking, and clear style guidelines may be essential.  But for a personal project or a professional project run by a 1 person team, those same techniques may provide a lot of overhead for minimal benefit. Most teams will fall between those extremes and will have to weigh the tradeoffs in each case.</p>
<h4>Personal Project vs Internal tool vs B2B Products vs Consumer Products</h4>
<p>The audience of a project is also important.  Some projects we build for ourselves.  Some may be internal for a company, or for a group that we’re a part of.  Other projects are sold professionally to businesses or offered freely to consumers on the web.  There are different goals and expectations for each of these groups, that may impact which practices and techniques are important.  For instance, nobody cares if a personal web application you’ve made to organize your todos crashes in Internet Explorer or doesn’t have alt-text for images.  But browser compatibility and accessibility might be extremely important for a consumer web app aimed at a broad population.  Similarly, it might be ok for your internal web tool to have un-minified JavaScript and large un-optimized CSS and JavaScript bundles, since it will always be served locally over a fast connection.  But it could severely hurt the user experience to do the same things for a high traffic public site.</p>
<h4>Web page vs Web app</h4>
<p>Distinguishing between web pages<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup> and web apps<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup> would short circuit a large number of internet arguments before they started.  Specifically arguments about progressive enhancement, whether we use too much JavaScript and whether a site is “acceptable” if it doesn’t work without JavaScript.  Many accessibility and performance proponents push very strongly for less JavaScript and sites that work without JavaScript.  And that is a good thing… for the sites that <strong>can</strong> function without JavaScript.  Web apps like Trello, Google Docs, or Postman just don’t make sense without JavaScript.  But saying that we should use less JavaScript isn’t bad advice, it’s just bad advice when given or taken without context.</p>
<h4>Existing project vs Greenfield project</h4>
<p>Some choices are only easy to make at the start of a project.  It is possible to change the language or framework a project is written in midstream, but it is often extremely risky and painful.  So asking a developer working on a 5 year old JavaScript project with thousands of lines of code why they didn’t write it in <a href="http://elm-lang.org/">Elm</a> or <a href="https://clojurescript.org/">ClojureScript</a> is not helpful.  But suggesting that somebody write a new project in Elm may be just fine.</p>
<h4>Short term project vs Long term project</h4>
<p>Some software projects are meant to be written, completed, and never seen again.  For instance a promotional site for an event.  Some projects, like financial software, are meant to last for decades.  This is yet another distinction than can impact best practice discussions.  When working on a short term project, speed of delivery and initial quality tend to matter a lot.  For long term projects it may be better to prioritize maintainability, security and ease of deployment.</p>
<div class="footnotes">
<hr>
<ol>
<li id="fn-1">
<p>Web page: sites that are mostly content focused with some possible interactivity layered on top</p>
<a href="#fnref-1" class="footnote-backref">↩</a>
</li>
<li id="fn-2">
<p>Web app: sites that are primarily an interactive experience for the user and behave more like traditional desktop or mobile applications</p>
<a href="#fnref-2" class="footnote-backref">↩</a>
</li>
</ol>
</div>]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Evaluating Web Apps With Lighthouse]]></title>
        <id>https://benmccormick.org/2017/02/13/improving-site-performance-with-lighthouse</id>
        <link href="https://benmccormick.org/2017/02/13/improving-site-performance-with-lighthouse">
        </link>
        <updated>2017-02-14T03:30:00Z</updated>
        <content type="html"><![CDATA[<p>Last year Google coined the term “Progressive Web App” as a way of describing the type of sites and applications that they think are the future of the web.  Progressive Web Apps are sites that load quickly, are always responsive to user input, work as well as possible offline, and integrate with native platforms like native apps.  While this site is not an “app” per say, I do want it to be as fast and responsive as possible, and I also wanted to better understand what Google is pulling under the PWA umbrella.  Fortunately, Google has built a tool <a href="https://developers.google.com/web/tools/lighthouse/">Lighthouse</a> to help developers profile and improve their web applications, comparing them to a set of PWA benchmarks.  So I took this site through Lighthouse, and worked against their suggestions with the goal of learning more about PWAs and improving the experience of using benmccormick.org.  I’m passing along my experience here.</p>
<h3>Getting Started</h3>
<p>I began by downloading the Lighthouse extension in the <a href="https://chrome.google.com/webstore/detail/lighthouse/blipmdconlkpinefehnmjammfjpmpbjk">Chrome Web Store</a>.  Lighthouse can be installed either as a chrome extension or a node command line tool.  Both produce the same HTML report, but I chose the chrome extension for the convenience of keeping everything in the browser.  When I ran the initial report, I got the following result:</p>

          <a
            class="gatsby-resp-image-link"
            href="/static/b43f9b9716550b8ad7ac2cd3dad6b796-c68b8.png"
            style="display: block"
            target="_blank"
            rel="noopener"
          >
            <span
              class="gatsby-resp-image-wrapper"
              style="position: relative; z-index: -1; display: block; "
            >
              <span
                class="gatsby-resp-image-background-image"
                style="padding-bottom: 15.844402277039848%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsSAAALEgHS3X78AAAAmElEQVQI12PQs9/x38Jz338jlz3/FY22/O/xrP1/Yd+l/0+fPgXjJ0+egPGbN2/+//r1Cyf+8ePH/y9fvvxnUDPf+l/FbPt/eaNtYAwy9Mz+C///vDkFNuTt27f/X79+DaZBGv/9+4cXM9y8/er/rTuv/9+++/b/k2dfwfjbh6f//96bA3flixcv4K58//492PC/f//+xwYAdJjTkOzFp0sAAAAASUVORK5CYII='); background-size: cover; display: block;"
              >
                <img
                  class="gatsby-resp-image-image"
                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
                  alt="first score: 48/100"
                  title=""
                  src="/static/b43f9b9716550b8ad7ac2cd3dad6b796-96365.png"
                  srcset="/static/b43f9b9716550b8ad7ac2cd3dad6b796-c0cbb.png 143w,
/static/b43f9b9716550b8ad7ac2cd3dad6b796-0e313.png 285w,
/static/b43f9b9716550b8ad7ac2cd3dad6b796-96365.png 570w,
/static/b43f9b9716550b8ad7ac2cd3dad6b796-58e89.png 855w,
/static/b43f9b9716550b8ad7ac2cd3dad6b796-c68b8.png 1054w"
                  sizes="(max-width: 570px) 100vw, 570px"
                />
              </span>
            </span>
          </a>
          
<p>48 out of 100 didn’t seem like a bad starting place.  Scrolling down it looked like I was mainly dinged on a few main areas:</p>
<ol>
<li>I had no offline support</li>
<li>I did’t have any special setup for being included on a users homescreen. (I did have platform appropriate icons, but no app configuration)</li>
<li>I had some possible inefficiencies in the assets I loaded.</li>
</ol>

          <a
            class="gatsby-resp-image-link"
            href="/static/9e55b24731cd8d1af11946a379849de5-39941.png"
            style="display: block"
            target="_blank"
            rel="noopener"
          >
            <span
              class="gatsby-resp-image-wrapper"
              style="position: relative; z-index: -1; display: block; "
            >
              <span
                class="gatsby-resp-image-background-image"
                style="padding-bottom: 23.485967503692766%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAAt0lEQVQY05WP3QrDIAyF+/4vuIuB0vrXWmRWXVuo46xJke1yE+TEmHw56Wqt6PsexhhorWGthZQSQgg45zAMA+uvpzuOg0HUSLBvpbxSipUGTtPEGkKANhb2HORGf+Y9/8UYLyA50CfEe8+wcRxZKT/PM78J3AZRs7YThH5AmgXWJ5RSsO87Olo5pYSorkK6BCAlYM6Zi5dl4bhpeW4IqSLkiry9Piu34HW/8TrNIbklN+u64p/zBpcye/JYzjOeAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
              >
                <img
                  class="gatsby-resp-image-image"
                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
                  alt="offline issues"
                  title=""
                  src="/static/9e55b24731cd8d1af11946a379849de5-96365.png"
                  srcset="/static/9e55b24731cd8d1af11946a379849de5-c0cbb.png 143w,
/static/9e55b24731cd8d1af11946a379849de5-0e313.png 285w,
/static/9e55b24731cd8d1af11946a379849de5-96365.png 570w,
/static/9e55b24731cd8d1af11946a379849de5-39941.png 677w"
                  sizes="(max-width: 570px) 100vw, 570px"
                />
              </span>
            </span>
          </a>
          

          <a
            class="gatsby-resp-image-link"
            href="/static/39fef9f1d1910ba1d2f0a61fe1e96fcb-0f229.png"
            style="display: block"
            target="_blank"
            rel="noopener"
          >
            <span
              class="gatsby-resp-image-wrapper"
              style="position: relative; z-index: -1; display: block; "
            >
              <span
                class="gatsby-resp-image-background-image"
                style="padding-bottom: 91.183879093199%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAABfklEQVQ4y8VUCW7DIBDM/x8YJb7bpo7rcNiWHcfndBcKjdSqlaNKRRotxrAszAy7dV3RNA3CMESSJDgcDjgej4jjGEEQoCgKaK0hpTRR6BavYsBZDjhRLFVr/jG6rsMO1Nq2RZ7nfqFSyoPHHO7H3DyOVVWZWNe1Tcht0QrV3SKuelkWbG0+4ToKVOICEUfoizMWKbAIgpIWtOFSaeorC/q3jsNPCaVJKKMIOsvQvDxjeCvsYk5OR9pWIZGzXq+YsxTzU4YpiTFTtdx3YxsrFKhpgSpLKJqsCepywdT3WKeRMG2r0CQl2ucoxJwmNoaBrZL7SbS9QnOHpD9FCWs6Znc6PU6KTTpaArT6JOMRUljh+/3eOCQilhnsEnaOc41zgxOzd45UyOVIjumNdk3CYRhoAmmQjuEm3ruDI2/KSvCK+Oi77291WBthx38l7NILWxEhV/L2w3f4q2wY22VTkrArf2f8gvDrcbvdvtzZfwm79MLWaQpNkjHClttIeQc+CW5kIdXlRgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
              >
                <img
                  class="gatsby-resp-image-image"
                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
                  alt="native issues"
                  title=""
                  src="/static/39fef9f1d1910ba1d2f0a61fe1e96fcb-96365.png"
                  srcset="/static/39fef9f1d1910ba1d2f0a61fe1e96fcb-c0cbb.png 143w,
/static/39fef9f1d1910ba1d2f0a61fe1e96fcb-0e313.png 285w,
/static/39fef9f1d1910ba1d2f0a61fe1e96fcb-96365.png 570w,
/static/39fef9f1d1910ba1d2f0a61fe1e96fcb-0f229.png 794w"
                  sizes="(max-width: 570px) 100vw, 570px"
                />
              </span>
            </span>
          </a>
          

          <a
            class="gatsby-resp-image-link"
            href="/static/9198b7ff42694743ff6a9ceab414b4bd-652c7.png"
            style="display: block"
            target="_blank"
            rel="noopener"
          >
            <span
              class="gatsby-resp-image-wrapper"
              style="position: relative; z-index: -1; display: block; "
            >
              <span
                class="gatsby-resp-image-background-image"
                style="padding-bottom: 87.41134751773049%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAABU0lEQVQ4y52UC2+CQBCE/f8/r42t0iCiIBB8kSCgPLb91iwNjaGBSya3EJibnd29RV3XEkWRxHEsh8NB46IoZO5adF0nVVVJdbnI/X6XPM91B4/HQ8qy1L1pGuHwtm2Ff8BLQgvaKFSFvu/LdrtV8IzyIAj0/W63k81mI5efw/8l9Mongeu6+pPjOKpycsoWvOXvkiSJ7Pd7VRSGofp5PB411UkegrZ7eoNHLEtpzK+XhJyOX3iFKtTh1fV6nVdlCxr3S1MkbbyEmOrPJmTRIhAC1NIukwktZdQBYgoDIJ6tcF04g2kBaZoObLD3Y1XvCT9un/oxqUJshMQQZlk2qPxo29AqgPH6O1pTWqb3EL9QZqkR287IoXayh6vbuvcLMK/n81krP6soq2yphKfTSYFCuxzwzyZobGHPb2P7Xq8QEmbY5tmKxUFcHMAuEeB5Xj/z33u9KOKbzA5XAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
              >
                <img
                  class="gatsby-resp-image-image"
                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
                  alt="asset issues"
                  title=""
                  src="/static/9198b7ff42694743ff6a9ceab414b4bd-652c7.png"
                  srcset="/static/9198b7ff42694743ff6a9ceab414b4bd-c0cbb.png 143w,
/static/9198b7ff42694743ff6a9ceab414b4bd-0e313.png 285w,
/static/9198b7ff42694743ff6a9ceab414b4bd-652c7.png 564w"
                  sizes="(max-width: 570px) 100vw, 570px"
                />
              </span>
            </span>
          </a>
          
<p>Native app support isn’t a huge priority for me, and the assets issue seemed small, so I decided to investigate the offline support issue first.</p>
<h3>Offline</h3>
<p>I based my service worker implementation off of <a href="https://github.com/chriscoyier/Simple-Offline-Site">Simple Offline Site</a> a demo Service Worker repo created by Chris Coyier for an article on <a href="https://css-tricks.com/serviceworker-for-offline/">CSS Tricks</a>.  This was perfect since it’s default behavior was what I wanted: cache everything, and check for updates from the server everytime we return from cache so we’re never out of date for long.  You can see what I did specifically in my <a href="https://github.com/benmccormick/benmccormickorg/blob/master/pages/sw.es6">github repo for this site</a>. After adding the service worker, my score moved up to 63/100.  </p>
<p>Finally, Service Workers only work on HTTPS connections, but most links to my site are not https currently. So to take full advantage (and to address another metric I was flagged on), I used a <a href="https://support.cloudflare.com/hc/en-us/articles/200170536-How-do-I-redirect-all-visitors-to-HTTPS-SSL-">CloudFlare page rule</a> to redirect all visting traffic to use https.  That bumped me up to 69/100.</p>

          <a
            class="gatsby-resp-image-link"
            href="/static/3524d6aba8ebb3d97647be7aa141fefa-0b307.png"
            style="display: block"
            target="_blank"
            rel="noopener"
          >
            <span
              class="gatsby-resp-image-wrapper"
              style="position: relative; z-index: -1; display: block; "
            >
              <span
                class="gatsby-resp-image-background-image"
                style="padding-bottom: 86.86868686868686%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAABnElEQVQ4y51Ua2/CMAzk//+e/YpJ0yYVGJto1dIHDX2lqC3Q140zSmH7RGfpcEjw4bOdLIbsFbX3Atd14XnehLIsMY7jbCzGco0ufUOe58iyTHyapkJIz73T6YRnbUHWuq4RhiF2ux1835cMuY6iCE3TyDlJq6qSNffMPj3PuG7b9kZ4uVzgf6zhWxtBuPqGvQzhXFEHSgLO57P4Rxgy47uuuxESTmTB8Rw4zg3MkLL7RGOO3TN8t7D/3EJ92Yg3Ni4qR3cla8NkPiG1s/hFUfxqjtZavAH3H/fM7xhHNRMhbVmtoHKFOI4FbAgbpJSSgL7vn8+QlncF9FFL7TiTtm3jcDhIwYdhmCeZ5p8D5DoXMmK73cooUcrsOaRZ1RKpTmWYmRkRBIHIT5JE5uxpQs4YC8x6MZhknKn/2HRTKJHzx9rRmzqaueSaTTLd/dtxguM3Sc7aTJpiRseA3xnMazdLMmWax4CenX32haHdX5vrB/+dEtlVk5UBa/qYtcmYcs2r9Hg2SfZcC/G3LdfvuNujiQ447VP0WTmrKT9f9h++NLX0OgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
              >
                <img
                  class="gatsby-resp-image-image"
                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
                  alt="asset issues"
                  title=""
                  src="/static/3524d6aba8ebb3d97647be7aa141fefa-96365.png"
                  srcset="/static/3524d6aba8ebb3d97647be7aa141fefa-c0cbb.png 143w,
/static/3524d6aba8ebb3d97647be7aa141fefa-0e313.png 285w,
/static/3524d6aba8ebb3d97647be7aa141fefa-96365.png 570w,
/static/3524d6aba8ebb3d97647be7aa141fefa-0b307.png 792w"
                  sizes="(max-width: 570px) 100vw, 570px"
                />
              </span>
            </span>
          </a>
          
<h3>Native Support</h3>
<p>As I said previously, native platform support isn’t a major priority for this blog, but I was curious about the process.  Getting native support turned out to be very straightforward.  I had already collected icons for the various platforms, and created a simple manifest when I originally created a favicon for my site.  But the manifest file didn’t have everything and it wasn’t being deployed properly to my site.  Fixing that and making it available at <code>/manifest.json</code>, fixed all of the problems related to native platform support.</p>
<p>My manifest file now looks like this:</p>
<div class="gatsby-highlight">
      <pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"benmccormick.org"</span><span class="token punctuation">,</span>
  <span class="token property">"short_name"</span><span class="token operator">:</span> <span class="token string">"benmccormick"</span><span class="token punctuation">,</span>
	<span class="token property">"icons"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token property">"src"</span><span class="token operator">:</span> <span class="token string">"\/android-chrome-192x192.png?v=yyxgnp97qG"</span><span class="token punctuation">,</span>
			<span class="token property">"sizes"</span><span class="token operator">:</span> <span class="token string">"192x192"</span><span class="token punctuation">,</span>
			<span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"image\/png"</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token property">"src"</span><span class="token operator">:</span> <span class="token string">"\/android-chrome-384x384.png?v=yyxgnp97qG"</span><span class="token punctuation">,</span>
			<span class="token property">"sizes"</span><span class="token operator">:</span> <span class="token string">"384x384"</span><span class="token punctuation">,</span>
			<span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"image\/png"</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">"theme_color"</span><span class="token operator">:</span> <span class="token string">"#ffffff"</span><span class="token punctuation">,</span>
	<span class="token property">"background_color"</span><span class="token operator">:</span> <span class="token string">"#57a3e8"</span><span class="token punctuation">,</span>
	<span class="token property">"display"</span><span class="token operator">:</span> <span class="token string">"browser"</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>After correctly deploying that manifest file, my score moved all the way up to 100/100!</p>

          <a
            class="gatsby-resp-image-link"
            href="/static/29582e44730854d3b22d4e55fcc7e560-d75e8.png"
            style="display: block"
            target="_blank"
            rel="noopener"
          >
            <span
              class="gatsby-resp-image-wrapper"
              style="position: relative; z-index: -1; display: block; "
            >
              <span
                class="gatsby-resp-image-background-image"
                style="padding-bottom: 21.822849807445444%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAAiUlEQVQY05XOywoCIRQGYF85aNWih2kR80KzEHHEXKggSJMMXgb/mgMFbWISPuQczo2FcIfWGsYYKKUwTROklCSlhFrrLsuyYJ4fYPXVlHMmpZSPd+G6rru01gi73Aac1Jku5JxDCEFXjuNI8bb5n8eufsBBHhFjhLUW3ns45+jfhBC+8r33nwOfKXIxNiGRJ5EAAAAASUVORK5CYII='); background-size: cover; display: block;"
              >
                <img
                  class="gatsby-resp-image-image"
                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
                  alt="asset issues"
                  title=""
                  src="/static/29582e44730854d3b22d4e55fcc7e560-96365.png"
                  srcset="/static/29582e44730854d3b22d4e55fcc7e560-c0cbb.png 143w,
/static/29582e44730854d3b22d4e55fcc7e560-0e313.png 285w,
/static/29582e44730854d3b22d4e55fcc7e560-96365.png 570w,
/static/29582e44730854d3b22d4e55fcc7e560-d75e8.png 779w"
                  sizes="(max-width: 570px) 100vw, 570px"
                />
              </span>
            </span>
          </a>
          
<p>I clearly benefited from starting in a good spot.  <a href="https://github.com/gatsbyjs/gatsby">Gatsby</a> is “fast by default” as a platform for building blogs, and I’ve done my best to avoid making it slow.  But it was fun seeing what I could do to make the site a better experience for users with bad connectivity, and to learn more about what Google is trying to do with PWAs.  </p>
<h3>More Resources</h3>
<ul>
<li>
<p>Google has a bunch of resources around creating Progressive Web Apps.  You can find them on <a href="https://developers.google.com/web/progressive-web-apps/">their PWA landing page</a>.</p>
</li>
<li>
<p>It was so easy to make my blog a PWA mostly because it is built on <a href="https://github.com/gatsbyjs/gatsby">Gatsby</a>. Worth looking at if you’re a web developer who blogs.</p>
</li>
</ul>]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
</feed>