{"pageContext":{"posts":[{"node":{"frontmatter":{"readNext":"ll-context,jest-first,new-look-2016","topics":["Performance","PWA"],"category":"tools","key":null,"title":"Evaluating Web Apps With Lighthouse","description":"Profiling and improving my site with Google's Lighthouse tool","layout":"post","path":"/2017/02/13/improving-site-performance-with-lighthouse","date":"2017-02-14T03:30:00+00:00","dontfeature":null,"isDraft":null},"html":"<p>Last year Google coined the term “Progressive Web App” as a way of describing the type of sites and applications that they think are the future of the web.  Progressive Web Apps are sites that load quickly, are always responsive to user input, work as well as possible offline, and integrate with native platforms like native apps.  While this site is not an “app” per say, I do want it to be as fast and responsive as possible, and I also wanted to better understand what Google is pulling under the PWA umbrella.  Fortunately, Google has built a tool <a href=\"https://developers.google.com/web/tools/lighthouse/\">Lighthouse</a> to help developers profile and improve their web applications, comparing them to a set of PWA benchmarks.  So I took this site through Lighthouse, and worked against their suggestions with the goal of learning more about PWAs and improving the experience of using benmccormick.org.  I’m passing along my experience here.</p>\n<h3>Getting Started</h3>\n<p>I began by downloading the Lighthouse extension in the <a href=\"https://chrome.google.com/webstore/detail/lighthouse/blipmdconlkpinefehnmjammfjpmpbjk\">Chrome Web Store</a>.  Lighthouse can be installed either as a chrome extension or a node command line tool.  Both produce the same HTML report, but I chose the chrome extension for the convenience of keeping everything in the browser.  When I ran the initial report, I got the following result:</p>\n<img alt=\"first score: 48/100\" src=\"first_report_summary.png\" class=\"full-width bordered-img\">\n<p>48 out of 100 didn’t seem like a bad starting place.  Scrolling down it looked like I was mainly dinged on a few main areas:</p>\n<ol>\n<li>I had no offline support</li>\n<li>I did’t have any special setup for being included on a users homescreen. (I did have platform appropriate icons, but no app configuration)</li>\n<li>I had some possible inefficiencies in the assets I loaded.</li>\n</ol>\n<img alt=\"offline issues\" src=\"first_report_offline.png\" class=\"full-width bordered-img\">\n<img alt=\"native issues\" src=\"first_report_native.png\" class=\"full-width bordered-img\">\n<img alt=\"asset issues\" src=\"first_report_assets.png\" class=\"full-width bordered-img\">\n<p>Native app support isn’t a huge priority for me, and the assets issue seemed small, so I decided to investigate the offline support issue first.</p>\n<h3>Offline</h3>\n<p>I based my service worker implementation off of <a href=\"https://github.com/chriscoyier/Simple-Offline-Site\">Simple Offline Site</a> a demo Service Worker repo created by Chris Coyier for an article on <a href=\"https://css-tricks.com/serviceworker-for-offline/\">CSS Tricks</a>.  This was perfect since it’s default behavior was what I wanted: cache everything, and check for updates from the server everytime we return from cache so we’re never out of date for long.  You can see what I did specifically in my <a href=\"https://github.com/benmccormick/benmccormickorg/blob/master/pages/sw.es6\">github repo for this site</a>. After adding the service worker, my score moved up to 63/100.</p>\n<p>Finally, Service Workers only work on HTTPS connections, but most links to my site are not https currently. So to take full advantage (and to address another metric I was flagged on), I used a <a href=\"https://support.cloudflare.com/hc/en-us/articles/200170536-How-do-I-redirect-all-visitors-to-HTTPS-SSL-\">CloudFlare page rule</a> to redirect all visting traffic to use https.  That bumped me up to 69/100.</p>\n<img alt=\"asset issues\" src=\"second_report_offline.png\" class=\"full-width bordered-img\">\n<h3>Native Support</h3>\n<p>As I said previously, native platform support isn’t a major priority for this blog, but I was curious about the process.  Getting native support turned out to be very straightforward.  I had already collected icons for the various platforms, and created a simple manifest when I originally created a favicon for my site.  But the manifest file didn’t have everything and it wasn’t being deployed properly to my site.  Fixing that and making it available at <code class=\"language-text\">/manifest.json</code>, fixed all of the problems related to native platform support.</p>\n<p>My manifest file now looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\">\n      <pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n\t<span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"benmccormick.org\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"short_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"benmccormick\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"icons\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token property\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\\/android-chrome-192x192.png?v=yyxgnp97qG\"</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token property\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"192x192\"</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image\\/png\"</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token property\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\\/android-chrome-384x384.png?v=yyxgnp97qG\"</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token property\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"384x384\"</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image\\/png\"</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"theme_color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#ffffff\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"background_color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#57A3E8\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"display\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"browser\"</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>After correctly deploying that manifest file, my score moved all the way up to 100/100!</p>\n<img alt=\"asset issues\" src=\"third_report_native.png\" class=\"full-width bordered-img\">\n<p>I clearly benefited from starting in a good spot.  <a href=\"https://github.com/gatsbyjs/gatsby\">Gatsby</a> is “fast by default” as a platform for building blogs, and I’ve done my best to avoid making it slow.  But it was fun seeing what I could do to make the site a better experience for users with bad connectivity, and to learn more about what Google is trying to do with PWAs.</p>\n<h3>More Resources</h3>\n<ul>\n<li>\n<p>Google has a bunch of resources around creating Progressive Web Apps.  You can find them on <a href=\"https://developers.google.com/web/progressive-web-apps/\">their PWA landing page</a>.</p>\n</li>\n<li>\n<p>It was so easy to make my blog a PWA mostly because it is built on <a href=\"https://github.com/gatsbyjs/gatsby\">Gatsby</a>. Worth looking at if you’re a web developer who blogs.</p>\n</li>\n</ul>","fields":{"slug":"/2017/02/13/improving-site-performance-with-lighthouse"}}},{"node":{"frontmatter":{"readNext":null,"topics":["ECMAScript","PWA"],"category":"opinion","key":"weekly-links-02-03-18","title":"Weekly Links: February 3rd","description":"ECMAScript2018, PWAs on iOS, and self driving cars","layout":"weekly-links","path":"/2018/02/03/weekly-links-02-03-18/","date":"2018/02/03","dontfeature":null,"isDraft":null},"html":"<h3>JavaScript And The Web</h3>\n<p><a href=\"http://2ality.com/2017/02/ecmascript-2018.html\">ECMAScript 2018 | 2ality</a> - The spec for the 2018 version of <a href=\"https://benmccormick.org/2015/09/14/es5-es6-es2016-es-next-whats-going-on-with-javascript-versioning/\">ECMAScript</a> has been finalized and this is a good roundup of the new features and syntax available.  I’m personally excited for rest/spread properties to be an official part of the language.</p>\n<p><a href=\"https://medium.com/@firt/pwas-are-coming-to-ios-11-3-cupertino-we-have-a-problem-2ff49fd7d6ea\">PWAs are coming to iOS 11.3: Cupertino, we have a problem | Maximiliano Firtman</a> - Interesting look at what is and isn’t available in the newest version of Safari when it comes to PWAs and offline support</p>\n<h3>Tech and Business</h3>\n<p><a href=\"https://medium.com/99-mph/1-trillion-of-real-estate-is-on-the-move-heres-why-94ee9233e5eb\">1 Trillion of Real Estate is on the move | Phil Levin</a> - Almost everybody seems to agree that self driving cars are going to happen.  It’s only a question of when.  But the other question is what the second-level effects of self driving cars will be.  Those who can correctly predict the answer to those two questions are going to have opportunities to make money and create interesting businesses. This is an interesting take on how self-driving cars might affect real estate.</p>","fields":{"slug":"/2018/02/03/weekly-links-02-03-18/"}}}],"topic":"PWA"}}