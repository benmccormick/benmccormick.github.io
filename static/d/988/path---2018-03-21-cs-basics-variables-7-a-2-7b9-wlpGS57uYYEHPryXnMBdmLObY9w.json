{"data":{"markdownRemark":{"html":"<p>A few weeks ago, I asked for input on the idea of <a href=\"https://benmccormick.org/2018/02/20/cs-for-fe/\">resources on Computer Science for front end developers</a>.  Because there was a decent amount of interest, I’m planning on fleshing out the idea a bit with a small series of posts on CS basics.  These posts will cover some concepts that would usually be covered in an intro level CS course.  If folks find them helpful I may move on to more advanced topics like Data Structures &#x26; Algorithms, the software abstractions that modern web development is built on top of, and other math/theory topics.</p>\n<p>With these posts I’m not trying to replicate a CS intro course and won’t cover everything.  I’m not trying to teach anyone how to program.  Instead I’m covering the ideas and details behind concepts that FE devs may have learned by doing but never been exposed to from an theory point of view.  I am not an academic, so the goal will be to keep a casual tone focused on the practical implications of theory to a Front End developer.  If I’m successful, these posts will give you a better set of mental models when working to understand the code you’re reading and writing every day.  That’s plenty of throat-clearing, so now I’m going to jump into one of the most fundamental building blocks of any programming language: variables.</p>\n<h3>What are Variables? (Not as obvious as it sounds)</h3>\n<p>Variables in programming languages are symbols that we assign to represent a value.  That seems simple enough, but that sentence is too vague to properly account for the complexity of reality.  When dealing with variables in the real world, it’s important to have a good mental model of how they really behave, or you may become confused by how your programs act.  For instance if you believe that variables are always live references to whatever other variable they were assigned to, you may be surprised by the behavior of this snippet:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> a<span class=\"token punctuation\">;</span>\na <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span> <span class=\"token comment\">// prints 1</span></code></pre>\n      </div>\n<p>and if you believe that variables always point to a unique value that is created when you assign to them, you might be surprised by this one:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> a<span class=\"token punctuation\">;</span>\na<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span> <span class=\"token comment\">// prints [1, 2, 3, 4]</span></code></pre>\n      </div>\n<p>Knowing generally that a variable points to a value is a great start.  But a proper understanding of the model that a programming language uses for variables can help you avoid subtle bugs.</p>\n<h3>How Variables Work</h3>\n<p>Here’s the most important sentence for gaining a proper understanding of how variables work: “A variable points to a location in memory.”  Explaining how memory is organized and allocated is outside the scope of this post, but for now it’s sufficient to just understand memory as a long list of blocks, each of which has it’s own address.  </p>\n<p><img src=\"./memory1.png\" alt=\"memory as a series of boxes\"></p>\n<p>When a variable is assigned to, it points to the address of whatever value is on the right hand side of the assignment expression (if newly created, the value is assigned an open address in memory first).</p>\n<p><img src=\"./memory2.png\" alt=\"assignment of a variable\"></p>\n<p>If another variable is assigned to the first variable, it too will point to that same address in memory</p>\n<p><img src=\"./memory3.png\" alt=\"assignment of a variable to the value of another variable\"></p>\n<p>Finally if we reassign the original variable, it will point to a new location in memory, and the second variable will continue to point to the same location.</p>\n<p><img src=\"./memory4.png\" alt=\"reassigning the original variable\"></p>\n<p>Function arguments are based on these same concepts.  When a function is called, the argument variables are assigned to point at the memory address of the value passed into the function.</p>\n<h3>Mutable vs Immutable Variables</h3>\n<p>This memory address stuff can seem pretty abstract, and not very useful, but it’s a great gateway to understanding more practical topics.  A while back I wrote a post about <a href=\"https://benmccormick.org/2016/06/04/what-are-mutable-and-immutable-data-structures-2/\">mutable and immutable data</a>.  If you’re unfamiliar with the concepts you can read the original article for background.  But basically, JavaScript values are divided into 2 categories: primitives like booleans, strings, and numbers which are immutable, and objects which are mutable.  Immutable primitives can’t be changed, when they’re operated on they can only be replaced with a new value.  Mutable objects can be changed in place.  That “in place” qualifier can seem a bit hazy without understanding the underlying memory situation, but now we can explain this more clearly: the value for a primitive will never change within a memory location, a variable will instead have to point to a new location in memory.  A mutable variable can be modified without changing it’s location in memory.  This is the explanation behind our confusing example from earlier.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> a<span class=\"token punctuation\">;</span>\na<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span> <span class=\"token comment\">// prints [1, 2, 3, 4]</span></code></pre>\n      </div>\n<p>Because <code class=\"language-text\">b</code> points to the same location in memory as <code class=\"language-text\">a</code>, when we mutate <code class=\"language-text\">a</code>, <code class=\"language-text\">b</code> continues to point to the same array as <code class=\"language-text\">a</code> and sees the same changes we performed on <code class=\"language-text\">a</code>.</p>\n<h3>Implications and Gotchas</h3>\n<p>There are a few practical implications of these concepts, and gotchas that folks with the wrong mental model around variables tend to run into.</p>\n<ol>\n<li><strong><code class=\"language-text\">===</code> is based on location in memory for objects</strong> - While it does compare primitive values directly to see if they’re the same value, for objects, <code class=\"language-text\">===</code> compares by reference.  So the following code works in a way that people might not expect if they don’t understand variables.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> a<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> c <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">sameReference</span> <span class=\"token operator\">=</span> x <span class=\"token operator\">=></span> x<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> d <span class=\"token operator\">=</span> <span class=\"token function\">sameReference</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a <span class=\"token operator\">===</span> b<span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a <span class=\"token operator\">===</span> c<span class=\"token punctuation\">)</span> <span class=\"token comment\">// false</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a <span class=\"token operator\">===</span> d<span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span></code></pre>\n      </div>\n<ol start=\"2\">\n<li><strong>Modifying objects in functions modifies them outside of the function scope</strong> - This is a pretty common gotcha for folks who don’t understand variables and memory.  When they have a bad mental model of function arguments, you get code like the following made up example.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// function to create a contact that is ready to send</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">formatContactForSend</span> <span class=\"token operator\">=</span> contact <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  contact<span class=\"token punctuation\">.</span>fullName <span class=\"token operator\">=</span> contact<span class=\"token punctuation\">.</span>firstName <span class=\"token operator\">+</span> contact<span class=\"token punctuation\">.</span>lastName<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">delete</span> contact<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> contact<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// get a contact from somewhere</span>\n<span class=\"token keyword\">let</span> newContact <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  id<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  firstName<span class=\"token punctuation\">:</span> <span class=\"token string\">'Ben'</span><span class=\"token punctuation\">,</span>\n  lastName<span class=\"token punctuation\">:</span> <span class=\"token string\">'McCormick'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// send along the formatted version of the contact</span>\n<span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token function\">formatContactForSend</span><span class=\"token punctuation\">(</span>newContact<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//oops</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>newContact<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">/* {\n  firstName: \"Ben\",\n  lastName: \"McCormick\",\n  fullName: \"Ben McCormick\"\n}\n*/</span></code></pre>\n      </div>\n<ol start=\"3\">\n<li><strong><code class=\"language-text\">const</code> isn’t really a constant</strong> - <a href=\"https://benmccormick.org/2015/09/14/es5-es6-es2016-es-next-whats-going-on-with-javascript-versioning/\">ES6</a> introduced the new keywords for declaring variables <code class=\"language-text\">let</code> and <code class=\"language-text\">const</code>.  Both help with issues around variable scoping<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>, but the difference between the two can seem rather confusing.  It seems like <code class=\"language-text\">const</code> might indicate a constant value that can’t be changed.  But mutable values declared with const can in fact change:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span> <span class=\"token comment\">// [1, 2, 3, 4]</span></code></pre>\n      </div>\n<p>Instead <code class=\"language-text\">const</code> is once again about memory and reference assignment.  A variable that is assigned through const can’t be reassigned to a new location in memory.  So if it is pointed to a primitive like <code class=\"language-text\">123</code> or <code class=\"language-text\">true</code>, it truly is a constant, because the value can’t change. But when it’s pointed to a mutable value, it’s reference won’t change, and it will always <code class=\"language-text\">===</code> any variables that have been assigned to it, but the actual contents of that memory can change.</p>\n<h3>Feedback is lovely</h3>\n<p>This is a new series, and I’d love to hear whether it is helpful for you, and any other topics you’d like to see covered. Feel free to reach out on <a href=\"https://twitter.com/ben336\">Twitter</a> or <a href=\"mailto:ben@benmccormick.org\">email</a><sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup>.  </p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p>A topic for a different post</p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">↩</a>\n</li>\n<li id=\"fn-2\">\n<p>My carrier pidgeons have all fled their coop. I do promise that if you send me smoke signals I will sit back and ponder their meaning. Right after calling the fire department.</p>\n<a href=\"#fnref-2\" class=\"footnote-backref\">↩</a>\n</li>\n</ol>\n</div>","frontmatter":{"title":"Front End Computer Science Basics: Variables and Memory","keywords":"variables computer science JavaScript","category":"computer-science","date":"2018/03/21","path":"/2018/03/21/cs-basics-variables/","layout":"post","hideFooter":null},"fields":{"slug":"/2018/03/21/cs-basics-variables/"}}},"pageContext":{"slug":"/2018/03/21/cs-basics-variables/","relatedPosts":[{"path":"/2018/02/20/cs-for-fe/","data":{"title":"Computer Science for Front End Developers?","path":"/2018/02/20/cs-for-fe/","description":"What Computer Science concepts are useful for front end devs? ","date":"2018/02/20","category":"computer-science"}},{"path":"/2018/01/07/large-improvements-small-team/","data":{"title":"Tips For Improving a Large Code Base With A Small Team","path":"/2018/01/07/large-improvements-small-team/","description":"How do you keep improving things with limited resources?","date":"2018/01/07","category":"fe-architecture"}},{"path":"/2017/07/19/ten-things-javascript/","data":{"title":"Ten Things A Serious JavaScript Developer Should Learn","path":"/2017/07/19/ten-things-javascript/","description":"Some of the important things to pick up in the JS world","date":"2017-07-19T04:00:00+00:00","category":"javascript"}}]}}